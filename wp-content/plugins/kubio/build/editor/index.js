(()=>{var e={1874:e=>{e.exports='<html> <head> <style>body,html{background:#f1f3f5}.content{display:flex;flex-direction:column;align-items:center;justify-items:center;justify-content:center;position:fixed;left:0;top:0;width:100vw;height:100vh}.container{text-align:center}.message{font-size:1.2rem;color:#15192b;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Oxygen-Sans,Ubuntu,Cantarell,\'Helvetica Neue\',sans-serif}#eKIDzSscbEO1{overflow:visible;width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div class="content"> <div class="container"> {svg_image} <p class="message">{message}</p> </div> </div> </body> </html> '},9457:e=>{e.exports='<html> <head> <style>.kubio-loading-logo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.kubio-loading-logo svg{width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO1{overflow:visible;max-width:90px}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div id="content"> </div> </body> </html> '},1143:e=>{"use strict";e.exports=function(e,t,o,n,i,r,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[o,n,i,r,a,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},2703:(e,t,o)=>{"use strict";var n=o(414);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,o,i,r,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return o.PropTypes=o,o}},5697:(e,t,o)=>{e.exports=o(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5800:function(e,t,o){!function(e,t){"use strict";function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var n=o(t);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var r={error:null},a=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state=r,t.resetErrorBoundary=function(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,n),t.reset()},t}var o,a;a=e,(o=t).prototype=Object.create(a.prototype),o.prototype.constructor=o,i(o,a),t.getDerivedStateFromError=function(e){return{error:e}};var s=t.prototype;return s.reset=function(){this.setState(r)},s.componentDidCatch=function(e,t){var o,n;null==(o=(n=this.props).onError)||o.call(n,e,t)},s.componentDidUpdate=function(e,t){var o,n,i,r,a=this.state.error,s=this.props.resetKeys;null!==a&&null!==t.error&&(void 0===(i=e.resetKeys)&&(i=[]),void 0===(r=s)&&(r=[]),i.length!==r.length||i.some((function(e,t){return!Object.is(e,r[t])})))&&(null==(o=(n=this.props).onResetKeysChange)||o.call(n,e.resetKeys,s),this.reset())},s.render=function(){var e=this.state.error,t=this.props,o=t.fallbackRender,i=t.FallbackComponent,r=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(n.isValidElement(r))return r;if("function"==typeof o)return o(a);if(i)return n.createElement(i,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(n.Component);e.ErrorBoundary=a,e.useErrorHandler=function(e){var t=n.useState(null),o=t[0],i=t[1];if(null!=e)throw e;if(null!=o)throw o;return i},e.withErrorBoundary=function(e,t){var o=function(o){return n.createElement(a,t,n.createElement(e,o))},i=e.displayName||e.name||"Unknown";return o.displayName="withErrorBoundary("+i+")",o},Object.defineProperty(e,"__esModule",{value:!0})}(t,o(9196))},9590:e=>{var t="undefined"!=typeof Element,o="function"==typeof Map,n="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(l=s;0!=l--;)if(!r(e[l],a[l]))return!1;return!0}if(o&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!r(l.value[1],a.get(l.value[0])))return!1;return!0}if(n&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(l=s;0!=l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!r(e[c[l]],a[c[l]]))return!1;return!0}return e!=e&&a!=a}e.exports=function(e,t){try{return r(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},7761:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(9196),r=s(i),a=s(o(5697));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.scrollListener=o.scrollListener.bind(o),o.eventListenerOptions=o.eventListenerOptions.bind(o),o.mousewheelListener=o.mousewheelListener.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){return this.props.useCapture,this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,o=this.getParentElement(e),n=void 0;if(this.props.useWindow){var i=document.documentElement||document.body.parentNode||document.body,r=void 0!==t.pageYOffset?t.pageYOffset:i.scrollTop;n=this.props.isReverse?r:this.calculateOffset(e,r)}else n=this.props.isReverse?o.scrollTop:e.scrollHeight-o.scrollTop-o.clientHeight;n<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=o.scrollHeight,this.beforeScrollTop=o.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),o=t.children,n=t.element,i=t.hasMore,a=(t.initialLoad,t.isReverse),s=t.loader,l=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,l&&l(t)};var u=[o];return i&&(s?a?u.unshift(s):u.push(s):this.defaultLoader&&(a?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),r.default.createElement(n,c,u)}}]),t}(i.Component);l.propTypes={children:a.default.node.isRequired,element:a.default.node,hasMore:a.default.bool,initialLoad:a.default.bool,isReverse:a.default.bool,loader:a.default.node,loadMore:a.default.func.isRequired,pageStart:a.default.number,ref:a.default.func,getScrollParent:a.default.func,threshold:a.default.number,useCapture:a.default.bool,useWindow:a.default.bool},l.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=l,e.exports=t.default},246:(e,t,o)=>{e.exports=o(7761)},5251:(e,t,o)=>{"use strict";var n=o(9196),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,o){var n,r={},c=null,u=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:r,_owner:s.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},5893:(e,t,o)=>{"use strict";e.exports=o(5251)},6255:e=>{var t="complete",o="canceled";function n(e,t,o){Math.max(0,t),Math.max(0,o),e.self===e?e.scrollTo(t,o):(e.scrollLeft=t,e.scrollTop=o)}function i(e){var o=e._scrollSettings;if(o){var r=o.maxSynchronousAlignments,a=function(e,t){var o,n,i,r,a,s,l,c=e.align,u=e.target.getBoundingClientRect(),d=c&&null!=c.left?c.left:.5,p=c&&null!=c.top?c.top:.5,h=c&&null!=c.leftOffset?c.leftOffset:0,m=c&&null!=c.topOffset?c.topOffset:0,g=d,f=p;if(e.isWindow(t))s=Math.min(u.width,t.innerWidth),l=Math.min(u.height,t.innerHeight),n=u.left+t.pageXOffset-t.innerWidth*g+s*g,i=u.top+t.pageYOffset-t.innerHeight*f+l*f,n-=h,i-=m,n=e.align.lockX?t.pageXOffset:n,i=e.align.lockY?t.pageYOffset:i,r=n-t.pageXOffset,a=i-t.pageYOffset;else{s=u.width,l=u.height,o=t.getBoundingClientRect();var b=u.left-(o.left-t.scrollLeft),_=u.top-(o.top-t.scrollTop);n=b+s*g-t.clientWidth*g,i=_+l*f-t.clientHeight*f,n-=h,i-=m,n=Math.max(Math.min(n,t.scrollWidth-t.clientWidth),0),i=Math.max(Math.min(i,t.scrollHeight-t.clientHeight),0),n=e.align.lockX?t.scrollLeft:n,i=e.align.lockY?t.scrollTop:i,r=n-t.scrollLeft,a=i-t.scrollTop}return{x:n,y:i,differenceX:r,differenceY:a}}(o,e),s=Date.now()-o.startTime,l=Math.min(1/o.time*s,1);if(o.endIterations>=r)return n(e,a.x,a.y),e._scrollSettings=null,o.end(t);var c=1-o.ease(l);if(n(e,a.x-a.differenceX*c,a.y-a.differenceY*c),s>=o.time)return o.endIterations++,o.scrollAncestor&&i(o.scrollAncestor),void i(e);!function(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(i.bind(null,e))}}function r(e){return e.self===e}function a(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function s(){return!0}function l(e){if(e.assignedSlot)return l(e.assignedSlot);if(e.parentElement)return"body"===e.parentElement.tagName.toLowerCase()?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t.host}}e.exports=function(e,n,c){if(e){"function"==typeof n&&(c=n,n=null),n||(n={}),n.time=isNaN(n.time)?1e3:n.time,n.ease=n.ease||function(e){return 1-Math.pow(1-e,e/2)},n.align=n.align||{};var u=l(e),d=1,p=n.validTarget||s,h=n.isScrollable;n.debug&&(console.log("About to scroll to",e),u||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var m=[];u;)if(n.debug&&console.log("Scrolling parent node",u),p(u,d)&&(h?h(u,a):a(u))&&(d++,m.push(u)),!(u=l(u))){g(t);break}return m.reduce(((t,a,s)=>function(e,t,n,a,s){var l,c=!t._scrollSettings,u=t._scrollSettings,d=Date.now(),p={passive:!0};function h(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),n.debug&&console.log("Scrolling ended with type",e,"for",t),s(e),l&&(t.removeEventListener("touchstart",l,p),t.removeEventListener("wheel",l,p))}u&&u.end(o);var m=n.maxSynchronousAlignments;return null==m&&(m=3),t._scrollSettings={startTime:d,endIterations:0,target:e,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||r,maxSynchronousAlignments:m,end:h,scrollAncestor:a},"cancellable"in n&&!n.cancellable||(l=h.bind(null,o),t.addEventListener("touchstart",l,p),t.addEventListener("wheel",l,p)),c&&i(t),l}(e,a,n,m[s+1],g)),null)}function g(e){--d||c&&c(e)}}},4670:(e,t,o)=>{"use strict";e.exports=o(5607)},9829:(e,t,o)=>{"use strict";var n,i,r,a=o(8946),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){r=!1}function c(e){if(e){if(e!==n){if(e.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,o){return t!==o.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,l()}}else n!==s&&(n=s,l())}function u(){return r||(r=function(){n||c(s);for(var e,t=n.split(""),o=[],i=a.nextValue();t.length>0;)i=a.nextValue(),e=Math.floor(i*t.length),o.push(t.splice(e,1)[0]);return o.join("")}())}e.exports={get:function(){return n||s},characters:function(e){return c(e),n},seed:function(e){a.seed(e),i!==e&&(l(),i=e)},lookup:function(e){return u()[e]},shuffled:u}},480:(e,t,o)=>{"use strict";var n,i,r=o(8416);o(9829),e.exports=function(e){var t="",o=Math.floor(.001*(Date.now()-1567752802062));return o===i?n++:(n=0,i=o),t+=r(7),t+=r(e),n>0&&(t+=r(n)),t+r(o)}},8416:(e,t,o)=>{"use strict";var n=o(9829),i=o(3766),r=o(296);e.exports=function(e){for(var t,o=0,a="";!t;)a+=r(i,n.get(),1),t=e<Math.pow(16,o+1),o++;return a}},5607:(e,t,o)=>{"use strict";var n=o(9829),i=o(480),r=o(1082),a=o(5636)||0;function s(){return i(a)}e.exports=s,e.exports.generate=s,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return a=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=r},1082:(e,t,o)=>{"use strict";var n=o(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,o="object"==typeof window&&(window.crypto||window.msCrypto);t=o&&o.getRandomValues?function(e){return o.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],o=0;o<e;o++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,o){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*o/t.length),r="";;)for(var a=e(i),s=i;s--;)if((r+=t[a[s]&n]||"").length===+o)return r}},989:(e,t,o)=>{e.exports=o(3268)},3268:function(e,t){var o;!function(n){"use strict";var i={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z",စျ:"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw",သြော:"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},r=["်","ް"],a={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်",က်:"et","ိုက်":"aik","ောက်":"auk",င်:"in","ိုင်":"aing","ောင်":"aung",စ်:"it",ည်:"i",တ်:"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it",ဒ်:"d","ိုဒ်":"ok","ုဒ်":"ait",န်:"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un",ပ်:"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut",န်ုပ်:"nub",မ်:"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un",ယ်:"e","ိုလ်":"ol",ဉ်:"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},s={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},l={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},c=[";","?",":","@","&","=","+","$",",","/"].join(""),u=[";","?",":","@","&","=","+","$",","].join(""),d=[".","!","~","*","'","(",")"].join(""),p=function(e,t){var o,n,p,g,f,b,_,v,y,k,x,S,w,C,I="-",j="",T="",P=!0,E={},R="";if("string"!=typeof e)return"";if("string"==typeof t&&(I=t),_=l.en,v=s.en,"object"==typeof t)for(x in o=t.maintainCase||!1,E=t.custom&&"object"==typeof t.custom?t.custom:E,p=+t.truncate>1&&t.truncate||!1,g=t.uric||!1,f=t.uricNoSlash||!1,b=t.mark||!1,P=!1!==t.symbols&&!1!==t.lang,I=t.separator||I,g&&(R+=c),f&&(R+=u),b&&(R+=d),_=t.lang&&l[t.lang]&&P?l[t.lang]:P?l.en:{},v=t.lang&&s[t.lang]?s[t.lang]:!1===t.lang||!0===t.lang?{}:s.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){E[e+""]=e+""})),n=!0):n=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){E[e+""]=e+""})),Object.keys(E).forEach((function(t){var o;o=t.length>1?new RegExp("\\b"+h(t)+"\\b","gi"):new RegExp(h(t),"gi"),e=e.replace(o,E[t])})),E)R+=x;for(R=h(R+=I),w=!1,C=!1,k=0,S=(e=e.replace(/(^\s+|\s+$)/g,"")).length;k<S;k++)x=e[k],m(x,E)?w=!1:v[x]?(x=w&&v[x].match(/[A-Za-z0-9]/)?" "+v[x]:v[x],w=!1):x in i?(k+1<S&&r.indexOf(e[k+1])>=0?(T+=x,x=""):!0===C?(x=a[T]+i[x],T=""):x=w&&i[x].match(/[A-Za-z0-9]/)?" "+i[x]:i[x],w=!1,C=!1):x in a?(T+=x,x="",k===S-1&&(x=a[T]),C=!0):!_[x]||g&&-1!==c.indexOf(x)||f&&-1!==u.indexOf(x)?(!0===C?(x=a[T]+x,T="",C=!1):w&&(/[A-Za-z0-9]/.test(x)||j.substr(-1).match(/A-Za-z0-9]/))&&(x=" "+x),w=!1):(x=w||j.substr(-1).match(/[A-Za-z0-9]/)?I+_[x]:_[x],x+=void 0!==e[k+1]&&e[k+1].match(/[A-Za-z0-9]/)?I:"",w=!0),j+=x.replace(new RegExp("[^\\w\\s"+R+"_-]","g"),I);return n&&(j=j.replace(/(\w)(\S*)/g,(function(e,t,o){var n=t.toUpperCase()+(null!==o?o:"");return Object.keys(E).indexOf(n.toLowerCase())<0?n:n.toLowerCase()}))),j=j.replace(/\s+/g,I).replace(new RegExp("\\"+I+"+","g"),I).replace(new RegExp("(^\\"+I+"+|\\"+I+"+$)","g"),""),p&&j.length>p&&(y=j.charAt(p)===I,j=j.slice(0,p),y||(j=j.slice(0,j.lastIndexOf(I)))),o||n||(j=j.toLowerCase()),j},h=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},m=function(e,t){for(var o in t)if(t[o]===e)return!0};e.exports?(e.exports=p,e.exports.createSlug=function(e){return function(t){return p(t,e)}}):void 0===(o=function(){return p}.apply(t,[]))||(e.exports=o)}()},5358:(e,t,o)=>{"use strict";Object.defineProperty(t,"Ls",{enumerable:!0,get:function(){return n.STORE_KEY}});var n=o(9527);n.STORE_KEY},9196:e=>{"use strict";e.exports=window.React},9527:e=>{"use strict";e.exports=window.kubio.constants},9307:e=>{"use strict";e.exports=window.wp.element},3967:(e,t)=>{var o;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,r(o)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(o=function(){return i}.apply(t,[]))||(e.exports=o)}()}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";o.r(n),o.d(n,{SidebarArea:()=>at,SubSidebarArea:()=>et,__experimentalFullscreenModeClose:()=>fS,initialize:()=>yS,registerEditSiteStore:()=>$y,registerSidebarArea:()=>it,registerSubSidebarArea:()=>rt});var e={};o.r(e),o.d(e,{disableComplementaryArea:()=>ce,enableComplementaryArea:()=>le,pinItem:()=>ue,setDefaultComplementaryArea:()=>se,setFeatureDefaults:()=>me,setFeatureValue:()=>he,toggleFeature:()=>pe,unpinItem:()=>de});var t={};o.r(t),o.d(t,{getActiveComplementaryArea:()=>ge,isFeatureActive:()=>be,isItemPinned:()=>fe});var i={};o.r(i),o.d(i,{__experimentalSetPreviewDeviceType:()=>gv,addSubSidebar:()=>Tv,addTemplate:()=>bv,closeSidebar:()=>Ev,openInserterSidebar:()=>jv,openNavigationPanelToMenu:()=>Sv,openSidebar:()=>Iv,removeSubSidebar:()=>Pv,removeTemplate:()=>_v,setCurrentAncestor:()=>Nv,setHomeTemplateId:()=>yv,setIsListViewOpened:()=>Dv,setIsNavigationPanelOpened:()=>wv,setKubioEditorMode:()=>Bv,setOpenInserter:()=>Ov,setPage:()=>kv,setTemplate:()=>fv,setTemplatePart:()=>vv,setUIVersion:()=>Mv,showHomepage:()=>xv,toggleAICapabilities:()=>Lv,toggleFeature:()=>mv,toggleGlobalStyleEditing:()=>Rv,toggleGutentagDebug:()=>Av,updateAIInfo:()=>zv,updateExcludedSectionCategories:()=>Fv,updateFlagSettings:()=>Gv,updateSettings:()=>Cv});var r={};o.r(r),o.d(r,{__experimentalGetInsertionPoint:()=>Cy,__experimentalGetPreviewDeviceType:()=>Xv,currentPageHasFSETemplate:()=>Py,getAIInfo:()=>Hy,getAvailablePageTemplates:()=>Dy,getCanUserCreateMedia:()=>Qv,getCanvasMode:()=>Wy,getClassicTemplateId:()=>My,getCurrentAncestor:()=>vy,getCurrentKubioTemplateSource:()=>jy,getCurrentPageTemplate:()=>Ty,getCurrentPostId:()=>Ry,getCurrentPostType:()=>Ey,getEditedPostId:()=>oy,getEditedPostType:()=>ty,getEditorOpenedSidebar:()=>yy,getEntity:()=>py,getExcludedSectionCategories:()=>Vy,getGlobalStyleEditingPreviousEntity:()=>Sy,getHomeTemplateId:()=>ey,getIsBlogPage:()=>Ay,getIsFrontPage:()=>Oy,getIsInnerPage:()=>Ny,getIsWooCommercePage:()=>By,getKubioEditorMode:()=>Fy,getKubioEditorModeIsSimple:()=>Gy,getNavigationMenu:()=>ry,getOpenedInsertedClientId:()=>fy,getOpenedInsertedShouldCloseOnSelect:()=>_y,getOpenedInsertedShouldReplace:()=>by,getOpenedInserter:()=>gy,getPage:()=>ny,getSettings:()=>Jv,getShowOnFront:()=>hy,getSubSidebars:()=>ky,getTemplateId:()=>sy,getTemplateIds:()=>uy,getTemplatePartId:()=>ly,getTemplatePartIds:()=>dy,getTemplateType:()=>cy,getUIVersion:()=>Ly,isAICapabilityEnabled:()=>zy,isChangingPage:()=>Uy,isEditorSidebarOpened:()=>my,isFeatureActive:()=>Zv,isGlobalStyleEditing:()=>xy,isGutentagDebug:()=>wy,isInserterOpened:()=>ay,isListViewOpened:()=>Iy,isNavigationOpened:()=>iy});const a=window.kubio.blockPatterns,s=window.kubio.core,l=window.wp.blockLibrary;var c=o(9307);const u=window.wp.hooks,d=window.wp.notices,p=window.lodash;var h=o.n(p),m=o(9527);const g=window.kubio.coreHooks,f=window.kubio.editorData,b=window.kubio.ai,_=window.kubio.globalData,v=window.kubio.wpGlobalStyles,y=window.wp.blockEditor,k=window.wp.components,x=window.wp.compose,S=window.wp.coreData,w=window.wp.data,C=window.wp.i18n,I=window.kubio.utils;var j=o(5893);let T=!1;const P=()=>{const[e,t]=(0,c.useState)(!1);return!(0,c.useMemo)((()=>{if(T)return!1;if(!(0,I.getBackendData)("multilanguage.isWpmlActive"))return!1;try{if(new URL(location).searchParams.get("isTranslateRedirect"))return!0}catch(e){return!1}return!1}),[e])||T?(0,j.jsx)(j.Fragment,{}):(0,j.jsx)(E,{onEditInDefaultLanguage:()=>{T=!0,t(Math.random())}})},E=({onEditInDefaultLanguage:e})=>{const t=(0,s.useUnloadStoreEntities)();return(0,j.jsxs)(k.Modal,{className:"kubio-wpml-redirect-modal",title:(0,C.__)("You are trying to to edit a translation","kubio"),onRequestClose:()=>{},shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!1,children:[(0,j.jsx)("p",{children:(0,j.jsx)("strong",{children:(0,C.__)("You must update the design by editing the page in default language and then update the translations","kubio")})}),(0,j.jsx)("p",{children:(0,C.__)('To update the design please use the "Edit page in the default language" button.',"kubio")}),(0,j.jsx)("p",{children:(0,C.__)('If you want to translate the content please use the "Translate" button to edit the translated content',"kubio")}),(0,j.jsxs)(k.ButtonGroup,{className:"h-template-part-modal__button-group",children:[(0,j.jsx)(k.Button,{isLink:!0,onClick:e,children:(0,C.__)("Edit page in the default language","kubio")}),(0,j.jsx)(k.Button,{isPrimary:!0,onClick:()=>{t();let e=(0,I.getBackendData)("admin_url")+"/admin.php";try{let t=new URL(e);t.searchParams.append("page","tm/menu/main.php");let o=t.toString();window.location=o}catch(e){console.error(e),window.location=(0,I.getBackendData)("admin_url")}},children:(0,C.__)("Translate")})]})]})},R=window.wp.apiFetch;var A=o.n(R);const O=(0,I.getBackendData)("showFrontPageRevertNotice");let N=!1;const D=()=>{const[e,t]=(0,c.useState)(!1),{isFrontPage:o}=(0,w.useSelect)((e=>{const{getIsFrontPage:t}=e("kubio/edit-site")||{};return{isFrontPage:null==t?void 0:t()}}),[]);return!O||e||!o||N?(0,j.jsx)(j.Fragment,{}):(0,j.jsx)(F,{onClose:()=>{t(!0),N=!0}})},M=(0,I.getBackendData)("frontPageRevertBackupData"),B="posts"===(null==M?void 0:M.showOnFront),L=(0,I.getBackendData)("frontPageRevertNoticeNonce");let z=!1;const F=({onClose:e})=>{const[t,o]=(0,c.useState)(""),[n,i]=(0,c.useState)(!1);(0,c.useEffect)((()=>{(async()=>{const e=await K();e&&o(e)})()}),[]);const{onClickInContainer:r,onDiscardHomePage:a,onKeepHomePage:s}=H({onClose:e,setShowDiscardModal:i});return(0,c.useEffect)((()=>{const e=document.querySelector(".edit-site-save-button__button");return e&&e.addEventListener("click",s),()=>{const e=document.querySelector(".edit-site-save-button__button");e&&e.removeEventListener("click",s)}}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,c.createPortal)((0,j.jsx)("div",{className:"kubio-front-page-revert-popup__container",dangerouslySetInnerHTML:{__html:t},onClick:r}),document.body),n&&(0,j.jsx)(G,{onClose:()=>i(!1),onSuccess:a})]})},G=({onClose:e,onSuccess:t})=>{let o;return o=B?(0,C.__)("Your previous home page was showing the most recent blog posts. Are you sure you want to restore your previous home page?","kubio"):(0,C.__)("Are you sure you want to restore your previous home page?","kubio"),(0,j.jsxs)(k.Modal,{title:(0,C.__)("Confirm home page restore","kubio"),onRequestClose:e,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,className:"kubio-front-page-revert-notice__modal",children:[(0,j.jsx)("p",{children:o}),(0,j.jsx)("div",{children:(0,j.jsxs)(k.ButtonGroup,{className:"kubio-front-page-revert-notice__modal__footer",children:[(0,j.jsx)(k.Button,{isLink:!0,onClick:e,children:(0,C.__)("Cancel","kubio")}),(0,j.jsx)(k.Button,{isDestructive:!0,isPrimary:!0,onClick:()=>{t(),e()},children:(0,C.__)("Restore home page","kubio")})]})})]})},H=({onClose:e,setShowDiscardModal:t})=>{const{onDiscardEntities:o}=U(),n=async()=>{z||(z=!0,e(),wp.ajax.send("kubio_front_page_revert_action",{data:{_wpnonce:L}}))};return{onClickInContainer:e=>{const o=e.target,i=o.closest(".kubio-front-page-revert-notice__footer__keep, .kubio-front-page-revert-notice__header__close"),r=o.closest(".kubio-front-page-revert-notice__footer__restore");i&&n(),r&&t(!0)},onDiscardHomePage:async()=>{z||(document.body.classList.remove("kubio-iframe-holder--show"),document.body.classList.add("kubio-iframe-holder--hide"),z=!0,e(),wp.ajax.send("kubio_restore_front_page",{data:{_wpnonce:L}}).done((e=>{(async()=>{await o();const e=(0,I.getBackendData)("kubioEditorURL");window.location.href=e})()})).fail((e=>{})))},onKeepHomePage:n}},U=()=>{const{entitiesToSave:e}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{entitiesToSave:t()}})),t=(0,s.useUnloadStoreEntities)();return{entitiesToSave:e,onDiscardEntities:async()=>{const o=(null==e?void 0:e.length)>0;t(),o&&await(0,I.sleep)(1e3)}}};let W=!1,V=null;const K=async()=>{if(V)return V;if(!W){W=!0;try{const e=await A()({path:"/kubio/v1/get-kubio-front-page-revert-notice-editor-html",method:"GET"});return V=e,e}catch(e){console.error(e)}finally{W=!1}}},$=window.wp.editor;function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},q.apply(null,arguments)}var Y=o(3967),Z=o.n(Y),X=o(9196);const Q=window.wp.primitives,J=(0,X.createElement)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,X.createElement)(Q.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),ee=(0,X.createElement)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,X.createElement)(Q.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),te=(0,X.createElement)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,X.createElement)(Q.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),oe=window.wp.viewport,ne=(0,X.createElement)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,X.createElement)(Q.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),ie=window.wp.deprecated;var re=o.n(ie);const ae=window.wp.preferences,se=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),le=(e,t)=>o=>{let{registry:n,dispatch:i}=o;t&&(n.select(ae.store).get(e,"isComplementaryAreaVisible")||n.dispatch(ae.store).set(e,"isComplementaryAreaVisible",!0),i({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},ce=e=>t=>{let{registry:o}=t;o.select(ae.store).get(e,"isComplementaryAreaVisible")&&o.dispatch(ae.store).set(e,"isComplementaryAreaVisible",!1)},ue=(e,t)=>o=>{let{registry:n}=o;if(!t)return;const i=n.select(ae.store).get(e,"pinnedItems");!0!==(null==i?void 0:i[t])&&n.dispatch(ae.store).set(e,"pinnedItems",{...i,[t]:!0})},de=(e,t)=>o=>{let{registry:n}=o;if(!t)return;const i=n.select(ae.store).get(e,"pinnedItems");n.dispatch(ae.store).set(e,"pinnedItems",{...i,[t]:!1})};function pe(e,t){return function(o){let{registry:n}=o;re()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(ae.store).toggle(e,t)}}function he(e,t,o){return function(n){let{registry:i}=n;re()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),i.dispatch(ae.store).set(e,t,!!o)}}function me(e,t){return function(o){let{registry:n}=o;re()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(ae.store).setDefaults(e,t)}}const ge=(0,w.createRegistrySelector)((e=>(t,o)=>{var n;const i=e(ae.store).get(o,"isComplementaryAreaVisible");if(void 0!==i)return i?null==t||null===(n=t.complementaryAreas)||void 0===n?void 0:n[o]:null})),fe=(0,w.createRegistrySelector)((e=>(t,o,n)=>{var i;const r=e(ae.store).get(o,"pinnedItems");return null===(i=null==r?void 0:r[n])||void 0===i||i})),be=(0,w.createRegistrySelector)((e=>(t,o,n)=>(re()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(ae.store).get(o,n)))),_e=(0,w.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:o,area:n}=t;return e[o]?e:{...e,[o]:n}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:o,area:n}=t;return{...e,[o]:n}}}return e}}),ve=(0,w.createReduxStore)("core/interface",{reducer:_e,actions:e,selectors:t});(0,w.register)(ve);const ye=window.wp.plugins,ke=(0,ye.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),xe=ke((function(e){let{as:t=k.Button,scope:o,identifier:n,icon:i,selectedIcon:r,name:a,...s}=e;const l=t,u=(0,w.useSelect)((e=>e(ve).getActiveComplementaryArea(o)===n),[n]),{enableComplementaryArea:d,disableComplementaryArea:p}=(0,w.useDispatch)(ve);return(0,c.createElement)(l,q({icon:r&&u?r:i,onClick:()=>{u?p(o):d(o,n)}},s))})),Se=e=>{let{smallScreenTitle:t,children:o,className:n,toggleButtonProps:i}=e;const r=(0,c.createElement)(xe,q({icon:ne},i));return(0,c.createElement)(c.Fragment,null,(0,c.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,c.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),r),(0,c.createElement)("div",{className:Z()("components-panel__header","interface-complementary-area-header",n),tabIndex:-1},o,r))},we=()=>{};function Ce(e){let{name:t,as:o=k.Button,onClick:n,...i}=e;return(0,c.createElement)(k.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,c.createElement)(o,q({onClick:n||t?function(){(n||we)(...arguments),(t||we)(...arguments)}:void 0},i))}))}Ce.Slot=function(e){let{name:t,as:o=k.ButtonGroup,fillProps:n={},bubblesVirtually:i,...r}=e;return(0,c.createElement)(k.Slot,{name:t,bubblesVirtually:i,fillProps:n},(e=>{if(!c.Children.toArray(e).length)return null;const t=[];c.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:o,__unstableTarget:n}}=e;n&&o&&t.push(n)}));const n=c.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,c.createElement)(o,r,n)}))};const Ie=Ce,je=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:o,...n}=e;return(0,c.createElement)(k.MenuItem,n)};function Te(e){let{scope:t,target:o,__unstableExplicitMenuItem:n,...i}=e;return(0,c.createElement)(xe,q({as:e=>(0,c.createElement)(Ie,q({__unstableExplicitMenuItem:n,__unstableTarget:`${t}/${o}`,as:je,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:J,name:o,scope:t},i))}function Pe(e){let{scope:t,...o}=e;return(0,c.createElement)(k.Fill,q({name:`PinnedItems/${t}`},o))}Pe.Slot=function(e){let{scope:t,className:o,...n}=e;return(0,c.createElement)(k.Slot,q({name:`PinnedItems/${t}`},n),(e=>(null==e?void 0:e.length)>0&&(0,c.createElement)("div",{className:Z()(o,"interface-pinned-items")},e)))};const Ee=Pe;function Re(e){let{scope:t,children:o,className:n}=e;return(0,c.createElement)(k.Fill,{name:`ComplementaryArea/${t}`},(0,c.createElement)("div",{className:n},o))}const Ae=ke((function(e){let{children:t,className:o,closeLabel:n=(0,C.__)("Close plugin"),identifier:i,header:r,headerClassName:a,icon:s,isPinnable:l=!0,panelClassName:u,scope:d,name:p,smallScreenTitle:h,title:m,toggleShortcut:g,isActiveByDefault:f,showIconLabels:b=!1}=e;const{isActive:_,isPinned:v,activeArea:y,isSmall:x,isLarge:S}=(0,w.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:o}=e(ve),n=t(d);return{isActive:n===i,isPinned:o(d,i),activeArea:n,isSmall:e(oe.store).isViewportMatch("< medium"),isLarge:e(oe.store).isViewportMatch("large")}}),[i,d]);!function(e,t,o,n,i){const r=(0,c.useRef)(!1),a=(0,c.useRef)(!1),{enableComplementaryArea:s,disableComplementaryArea:l}=(0,w.useDispatch)(ve);(0,c.useEffect)((()=>{n&&i&&!r.current?(l(e),a.current=!0):a.current&&!i&&r.current?(a.current=!1,s(e,t)):a.current&&o&&o!==t&&(a.current=!1),i!==r.current&&(r.current=i)}),[n,i,e,t,o])}(d,i,y,_,x);const{enableComplementaryArea:I,disableComplementaryArea:j,pinItem:T,unpinItem:P}=(0,w.useDispatch)(ve);return(0,c.useEffect)((()=>{f&&void 0===y&&!x&&I(d,i)}),[y,f,d,i,x]),(0,c.createElement)(c.Fragment,null,l&&(0,c.createElement)(Ee,{scope:d},v&&(0,c.createElement)(xe,{scope:d,identifier:i,isPressed:_&&(!b||S),"aria-expanded":_,label:m,icon:b?J:s,showTooltip:!b,variant:b?"tertiary":void 0})),p&&l&&(0,c.createElement)(Te,{target:p,scope:d,icon:s},m),_&&(0,c.createElement)(Re,{className:Z()("interface-complementary-area",o),scope:d},(0,c.createElement)(Se,{className:a,closeLabel:n,onClose:()=>j(d),smallScreenTitle:h,toggleButtonProps:{label:n,shortcut:g,scope:d,identifier:i}},r||(0,c.createElement)(c.Fragment,null,(0,c.createElement)("strong",null,m),l&&(0,c.createElement)(k.Button,{className:"interface-complementary-area__pin-unpin-item",icon:v?ee:te,label:v?(0,C.__)("Unpin from toolbar"):(0,C.__)("Pin to toolbar"),onClick:()=>(v?P:T)(d,i),isPressed:v,"aria-expanded":v}))),(0,c.createElement)(k.Panel,{className:u},t)))}));Ae.Slot=function(e){let{scope:t,...o}=e;return(0,c.createElement)(k.Slot,q({name:`ComplementaryArea/${t}`},o))};const Oe=Ae,Ne=e=>{let{isActive:t}=e;return(0,c.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,c.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},De=(0,c.forwardRef)((function(e,t){let{footer:o,header:n,sidebar:i,secondarySidebar:r,notices:a,content:s,drawer:l,actions:u,labels:d,className:p,shortcuts:h}=e;const m=(0,k.__unstableUseNavigateRegions)(h);!function(e){(0,c.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const g={/* translators: accessibility text for the nav bar landmark region. */drawer:(0,C.__)("Drawer"),/* translators: accessibility text for the top bar landmark region. */header:(0,C.__)("Header"),/* translators: accessibility text for the content landmark region. */body:(0,C.__)("Content"),/* translators: accessibility text for the secondary sidebar landmark region. */secondarySidebar:(0,C.__)("Block Library"),/* translators: accessibility text for the settings landmark region. */sidebar:(0,C.__)("Settings"),/* translators: accessibility text for the publish landmark region. */actions:(0,C.__)("Publish"),/* translators: accessibility text for the footer landmark region. */footer:(0,C.__)("Footer"),...d};return(0,c.createElement)("div",q({},m,{ref:(0,x.useMergeRefs)([t,m.ref]),className:Z()(p,"interface-interface-skeleton",m.className,!!o&&"has-footer")}),!!l&&(0,c.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":g.drawer,tabIndex:"-1"},l),(0,c.createElement)("div",{className:"interface-interface-skeleton__editor"},!!n&&(0,c.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":g.header,tabIndex:"-1"},n),(0,c.createElement)("div",{className:"interface-interface-skeleton__body"},!!r&&(0,c.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":g.secondarySidebar,tabIndex:"-1"},r),!!a&&(0,c.createElement)("div",{className:"interface-interface-skeleton__notices"},a),(0,c.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":g.body,tabIndex:"-1"},s),!!i&&(0,c.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":g.sidebar,tabIndex:"-1"},i),!!u&&(0,c.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":g.actions,tabIndex:"-1"},u))),!!o&&(0,c.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":g.footer,tabIndex:"-1"},o))})),Me=window.wp.keyboardShortcuts,Be=m.STORE_KEY;function Le(){return(0,j.jsx)(j.Fragment,{})}const ze=window.kubio.inspectors,Fe=window.kubio.pro,Ge=window.kubio.icons,He=(0,c.forwardRef)((function({icon:e,size:t=24,...o},n){return(0,c.cloneElement)(e,{width:t,height:t,...o,ref:n})})),Ue=window.kubio.blockLibrary,We=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Ve=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),Ke=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),$e="kubio-dragging-from-inserter--active",qe=()=>{setTimeout((()=>{const e=top.document.querySelector("body");e.classList.contains($e)&&e.classList.remove($e)}),10)},Ye=()=>{const{setOpenInserter:e}=(0,w.useDispatch)(m.STORE_KEY),{insertionPoint:t,currentSelectedBlock:o}=(0,w.useSelect)((e=>({insertionPoint:e(m.STORE_KEY).getOpenedInserter(),currentSelectedBlock:e("core/block-editor").getSelectedBlockClientId()||null})),[]),n=(0,x.usePrevious)(o),{uiVersion:i}=(0,g.useUIVersion)();(0,c.useEffect)((()=>{2===i&&void 0!==n&&n!==o&&(e(!1),qe())}),[n,o,i]);const r=(0,f.useBlocksOwnerDocument)(),a=(0,x.useViewportMatch)("medium","<"),l=(0,c.useRef)(),u=(0,c.useCallback)((o=>{!1!==t&&(o.target.closest(".kubio-inserter-button")||o.target.closest(".kubio-sidebar-add-section-button")||o.target.classList.contains("edit-site-header-toolbar__inserter-toggle")||o.target.closest(".edit-site-header-toolbar__inserter-toggle")||o.target.closest(".kubio-inserter-ignore-click-outisde")||e(!1))}),[t,e]);return(0,s.useOnClickOutside)(l,u),(0,j.jsxs)("div",{ref:l,className:"edit-site-editor__inserter-panel",children:[(0,j.jsx)("div",{className:"edit-site-editor__inserter-panel-header",children:(0,j.jsx)(k.Button,{icon:We,onClick:()=>e(!1)})}),(0,j.jsx)("div",{className:"edit-site-editor__inserter-panel-content",children:t&&(0,j.jsx)(y.__experimentalLibrary,{shouldFocusBlock:a,shouldSelectBlock:1===i,rootClientId:null==t?void 0:t.rootClientId,__experimentalInsertionIndex:null==t?void 0:t.insertionIndex,ownerDocument:r,insertionPoint:t,isAppender:null==t?void 0:t.isAppender})})]})},Ze=(0,Ue.getNamesOfBlocks)(),Xe=["core/column","core/post-content","core/template-part",Ze.HEADER,Ze.FOOTER,Ze.SIDEBAR,Ze.COLUMN,Ze.LOOP_ITEM,Ze.SLIDER_CONTENT],Qe=({variant:e="secondary",className:t="edit-site-header-toolbar__inserter-toggle"})=>{const{rootClientId:o,isInserterOpen:n}=(0,w.useSelect)((e=>{var t;const{getBlockListSettings:o,getSelectedBlockClientId:n,getBlockRootClientId:i,getBlock:r,getBlockIndex:a}=e("core/block-editor");let s,l=n(),c=o(l);((0,p.isUndefined)(c)||c.templateLock)&&(s=a(l),l=i(l),c=o(l));const u=l&&Xe.includes(null===(t=r(l))||void 0===t?void 0:t.name)&&((0,p.isUndefined)(c)||!c.templateLock);return{isInserterOpen:e(m.STORE_KEY).getOpenedInserter(),rootClientId:u?l:null,insertionIndex:s}}),[]),{setOpenInserter:i}=(0,w.useDispatch)(m.STORE_KEY),{selectBlock:r}=(0,w.useDispatch)("core/block-editor"),a=(0,c.useRef)(),{uiVersion:s}=(0,g.useUIVersion)(),l=(0,c.useCallback)((e=>{a.current.focus(),e.preventDefault(),e.stopPropagation()}),[]),u=(0,c.useCallback)((e=>{const t=!n&&"block-inserter";2!==s?(t?r(null):l(e),i(t,o),top.document.body.classList.remove("kubio-dragging-from-inserter--active")):t?(i("pattern-inserter/content",null),qe()):(l(e),i(!1,null))}),[n,o]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.Button,{ref:a,variant:e,isPressed:n,className:t,onClick:u,icon:n?Ve:Ke,onMouseDown:e=>{e.preventDefault()},label:(d=n,d?(0,C.__)("Close","kubio"):(0,C.__)("Add block","kubio"))})});var d},Je=[];function et({title:e,label:t,children:o,areaIdentifier:n,className:i,backCallback:r,parentAreaIdentifier:a,onOpen:s,buttonOnly:l=!1,showArrow:u=!0,proOnly:d=!1,urlArgs:h}){const{clearSelectedBlock:g}=(0,w.useDispatch)("core/block-editor"),{openSidebar:f}=(0,w.useDispatch)(m.STORE_KEY),b=()=>{g().then((()=>f(a||"document")))},_=r?()=>r(b):b,v=(0,w.useSelect)((e=>e(m.STORE_KEY).getSubSidebars[n])),{addSubSidebar:y}=(0,w.useDispatch)(m.STORE_KEY);(0,c.useLayoutEffect)((()=>{v||(y({areaIdentifier:n,sidebar:(0,j.jsx)(k.Animate,{type:"slide-in",children:({className:t})=>(0,j.jsxs)(at,{title:e,backCallback:_,areaIdentifier:n,className:`${t} kubio-subsidebar-content`,children:[o,nt(n)]})})}),Je.push(n))}),[v]);const x=d?Fe.ProItem:k.Button;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"kubio-subsidebar-container",children:(0,j.jsx)("div",{className:Z()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title",i),tabIndex:-1,children:(0,j.jsxs)(x,{isProItem:d,tag:k.Button,urlArgs:h,label:(0,C.__)("Open","kubio"),onClick:()=>(l||g().then((()=>f(n))),void((0,p.isFunction)(s)&&s())),children:[(0,j.jsx)("strong",{children:t||e}),u&&(0,j.jsx)(He,{icon:Ge.ArrowRight,className:"components-panel__arrow arrow_general_settings"})]})})}),(0,j.jsx)("div",{style:{display:"none"},children:o})]})}const tt=[],ot=({name:e,title:t=null,parent:o="document",render:n,isSubsidebar:i=!1})=>{(0,p.find)(tt,{name:e})&&console.error(`sidebar ${e} already added`),tt.push({name:e,parent:o,render:n,title:t||e,isSubsidebar:i})},nt=e=>(e=>tt.filter((({parent:t})=>t===e)))(e).map((({title:t,render:o,name:n,isSubsidebar:i})=>{const r=i?et:at;return(0,j.jsx)(r,{title:t,parentAreaIdentifier:e,areaIdentifier:n,children:o()},`${e}.${n}`)})),it=({name:e,title:t,parent:o="document",render:n})=>ot({name:e,title:t,parent:o,render:n,isSubsidebar:!1}),rt=({name:e,title:t,parent:o="document",render:n})=>ot({name:e,title:t,parent:o,render:n,isSubsidebar:!0});function at({areaIdentifier:e,title:t,backCallback:o=null,children:n,className:i}){const{uiVersion:r}=(0,g.useUIVersion)(),a="function"==typeof t?t():t;return(0,j.jsxs)(Oe,{scope:`${m.STORE_KEY}/sidebars`,complementaryAreaIdentifier:`${m.STORE_KEY}/sidebar/${e}`,identifier:`${m.STORE_KEY}/sidebar/${e}`,isPinnable:!1,className:Z()(i,o?"kubio-sidebar-header-block":""),header:(0,j.jsxs)("div",{className:Z()("components-panel__header","kubio-sidebar-header","accordion-section-title",o?"kubio-sidebar-header--has-back":""),tabIndex:-1,children:[o&&(0,j.jsx)(k.Button,{className:"kubio-sidebar-header-back-button",onClick:o,showTooltip:!0,label:(0,C.__)("Back","kubio"),children:(0,j.jsx)(He,{icon:Ge.ArrowLeft,className:"kubio-sidebar-header-arrow"})}),(0,j.jsx)("strong",{title:(0,p.isString)(a)?a:null,children:a}),2===r&&(0,j.jsx)(Qe,{className:"kubio-inserter-button",variant:"primary"})]}),children:[n,nt(e)]})}const st=window.wp.blocks;function lt({children:e}){const{clearSelectedBlock:t}=(0,w.useDispatch)("core/block-editor"),{openSidebar:o}=(0,w.useDispatch)(m.STORE_KEY),{blockType:n,isMultiSelection:i}=(0,w.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockName:o,hasMultiSelection:n}=e("core/block-editor"),i=t(),r=i&&o(i);return{blockType:i&&(0,st.getBlockType)(r),isMultiSelection:n()}}));return(0,j.jsxs)(at,{areaIdentifier:"block-inspector",title:()=>(0,j.jsxs)("span",{className:"kubio-header-active-section",children:[(0,j.jsx)(y.BlockIcon,{icon:null==n?void 0:n.icon}),(0,j.jsx)("span",{className:"kubio-header-active-section page-title",title:null==n?void 0:n.title,children:i?(0,C.__)("Multiple selection","kubio"):null==n?void 0:n.title})]}),backCallback:()=>{o("document"),t()},children:[!i&&e,i&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"kubio-multiple-selection",children:(0,j.jsx)("p",{children:(0,C.__)("Sidebar controls are not availble on multiple blocks selection","kubio")})})})]})}const ct=window.kubio.controls,ut=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})});function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function pt(e,t){if(e){if("string"==typeof e)return dt(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?dt(e,t):void 0}}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,i,r,a,s=[],l=!0,c=!1;try{if(r=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(n=r.call(o)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function gt(e){var t=function(e,t){if("object"!=mt(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mt(t)?t:t+""}function ft(e,t,o){return(t=gt(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function bt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach((function(t){ft(e,t,o[t])}))}return e}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gt(n.key),n)}}function yt(e,t,o){return t&&vt(e.prototype,t),o&&vt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e,t){if(t&&("object"==mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kt(e)}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function Ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}var It=o(5697),jt=o.n(It);const Tt=window.ReactDOM;var Pt=o(1143),Et=o.n(Pt);function Rt(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var At=function(){function e(){_t(this,e),ft(this,"refs",{})}return yt(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var o=this.getIndex(e,t);-1!==o&&this.refs[e].splice(o,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(Ot)}}]),e}();function Ot(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function Nt(e,t){return Object.keys(e).reduce((function(o,n){return-1===t.indexOf(n)&&(o[n]=e[n]),o}),{})}var Dt={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Mt=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function Bt(e,t){Object.keys(t).forEach((function(o){e.style[o]=t[o]}))}function Lt(e,t){e.style["".concat(Mt,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function zt(e,t){e.style["".concat(Mt,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function Ft(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Gt(e,t,o){return Math.max(e,Math.min(o,t))}function Ht(e){return"px"===e.substr(-2)?parseFloat(e):0}function Ut(e,t){var o=t.displayName||t.name;return o?"".concat(e,"(").concat(o,")"):e}function Wt(e,t){var o=e.getBoundingClientRect();return{top:o.top+t.top,left:o.left+t.left}}function Vt(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Kt(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var n={left:o.left+e.offsetLeft,top:o.top+e.offsetTop};return e.parentNode===t?n:Kt(e.parentNode,t,n)}}function $t(e){var t=e.lockOffset,o=e.width,n=e.height,i=t,r=t,a="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);Et()(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),r=parseFloat(t),a=s[1]}return Et()(isFinite(i)&&isFinite(r),"lockOffset value should be a finite. Given %s",t),"%"===a&&(i=i*o/100,r=r*n/100),{x:i,y:r}}function qt(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),o=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return o.test(t[e])}))}(e)?e:qt(e.parentNode):null}var Yt={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Zt(e){return null!=e.sortableHandle}var Xt=function(){function e(t,o){_t(this,e),this.container=t,this.onScrollCallback=o}return yt(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,o=e.translate,n=e.minTranslate,i=e.maxTranslate,r=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},c=this.container,u=c.scrollTop,d=c.scrollLeft,p=c.scrollHeight,h=c.scrollWidth,m=0===u,g=p-u-c.clientHeight==0,f=0===d,b=h-d-c.clientWidth==0;o.y>=i.y-a/2&&!g?(s.y=1,l.y=10*Math.abs((i.y-a/2-o.y)/a)):o.x>=i.x-r/2&&!b?(s.x=1,l.x=10*Math.abs((i.x-r/2-o.x)/r)):o.y<=n.y+a/2&&!m?(s.y=-1,l.y=10*Math.abs((o.y-a/2-n.y)/a)):o.x<=n.x+r/2&&!f&&(s.x=-1,l.x=10*Math.abs((o.x-r/2-n.x)/r)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),Qt={axis:jt().oneOf(["x","y","xy"]),contentWindow:jt().any,disableAutoscroll:jt().bool,distance:jt().number,getContainer:jt().func,getHelperDimensions:jt().func,helperClass:jt().string,helperContainer:jt().oneOfType([jt().func,"undefined"==typeof HTMLElement?jt().any:jt().instanceOf(HTMLElement)]),hideSortableGhost:jt().bool,keyboardSortingTransitionDuration:jt().number,lockAxis:jt().string,lockOffset:jt().oneOfType([jt().number,jt().string,jt().arrayOf(jt().oneOfType([jt().number,jt().string]))]),lockToContainerEdges:jt().bool,onSortEnd:jt().func,onSortMove:jt().func,onSortOver:jt().func,onSortStart:jt().func,pressDelay:jt().number,pressThreshold:jt().number,keyCodes:jt().shape({lift:jt().arrayOf(jt().number),drop:jt().arrayOf(jt().number),cancel:jt().arrayOf(jt().number),up:jt().arrayOf(jt().number),down:jt().arrayOf(jt().number)}),shouldCancelStart:jt().func,transitionDuration:jt().number,updateBeforeSortStart:jt().func,useDragHandle:jt().bool,useWindowAsScrollContainer:jt().bool},Jt={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},eo={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Jt,shouldCancelStart:function(e){return-1!==[Yt.Input,Yt.Textarea,Yt.Select,Yt.Option,Yt.Button].indexOf(e.target.tagName)||!!Ft(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},to=Object.keys(Qt),oo={index:jt().number.isRequired,collection:jt().oneOfType([jt().number,jt().string]),disabled:jt().bool},no=Object.keys(oo),io=o(989),ro=o.n(io);const ao=(0,j.jsx)(Q.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})}),so=function(e){var t,o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return o=t=function(t){function o(){return _t(this,o),xt(this,St(o).apply(this,arguments))}return Ct(o,t),yt(o,[{key:"componentDidMount",value:function(){(0,Tt.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Et()(n.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,X.createElement)(e,q({ref:t},this.props))}}]),o}(X.Component),ft(t,"displayName",Ut("sortableHandle",e)),o}((()=>(0,j.jsx)(k.Tooltip,{text:(0,C.__)("Move","kubio"),children:(0,j.jsx)("div",{className:"d-flex",children:(0,j.jsx)(He,{icon:ao,className:"draggable-item"})})}))),lo=window.kubio.menuData,co=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"})}),uo=(0,c.createContext)(null),po=({children:e})=>{const t=(0,lo.usePrimaryMenuBlockEditor)();return(0,j.jsx)(uo.Provider,{value:t,children:e})},ho=(0,j.jsx)(Q.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)(Q.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})}),mo=({containerRef:e,afterMenuCreation:t,onClose:o})=>{const[n,i]=(0,c.useState)(""),[r,a]=(0,c.useState)(!1);return(0,j.jsx)(k.Popover,{className:"kubio-options-popover kubio-create-menu-popover",anchorRef:e,position:"middle right",onClose:o,children:(0,j.jsx)(k.Placeholder,{className:"wp-block-navigation-placeholder kubio-menu-placeholder",icon:ho,label:(0,C.__)("Kubio Menu","kubio"),children:(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"kubio-create-menu-popover-description",children:(0,j.jsx)("span",{children:(0,C.__)("There is no header menu created. Please create a new one","kubio")})}),(0,j.jsx)("div",{className:"wp-block-navigation-placeholder__actions",children:(0,j.jsx)(k.Flex,{children:(0,j.jsxs)(k.FlexBlock,{children:[(0,j.jsxs)(k.BaseControl,{className:"kubio-create-menu-popover-input-control",children:[(0,j.jsx)(k.BaseControl.VisualLabel,{children:(0,C.__)("Menu name","kubio")}),(0,j.jsx)(k.__experimentalInputControl,{value:n,onChange:i,placeholder:(0,C.__)("Please set a name","kubio")})]}),(0,j.jsx)(k.Button,{isSecondary:!0,className:"wp-block-navigation-placeholder__button",disabled:0===n.length,isBusy:r,onClick:async()=>{a(!0),await(0,lo.createPrimaryMenu)(n),a(!1),t()},children:(0,C.__)("Create new Menu","kubio")})]})})})]})})})},go=({dataHelper:e,containerRef:t})=>{const[o,n]=(0,c.useState)(!1),[i,r]=(0,c.useState)(!1),{exists:a,items:s,setItems:l,hasResolved:u}=(0,c.useContext)(uo),d=(0,w.useSelect)((e=>{var t,o;const{getPage:n,getEntity:i}=e(m.STORE_KEY),r=(null===(t=n())||void 0===t?void 0:t.link)||null,a=(null===(o=i())||void 0===o?void 0:o.path)||null;return(r||a||"").replace(/\/$/,"")}),[]),p=(0,c.useMemo)((()=>Array.isArray(s)?s:[]),[s]),h="#"+(null==e?void 0:e.getAttribute("anchor")),g=(0,c.useMemo)((()=>{if(!a)return[];const e=p.filter((({url:e})=>e===`${d}/${h}`||e===`${d}${h}`));return e.length?e:[]}),[a,p,d,h]);(0,c.useEffect)((()=>{i&&a&&u&&(l([{...(0,lo.generateItemInitialData)(),label:null==e?void 0:e.getAttribute("attrs.name"),url:`${d}/${h}`}],!0),r(!1))}),[a,i,l,u,e,d,h]);const f=(0,c.useCallback)((()=>{if(g.length){const e=g.map((({id:e})=>e)),t=p.filter((t=>-1===e.indexOf(t.id)));l([...t],!0)}else{const t=Math.max.apply(null,p.filter((({parent:e})=>0===e)).map((({order:e})=>e)).filter(Boolean))+1;l([...p,{...(0,lo.generateItemInitialData)(),label:null==e?void 0:e.getAttribute("attrs.name"),url:`${d}/${h}`,order:t}],!0)}}),[g,p,l,e,d,h]),b=(0,c.useCallback)((()=>{a?f():n(!0)}),[a,f]),_=g.length>0;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Tooltip,{text:_?(0,C.__)("Remove from menu","kubio"):(0,C.__)("Add to menu","kubio"),position:"top left",children:(0,j.jsx)("div",{className:"d-flex",children:(0,j.jsx)(k.Button,{isSmall:!0,onClick:()=>b(),icon:co,className:Z()(["icon-menu",{active:_}])})})}),o&&(0,j.jsx)(mo,{containerRef:null==t?void 0:t.current,afterMenuCreation:()=>{r(!0),n(!1)},onClose:()=>n(!1)})]})},fo=({onRemove:e,onSelect:t,dataHelper:o,area:n})=>{const{selectBlock:i,toggleBlockHighlight:r}=(0,w.useDispatch)("core/block-editor"),a=o.getAttribute("anchor"),l=o.getAttribute("attrs.name"),[u,d]=(0,c.useState)(!1),[m,g]=(0,c.useState)(a),[b,_]=(0,c.useState)(l),v=(0,f.useBlocksOwnerDocument)();(0,c.useEffect)((()=>{m!==a&&g(a),b!==l&&_(l)}),[a,l]);const y=(0,c.useRef)(),x=(0,c.useRef)(),S=h().debounce((e=>{e=e||m;let t=ro()(e);t=(0,I.getUniqueSlug)(t,v),t&&(t!==m&&g(t),t!==a&&o.setAttribute("anchor",t))}),100),{clientId:T}=(0,s.useHoveredSection)(),P=(0,c.useCallback)((()=>{u&&d(!1)}),[u,d]),E=(e,t=p.noop)=>{const o=null==e?void 0:e.clientId,n=(0,I.getPreviewElementByModelId)(o,v);n&&(0,I.scrollIntoView)(n,{behavior:"smooth",onScrollEnd:t}),r(o,!0)},R=n!==So.FOOTER||!1;return(0,s.useOnClickOutside)(y,P),(0,j.jsx)("div",{ref:x,className:"page-section-item",children:(0,j.jsxs)("div",{className:(e=>{const t=["kubio-section-list-item"];return e&&t.push("list-item-full-height"),T===o.clientId&&t.push("hovered"),t.join(" ")})(u),children:[(0,j.jsx)("div",{className:"align-items-center drag-icon",children:(0,j.jsx)(so,{})}),(0,j.jsxs)("div",{className:"input-container",ref:y,children:[(0,j.jsxs)("div",{className:"input-drag-text",children:[(0,j.jsx)("input",{type:"text",value:b,className:"input-name",onChange:e=>{const t=e.target.value;_(t)},onFocus:e=>{E(o),u||d(!0)},onBlur:()=>{b!==l&&(o.setAttribute("attrs.name",b),S(b))}}),(0,j.jsx)("span",{className:"input-drag-text__size",children:b})]}),u&&(0,j.jsxs)("div",{className:"id-div",children:["ID:#",(0,j.jsx)("input",{type:"text",value:m,className:"input-name input-id",onFocus:()=>{E(o)},onChange:e=>{g(e.target.value)},onBlur:()=>{m===a&&b===l||S()}})]})]}),(0,j.jsx)("div",{onClick:()=>{E(o,(()=>{i(null==o?void 0:o.clientId)}))},className:"page-section-item__select-area",role:"button",tabIndex:0}),(0,j.jsxs)("div",{className:"align-items-center",children:[R&&(0,j.jsx)(k.Button,{isSmall:!0,icon:Ge.DeleteItemIcon,className:"icon-close",onClick:e,showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Remove","kubio")}),(0,j.jsx)(go,{dataHelper:o,containerRef:x}),(0,j.jsx)(k.Button,{isSmall:!0,icon:ut,className:"icon-settings",onClick:()=>E(o,t),showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Settings","kubio")})]})]})})},bo="kubio/edit-site",_o=({name:e="",area:t})=>{const o=(0,c.useRef)(),{setOpenInserter:n}=(0,w.useDispatch)(bo),i=(0,w.useSelect)((e=>{e(bo).getOpenedInserter()})),r=wo[t],a=async(e=t)=>{const o=`pattern-inserter/${h().get(jo,e,jo[So.CONTENT])}`;i!==o&&await n(!1,null),n(o,t)},s=null==r?void 0:r.toLowerCase();return(0,j.jsx)(c.Fragment,{children:(0,j.jsxs)("div",{ref:o,className:["kubio-full-section","kubio-full-section--placeholder"].join(" "),children:[(0,j.jsx)("div",{className:"kubio-subsidebar-container",children:(0,j.jsxs)("div",{className:Z()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1,children:[(0,j.jsx)("div",{className:"kubio-sidebar-title-text",children:r}),(0,j.jsx)("div",{className:"dummy-column"}),(0,j.jsx)("div",{className:"section-list-header-buttons-holder",children:(0,j.jsx)(k.Button,{isSmall:!0,icon:Ke,className:"section-icon-container",onClick:function(){a(So.CONTENT)},showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Add block/section","kubio")})})]})}),(0,j.jsx)(ct.ControlNotice,{content:(0,C.sprintf)(// translators:  %1$s , %1$s - template names
// translators:  %1$s , %1$s - template names
(0,C.__)("The current page uses the theme %1$s. Use the button below to replace it with a Kubio %2$s","kubio"),s,s)}),(0,j.jsx)(k.Button,{isPrimary:!0,onClick:()=>a(),className:((e,o=[])=>t===So.HEADER?["btn-primary","header-button"].concat(o).join(" "):["btn-primary"].concat(o).join(" "))(0,["kubio-button-add-blocks"]),children:(0,j.jsx)("span",{className:Z()("kubio-header-section-main-button",{"header-button":e===So.HEADER}),children:(()=>{switch(t){case So.HEADER:return(0,C.__)("Choose header design","kubio");case So.FOOTER:return(0,C.__)("Choose footer design","kubio");case So.SIDEBAR:return(0,C.__)("Add section","kubio");default:return(0,C.__)("Add predesigned section","kubio")}})()})})]})})};function vo(e){const{templateParts:t,selectBlock:o,removeBlocks:n,reorderBlocks:i}=e,{blockTypes:r,getBlocks:a,isPage:s}=(0,w.useSelect)((e=>{const{getPage:t}=e(m.STORE_KEY),o=(0,w.select)("core").getEditedEntityRecord("root","site");let n;t&&(n=t());const i=h().get(n,"context",{}),{postType:r,postId:a}=i,s="page"===(null==o?void 0:o.show_on_front)&&parseInt(null==o?void 0:o.page_for_posts)===parseInt(a);return{isPage:"page"===r&&!s,blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks}})),[l]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",!0,[]),u=(0,c.useMemo)((()=>{const e={selectBlock:o,removeBlocks:n,reorderBlocks:i,innerBlocks:a(),templatePart:{},blockTypes:r,label:(0,C.__)("Content","kubio")};return l&&(0,j.jsx)(Ao,{...e})}),[t,l]);return(0,j.jsxs)(j.Fragment,{children:[s&&(0,j.jsx)(_o,{area:"header"}),u,s&&(0,j.jsx)(_o,{area:"footer"})]})}function yo(e){const{templateParts:t,selectBlock:o,removeBlocks:n,reorderBlocks:i}=e,{blockTypes:r}=(0,w.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks})));return(0,j.jsx)(j.Fragment,{children:t.map(((e,t)=>{const{name:a,clientId:s}=e,l={selectBlock:o,removeBlocks:n,reorderBlocks:i,name:a,templatePart:e,templatePartClientId:s,blockTypes:r};return(0,j.jsx)(Ao,{...l},"template-sections-"+t)}))})}function ko({templateParts:e,...t}){const o=(0,w.useSelect)((e=>{const{currentPageHasFSETemplate:t}=e(m.STORE_KEY);return t()}),[]),n=(0,w.useSelect)((e=>e("core").getEntityRecords("postType","wp_template_part",{per_page:-1})||[]),[]),i=(0,s.useDeepMemo)((()=>e.map((e=>{const t=n.find((t=>{var o;return(null==t?void 0:t.slug)===(null==e||null===(o=e.attributes)||void 0===o?void 0:o.slug)})),o=null==t?void 0:t.area;return{...e,area:o}}))),[e,n]),r=(0,s.useDeepMemo)((()=>h().orderBy(i,(e=>h().findIndex(Co,(t=>t===h().get(e,"area",So.CONTENT)))))),[i]);let a=null;return a=o?yo:vo,(0,j.jsx)(a,{...t,templateParts:r})}const xo=({onRemove:e,onSelect:t,item:o,dataHelper:n})=>{const{blockTypes:i}=(0,w.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes()}))),{selectBlock:r}=(0,w.useDispatch)("core/block-editor"),{clientId:a}=(0,s.useHoveredSection)(),l=Z()("kubio-section-list-item",{hovered:a===o.clientId}),u=(0,c.useRef)();return(0,c.useEffect)((()=>{a===o.clientId&&u.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),[a]),(0,j.jsx)("div",{ref:u,className:"page-section-item",children:(0,j.jsxs)("div",{className:l,children:[(0,j.jsx)("div",{className:"align-items-center",children:(0,j.jsx)(so,{})}),(0,j.jsx)("div",{className:"input-container",children:(0,j.jsx)("span",{className:"input-name",children:(0,j.jsx)("span",{className:"input-name-text",children:(e=>{const t=(0,p.find)(i,{name:e});return(null==t?void 0:t.title)||e})(o.name)})})}),(0,j.jsx)("div",{onClick:()=>{r(null==n?void 0:n.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:"0"}),(0,j.jsxs)("div",{className:"align-items-center",children:[(0,j.jsx)(k.Button,{isSmall:!0,icon:Ge.DeleteItemIcon,className:"icon-close",onClick:e,showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Remove","kubio")}),(0,j.jsx)(k.Button,{isSmall:!0,icon:ut,className:"icon-settings",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Settings","kubio")})]})]})})},So={HEADER:"header",FOOTER:"footer",SIDEBAR:"sidebar",CONTENT:"content"},wo={[So.HEADER]:(0,C.__)("Header","kubio"),[So.FOOTER]:(0,C.__)("Footer","kubio"),[So.SIDEBAR]:(0,C.__)("Sidebar","kubio"),[So.CONTENT]:(0,C.__)("Content","kubio")},Co=[So.HEADER,So.CONTENT,So.SIDEBAR,So.FOOTER],Io=["kubio/header","kubio/footer","core/post-content","core/template-part"],jo={[So.HEADER]:"header",[So.FOOTER]:"footer",[So.SIDEBAR]:"sidebar",[So.CONTENT]:"post-content"},To=function(e){var t,o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return o=t=function(t){function o(){return _t(this,o),xt(this,St(o).apply(this,arguments))}return Ct(o,t),yt(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,o=e.disabled,n=e.index,i=(0,Tt.findDOMNode)(this);i.sortableInfo={collection:t,disabled:o,index:n,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return Et()(n.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,X.createElement)(e,q({ref:t},Nt(this.props,no)))}}]),o}(X.Component),ft(t,"displayName",Ut("sortableElement",e)),ft(t,"contextTypes",{manager:jt().object.isRequired}),ft(t,"propTypes",oo),ft(t,"defaultProps",{collection:0}),o}((({item:e,onRemove:t=p.noop,onSelect:o=p.noop,dataHelper:n,area:i})=>(0,I.isGutentagPrefixed)(e.name)?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(fo,{onRemove:()=>t(e),onSelect:()=>o(e),item:e,dataHelper:n,area:i})}):(0,j.jsx)(xo,{onRemove:()=>t(e),onSelect:()=>o(e),item:e,dataHelper:n}))),Po=e=>{var t;const o=(0,c.useMemo)((()=>Eo()),[]);return(0,j.jsx)(o,{clientId:null===(t=e.item)||void 0===t?void 0:t.clientId,...e})},Eo=()=>(0,s.WithKubioDataHelperProp)(To),Ro=function(e){var t,o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return o=t=function(t){function o(e){var t;return _t(this,o),ft(kt(kt(t=xt(this,St(o).call(this,e)))),"state",{}),ft(kt(kt(t)),"handleStart",(function(e){var o=t.props,n=o.distance,i=o.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=Vt(e);var r=Ft(e.target,(function(e){return null!=e.sortableInfo}));if(r&&r.sortableInfo&&t.nodeIsChild(r)&&!t.state.sorting){var a=t.props.useDragHandle,s=r.sortableInfo,l=s.index,c=s.collection;if(s.disabled)return;if(a&&!Ft(e.target,Zt))return;t.manager.active={collection:c,index:l},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==Yt.Anchor||e.preventDefault(),n||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),ft(kt(kt(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),ft(kt(kt(t)),"handleMove",(function(e){var o=t.props,n=o.distance,i=o.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var r=Vt(e),a={x:t.position.x-r.x,y:t.position.y-r.y},s=Math.abs(a.x)+Math.abs(a.y);t.delta=a,n||i&&!(s>=i)?n&&s>=n&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),ft(kt(kt(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),ft(kt(kt(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),ft(kt(kt(t)),"handlePress",(function(e){try{var o=t.manager.getActive(),n=function(){if(o){var n=function(){var o,n,i,c,g,f,b=p.sortableInfo.index,_=(o=p,{bottom:Ht((n=window.getComputedStyle(o)).marginBottom),left:Ht(n.marginLeft),right:Ht(n.marginRight),top:Ht(n.marginTop)}),v=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:Ht(t.gridColumnGap),y:Ht(t.gridRowGap)}:{x:0,y:0}}(t.container),y=t.scrollContainer.getBoundingClientRect(),k=a({index:b,node:p,collection:h});if(t.node=p,t.margin=_,t.gridGap=v,t.width=k.width,t.height=k.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=p.getBoundingClientRect(),t.containerBoundingRect=y,t.index=b,t.newIndex=b,t.axis={x:r.indexOf("x")>=0,y:r.indexOf("y")>=0},t.offsetEdge=Kt(p,t.container),t.initialOffset=Vt(m?bt({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",g=(i=p).querySelectorAll(c),Rt((f=i.cloneNode(!0)).querySelectorAll(c)).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===Yt.Canvas&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),f)),Bt(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-_.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-_.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),l&&(t.sortableGhost=p,Bt(p,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var x=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=x.top,w=x.left,C=x.width,I=S+x.height,j=w+C;t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=j-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=I-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:y.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:y.left+y.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:y.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:y.top+y.height)-t.boundingClientRect.top-t.height/2);s&&s.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?p:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Dt.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),Dt.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:b}),u&&u({node:p,index:b,collection:h,isKeySorting:m,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),m&&t.keyMove(0)},i=t.props,r=i.axis,a=i.getHelperDimensions,s=i.helperClass,l=i.hideSortableGhost,c=i.updateBeforeSortStart,u=i.onSortStart,d=i.useWindowAsScrollContainer,p=o.node,h=o.collection,m=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var o=function(t,o){try{var n=(i=p.sortableInfo.index,Promise.resolve(c({collection:h,index:i,node:p,isKeySorting:m},e)).then((function(){})))}catch(e){return o(!0,e)}var i;return n&&n.then?n.then(o.bind(null,!1),o.bind(null,!0)):o(!1,value)}(0,(function(e,o){if(t._awaitingUpdateBeforeSortStart=!1,e)throw o;return o}));if(o&&o.then)return o.then((function(){}))}}();return g&&g.then?g.then(n):n()}}();return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),ft(kt(kt(t)),"handleSortMove",(function(e){var o=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),o&&o(e)})),ft(kt(kt(t)),"handleSortEnd",(function(e){var o=t.props,n=o.hideSortableGhost,i=o.onSortEnd,r=t.manager,a=r.active.collection,s=r.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Dt.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),Dt.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),n&&t.sortableGhost&&Bt(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=l.length;c<u;c++){var d=l[c],p=d.node;d.edgeOffset=null,d.boundingClientRect=null,Lt(p,null),zt(p,null),d.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof i&&i({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s,nodes:l},e),t.touched=!1})),ft(kt(kt(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,o=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(o){var n=bt({},t.translate),i=0,r=0;return t.axis.x&&(n.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-n.x),t.axis.y&&(n.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),r=t.translate.y-n.y),t.translate=n,Lt(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=r)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),ft(kt(kt(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),ft(kt(kt(t)),"handleKeyDown",(function(e){var o=e.keyCode,n=t.props,i=n.shouldCancelStart,r=n.keyCodes,a=bt({},Jt,void 0===r?{}:r);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||a.lift.includes(o)&&!i(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),a.lift.includes(o)&&!t.manager.active?t.keyLift(e):a.drop.includes(o)&&t.manager.active?t.keyDrop(e):a.cancel.includes(o)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):a.up.includes(o)?t.keyMove(-1):a.down.includes(o)&&t.keyMove(1))})),ft(kt(kt(t)),"keyLift",(function(e){var o=e.target,n=Ft(o,(function(e){return null!=e.sortableInfo})).sortableInfo,i=n.index,r=n.collection;t.initialFocusedNode=o,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:r},t.handlePress(e)})),ft(kt(kt(t)),"keyMove",(function(e){var o=t.manager.getOrderedRefs(),n=o[o.length-1].node.sortableInfo.index,i=t.newIndex+e,r=t.newIndex;if(!(i<0||i>n)){t.prevIndex=r,t.newIndex=i;var a=function(e,t,o){return e<o&&e>t?e-1:e>o&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=o.find((function(e){return e.node.sortableInfo.index===a})),l=s.node,c=t.containerScrollDelta,u=s.boundingClientRect||Wt(l,c),d=s.translate||{x:0,y:0},p=u.top+d.y-c.top,h=u.left+d.x-c.left,m=r<i,g=m&&t.axis.x?l.offsetWidth-t.width:0,f=m&&t.axis.y?l.offsetHeight-t.height:0;t.handleSortMove({pageX:h+g,pageY:p+f,ignoreTransition:0===e})}})),ft(kt(kt(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),ft(kt(kt(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),ft(kt(kt(t)),"isValidSortingTarget",(function(e){var o=t.props.useDragHandle,n=e.target,i=Ft(n,(function(e){return null!=e.sortableInfo}));return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(o?Zt(n):n.sortableInfo)})),function(e){Et()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=new At,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return Ct(o,t),yt(o,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,o=this.getContainer();Promise.resolve(o).then((function(o){e.container=o,e.document=e.container.ownerDocument||document;var n=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof n?n():n,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:qt(e.container)||e.container,e.autoScroller=new Xt(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return Dt[t].forEach((function(o){return e.container.addEventListener(o,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return Dt[t].forEach((function(o){return e.container.removeEventListener(o,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,o=t.lockAxis,n=t.lockOffset,i=t.lockToContainerEdges,r=t.transitionDuration,a=t.keyboardSortingTransitionDuration,s=void 0===a?r:a,l=this.manager.isKeySorting,c=e.ignoreTransition,u=Vt(e),d={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,i){var p=function(e){var t=e.height,o=e.width,n=e.lockOffset,i=Array.isArray(n)?n:[n,n];Et()(2===i.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",n);var r=ht(i,2),a=r[0],s=r[1];return[$t({height:t,lockOffset:a,width:o}),$t({height:t,lockOffset:s,width:o})]}({height:this.height,lockOffset:n,width:this.width}),h=ht(p,2),m=h[0],g=h[1],f={x:this.width/2-m.x,y:this.height/2-m.y},b={x:this.width/2-g.x,y:this.height/2-g.y};d.x=Gt(this.minTranslate.x+f.x,this.maxTranslate.x-b.x,d.x),d.y=Gt(this.minTranslate.y+f.y,this.maxTranslate.y-b.y,d.y)}"x"===o?d.y=0:"y"===o&&(d.x=0),l&&s&&!c&&zt(this.helper,s),Lt(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,o=e.hideSortableGhost,n=e.onSortOver,i=this.containerScrollDelta,r=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var d=0,p=a.length;d<p;d++){var h=a[d].node,m=h.sortableInfo.index,g=h.offsetWidth,f=h.offsetHeight,b={height:this.height>f?f/2:this.height/2,width:this.width>g?g/2:this.width/2},_=c&&m>this.index&&m<=u,v=c&&m<this.index&&m>=u,y={x:0,y:0},k=a[d].edgeOffset;k||(k=Kt(h,this.container),a[d].edgeOffset=k,c&&(a[d].boundingClientRect=Wt(h,i)));var x=d<a.length-1&&a[d+1],S=d>0&&a[d-1];x&&!x.edgeOffset&&(x.edgeOffset=Kt(x.node,this.container),c&&(x.boundingClientRect=Wt(x.node,i))),m!==this.index?(t&&zt(h,t),this.axis.x?this.axis.y?v||m<this.index&&(s+r.left-b.width<=k.left&&l+r.top<=k.top+b.height||l+r.top+b.height<=k.top)?(y.x=this.width+this.marginOffset.x,k.left+y.x>this.containerBoundingRect.width-b.width&&x&&(y.x=x.edgeOffset.left-k.left,y.y=x.edgeOffset.top-k.top),null===this.newIndex&&(this.newIndex=m)):(_||m>this.index&&(s+r.left+b.width>=k.left&&l+r.top+b.height>=k.top||l+r.top+b.height>=k.top+f))&&(y.x=-(this.width+this.marginOffset.x),k.left+y.x<this.containerBoundingRect.left+b.width&&S&&(y.x=S.edgeOffset.left-k.left,y.y=S.edgeOffset.top-k.top),this.newIndex=m):_||m>this.index&&s+r.left+b.width>=k.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=m):(v||m<this.index&&s+r.left<=k.left+b.width)&&(y.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=m)):this.axis.y&&(_||m>this.index&&l+r.top+b.height>=k.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=m):(v||m<this.index&&l+r.top<=k.top+b.height)&&(y.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=m))),Lt(h,y),a[d].translate=y):o&&(this.sortableGhost=h,Bt(h,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var w=c?this.prevIndex:u;n&&this.newIndex!==w&&n({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:c,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Et()(n.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,Tt.findDOMNode)(this):e(n.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,X.createElement)(e,q({ref:t},Nt(this.props,to)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(X.Component),ft(t,"displayName",Ut("sortableList",e)),ft(t,"defaultProps",eo),ft(t,"propTypes",Qt),ft(t,"childContextTypes",{manager:jt().object.isRequired}),o}((({items:e,onRemove:t,onSelect:o,area:n})=>(0,j.jsx)("div",{children:(0,j.jsx)(w.AsyncModeProvider,{value:!0,children:null==e?void 0:e.map(((e,i)=>(0,j.jsx)(Po,{item:e,onRemove:t,onSelect:o,index:i,area:n},e.clientId)))})}))),Ao=({name:e="",reorderBlocks:t,templatePart:o={},blockTypes:n,removeBlocks:i,selectBlock:r,templatePartClientId:a,label:s})=>{const l=null==o?void 0:o.area,d=jo[So.CONTENT],f=h().get(jo,l,d),b=(0,c.useRef)(),_=(0,c.useRef)(),v=(0,c.useRef)(),[y,x]=(0,c.useState)(!1),{setOpenInserter:S}=(0,w.useDispatch)(m.STORE_KEY),I=f,{isUnlocked:T}=(0,ct.useTemplatePartLock)(I),[P,E]=(0,c.useState)(!1),{postType:R,postId:A}=(0,w.useSelect)((e=>{var t,o;return(null===(t=e(m.STORE_KEY))||void 0===t||null===(o=t.getPage())||void 0===o?void 0:o.context)||{}}),[]),O=(0,w.useSelect)((e=>e(m.STORE_KEY).getKubioEditorModeIsSimple()),[]),{uiVersion:N}=(0,g.useUIVersion)(),D=(0,w.useSelect)((e=>e("core/block-editor").getBlocks(a)),[a]);if("core/post-content"===e&&(0,u.applyFilters)("kubio.showRenderedPostContent","page"!==R,R,A))return(0,j.jsx)(j.Fragment,{});const M=e.includes("kubio")&&["header","footer","sidebar"].includes(I),B=["kubio-full-section"];return M&&(T?B.push("kubio-full-section--unlocked"):B.push("kubio-full-section--locked")),(0,j.jsxs)("div",{ref:b,className:B.join(" "),children:[M&&(0,j.jsx)("div",{ref:_,tabIndex:-1,role:"button",className:Z()("kubio-full-section-overlay",{"kubio-full-section-overlay--show-popup":y})}),(0,j.jsx)("div",{className:"kubio-subsidebar-container",children:(0,j.jsxs)("div",{className:Z()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1,children:[(0,j.jsx)("div",{className:"kubio-sidebar-title-text",children:s||(()=>{let t=wo[l];return t||(t=(()=>{const t=e,o=(0,p.find)(n,{name:t});return(null==o?void 0:o.title)||t})()),t})()}),(0,j.jsx)("div",{className:"dummy-column"}),(0,j.jsxs)("div",{ref:v,className:"section-list-header-buttons-holder",children:[M&&!T&&(0,j.jsx)(ct.KubioPopup,{position:2===N?"middle right":"top left",className:"kubio-options-popover kubio-template-controls-popover",buttonRef:_,anchorRef:2===N?v:b,selectorToIgnoreOnClickOutside:".h-template-wizard__modal",onOpen:()=>x(!0),onClose:()=>x(!1),children:(0,j.jsx)(ct.TemplateLockModal,{title:(0,C.__)("Choose editing mode","kubio"),children:(0,j.jsx)(ct.TemplateLockControls,{isWizardShown:P,setIsWizardShown:E,templatePart:I})})}),!O&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{isSmall:!0,icon:ut,className:"section-icon-container",onClick:()=>{r(o.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Settings","kubio")}),(0,j.jsx)(k.Button,{isSmall:!0,icon:Ke,className:"section-icon-container",onClick:function(){S(`pattern-inserter/${f}-blocks`,o.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,C.__)("Add block/section","kubio")})]})]})]})}),(0,j.jsx)(Ro,{helperClass:"kubio-list-item-is-sorting",helperContainer:()=>b.current,onSortEnd:({oldIndex:e,newIndex:o})=>{t(D,e,o)},lockAxis:"y",useDragHandle:!0,items:D,onRemove:e=>{i([e.clientId],!1)},onSelect:e=>{r(e.clientId)},area:l}),f&&(0,j.jsx)(k.Button,{isPrimary:!0,onClick:()=>(async(e=l)=>{const t=h().get(jo,e,d);S(`pattern-inserter/${t}`,o.clientId)})(),className:((e,t=[])=>l===So.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" "))(0,["kubio-button-add-blocks","kubio-sidebar-add-section-button"]),children:(0,j.jsx)("span",{className:"kubio-header-section-main-button",children:(()=>{switch(l){case So.HEADER:return(0,C.__)("Choose header design","kubio");case So.FOOTER:return(0,C.__)("Choose footer design","kubio");case So.SIDEBAR:return(0,C.__)("Add section","kubio");default:return(0,C.__)("Add predesigned section","kubio")}})()})})]})},Oo=(0,x.compose)((0,w.withSelect)((e=>{const{getSelectedBlockClientId:t,getBlock:o,getBlockParents:n,getClientIdsWithDescendants:i}=e("core/block-editor"),r=i().map(o).filter((({name:e})=>Io.includes(e)));return{selectedBlockClientId:t(),templateParts:r,getBlockParents:n}})),(0,w.withDispatch)(((e,{onSelect:t=p.noop,getBlockParents:o,getBlockAttributes:n})=>{const{removeBlocks:i,moveBlockToPosition:r,updateBlockAttributes:a}=e("core/block-editor");return{selectBlock(o){e("core/block-editor").selectBlock(o),t(o)},removeBlocks:i,reorderBlocks:(e,t,n)=>{const i=o(e[t].clientId).pop();r(e[t].clientId,i,i,n)},updateBlockAttribute:(e,t,o)=>{let i=n(e);i=(0,p.set)(i,t,o),a(e,{...i})}}})))((e=>(0,j.jsx)(po,{children:(0,j.jsx)("div",{className:"block-editor-block-navigation__container kubio-interface kubio-section-list",children:(0,j.jsx)("div",{className:"block-editor-block-navigation__label",children:(0,j.jsx)(ko,{...e})})})}))),No={isDismissable:!0,duration:1e4},Do=()=>{const[e]=(0,b.useIsAIConnected)(),[t,o]=(0,c.useState)(!1),n=(0,c.useRef)(p.noop),i=(0,c.useCallback)((e=>{o(!0),n.current=e}),[]),r=(0,c.useCallback)((t=>{e?null==t||t():i(t)}),[e,i]),{createSuccessNotice:a}=(0,s.useKubioNotices)(),l=(0,c.useCallback)((()=>{o(!1),(0,p.isFunction)(n.current)?n.current():a((0,C.__)("Kubio AI connected successfully!","kubio"),No)}),[a]);return[t&&(0,j.jsx)(b.AIWizard,{onFinish:l,onCancel:()=>o(!1),isFrontPage:!1,isSetup:!0}),r,e,i]},Mo=({parentAreaIdentifier:e})=>{const t=`${e}/page-settings`,{isAICapabilityEnabled:o}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t=h().noop}=e(m.STORE_KEY)||{};return{isAICapabilityEnabled:t()}}),[]),[n,,,i]=Do();return o?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(et,{title:(0,j.jsxs)("span",{className:"kubio-sidebar-panel-with-icon__title",children:[(0,j.jsx)(He,{icon:Ge.KubioAI,size:18}),(0,j.jsx)("span",{children:(0,C.__)("AI Settings","kubio")})]}),areaIdentifier:t,onOpen:i,buttonOnly:!0,showArrow:!1,proOnly:I.AI_IN_PRO,urlArgs:{source:"AI",content:"ai-settings"}}),n]}):(0,j.jsx)(j.Fragment,{})},Bo=async()=>await A()({path:"kubio/v1/3rd_party_themes/import_blog"}),Lo=window.wp.url,zo=["home","index","single","search","archive","singular"],Fo=()=>{const e=(0,f.useGetGlobalSessionProp)("ready",!1),t=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{}),o=(0,f.useSetGlobalSessionProp)("urlBasedTemplatesMap",{}),[n,i]=(0,c.useState)(!1),{getEntity:r,page:a,templateType:s,templateId:l,hasQueryBlock:u}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getClientIdsWithDescendants:o,getBlock:n}=e("core/block-editor"),{getPage:i,getEditedPostType:r,getEditedPostId:a}=e(m.STORE_KEY);return{getEntity:t,page:i(),templateType:r(),templateId:a(),hasQueryBlock:o().map((e=>n(e))).some((e=>"core/query"===e.name))}}),[]);(0,c.useEffect)((()=>{e||i(!1)}),[e]);const d=(0,c.useCallback)((()=>{const e=r("postType",s,l),t=null==e?void 0:e.kubio_template_source;i(!["kubio","kubio-custom"].includes(t)&&u&&(0,I.getBackendData)("allow3rdPartyBlogOverride",!0))}),[r,u,l,s]),p=(0,c.useCallback)((async()=>{if(null==a||!a.path)return;let e=t[null==a?void 0:a.path],n=!0;if(!e&&null!==e){const i=await window.fetch((0,Lo.addQueryArgs)(null==a?void 0:a.path,{"__kubio-classic-page-template-slug":1})).then((e=>e.json()));e=i.data||null,o({...t,[null==a?void 0:a.path]:e}),n=i.success}i(n&&zo.includes(e)&&(0,I.getBackendData)("allow3rdPartyBlogOverride",!0))}),[null==a?void 0:a.path,o,t]),h=(0,c.useCallback)(((e,t)=>{if(e&&t){var o;const t=null==e||null===(o=e.split("//"))||void 0===o?void 0:o.pop();zo.includes(t)?d():i(!1)}else p()}),[d,p]);return(0,c.useEffect)((()=>{e&&h(l,s)}),[e,h,l,s]),n},Go=()=>{const[e,t]=(0,c.useState)(!1),[o,n]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),i=Fo(),{createSuccessNotice:r,createErrorNotice:a}=(0,w.useDispatch)("core/notices"),s=(0,c.useCallback)((async()=>{t(!0);try{await Bo()}catch(e){return void a((0,C.__)("There was an error while importing the Kubio blog. Please try again","kubio"))}n(!0),r((0,C.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,C.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),t(!1)}),[a,r,n]);return!i||i&&o?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)("div",{className:"kubio-sidebar-blog-area-import",children:[(0,j.jsx)("h2",{children:(0,C.__)("💫 Start with the Kubio blog!","kubio")}),(0,j.jsxs)("p",{children:[(0,C.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,j.jsx)("br",{}),(0,C.__)("Would you like to use the Kubio blog templates? ","kubio")]}),(0,j.jsxs)(k.Button,{isPrimary:!0,isBusy:e,onClick:s,children:[!e&&(0,C.__)("Import Kubio blog","kubio"),e&&(0,C.__)("Importing Kubio blog…","kubio")]})]})};function Ho(){const e=(0,f.useCurrentPageBodyClasses)(),{additionalCSS:t,setAdditionalCSS:o}=(0,_.useGlobalAdditionalCSS)(),[n,i]=(0,c.useState)(t);(0,c.useEffect)((()=>{t!==n&&i(t)}),[t]);const r=(0,x.useDebounce)(o,300);return(0,j.jsxs)(k.PanelBody,{initialOpen:!0,title:(0,C.__)("Additional CSS","kubio"),children:[(0,j.jsx)(ct.CodeMirrorControl,{value:n,onChange:e=>{r(e),i(e)},mode:"css"}),e&&!!e.length&&(0,j.jsx)(ct.ControlNotice,{content:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:(0,C.__)("Current page has the following classes that can be used as top selectors:","kubio")}),(0,j.jsx)("div",{children:(0,j.jsx)("strong",{children:e.join(", ")})})]})})]})}const Uo=({areaIdentifier:e})=>{const t=(0,w.useSelect)((e=>e(m.STORE_KEY).getEditorOpenedSidebar()),[]),o=null==t?void 0:t.endsWith(e);return(0,j.jsx)(j.Fragment,{children:o&&(0,j.jsx)(Ho,{})})},Wo=({parentAreaIdentifier:e})=>(0,j.jsx)(et,{title:(0,C.__)("Additional CSS","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/additional-css`,children:(0,j.jsx)(Uo,{areaIdentifier:`${e}/additional-css`})}),Vo=window.kubio.log;var Ko=o(9590),$o=o.n(Ko);function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}var Yo=/^\s+/,Zo=/\s+$/;function Xo(e,t){if(t=t||{},(e=e||"")instanceof Xo)return e;if(!(this instanceof Xo))return new Xo(e,t);var o=function(e){var t={r:0,g:0,b:0},o=1,n=null,i=null,r=null,a=!1,s=!1;return"string"==typeof e&&(e=function(e){e=e.replace(Yo,"").replace(Zo,"").toLowerCase();var t,o=!1;if(gn[e])e=gn[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Pn.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Pn.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Pn.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Pn.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Pn.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Pn.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Pn.hex8.exec(e))?{r:kn(t[1]),g:kn(t[2]),b:kn(t[3]),a:Cn(t[4]),format:o?"name":"hex8"}:(t=Pn.hex6.exec(e))?{r:kn(t[1]),g:kn(t[2]),b:kn(t[3]),format:o?"name":"hex"}:(t=Pn.hex4.exec(e))?{r:kn(t[1]+""+t[1]),g:kn(t[2]+""+t[2]),b:kn(t[3]+""+t[3]),a:Cn(t[4]+""+t[4]),format:o?"name":"hex8"}:!!(t=Pn.hex3.exec(e))&&{r:kn(t[1]+""+t[1]),g:kn(t[2]+""+t[2]),b:kn(t[3]+""+t[3]),format:o?"name":"hex"}}(e)),"object"==qo(e)&&(En(e.r)&&En(e.g)&&En(e.b)?(t=function(e,t,o){return{r:255*vn(e,255),g:255*vn(t,255),b:255*vn(o,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):En(e.h)&&En(e.s)&&En(e.v)?(n=Sn(e.s),i=Sn(e.v),t=function(e,t,o){e=6*vn(e,360),t=vn(t,100),o=vn(o,100);var n=Math.floor(e),i=e-n,r=o*(1-t),a=o*(1-i*t),s=o*(1-(1-i)*t),l=n%6;return{r:255*[o,a,r,r,s,o][l],g:255*[s,o,o,a,r,r][l],b:255*[r,r,s,o,o,a][l]}}(e.h,n,i),a=!0,s="hsv"):En(e.h)&&En(e.s)&&En(e.l)&&(n=Sn(e.s),r=Sn(e.l),t=function(e,t,o){var n,i,r;function a(e,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+6*(t-e)*o:o<.5?t:o<2/3?e+(t-e)*(2/3-o)*6:e}if(e=vn(e,360),t=vn(t,100),o=vn(o,100),0===t)n=i=r=o;else{var s=o<.5?o*(1+t):o+t-o*t,l=2*o-s;n=a(l,s,e+1/3),i=a(l,s,e),r=a(l,s,e-1/3)}return{r:255*n,g:255*i,b:255*r}}(e.h,n,r),a=!0,s="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=bn(o),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:o}}(e);this._originalInput=e,this._r=o.r,this._g=o.g,this._b=o.b,this._a=o.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||o.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=o.ok}function Qo(e,t,o){e=vn(e,255),t=vn(t,255),o=vn(o,255);var n,i,r=Math.max(e,t,o),a=Math.min(e,t,o),s=(r+a)/2;if(r==a)n=i=0;else{var l=r-a;switch(i=s>.5?l/(2-r-a):l/(r+a),r){case e:n=(t-o)/l+(t<o?6:0);break;case t:n=(o-e)/l+2;break;case o:n=(e-t)/l+4}n/=6}return{h:n,s:i,l:s}}function Jo(e,t,o){e=vn(e,255),t=vn(t,255),o=vn(o,255);var n,i,r=Math.max(e,t,o),a=Math.min(e,t,o),s=r,l=r-a;if(i=0===r?0:l/r,r==a)n=0;else{switch(r){case e:n=(t-o)/l+(t<o?6:0);break;case t:n=(o-e)/l+2;break;case o:n=(e-t)/l+4}n/=6}return{h:n,s:i,v:s}}function en(e,t,o,n){var i=[xn(Math.round(e).toString(16)),xn(Math.round(t).toString(16)),xn(Math.round(o).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function tn(e,t,o,n){return[xn(wn(n)),xn(Math.round(e).toString(16)),xn(Math.round(t).toString(16)),xn(Math.round(o).toString(16))].join("")}function on(e,t){t=0===t?0:t||10;var o=Xo(e).toHsl();return o.s-=t/100,o.s=yn(o.s),Xo(o)}function nn(e,t){t=0===t?0:t||10;var o=Xo(e).toHsl();return o.s+=t/100,o.s=yn(o.s),Xo(o)}function rn(e){return Xo(e).desaturate(100)}function an(e,t){t=0===t?0:t||10;var o=Xo(e).toHsl();return o.l+=t/100,o.l=yn(o.l),Xo(o)}function sn(e,t){t=0===t?0:t||10;var o=Xo(e).toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(-t/100*255))),o.g=Math.max(0,Math.min(255,o.g-Math.round(-t/100*255))),o.b=Math.max(0,Math.min(255,o.b-Math.round(-t/100*255))),Xo(o)}function ln(e,t){t=0===t?0:t||10;var o=Xo(e).toHsl();return o.l-=t/100,o.l=yn(o.l),Xo(o)}function cn(e,t){var o=Xo(e).toHsl(),n=(o.h+t)%360;return o.h=n<0?360+n:n,Xo(o)}function un(e){var t=Xo(e).toHsl();return t.h=(t.h+180)%360,Xo(t)}function dn(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var o=Xo(e).toHsl(),n=[Xo(e)],i=360/t,r=1;r<t;r++)n.push(Xo({h:(o.h+r*i)%360,s:o.s,l:o.l}));return n}function pn(e){var t=Xo(e).toHsl(),o=t.h;return[Xo(e),Xo({h:(o+72)%360,s:t.s,l:t.l}),Xo({h:(o+216)%360,s:t.s,l:t.l})]}function hn(e,t,o){t=t||6,o=o||30;var n=Xo(e).toHsl(),i=360/o,r=[Xo(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,r.push(Xo(n));return r}function mn(e,t){t=t||6;for(var o=Xo(e).toHsv(),n=o.h,i=o.s,r=o.v,a=[],s=1/t;t--;)a.push(Xo({h:n,s:i,v:r})),r=(r+s)%1;return a}Xo.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,o,n=this.toRgb();return e=n.r/255,t=n.g/255,o=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))},setAlpha:function(e){return this._a=bn(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Jo(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Jo(this._r,this._g,this._b),t=Math.round(360*e.h),o=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+o+"%, "+n+"%)":"hsva("+t+", "+o+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=Qo(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Qo(this._r,this._g,this._b),t=Math.round(360*e.h),o=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+o+"%, "+n+"%)":"hsla("+t+", "+o+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return en(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,o,n,i){var r=[xn(Math.round(e).toString(16)),xn(Math.round(t).toString(16)),xn(Math.round(o).toString(16)),xn(wn(n))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*vn(this._r,255))+"%",g:Math.round(100*vn(this._g,255))+"%",b:Math.round(100*vn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*vn(this._r,255))+"%, "+Math.round(100*vn(this._g,255))+"%, "+Math.round(100*vn(this._b,255))+"%)":"rgba("+Math.round(100*vn(this._r,255))+"%, "+Math.round(100*vn(this._g,255))+"%, "+Math.round(100*vn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(fn[en(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+tn(this._r,this._g,this._b,this._a),o=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var i=Xo(e);o="#"+tn(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+o+")"},toString:function(e){var t=!!e;e=e||this._format;var o=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(o=this.toRgbString()),"prgb"===e&&(o=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(o=this.toHexString()),"hex3"===e&&(o=this.toHexString(!0)),"hex4"===e&&(o=this.toHex8String(!0)),"hex8"===e&&(o=this.toHex8String()),"name"===e&&(o=this.toName()),"hsl"===e&&(o=this.toHslString()),"hsv"===e&&(o=this.toHsvString()),o||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Xo(this.toString())},_applyModification:function(e,t){var o=e.apply(null,[this].concat([].slice.call(t)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(an,arguments)},brighten:function(){return this._applyModification(sn,arguments)},darken:function(){return this._applyModification(ln,arguments)},desaturate:function(){return this._applyModification(on,arguments)},saturate:function(){return this._applyModification(nn,arguments)},greyscale:function(){return this._applyModification(rn,arguments)},spin:function(){return this._applyModification(cn,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(hn,arguments)},complement:function(){return this._applyCombination(un,arguments)},monochromatic:function(){return this._applyCombination(mn,arguments)},splitcomplement:function(){return this._applyCombination(pn,arguments)},triad:function(){return this._applyCombination(dn,[3])},tetrad:function(){return this._applyCombination(dn,[4])}},Xo.fromRatio=function(e,t){if("object"==qo(e)){var o={};for(var n in e)e.hasOwnProperty(n)&&(o[n]="a"===n?e[n]:Sn(e[n]));e=o}return Xo(e,t)},Xo.equals=function(e,t){return!(!e||!t)&&Xo(e).toRgbString()==Xo(t).toRgbString()},Xo.random=function(){return Xo.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Xo.mix=function(e,t,o){o=0===o?0:o||50;var n=Xo(e).toRgb(),i=Xo(t).toRgb(),r=o/100;return Xo({r:(i.r-n.r)*r+n.r,g:(i.g-n.g)*r+n.g,b:(i.b-n.b)*r+n.b,a:(i.a-n.a)*r+n.a})},Xo.readability=function(e,t){var o=Xo(e),n=Xo(t);return(Math.max(o.getLuminance(),n.getLuminance())+.05)/(Math.min(o.getLuminance(),n.getLuminance())+.05)},Xo.isReadable=function(e,t,o){var n,i,r=Xo.readability(e,t);switch(i=!1,n=function(e){var t,o;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(o=(e.size||"small").toLowerCase())&&"large"!==o&&(o="small"),{level:t,size:o}}(o),n.level+n.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7}return i},Xo.mostReadable=function(e,t,o){var n,i,r,a,s=null,l=0;i=(o=o||{}).includeFallbackColors,r=o.level,a=o.size;for(var c=0;c<t.length;c++)(n=Xo.readability(e,t[c]))>l&&(l=n,s=Xo(t[c]));return Xo.isReadable(e,s,{level:r,size:a})||!i?s:(o.includeFallbackColors=!1,Xo.mostReadable(e,["#fff","#000"],o))};var gn=Xo.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},fn=Xo.hexNames=function(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[e[o]]=o);return t}(gn);function bn(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function vn(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var o=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),o&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function yn(e){return Math.min(1,Math.max(0,e))}function kn(e){return parseInt(e,16)}function xn(e){return 1==e.length?"0"+e:""+e}function Sn(e){return e<=1&&(e=100*e+"%"),e}function wn(e){return Math.round(255*parseFloat(e)).toString(16)}function Cn(e){return kn(e)/255}var In,jn,Tn,Pn=(jn="[\\s|\\(]+("+(In="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+In+")[,|\\s]+("+In+")\\s*\\)?",Tn="[\\s|\\(]+("+In+")[,|\\s]+("+In+")[,|\\s]+("+In+")[,|\\s]+("+In+")\\s*\\)?",{CSS_UNIT:new RegExp(In),rgb:new RegExp("rgb"+jn),rgba:new RegExp("rgba"+Tn),hsl:new RegExp("hsl"+jn),hsla:new RegExp("hsla"+Tn),hsv:new RegExp("hsv"+jn),hsva:new RegExp("hsva"+Tn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function En(e){return!!Pn.CSS_UNIT.exec(e)}const Rn=m.colorPalettes,An=(e,t,o=null)=>{e=Xo(e).toHsl();const n=o||t,i=t;return Xo({...e,l:Math.floor(Math.random()*(n-i+1)+i)}).toHexString()},On=()=>{const{getPalette:e,setPalette:t,getCustomPalette:o}=(0,_.useGlobalDataColors)(),n=e(),i=o(),[r,a]=(0,c.useState)(n),l=(0,c.useCallback)(((e,o)=>{const n=Xo(o),i=[n._r,n._g,n._b],s=[...r];s[e]={...s[e],color:i},$o()(r[e].color,s[e].color)||(a(s),t(s))}),[a,t,r]),u=(0,c.useCallback)((e=>{a([...e]),t([...e])}),[a,t]),d=e=>()=>{u(e.colors)},{isKubioTheme:p}=(0,w.useSelect)((e=>{var t;const{getSettings:o}=e(m.STORE_KEY);return{isKubioTheme:(null===(t=o())||void 0===t?void 0:t.isKubioTheme)||null}})),g=e=>t=>{l(e,t)},f=(0,c.useCallback)((()=>{const e={slug:"kubio-color-"+(parseInt(r.length)+1),color:[255,255,255]};r.push(e),t(r,!1)}),[t,r]),b=(0,c.useCallback)((e=>{r.splice(e,1),t(r)}),[t,r]),v=(0,s.useDeepMemo)((()=>{const e=[];return h().isEmpty(i)||e.push({label:(0,C.__)("Previous","kubio"),colors:i}),e.concat(Rn)}),[i]);return(0,j.jsxs)(k.PanelBody,{title:(0,C.__)("Color Palette","kubio"),className:"kubio-color-palette-panel",children:[(0,j.jsxs)(k.BaseControl,{children:[(0,j.jsxs)(k.Flex,{justify:"center",className:"",children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)(k.BaseControl,{children:(0,C.__)("Current color scheme","kubio")})}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)("span",{className:"c-components-units-list",children:(0,j.jsx)("span",{role:"button",tabIndex:0,className:"c-components-units-list__item is-selected add-colors-button",onClick:f,children:(0,C.__)("Add colors","kubio")},"palette-add-color")})})]}),(0,j.jsx)(k.Flex,{gap:0,className:"kubio-current-colors-palette",children:r.map((({color:e,slug:t},o)=>{const n=`rgb(${e.join(",")})`;return(0,j.jsx)(ct.ColorIndicatorPopover,{color:n,onChange:g(o),alpha:!1,showPalette:!1,returnRawValue:!0,disabled:!1,hasButton:o>5,buttonIcon:!1,buttonText:(0,C.__)("Remove color","kubio"),onReset:()=>b(o)},`${t}-${o}`)}))})]}),(0,j.jsx)(Nn,{onChange:a}),!p&&(0,j.jsx)(ct.ControlNotice,{className:"notice-general-settings no-padding",content:(0,C.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(k.BaseControl,{label:(0,C.__)("More Palettes","kubio"),className:"more_palettes_base",children:v.map(((e,t)=>(0,j.jsx)(k.BaseControl,{label:e.label,className:Z()("kubio-color-scheme-base-control"),children:(0,j.jsx)(k.Button,{className:"kubio-color-scheme-selector",onClick:d(e),children:(0,j.jsx)("div",{className:"kubio-color-scheme-selector__grid",children:e.colors.map((({slug:e,color:t})=>(0,j.jsx)(ct.ColorIndicator,{value:`rgb(${t.join(",")})`},e)))})},e.label)},t)))})]})},Nn=({onChange:e=h().noop})=>{const{setPalette:t}=(0,_.useGlobalDataColors)(),{isAICapabilityEnabled:o}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t}=e(m.STORE_KEY);return{isAICapabilityEnabled:t()}})),[n,i,r]=Do(),[a]=(0,b.useAIData)(),[s,l]=(0,c.useState)(!1),u=(0,c.useCallback)((async()=>{const{siteContext:o={},pageContext:n={},pageTitle:i=""}=a,{siteMood:r="neutral"}=o;try{l(!0);let a=await(0,b.generateColorScheme)({pageContext:n,siteContext:o,pageTitle:i,mood:r});a=(0,_.normalizeColorPalette)([...a,An(a[1],98,100),An(a[0],5,10)]),t(a),e(a)}catch(e){Vo.Log.error("Error determining site colors",e)}finally{l(!1)}}),[a,t]);return(0,j.jsx)(j.Fragment,{children:o&&(0,j.jsxs)(j.Fragment,{children:[n,(0,j.jsx)(k.BaseControl,{className:"kubio-generate-color-scheme-button",children:(0,j.jsx)(Fe.ProItem,{isProItem:I.AI_IN_PRO,tag:k.Button,icon:Ge.KubioAI,className:Z()("kubio-ai-button"),isBusy:s,onClick:r?u:i,urlArgs:{source:"AI",content:"generate-ai-color-scheme"},children:s?(0,C.__)("Generating color scheme…","kubio"):(0,C.__)("Generate color scheme","kubio")})})]})})},Dn=({areaIdentifier:e})=>(0,w.useSelect)((t=>t(m.STORE_KEY).isEditorSidebarOpened(e)),[])&&(0,j.jsx)(On,{});function Mn({parentAreaIdentifier:e}){return(0,j.jsx)(et,{title:(0,C.__)("Color Scheme","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/color-scheme`,children:(0,j.jsx)(Dn,{areaIdentifier:`${e}/color-scheme`})})}function Bn(){const{globalStyle:e,getStyleDefaultGlobalValue:t}=(0,_.useGlobalDataStyle)(),o={styledComponent:"transition"};return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.PanelBody,{initialOpen:!0,title:(0,C.__)("Effects","kubio"),children:(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Transition Duration","kubio"),value:e.getStyle("transition.duration",{unit:"s"},{...o}),onChange:t=>((t,n,i)=>e.setStyle("transition.duration",n,{...o}))(0,t),onReset:()=>((n,i)=>{const r={...o},a=t(n,r);a?e.setStyle(n,a,r):e.setStyle(n,null,{...r,unset:!0})})("transition.duration"),min:0,max:5,step:.01})})})}const Ln=({areaIdentifier:e})=>{const t=(0,w.useSelect)((t=>t(m.STORE_KEY).isEditorSidebarOpened(e)),[]),o=(0,w.useSelect)((e=>{var t,o;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(o=t.getSettings())||void 0===o?void 0:o.isKubioTheme)||null}));return t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Bn,{}),!o&&(0,j.jsx)(ct.ControlNotice,{className:"notice-general-settings",content:(0,C.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},zn=({parentAreaIdentifier:e})=>(0,j.jsx)(et,{title:(0,C.__)("Global Effects","kubio"),label:(0,C.__)("Effects","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/effects`,children:(0,j.jsx)(Ln,{areaIdentifier:`${e}/effects`})}),Fn=window.kubio.advancedPanel,Gn=()=>{const[e,t]=(0,c.useState)(""),{globalStyle:o,resetToInitialData:n}=(0,_.useGlobalDataStyle)(),i="form-fields",r={type:s.WithDataPathTypes.STYLE,style:i,dataHelper:o};return(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Form fields","kubio"),children:(0,j.jsxs)(k.BaseControl,{label:(0,C.__)("State","kubio"),children:[(0,j.jsx)(Fn.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover","focus","disabled"]}),(0,j.jsx)(ct.ColorWithPath,{label:(0,C.__)("Text color","kubio"),path:"typography.color",state:e,...r,onReset:n("typography.color",{styledComponent:i,state:e})}),(0,j.jsx)(ct.ColorWithPath,{label:(0,C.__)("Background color","kubio"),state:e,path:"background.color",showReset:!0,...r,onReset:n("background.color",{styledComponent:i,state:e})}),(0,j.jsx)(ct.ColorWithPath,{label:(0,C.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:e,...r,onReset:n(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:i,state:e})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.TypographyControlPopupWithPath,{path:"typography",...r,onReset:n("typography",{styledComponent:i})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.BoxUnitValueControlWithPath,{label:(0,C.__)("Padding","kubio"),path:"padding",...r,onReset:n("padding",{styledComponent:i})}),(0,j.jsx)(ct.BoxUnitValueControlWithPath,{label:(0,C.__)("Margin","kubio"),path:"margin",...r,onReset:n("margin",{styledComponent:i})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.BordersAndRadiusWithPath,{path:"border",...r,withColor:!1,onReset:n("border",{styledComponent:i})})]})})},Hn=({styledElement:e="form-submit-button",title:t=(0,C.__)("Form submit button","kubio")})=>{const[o,n]=(0,c.useState)(""),{globalStyle:i,resetToInitialData:r}=(0,_.useGlobalDataStyle)(),a={type:s.WithDataPathTypes.STYLE,style:e,dataHelper:i};return(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:t,children:(0,j.jsxs)(k.BaseControl,{label:(0,C.__)("State","kubio"),children:[(0,j.jsx)(Fn.StatesControl,{activeState:o,setActiveState:n,availableStates:["normal","hover","disabled"]}),(0,j.jsx)(ct.GradientColorPickerWithPath,{label:(0,C.__)("Background","kubio"),path:"background",state:o,...a,onReset:r("background",{styledComponent:e,state:o})}),(0,j.jsx)(ct.ColorWithPath,{label:(0,C.__)("Text color","kubio"),path:"typography.color",state:o,...a,onReset:r("typography.color",{styledComponent:e,state:o})}),(0,j.jsx)(ct.ColorWithPath,{label:(0,C.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:o,...a,onReset:r(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:e,state:o})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.TypographyControlPopupWithPath,{path:"typography",...a,onReset:r("typography",{styledComponent:e})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.BoxUnitValueControlWithPath,{label:(0,C.__)("Padding","kubio"),path:"padding",...a,onReset:r("padding",{styledComponent:e})}),(0,j.jsx)(ct.BoxUnitValueControlWithPath,{label:(0,C.__)("Margin","kubio"),path:"margin",...a,onReset:r("margin",{styledComponent:e})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.BordersAndRadiusWithPath,{path:"border",...a,withColor:!1,onReset:r("border",{styledComponent:e})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ct.BoxShadowWithPath,{path:"boxShadow",...a,onReset:r("boxShadow",{styledComponent:e})})]})})},Un=({areaIdentifier:e})=>{const t=(0,w.useSelect)((t=>t(m.STORE_KEY).isEditorSidebarOpened(e)),[]),o=(0,w.useSelect)((e=>{var t,o;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(o=t.getSettings())||void 0===o?void 0:o.isKubioTheme)||null}));return t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Gn,{}),(0,j.jsx)(Hn,{styledElement:"form-button",title:(0,C.__)("Form button","kubio")}),(0,j.jsx)(Hn,{styledElement:"form-submit-button",title:(0,C.__)("Form submit button","kubio")}),(0,j.jsx)(Hn,{styledElement:"form-reset-button",title:(0,C.__)("Form reset button","kubio")}),!o&&(0,j.jsx)(ct.ControlNotice,{className:"notice-general-settings",content:(0,C.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},Wn=({parentAreaIdentifier:e})=>(0,j.jsx)(et,{title:(0,C.__)("Form Elements","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/form-elements`,children:(0,j.jsx)(Un,{areaIdentifier:`${e}/form-elements`})}),Vn={H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6"},Kn={headingType:{values:Vn,options:[{value:Vn.H1,label:"H1"},{value:Vn.H2,label:"H2"},{value:Vn.H3,label:"H3"},{value:Vn.H4,label:"H4"},{value:Vn.H5,label:"H5"},{value:Vn.H6,label:"H6"}]}},$n=[{value:"dropdown",label:(0,C.__)("Dropdown","kubio")},{value:"flags",label:(0,C.__)("Flags","kubio")}],qn={show:!0,displayAs:"flags",showFlags:!0,showNames:!1},Yn=()=>{const[e,t]=(0,_.useGlobalDataSetting)("googleFonts.serveLocally");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ct.ToggleControl,{label:(0,C.__)("Serve Google Fonts locally","kubio"),value:e,onChange:t}),(0,j.jsx)(ct.ControlNotice,{className:"notice-general-settings no-padding",content:(0,C.__)("When this option is turned on the Google Fonts used in your site will be downloaded and served from your server instead of the Google server. This will minimize the DNS requests, reduce the Cumulative Layout Shift and serve your Google Fonts in a 100% GDPR compliant way.","kubio")})]})},{weightOptions:Zn,sizeUnitsOptions:Xn,sizeUnitsConfig:Qn,styleOptions:Jn,transformOptions:ei,decorationOptions:ti}=ct.TypographyConfig,oi=e=>{const{globalStyle:t,getStyleDefaultGlobalValue:o,getStyleInitialDefaultGlobalValue:n}=(0,_.useGlobalDataStyle)();return((e,t,o,n)=>{const i={styledComponent:"body"};return{setTypography:(o,n,r={})=>{const a=r.state?`states.${r.state}`:null;r=(0,p.omit)(r,"state");const s=["typography","holders",t,a,o].filter(Boolean).join("."),l=h().merge({},i,r);e.setStyle(s,n,l)},getTypography:(o,n="",r={})=>{const a=r.state?`states.${r.state}`:null;r=(0,p.omit)(r,"state");const s=["typography","holders",t,a,o].filter(Boolean).join("."),l=h().merge({},i,r);return e.getStyle(s,n,l)},unsetTypography:(o,r={})=>{const a=r.state?`states.${r.state}`:null;r=(0,p.omit)(r,"state");const s=["typography","holders",t,a,o].filter(Boolean).join("."),l=h().merge({},i,r),c=n(s,l);e.setStyle(s,c,l)}}})(t,e,0,n)},ni=({getTypography:e,setTypography:t,unsetTypography:o,showTransform:n=!1,showDecoration:i=!0})=>(0,j.jsx)(ct.PopoverOptionsButton,{label:(0,C.__)("Advanced","kubio"),popoverWidth:250,popupContent:(0,j.jsxs)(j.Fragment,{children:[n&&(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Transform","kubio"),options:ei,value:e("transform"),onChange:e=>t("transform",e)}),i&&(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Decoration","kubio"),options:ti,value:e("decoration",""),onChange:e=>t("decoration",e)}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Style","kubio"),options:Jn,value:e("style"),onChange:e=>t("style",e)}),(0,j.jsx)(ct.SeparatorHorizontalLine,{fit:!0}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Line Height","kubio"),value:e("lineHeight"),onChange:e=>t("lineHeight",e),onReset:()=>o("lineHeight"),defaultUnit:"",min:0,max:10,step:.1}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Letter Spacing","kubio"),value:e("letterSpacing",{value:"",unit:"px"}),onChange:e=>t("letterSpacing",e),onReset:()=>o("letterSpacing"),min:0,max:10,step:.1,units:Xn})]})}),ii=({element:e="h1"})=>{const{getTypography:t,setTypography:o,unsetTypography:n}=oi(e),{getFontWeights:i}=(0,_.useGlobalDataFonts)(),r=i(t("family")),a=Zn.filter((e=>-1!==r.indexOf(e.value)));return(0,j.jsxs)(k.BaseControl,{children:[(0,j.jsxs)(k.Flex,{className:"kubio-font-family-container general-typography",children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)("span",{className:"kubio-font-family-label",children:(0,C.__)("Font family","kubio")})}),(0,j.jsx)(k.FlexBlock,{className:"kubio-font-family-container__select",children:(0,j.jsx)(ct.FontPicker,{value:t("family"),onChange:e=>o("family",e)})})]}),(0,j.jsx)(ct.GutentagSelectControl,{className:"kubio-select-control-container",label:(0,C.__)("Font weight","kubio"),options:a,value:parseInt(t("weight")),onChange:e=>o("weight",e)}),(0,j.jsx)(ct.InlineLabeledControl,{label:(0,C.__)("Color","kubio"),children:(0,j.jsx)(ct.ColorIndicatorPopover,{color:t("color"),onChange:e=>o("color",e),onReset:()=>n("color"),showReset:!0})}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Size","kubio"),units:Xn,optionsByUnit:Qn,onChange:e=>o("size",e),value:t("size"),onReset:()=>n("size")}),(0,j.jsx)(ni,{getTypography:t,setTypography:o,unsetTypography:n,showTransform:!0})]})},ri=()=>{const[e,t]=(0,c.useState)(""),{getTypography:o,setTypography:n,unsetTypography:i}=oi("a");return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(k.BaseControl,{children:[(0,j.jsxs)(k.Flex,{className:"kubio-font-family-container",children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)("span",{className:"kubio-font-family-label",children:(0,C.__)("Font family","kubio")})}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(ct.FontPicker,{label:(0,C.__)("Font family","kubio"),value:o("family"),onChange:e=>n("family",e)})})]}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Font Weight","kubio"),options:Zn,value:parseInt(o("weight")),onChange:e=>n("weight",e)}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Size","kubio"),units:Xn,value:o("size"),onChange:e=>n("size",e),onReset:()=>i("size")}),(0,j.jsx)(k.BaseControl,{label:(0,C.__)("State","kubio"),children:(0,j.jsx)(Fn.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover"]})}),(0,j.jsx)(ct.InlineLabeledControl,{label:(0,C.__)("Color","kubio"),children:(0,j.jsx)(ct.ColorIndicatorPopover,{color:o("color","",{state:e}),onChange:t=>n("color",t,{state:e}),onReset:()=>{i("color",{state:e})},showReset:!0})}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Decoration","kubio"),options:ti,value:o("decoration","",{state:e}),onChange:t=>n("decoration",t,{state:e})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(ni,{getTypography:o,setTypography:n,unsetTypography:i,showTransform:!0,showDecoration:!1})]})})},ai=()=>{const[e,t]=(0,c.useState)("h1"),o=(0,w.useSelect)((e=>{var t,o;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(o=t.getSettings())||void 0===o?void 0:o.isKubioTheme)||null}));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Headings","kubio"),children:[(0,j.jsx)(ct.ToggleGroup,{label:(0,C.__)("Heading Type","kubio"),options:Kn.headingType.options,value:e,onChange:t}),(0,j.jsx)(ii,{element:e})]}),(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Texts","kubio"),children:(0,j.jsx)(ii,{element:"p"})}),(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Lead text","kubio"),children:(0,j.jsx)(ii,{element:"lead"})}),(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Links","kubio"),children:(0,j.jsx)(ri,{})}),(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Adobe TypeKit","kubio"),children:(0,j.jsx)(ct.TypeKitSetupInterface,{showNotice:!0})}),(0,j.jsx)(k.PanelBody,{initialOpen:!1,title:(0,C.__)("Google Fonts Settings","kubio"),children:(0,j.jsx)(Yn,{showNotice:!0})}),!o&&(0,j.jsx)(ct.ControlNotice,{className:"notice-general-settings",content:(0,C.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},si=({areaIdentifier:e})=>(0,w.useSelect)((t=>t(m.STORE_KEY).isEditorSidebarOpened(e)),[])?(0,j.jsx)(ai,{}):(0,j.jsx)(j.Fragment,{}),li=({parentAreaIdentifier:e})=>(0,j.jsx)(et,{title:(0,C.__)("Typography","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/typography`,children:(0,j.jsx)(si,{areaIdentifier:`${e}/typography`})});let ci=null;const ui=()=>{const{logoImage:e,alternateLogoImage:t,setLogoImage:o,setAlternateLogoImage:n}=(0,_.useSiteLogoImages)(),[i,r]=(0,S.useEntityProp)("root","site","title"),[a,s]=(0,S.useEntityProp)("root","site","description"),{siteIconUrl:l}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),o=t("root","site"),n=ci||(null==o?void 0:o.site_icon),i=n&&e("core").getEntityRecord("root","media",n);return{siteIconUrl:null==i?void 0:i.source_url}}),[ci]),{editEntityRecord:u}=(0,w.useDispatch)("core"),d=(0,c.useCallback)((e=>{var t;const o=null!==(t=parseInt(e))&&void 0!==t?t:void 0;ci=o,u("root","site",void 0,{site_icon:o})}),[u]);return(0,j.jsxs)(k.PanelBody,{title:(0,C.__)("Site Identity","kubio"),className:"kubio-site-identity-panel",children:[(0,j.jsx)(k.BaseControl,{label:(0,C.__)("Site title","kubio"),id:"site-title-control",children:(0,j.jsx)(ct.InputControl,{value:i||"",onChange:e=>r(e)})}),(0,j.jsx)(k.BaseControl,{label:(0,C.__)("Tagline","kubio"),id:"tagline-control",children:(0,j.jsx)(ct.InputControl,{value:a||"",onChange:e=>s(e)})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(k.BaseControl,{label:(0,C.__)("Logo image","kubio"),id:"logo-image-control",children:(0,j.jsx)(ct.MediaPicker,{value:e,type:"image",showButton:!0,onReset:()=>{o(null)},buttonLabel:(0,C.__)("Change image","kubio"),removeButtonLabel:(0,C.__)("Reset image","kubio"),onChange:e=>o(e.id)})}),(0,j.jsx)(k.BaseControl,{label:(0,C.__)("Alternate logo image","kubio"),id:"alternate-logo-image-control",children:(0,j.jsx)(ct.MediaPicker,{value:t,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{n(null)},buttonLabel:(0,C.__)("Change alternate image","kubio"),removeButtonLabel:(0,C.__)("Reset image","kubio"),onChange:e=>n(e.url)})}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(k.BaseControl,{label:(0,C.__)("Site Icon","kubio"),id:"site-icon-control",help:(0,C.__)("Site Icons are what you see in browser tabs, bookmark bars, and within the WordPress mobile apps. Upload one here!","kubio"),children:(0,j.jsx)(ct.MediaPicker,{value:""!==l?l:null,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{d(null)},buttonLabel:(0,C.__)("Set site icon","kubio"),onChange:e=>d(e.id)})})]})},di=({areaIdentifier:e})=>{const t=(0,w.useSelect)((e=>e(m.STORE_KEY).getEditorOpenedSidebar()),[]),o=null==t?void 0:t.endsWith(e);return(0,j.jsx)(j.Fragment,{children:o&&(0,j.jsx)(ui,{})})};function pi({parentAreaIdentifier:e}){return(0,j.jsx)(et,{title:(0,C.__)("Site Identity","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/site-identity`,children:(0,j.jsx)(di,{areaIdentifier:`${e}/site-identity`})})}const hi=()=>{const{globalStyle:e,getPropDefaultGlobalValue:t,getStyleDefaultGlobalValue:o}=(0,_.useGlobalDataStyle)(),n=(t,o,n)=>e.getPropInMedia(t,o,{...n}),i=(t,o)=>n=>e.setPropInMedia(t,n,{...o}),r=(o,n={})=>()=>{const i=t(o,n);e.setPropInMedia(o,i,n)},a={styledComponent:"sectionSpacing"};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(k.PanelBody,{initialOpen:!0,title:(0,C.__)("Spacing","kubio"),children:[(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Horizontal space between buttons/links","kubio"),units:ct.sizeUnitsOptions,onChange:i("hSpace"),value:n("hSpace",{unit:"px"}),onReset:r("hSpace")}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Column contents vertical spacing","kubio"),units:ct.sizeUnitsOptions,onChange:i("vSpace"),value:n("vSpace",{unit:"px"}),onReset:r("vSpace")}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Section vertical spacing","kubio"),units:ct.sizeUnitsOptions,value:e.getStyle("padding.top",{unit:"px"},a),onChange:t=>{e.setStyle("padding.top",t,a),e.setStyle("padding.bottom",t,a)},onReset:()=>{const t=o("padding.top",a);e.setStyle("padding.top",t,a);const n=o("padding.bottom",a);e.setStyle("padding.bottom",n,a)}})]})})},mi=({areaIdentifier:e})=>{const t=(0,w.useSelect)((t=>t(m.STORE_KEY).isEditorSidebarOpened(e)),[]),o=(0,w.useSelect)((e=>{var t,o;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(o=t.getSettings())||void 0===o?void 0:o.isKubioTheme)||null}));return t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(hi,{}),!o&&(0,j.jsx)(ct.ControlNotice,{className:"notice-general-settings",content:(0,C.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},gi=({parentAreaIdentifier:e})=>(0,j.jsx)(et,{title:(0,C.__)("Global Spacing","kubio"),label:(0,C.__)("Spacing","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/spacing`,children:(0,j.jsx)(mi,{areaIdentifier:`${e}/spacing`})}),fi="language-selector-outer",bi="language-selector-flags-container",_i="language-selector",vi=()=>{const e=(0,I.getBackendData)("multilanguage.isWpmlActive"),t=(0,I.getBackendData)("multilanguage.isPolylangActive"),{globalStyle:o,resetToInitialData:n}=(0,_.useGlobalDataStyle)(),i=o.getProp("multilanguage",{}),r=h().merge({},qn,i),{show:a,displayAs:l,showFlags:c,showNames:u}=r;return(0,j.jsxs)(k.PanelBody,{title:(0,C.__)("Language Selector Properties","kubio"),children:[(0,j.jsx)(ct.ToggleControl,{label:(0,C.__)("Show language selector","kubio"),value:a,onChange:e=>{o.setProp("multilanguage.show",e),o.setStyle("display",e?"block":"none",{styledComponent:fi})}}),a&&(0,j.jsxs)(j.Fragment,{children:[t&&(0,j.jsx)(k.SelectControl,{options:$n,label:(0,C.__)("Display as","kubio"),type:s.WithDataPathTypes.ATTRIBUTE,value:l,onChange:e=>{o.setProp("multilanguage.displayAs",e)}}),(0,j.jsx)(ct.ColorIndicatorPopover,{label:(0,C.__)("Background color","kubio"),showReset:!0,value:o.getStyle("background.color","white",{styledComponent:fi}),onReset:()=>{o.getStyle("background.color",null,{styledComponent:fi,unset:!0})},onChange:e=>{o.setStyle("background.color",e+" !important",{styledComponent:fi})}}),("flags"===l||e)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ct.ToggleControl,{label:(0,C.__)("Show flags","kubio"),value:c,onChange:e=>{o.setProp("multilanguage.showFlags",e),o.setStyle("display",e?"inline-block !important":"none",{styledComponent:"language-selector-flags"})},disabled:!u}),(0,j.jsx)(ct.ToggleControl,{label:(0,C.__)("Show names","kubio"),value:u,onChange:e=>{o.setProp("multilanguage.showNames",e),o.setStyle("display",e?"inline-block !important":"none",{styledComponent:"language-selector-names"})},disabled:!c})]}),(0,j.jsx)(ct.BordersAndRadiusControl,{value:o.getStyle("border",null,{styledComponent:fi}),onChange:e=>{o.setStyle("border",e,{styledComponent:fi})},onReset:()=>{o.setStyle("border",null,{styledComponent:fi,unset:!0})},showBorder:!1}),(0,j.jsx)(ct.RangeWithUnitControl,{label:(0,C.__)("Top offset","kubio"),value:o.getStyle("top",150,{styledComponent:_i}),onChange:e=>{o.setStyle("top",e,{styledComponent:_i})},max:300,onReset:()=>{o.setStyle("top",null,{styledComponent:_i,unset:!0})}}),(0,j.jsx)(ct.BoxControl,{label:(0,C.__)("Flags padding","kubio"),values:o.getStyle("padding",null,{styledComponent:bi}),onChange:e=>{o.setStyle("padding",e,{styledComponent:bi})},onReset:()=>o.setStyle("padding",null,{styledComponent:bi,unset:!0})})]})]})};function yi({parentAreaIdentifier:e}){return(0,j.jsx)(et,{title:(0,C.__)("Multi language","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/multilanguage`,children:(0,j.jsx)(vi,{})})}function ki({parentAreaIdentifier:e}){const t=`${e}/general-settings`,o=(0,I.getBackendData)("multilanguage.hasTranslator");return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(et,{title:(0,C.__)("General Settings","kubio"),areaIdentifier:t,children:[(0,j.jsx)(pi,{parentAreaIdentifier:t}),o&&(0,j.jsx)(yi,{parentAreaIdentifier:t}),(0,j.jsx)(li,{parentAreaIdentifier:t}),(0,j.jsx)(Wn,{parentAreaIdentifier:t}),(0,j.jsx)(Mn,{parentAreaIdentifier:t}),(0,j.jsx)(gi,{parentAreaIdentifier:t}),(0,j.jsx)(zn,{parentAreaIdentifier:t}),(0,j.jsx)(Wo,{parentAreaIdentifier:t})]})})}const xi=({addItem:e})=>{const[t,o]=(0,c.useState)(!1),[n,i]=(0,c.useState)((0,lo.generateItemInitialData)()),r=(0,c.useRef)(null);return(0,j.jsxs)("div",{ref:r,children:[(0,j.jsx)(k.Button,{onClick:()=>o(!0),className:"kubio-button-100",isPrimary:!0,children:(0,C.__)("Add menu item","kubio")}),t&&(0,j.jsx)(k.Popover,{position:"middle left",className:"kubio-options-popover",onClose:()=>{o(!1)},anchorRef:r.current,offset:6,anchor:r.current,flip:!0,shift:!0,resize:!1,children:(0,j.jsx)(ct.MenuItemOptions,{item:n,isAdd:!0,onChange:t=>{e(t),o(!1),i((0,lo.generateItemInitialData)())},afterUpdateClick:()=>o(!1),updateLabel:(0,C.__)("Add item","kubio")})})]})},Si=({item:e,onItemChange:t,onRemoveItem:o,onTogglePopover:n})=>{const[i,r]=(0,c.useState)(e);(0,c.useEffect)((()=>{r(e)}),[e]);const a=e=>{const o={...i,...e};r(o),t(o)},s=(0,c.useRef)();return(0,j.jsx)("div",{ref:s,children:(0,j.jsxs)(k.Flex,{className:"kubio-inspector-menu-item-content",children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)(k.Tooltip,{text:(0,I.stripTags)(i.label),children:(0,j.jsx)("span",{className:"kubio-inspector-menu-item-label",children:(0,I.stripTags)(i.label)})})}),(0,j.jsx)(k.FlexItem,{className:"kubio-inspector-menu-items-settings",children:(0,j.jsxs)(k.Flex,{gap:1,children:[(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Button,{className:"kubio-inspector-menu-remove-item",isSmall:!0,iconSize:18,onClick:()=>o(i),icon:Ge.DeleteItemIcon})}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(ct.PopoverOptionsButton,{iconSize:18,popoverClass:"kubio-menu-edit-popover",popoverAnchorRef:s,popupContent:e=>(0,j.jsx)(ct.MenuItemOptions,{item:i,onChange:a,afterUpdateClick:e}),onPopoverClose:()=>n(!1),onPopoverOpen:()=>n(!0)})})]})})]})})},wi=(e=[],t=0)=>e.filter((e=>e.parent===t)).map((t=>({...t,children:t.id?wi(e,t.id):[]}))),Ci=(e,t=0)=>e.map(((e,o)=>[{...(0,p.omit)(e,["children","block"]),order:o+1,parent:t},...Ci(e.children||[],e.id)])).reduce(((e,t)=>e.concat(t)),[]),Ii=({items:e=[],setItems:t,isResolving:o,hasResolved:n})=>{const[i,r]=(0,c.useState)(-1/0),a=(0,c.useMemo)((()=>wi(e)),[e]),s=(0,c.useCallback)((e=>{t(e,!0)}),[t]),l=(0,c.useCallback)((t=>{let o=(0,p.cloneDeep)(e).filter((e=>e.id!==t.id)).map((e=>(e.parent===t.id&&(e.parent=t.parent),e))),n=0;o=o.map((e=>e.parent===t.parent?(n++,{...e,order:n}):e)),s(o)}),[s]),u=(0,c.useCallback)((e=>{const t=Ci(e);s(t)}),[s]),d=(0,c.useCallback)((t=>{if(!t.id)return void console.error("Cannot update item without id");const o=(0,p.cloneDeep)(e).map((e=>e.id===t.id?{...e,...t}:e));s(o)}),[s]),h=(0,c.useCallback)((({item:e})=>(0,j.jsx)(Si,{item:e,onItemChange:d,onRemoveItem:l,onTogglePopover:t=>{r(t?e.id:-1/0)}})),[r,d,l]),m=a.length>0,g=(0,c.useCallback)((e=>e.id===i),[i]);return(0,j.jsx)(k.BaseControl,{children:(0,j.jsxs)("div",{className:"kubio-inspector-menu-tree",children:[o&&(0,j.jsx)(ct.LoadingPlaceholder,{message:(0,C.__)("Loading menu …","kubio")}),n&&m&&(0,j.jsx)(ct.SortableTree,{items:a,renderItem:h,handler:!0,collapsable:!1,onChange:u,isActive:g}),n&&!m&&(0,j.jsx)(ct.SmallPlaceholder,{message:(0,C.__)("Empty menu","kubio")})]})})},ji=({menu:e})=>{const{setItems:t,items:o=[],isResolving:n,hasResolved:i}=(0,lo.useMenuBlockEditor)(e.id),r=(0,c.useCallback)((e=>{t([...o,{...e,order:o.length+1}],!0)}),[o]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(k.PanelBody,{title:(0,C.__)("Menu Structure","kubio"),children:[(0,j.jsx)(Ii,{menuId:e.id,items:o,setItems:t,isResolving:n,hasResolved:i}),(0,j.jsx)(xi,{addItem:r})]})})},Ti=({menu:e,areaIdentifier:t})=>{const o=(0,w.useSelect)((e=>e(m.STORE_KEY).getEditorOpenedSidebar()));return o&&-1!==o.indexOf(t)&&(0,j.jsx)(ji,{menu:e})},Pi=({parentAreaIdentifier:e,menu:t})=>{const o=`${e}/menu-${t.id}`;return(0,j.jsx)(et,{title:(0,C.sprintf)(// translators: %s is for the menu name
// translators: %s is for the menu name
(0,C.__)("Menu: %s","kubio"),t.name||(0,C.__)("Unnamed menu","kubio")),label:t.name||(0,C.__)("Unnamed menu","kubio"),parentAreaIdentifier:e,areaIdentifier:o,children:(0,j.jsx)(Ti,{areaIdentifier:o,menu:t})})},Ei=()=>{const[e,t]=(0,c.useState)(!1),[o,n]=(0,c.useState)(!1),[i,r]=(0,c.useState)(""),a=(0,c.useRef)(),{saveMenu:s}=(0,w.useDispatch)("core"),{createErrorNotice:l,createInfoNotice:u}=(0,w.useDispatch)(d.store),p=(0,c.useCallback)((()=>{o?u((0,C.__)("Another menu creation is in progress","kubio"),{type:"snackbar"}):(t(!e),r(""))}),[e,t,o]),h=(0,c.useCallback)((async()=>{if(!o){n(!0);try{await s({name:i})}catch(e){l((0,C.__)("Menu creation failed","kubio"),{type:"snackbar"})}t(!1),n(!1)}}),[t,s,i,o,n]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.BaseControl,{className:"kubio-create-menu-button",children:(0,j.jsx)(k.Button,{onClick:p,isPrimary:!0,className:"kubio-button-100",ref:a,isBusy:o,children:(0,C.__)("Create menu","kubio")})}),e&&(0,j.jsx)(k.Popover,{position:"middle left",className:"kubio-options-popover",anchorRef:a.current,onClose:()=>t(!1),offset:6,children:(0,j.jsxs)("div",{children:[(0,j.jsx)(k.BaseControl,{children:(0,j.jsx)(ct.InputControl,{label:(0,C.__)("Menu name","kubio"),onChange:r,value:i,disabled:o})}),(0,j.jsx)(k.BaseControl,{children:(0,j.jsx)(k.Button,{onClick:h,isPrimary:!0,disabled:o,isBusy:o,className:"kubio-button-100",children:(0,C.__)("Create menu","kubio")})})]})})]})},Ri=({areaIdentifier:e})=>{const{menus:t}=(0,w.useSelect)((e=>{const{getMenus:t,isResolving:o,hasFinishedResolution:n}=e("core"),i=[{per_page:-1}];return{menus:t(...i),isResolvingMenus:o("getMenus",i),hasResolvedMenus:n("getMenus",i)}}));return(0,j.jsx)(j.Fragment,{children:null==t?void 0:t.map((t=>(0,j.jsx)(Pi,{parentAreaIdentifier:e,menu:t},t.id)))})};function Ai({parentAreaIdentifier:e}){const t=`${e}/menus-settings`;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(et,{title:(0,C.__)("Menus","kubio"),areaIdentifier:t,children:[(0,j.jsx)(Ri,{areaIdentifier:t}),(0,j.jsx)(Ei,{})]})})}const Oi=function(){return(0,j.jsx)($.PostTypeSupportCheck,{supportKeys:["comments","trackbacks"],children:(0,j.jsxs)(k.PanelBody,{title:(0,C.__)("Discussion","kubio"),children:[(0,j.jsx)($.PostTypeSupportCheck,{supportKeys:"comments",children:(0,j.jsx)(k.PanelRow,{children:(0,j.jsx)($.PostComments,{})})}),(0,j.jsx)($.PostTypeSupportCheck,{supportKeys:"trackbacks",children:(0,j.jsx)(k.PanelRow,{children:(0,j.jsx)($.PostPingbacks,{})})})]})})};var Ni=o(5358);const Di=(0,w.withSelect)((e=>{const{getCurrentPostType:t}=e(Ni.Ls),{getPostType:o}=e(S.store);return{postType:o(t())}})),Mi=(0,x.compose)(Di)((function({postType:e}){return(0,j.jsx)($.PostFeaturedImageCheck,{children:(0,j.jsx)(k.PanelBody,{title:(0,p.get)(e,["labels","featured_image"],(0,C.__)("Featured image","kubio")),children:(0,j.jsx)($.PostFeaturedImage,{})})})})),Bi=function(){const{postType:e}=(0,w.useSelect)((e=>{const{getCurrentPostType:t}=e(Ni.Ls),{getPostType:o}=e(S.store);return{postType:o(t())}}),[]);return e?(0,j.jsx)($.PageAttributesCheck,{children:(0,j.jsxs)(k.PanelBody,{title:(0,p.get)(e,["labels","attributes"],(0,C.__)("Page attributes","kubio")),children:[(0,j.jsx)($.PageAttributesParent,{}),(0,j.jsx)(k.PanelRow,{children:(0,j.jsx)($.PageAttributesOrder,{})})]})}):null},Li=function(){return(0,j.jsx)($.PostExcerptCheck,{children:(0,j.jsx)(k.PanelBody,{title:(0,C.__)("Excerpt","kubio"),children:(0,j.jsx)($.PostExcerpt,{})})})},zi=(0,x.compose)([(0,w.withSelect)((e=>{const{isPermalinkEditable:t,getCurrentPost:o,isCurrentPostPublished:n,getPermalinkParts:i,getEditedPostAttribute:r,getEditedPostSlug:a}=e($.store),{getPostType:s}=e(S.store),{link:l}=o(),c=s(r("type")),u=i();return{postLink:l,isEditable:t(),isPublished:n(),isViewable:(0,p.get)(c,["viewable"],!1),postSlug:(0,Lo.safeDecodeURIComponent)(a()),postTypeLabel:(0,p.get)(c,["labels","view_item"]),hasPermalinkParts:!!u,permalinkPrefix:null==u?void 0:u.prefix,permalinkSuffix:null==u?void 0:u.suffix}})),(0,x.ifCondition)((({isEnabled:e,postLink:t,isViewable:o,hasPermalinkParts:n})=>e&&t&&o&&n))])((function({postLink:e,permalinkPrefix:t,permalinkSuffix:o,editPermalink:n,postSlug:i,postTypeLabel:r,isEditable:a}){const[s,l]=(0,c.useState)(!1);let u,d,p;return a&&(u=t&&(0,j.jsx)("span",{className:"edit-post-post-link__link-prefix",children:t}),d=i&&(0,j.jsx)("span",{className:"edit-post-post-link__link-post-name",children:i}),p=o&&(0,j.jsx)("span",{className:"edit-post-post-link__link-suffix",children:o})),(0,j.jsxs)(k.PanelBody,{title:(0,C.__)("Permalink","kubio"),children:[a&&(0,j.jsxs)("div",{className:"editor-post-link",children:[(0,j.jsx)(ct.InputControl,{label:(0,C.__)("URL Slug","kubio"),value:s?"":i,onChange:e=>{n(e),e?s&&l(!1):s||l(!0)},onBlur:e=>{n((0,$.cleanForSlug)(e.target.value)),s&&l(!1)}}),(0,j.jsxs)("p",{children:[(0,C.__)("The last part of the URL.","kubio")," ",(0,j.jsx)(k.ExternalLink,{href:"https://wordpress.org/support/article/writing-posts/#post-field-descriptions",children:(0,C.__)("Read about permalinks","kubio")})]})]}),(0,j.jsx)("h3",{className:"edit-post-post-link__preview-label",children:r||(0,C.__)("View post","kubio")}),(0,j.jsx)("div",{className:"edit-post-post-link__preview-link-container",children:(0,j.jsx)(k.ExternalLink,{className:"edit-post-post-link__link",href:e,target:"_blank",children:a?(0,j.jsxs)(j.Fragment,{children:[u,d,p]}):e})})]})})),Fi=function({taxonomy:e,children:t}){const o=(0,p.get)(e,["labels","menu_name"]);return o?(0,j.jsx)(k.PanelBody,{title:o,children:t}):null},Gi=function(){return(0,j.jsx)($.PostTaxonomiesCheck,{children:(0,j.jsx)($.PostTaxonomies,{taxonomyWrapper:(e,t)=>(0,j.jsx)(Fi,{taxonomy:t,children:e})})})};function Hi({layoutBlock:e}){const{dataHelper:t}=(0,s.useKubioDataHelper)(e),o=(0,Ue.useQueryLayout)(t);return(0,j.jsx)(ct.SelectWithIconControl,{label:(0,C.__)("Layout","kubio"),...o})}const Ui=(0,x.compose)([(0,w.withSelect)((e=>{const{getPage:t=h().noop}=e("kubio/edit-site")||{};return{currentPage:t()}}))])((function(e){const{currentPage:t}=e,{getBlocks:o}=(0,w.useSelect)("core/block-editor"),n=h().get(t,["context","postId"]),[i,r]=(0,c.useState)();return(0,c.useEffect)((()=>{const e=o(),t=(0,I.findBlockByName)(e,"kubio/query-layout");r(t)}),[o,n]),i?(0,j.jsx)(k.PanelBody,{title:(0,C.__)("Blog layout","kubio"),initialOpen:!0,children:(0,j.jsx)(Hi,{...e,layoutBlock:i})}):null})),Wi=function({onNewTemplate:e}){const[t,o]=(0,c.useState)(!1);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"edit-post-template__actions",children:[(0,j.jsx)(Fe.ProItem,{tag:k.Button,isPrimary:!0,onClick:()=>o(!0),urlArgs:{source:"template",content:"create-new"},children:(0,C.__)("Create new template","kubio")}),t&&(0,j.jsx)(ct.TemplateWizard,{onNewTemplate:e,onClose:()=>{o(!1)}})]})})},Vi=function(){const{currentPostType:e,currentTemplate:t,currentTemplateLabel:o,availableTemplates:n}=(0,w.useSelect)((e=>{var t;const{getCurrentPageTemplate:o,getCurrentPostType:n,getAvailablePageTemplates:i}=e(m.STORE_KEY),r=n();let a=o();r===a&&(a="");const s=i();return{currentPostType:r,currentTemplate:a,currentTemplateLabel:(null===(t=(0,p.find)(s,{value:a}))||void 0===t?void 0:t.label)||"",availableTemplates:s}}),[]),{onNewTemplate:i,assignTemplate:r,assignClassicTemplate:a}=(0,s.useTemplateData)("header"),l=(0,s.useDeepMemo)((()=>{const e=n.reduce(((e,t)=>{const o=t.source||"custom";return{...e,[o]:[...e[o]||[],t]}}),{});return m.templateGroupPriorities.map((t=>({label:m.templateGroups[t],items:e[t]}))).filter((e=>{var t;return null===(t=e.items)||void 0===t?void 0:t.length}))}),[n]);return"page"!==e||"front-page"===(null==t?void 0:t.replace(".php",""))?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)(k.PanelBody,{title:(0,C.sprintf)(/* translators: %s: template title */ /* translators: %s: template title */(0,C.__)("Template: %s","kubio"),o),children:[(0,j.jsx)(ct.GutentagSelectControl,{hideLabelFromVision:!0,label:(0,C.__)("Template:","kubio"),value:t,onChange:async function(e){Object.values(s.defaultTemplatesByPostType).includes(e)&&(e="");const t=n.find((t=>t.value===e));t&&((null==t?void 0:t.isClassicTemplate)?a(e):r(e))},options:l}),(0,j.jsx)(Wi,{onNewTemplate:i})]})},Ki=["page","post","product"],$i=({areaIdentifier:e})=>{const{currentSidebar:t,isInnerPage:o,isWooPage:n}=(0,w.useSelect)((e=>({isWooPage:e(m.STORE_KEY).getIsWooCommercePage(),currentSidebar:e(m.STORE_KEY).getEditorOpenedSidebar(),isInnerPage:e(m.STORE_KEY).getIsInnerPage()})),[]),i=null==t?void 0:t.endsWith(e),r=o&&!n;return(0,j.jsx)("span",{className:"kubio-page-settings",children:i&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ui,{}),r&&(0,j.jsx)(Vi,{}),(0,j.jsx)(zi,{}),(0,j.jsx)(Gi,{}),(0,j.jsx)(Mi,{}),(0,j.jsx)(Li,{}),(0,j.jsx)(Oi,{}),(0,j.jsx)(Bi,{})]})})};function qi({parentAreaIdentifier:e}){const t=`${e}/page-settings`,{postType:o}=(0,w.useSelect)((e=>{const{getCurrentPostType:t}=e(m.STORE_KEY);return{postType:t()}}),[]);return Ki.includes(o)?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(et,{title:(0,C.__)("Page Settings","kubio"),areaIdentifier:t,children:(0,j.jsx)($i,{areaIdentifier:t})})}):null}const Yi=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),Zi={family:"Open Sans"},Xi={family:"Work Sans"},Qi={family:"Roboto"},Ji={family:"Playfair Display"},er={family:"Inter"},tr={family:"Offside"},or={family:"Lekton"},nr={family:"Architects Daughter"},ir={family:"Poppins"},rr={family:"Merriweather"},ar={family:"Hlind"},sr={family:"Alice"},lr={family:"Montserrat"},cr={family:"Roboto Mono"},ur={family:"Fauna One"},dr={family:"Josefin Sans"},pr={family:"PT Sans"},hr={family:"Pontano Sans"},mr={family:"Source Sans Pro"},gr={family:"Mulish"},fr={family:"Prompt"},br={family:"La Belle Aurore"},_r={family:"DM Serif Display"},vr={family:"DM Sans"},yr={family:"Abril Fatface"},kr={family:"IBM Plex Sans Condensed"},xr={family:"Oswald"},Sr={family:"Libre Baskerville"},wr={family:"Nunito"},Cr={family:"Stint Ultra Expanded"},Ir={family:"Yeseva One"},jr={family:"Cinzel"},Tr={family:"Rubik"},Pr={family:"Poiret One"},Er={family:"Della Respira"},Rr={family:"Expletus Sans"},Ar={family:"Sacramento"},Or={family:"IBM Plex Sans"},Nr={family:"Oswald"},Dr={h1:{weight:300},h2:{weight:600},h3:{weight:600},h4:{weight:600},h5:{weight:600},h6:{weight:600}},Mr={h1:{weight:400},h2:{weight:400},h3:{weight:400},h4:{weight:400},h5:{weight:400},h6:{weight:400}},Br=[h().merge({},{h1:_r,h2:_r,h3:_r,h4:_r,h5:_r,h6:_r,p:vr,lead:vr,a:vr},Mr),h().merge({},{h1:yr,h2:yr,h3:yr,h4:yr,h5:yr,h6:yr,p:ir,lead:ir,a:ir},Mr),h().merge({},{h1:kr,h2:kr,h3:kr,h4:kr,h5:kr,h6:kr,p:Or,lead:Or,a:Or},{h1:{weight:500},h2:{weight:600},h3:{weight:500},h4:{weight:600},h5:{weight:500},h6:{weight:500}}),h().merge({},{h1:Xi,h2:Xi,h3:Xi,h4:Xi,h5:Xi,h6:Xi,p:rr,lead:rr,a:rr},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500}}),h().merge({},{h1:Nr,h2:Nr,h3:Nr,h4:Nr,h5:Nr,h6:Nr,p:mr,lead:mr,a:mr},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500}}),h().merge({},{h1:Ir,h2:Ir,h3:Ir,h4:Ir,h5:Ir,h6:Ir,p:dr,lead:dr,a:dr},Mr),h().merge({},{h1:Er,h2:Er,h3:Er,h4:Er,h5:Er,h6:Er,p:Zi,lead:Zi,a:Zi},Mr),h().merge({},{h1:Xi,h2:Xi,h3:Xi,h4:Xi,h5:Xi,h6:Xi,p:Qi,lead:Qi,a:Qi},Mr),h().merge({},{h1:Ji,h2:Ji,h3:Ji,h4:er,h5:Ji,h6:Ji,p:er,lead:er,a:er},Dr),h().merge({},{h1:tr,h2:tr,h3:tr,h4:tr,h5:tr,h6:tr,p:or,lead:or,a:or},Mr),h().merge({},{h1:nr,h2:nr,h3:nr,h4:gr,h5:nr,h6:nr,p:gr,lead:gr,a:gr},Mr),h().merge({},{h1:Zi,h2:Zi,h3:Zi,h4:Zi,h5:Zi,h6:Zi,p:Zi,lead:Zi,a:Zi},Dr),h().merge({},{h1:br,h2:br,h3:br,h4:fr,h5:br,h6:fr,p:fr,lead:fr,a:fr},Mr),h().merge({},{h1:xr,h2:xr,h3:xr,h4:xr,h5:xr,h6:xr,p:mr,lead:mr,a:mr},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:Sr,h2:Sr,h3:Sr,h4:Sr,h5:Sr,h6:Sr,p:Sr,lead:Sr,a:Sr},{h1:{weight:700},h2:{weight:700},h3:{weight:400},h4:{weight:700},h5:{weight:700},h6:{weight:700},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:wr,h2:wr,h3:wr,h4:wr,h5:wr,h6:wr,p:pr,lead:pr,a:pr},{h1:{weight:800},h2:{weight:600},h3:{weight:800},h4:{weight:800},h5:{weight:600},h6:{weight:600},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:Cr,h2:Cr,h3:Cr,h4:Cr,h5:Cr,h6:Cr,p:hr,lead:hr,a:hr},Mr),h().merge({},{h1:jr,h2:jr,h3:jr,h4:jr,h5:jr,h6:jr,p:ur,lead:ur,a:ur},Mr),h().merge({},{h1:Tr,h2:Tr,h3:Tr,h4:Tr,h5:Tr,h6:Tr,p:cr,lead:cr,a:cr},Mr),h().merge({},{h1:Pr,h2:Pr,h3:Pr,h4:Pr,h5:Pr,h6:Pr,p:lr,lead:lr,a:lr},Mr),h().merge({},{h1:Rr,h2:Rr,h3:Rr,h4:Rr,h5:Rr,h6:Rr,p:ar,lead:ar,a:ar},Mr),h().merge({},{h1:Ar,h2:Ar,h3:Ar,h4:Ar,h5:Ar,h6:Ar,p:sr,lead:sr,a:sr},Mr)],Lr=({children:e,scrollIntoView:t=!0,...o})=>{const n=(0,c.useRef)(),i=(0,c.useCallback)((()=>{if(!t)return;const e=n.current.querySelector(".kubio-style-preset-list__item--active");e&&e.scrollIntoView({behavior:"instant"})}),[]);return(0,c.useEffect)((()=>{i()}),[]),(0,j.jsx)("div",{ref:n,className:"kubio-style-preset-list__container",children:(0,j.jsx)("div",{className:"kubio-style-preset-list",...o,children:e})})};Lr.Item=({isActive:e=!1,className:t,children:o,...n})=>(0,j.jsx)("div",{className:Z()("kubio-style-preset-list__item",{"kubio-style-preset-list__item--active":e},t),...n,children:o});const zr=()=>{const{clearSelectedBlock:e}=(0,w.useDispatch)("core/block-editor"),{openSidebar:t}=(0,w.useDispatch)(m.STORE_KEY)||{};return(0,j.jsx)(ct.KubioPanelBody,{title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:(0,C.__)("Typography Presets","kubio")}),(0,j.jsx)(k.Tooltip,{text:(0,C.__)("Advanced Settings","kubio"),children:(0,j.jsx)("div",{className:"kubio-style-preset-list__cog",children:(0,j.jsx)(k.Icon,{icon:ut,onClick:()=>{e().then((()=>{t("document/general-settings/typography")}))}})})})]}),className:"kubio-style-preset-panel",initialOpen:!0,children:(0,j.jsx)(Fr,{})})},Fr=()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:o}=Gr();return(0,j.jsx)(Lr,{children:e.map(((e,n)=>(0,j.jsx)(Hr,{preset:e,index:n,bodyTypographyHolders:t,onSelect:o},n)))})},Gr=({typographyPresets:e=Br}={})=>{const{globalStyle:t}=(0,_.useGlobalDataStyle)(),o=(0,c.useMemo)((()=>t.getStyle("typography.holders",{},{styledComponent:"body"})),[t]),n=(0,c.useMemo)((()=>{const e={};return h().each(o,((t,o)=>{"input"!==o&&h().set(e,o,h().pick(t,["family","weight"]))})),e}),[o]),i=(0,c.useRef)(n),r=(0,c.useRef)(!1),a=(0,c.useMemo)((()=>{const t=i.current,o=!e.find((e=>{let o=!0;return h().each(e,((e,n)=>{e.family!==h().get(t,[n,"family"])&&(o=!1)})),o}));return o?[{isCustom:!0,...t}].concat(e):e}),[]),s=(0,c.useCallback)((e=>{r.current=!0,t.setStyle("typography.holders",h().cloneDeep(e),{styledComponent:"body"})}),[t]);return{mergedPresets:a,bodyTypographyHolders:o,currentTypographyPreset:n,onSelectPreset:s}},Hr=({preset:e,index:t,bodyTypographyHolders:o,onSelect:n})=>{const i=e.h1.family,r={fontFamily:i},a=e.p.family,s={fontFamily:a},l=h().get(o,"h1.family"),u=h().get(o,"p.family"),d=(0,c.useRef)(),p=(0,c.useRef)(),m=(0,c.useCallback)((()=>{var e;null!==(e=d.current)&&void 0!==e&&e.rel&&(d.current.rel="stylesheet")}),[]),g=(0,c.useCallback)((()=>{var e;null!==(e=p.current)&&void 0!==e&&e.rel&&(p.current.rel="stylesheet")}),[]),f=l===i&&u===a;return(0,j.jsxs)(Lr.Item,{isActive:f,onClick:()=>{n(e)},children:[(0,j.jsx)("link",{href:`https://fonts.googleapis.com/css?family=${i}&display=swap`,rel:"preload",as:"style",ref:d,onLoad:m}),(0,j.jsx)("link",{href:`https://fonts.googleapis.com/css?family=${a}&display=swap`,rel:"preload",as:"style",ref:p,onLoad:g}),(0,j.jsxs)("div",{className:"kubio-style-preset-list__typography",children:[e.isCustom&&(0,j.jsx)("div",{className:"kubio-style-preset-list__typography__custom",children:(0,C.__)("Custom","kubio")}),(0,j.jsxs)("span",{className:"kubio-style-preset-list__typography__heading-container",children:[(0,j.jsx)("h2",{style:r,children:i}),f&&(0,j.jsx)("div",{className:"kubio-style-preset-list__check",children:(0,j.jsx)(k.Icon,{icon:Yi})})]}),(0,j.jsx)("p",{style:s,children:a})]})]},t)},Ur=m.colorPalettes.map(((e,t)=>({...e,label:(0,C.sprintf)(// translators: %s: number of the preset, Set refers to the color scheme preset
// translators: %s: number of the preset, Set refers to the color scheme preset
(0,C.__)("Set %s","kubio"),t+1)}))),Wr=e=>{const{clearSelectedBlock:t}=(0,w.useDispatch)("core/block-editor"),{openSidebar:o}=(0,w.useDispatch)(m.STORE_KEY)||{};return(0,j.jsx)(ct.KubioPanelBody,{title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:(0,C.__)("Color Scheme Presets","kubio")}),(0,j.jsx)(k.Tooltip,{text:(0,C.__)("Advanced Settings","kubio"),children:(0,j.jsx)("div",{className:"kubio-style-preset-list__cog",children:(0,j.jsx)(k.Icon,{icon:ut,onClick:()=>{t().then((()=>{o("document/general-settings/color-scheme")}))}})})})]}),className:"kubio-style-preset-panel",initialOpen:!0,children:(0,j.jsx)(Vr,{...e})})},Vr=(0,c.memo)((()=>{const{onHandleClick:e,activePaletteValue:t,customPalette:o,currentPaletteIsCustom:n}=Kr(),{activePalette:i,restOfPalettes:r}=(0,s.useDeepMemo)((()=>{const e=[];return!h().isEmpty(o)&&e.push({label:(0,C.__)("Previous","kubio"),colors:o}),{activePalette:{label:(0,C.__)("Current","kubio"),colors:t},restOfPalettes:e.concat(Ur)}}),[n,t,o]);return(0,j.jsxs)("div",{className:"kubio-style-presets-color-scheme__container",children:[(0,j.jsx)(Lr,{scrollIntoView:!1,children:(0,j.jsx)($r,{palette:i,index:0,onHandleClick:e,activePaletteValue:t})}),(0,j.jsx)(Nn,{}),(0,j.jsx)(ct.SeparatorHorizontalLine,{}),(0,j.jsx)(Lr,{scrollIntoView:!1,children:r.map(((t,o)=>(0,j.jsx)($r,{palette:t,index:o,onHandleClick:e,activePaletteValue:null},o)))})]})})),Kr=()=>{const{getPalette:e,setPalette:t,getCustomPalette:o}=(0,_.useGlobalDataColors)(),n=e(),i=o(),r=(0,c.useCallback)((e=>{t([...e.colors])}),[t]),a=(0,c.useMemo)((()=>{const e=!m.colorPalettes.find((e=>(0,I.getColorPalettesAreEqual)(e.colors,n))),t=(0,I.getColorPalettesAreEqual)(i,n);return e&&!t}),[n,i]);return{mergedPalettes:(0,s.useDeepMemo)((()=>{const e=[];if(!h().isEmpty(i)&&e.push({label:(0,C.__)("Previous","kubio"),colors:i}),a){const t=(0,C.__)("Current","kubio");e.unshift({label:t,isCustom:!0,colors:n})}return e.concat(Ur)}),[a,n,i]),onHandleClick:r,activePaletteValue:n,customPalette:i,currentPaletteIsCustom:a}},$r=({palette:e,index:t,onHandleClick:o,activePaletteValue:n})=>{const i=(0,I.getColorPalettesAreEqual)(e.colors,n);return(0,j.jsxs)(Lr.Item,{className:"kubio-style-preset-list__colors",isActive:i,onClick:()=>o(e),children:[!!e.label&&(0,j.jsx)("div",{className:"kubio-style-preset-list__item__title",children:e.label}),(0,j.jsx)("div",{className:"kubio-style-preset-list__colors__item",children:e.colors.map((({slug:e,color:t})=>(0,j.jsx)(ct.ColorIndicator,{value:`rgb(${t.join(",")})`},e)))}),i&&(0,j.jsx)("div",{className:"kubio-style-preset-list__check",children:(0,j.jsx)(k.Icon,{icon:Yi})})]},t)},qr=({parentAreaIdentifier:e})=>{const t=`${e}/style-presets`,o=(0,C.__)("Style Presets","kubio");return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(et,{title:(0,j.jsxs)("span",{className:"kubio-sidebar-panel-with-icon__title",children:[(0,j.jsx)(He,{icon:Ge.StylePresetsIcon}),(0,j.jsx)("span",{children:o})]}),areaIdentifier:t,children:(0,j.jsx)(Yr,{AREA_IDENTIFIER:t})})})},Yr=(0,c.memo)((({AREA_IDENTIFIER:e})=>e===(0,w.useSelect)((e=>{var t,o;return null===(t=e(m.STORE_KEY))||void 0===t||null===(o=t.getEditorOpenedSidebar())||void 0===o?void 0:o.replace("kubio/edit-site/sidebar/","")}),[])?(0,j.jsx)(Zr,{}):(0,j.jsx)(j.Fragment,{}))),Zr=(0,c.memo)((()=>(0,j.jsxs)("div",{className:"kubio-style-preset-panel__container",children:[(0,j.jsx)(Wr,{}),(0,j.jsx)(zr,{})]})));function Xr({beforeSectionsList:e,afterSectionsList:t}){const o=(0,s.usePageTitle)(),{uiVersion:n}=(0,g.useUIVersion)();return(0,j.jsxs)(at,{title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"preview-notice",children:(0,C.__)("You are editing","kubio")}),(0,j.jsx)("span",{className:"panel-title site-title",children:(0,I.fromHtmlEntities)(o)})]}),areaIdentifier:"document",children:[e,1===n&&(0,j.jsx)(qi,{parentAreaIdentifier:"document"}),(0,j.jsx)(Go,{}),(0,j.jsx)(qr,{parentAreaIdentifier:"document"}),(0,j.jsx)(Oo,{}),(0,j.jsx)(Mo,{}),2===n&&(0,j.jsx)(qi,{parentAreaIdentifier:"document"}),(0,j.jsx)(ki,{parentAreaIdentifier:"document"}),(0,j.jsx)(Ai,{parentAreaIdentifier:"document"}),t]})}const{Slot:Qr,Fill:Jr}=(0,k.createSlotFill)("ColibriEditSiteBlockEditorSidebarInspector"),ea=()=>{const{currentSidebar:e,selectedBlock:t}=(0,w.useSelect)((e=>{var t,o;return{currentSidebar:(null===(t=e(m.STORE_KEY).getEditorOpenedSidebar())||void 0===t||null===(o=t.split)||void 0===o?void 0:o.call(t,"/sidebar/").at(1))||null,selectedBlock:e("core/block-editor").getSelectedBlock()}}),[]),[o]=(0,ze.useCurrentInspectorTab)();let n=(0,I.showSupplementaryUpgradeToPRO)()||"document"===e;return n=(0,I.getCanShowProNotice)(n,o),n?(0,j.jsx)(Fe.UpgradeToPro,{urlArgs:{source:t?t.name:e,content:t?o:""}}):(0,j.jsx)(j.Fragment,{})},ta=()=>{const{subsidebars:e}=(0,w.useSelect)((e=>({subsidebars:e(m.STORE_KEY).getSubSidebars()})));return(0,f.useGetGlobalSessionProp)("ready",!1)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Xr,{}),(0,j.jsx)(lt,{children:(0,j.jsx)(Qr,{bubblesVirtually:!0})}),(0,p.map)(e,((e,t)=>(0,j.jsx)(c.Fragment,{children:e},t)))]}):null},oa=Jr,na={content:()=>(0,j.jsx)(ze.ContentBlockInspector,{}),style:()=>(0,j.jsx)(ze.StyleBlockInspector,{}),advanced:()=>(0,j.jsx)(ze.AdvancedStyleBlockInspector,{})},ia=(0,Ue.getNamesOfBlocks)(),ra=[ia.HEADER,ia.FOOTER,ia.QUERY_LAYOUT,ia.HERO,ia.SECTION,ia.ROW,ia.COLUMN,ia.QUERY,ia.LOOP,ia.LOOP_ITEM],aa=[{name:"content",title:()=>{const e=(0,w.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSelectedBlock())||void 0===t?void 0:t.name}));let t=(0,C.__)("Layout","kubio");return-1===ra.indexOf(e)&&(t=(0,C.__)("Content","kubio")),(0,j.jsxs)("span",{className:"kubio-tab-panel",children:[(0,j.jsx)(He,{icon:Ge.LayoutIcon}),(0,j.jsx)("span",{className:"kubio-tab-panel-text",children:t})]})},className:"tab-content"},{name:"style",title:()=>(0,j.jsxs)("span",{className:"kubio-tab-panel",children:[(0,j.jsx)(He,{icon:Ge.StyleIcon}),(0,j.jsx)("span",{className:"kubio-tab-panel-text",children:(0,C.__)("Style","kubio")})]}),className:"tab-style"},{name:"advanced",title:()=>(0,j.jsxs)("span",{className:"kubio-tab-panel",children:[(0,j.jsx)(He,{icon:Ge.AdvancedIcon}),(0,j.jsx)("span",{className:"kubio-tab-panel-text",children:(0,C.__)("Advanced","kubio")})]}),className:"tab-advanced"}],sa=()=>{const e=na.content;return(0,j.jsxs)("div",{className:"kubio-block-inspector-tab-content default-inspector",children:[(0,j.jsx)(ze.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,j.jsx)(e,{})]})},la=(0,x.compose)((0,w.withSelect)((e=>{const{getSelectedBlock:t}=e("core/block-editor"),{hasBlockSupport:o}=e("core/blocks"),n=t();return{isBlockSelected:n&&n.clientId,supportsKubio:n&&(n.name.startsWith("kubio/")||"core/post-content"===n.name||o(n.name,"kubio"))}})))((({isBlockSelected:e,supportsKubio:t})=>{const[o,n]=(0,ze.useCurrentInspectorTab)(),{selectedBlockName:i}=(0,w.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{selectedBlockName:null==t?void 0:t.name}})),r=(0,c.useRef)(!0);(0,c.useMemo)((()=>{r.current=!0}),[i]);const a=(0,w.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site")||{};return"simple"===(null==t?void 0:t())}),[]),s=(0,c.useMemo)((()=>aa.filter((e=>a&&"advanced"===e.name?null:e))),[a]);return e?t?(0,j.jsx)(ct.TabPanel,{className:"kubio-advanced-block-inspector",currentTab:o,onSelect:n,tabs:s,children:e=>{let t=na[e.name];return!0===r.current&&(t=na.content,"content"===e.name&&(r.current=!1)),(0,j.jsxs)("div",{className:"kubio-block-inspector-tab-content kubio-inspector",children:[(0,j.jsx)(ze.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,j.jsx)(t,{})]})}}):(0,j.jsx)(sa,{}):null})),ca=window.kubio.styleManager,ua="editor-styles-wrapper",da="wp-editor-classic-layout-styles",pa=e=>{if("BUTTON"===e.nodeName){const t=["forminator-ui","wpcf7-form ","wpforms-form","mc4wp-form"],o=e.closest("form"),n=t.some((e=>{var t;return null==o||null===(t=o.classList)||void 0===t?void 0:t.contains(e)}));if(o&&!o.getAttribute("action")&&!n)return}e.addEventListener("click",(e=>{e.preventDefault()}))},ha=(0,c.forwardRef)((function({contentRef:e,children:t,head:o,headHTML:n,contentHolderSelector:i,assetsHolderSelector:r,src:a,onLoad:l=p.noop,execStylesheetCompat:u=!0,...d},h){const[g,b]=(0,c.useState)(),[_,v]=(0,c.useState)(),y=(0,f.useCurrentPageBodyClasses)(),k=(0,f.useSetGlobalSessionProp)("ownerDocument"),S=(0,f.useSetGlobalSessionProp)("blockEditorRootClasses",""),I=(0,c.useRef)(),T=(0,f.useGetGlobalSessionProp)("ready",!1),{currentTemplateSource:P,kubioThemesBaseURL:E}=(0,w.useSelect)((e=>{const{getCurrentKubioTemplateSource:t,getSettings:o}=e(m.STORE_KEY);return{currentTemplateSource:t(),kubioThemesBaseURL:o().kubioThemesBaseURL}}),[]);(0,c.useEffect)((()=>{!T&&a&&(b(null),v(null),k(window.document),(0,ca.removeStyleManager)(g))}),[a,T,k,g]),(0,c.useEffect)((()=>{if(!T||!g)return;const e=T&&a&&g;["kubio-custom","kubio"].includes(P)?(e=>{let t=e.querySelector(".kubio-block-vars-reset");t||(t=e.createElement("style"),t.classList.add("kubio-block-vars-reset"),t.textContent="\n\t\t:root,\n\t\tbody,\n\t\tbody *,\n\t\t.editor-styles-wrapper .block-editor-block-list__layout.is-root-container > *\n\t\t{\n\t\t\t--wp--style--block-gap:0px;\n\t\t\t--gallery-block--gutter-size:0.5em;\n\t\t\t--global-content-width: unset;\n\t\t}",e.head.appendChild(t))})(g):(e=>{const t=e.querySelector(".kubio-block-vars-reset");var o;t&&(null==t||null===(o=t.remove)||void 0===o||o.call(t))})(g),g.querySelectorAll(["wp-reset-editor-styles-css","wp-editor-classic-layout-styles-css","common-css","forms-css"].map((e=>`link#${e}`))).forEach((t=>{t.sheet&&(t.sheet.disabled=e)}))}),[T,a,P,g,E]),(0,c.useEffect)((()=>{if(g&&y.length){const e=Array.from(g.body.classList);g.body.setAttribute("class",(0,p.uniq)(e.concat(y)).join(" "))}}),[g,y]);const[,R]=(0,f.useGlobalSessionProp)("blocksOwnerDocument",null,[]),[,A]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",null,[]),O=(0,c.useCallback)((t=>{function o(){const{contentDocument:o}=t,{readyState:r,body:s}=o;if("complete"!==r)return!1;"function"==typeof e?e(s):e&&(e.current=s);const c=["a",'[type="submit"]',"form button"];new o.defaultView.MutationObserver((function(e){(0,p.each)(e,(function(e){e.target.querySelectorAll(c.join(",")).forEach(pa)}))})).observe(o,{childList:!0,subtree:!0}),o.querySelectorAll(c.join(",")).forEach(pa),u&&function(e){const t=new Map;Array.from(document.styleSheets).forEach((o=>{try{o.cssRules}catch(e){return}const{ownerNode:n,cssRules:i}=o;i&&Array.from(i).find((({selectorText:e})=>e&&(e.includes(`.${ua}`)||e.includes(".wp-block"))))&&!t.has(n)&&(n.id&&-1!==n.id.indexOf(da)||n.href&&-1!==n.href.indexOf(da)?e.head.prepend(n.cloneNode(!0)):e.head.appendChild(n.cloneNode(!0)),t.set(n,!0))}))}(o),o.defaultView.isKubioBlockEditor=!0,o.defaultView.isInsideIframe=!0,o.defaultView.requestIdleCallback=o.defaultView.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},o.defaultView.cancelIdleCallback=o.defaultView.cancelIdleCallback||function(e){clearTimeout(e)},function(e,t){e.head.innerHTML="<style>/* head style start */</style>"+t+"<style>/* head style end */</style><style>*{scroll-behavior:  auto !important; } html#kubio {height:auto!important; margin-top:initial !important}</style>"+e.head.innerHTML}(o,n),function(e){const{defaultView:t}=e,{frameElement:o}=t;function n(e){const{keyCode:n,ctrlKey:i,metaKey:r}=e;if((65===n||95===n)&&(i||r)){const t=e.target.hasAttribute("contenteditable")?e.target:e.target.closest("[contenteditable]");if(t)return((e,t)=>(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e&&e.ownerDocument.execCommand("selectAll",!1,null),!1))(t,e)}const a=Object.getPrototypeOf(e).constructor.name,s=window[a],l={};for(const t in e)l[t]=e[t];if(e instanceof t.MouseEvent){const e=o.getBoundingClientRect();l.clientX+=e.left,l.clientY+=e.top}const c=new s(e.type,l);c.iframeEvent=!0,!o.dispatchEvent(c)&&e.preventDefault()}const i=["keydown","keypress","dragover"];for(const t of i)e.addEventListener(t,n)}(o),b(o),k(o);let d=i&&o.querySelector(i),h="";if(i&&d){const e=d.parentElement;1===e.children.length&&(d.remove(),d=e),h=d.getAttribute("class"),d.setAttribute("class","kubio-hybrid-template-content-edit")}S(h);let m=o.body;return d?(m=d,A(!0)):(a||i)&&(m.classList.add("kubio-hybrid-no-block-content"),A(!1)),m.classList.add(ua),m.classList.add("wp-embed-responsive"),l(t,o),v(m),R(o),!0}t&&(t.contentDocument.body.parentElement.className="kubio-iframe",a?t.addEventListener("load",(()=>{o()})):o()||t.addEventListener("load",(()=>{o()})))}),[]),N=(0,c.useMemo)((()=>!!g&&(r&&g.querySelector(r)||g.head)),[r,g]),D=(0,c.useMemo)((()=>({ownerDocument:g||window.document})),[g]);return(0,j.jsx)(s.OwnerDocumentContext.Provider,{value:D,children:(0,j.jsxs)("iframe",{...d,ref:(0,x.useMergeRefs)([h,O,I]),tabIndex:"0",title:(0,C.__)("Editor canvas","kubio"),className:"kubio-iframe",name:"editor-canvas",src:a,children:[_&&(0,c.createPortal)(t,_),N&&(0,c.createPortal)(o,N)]})})})),ma=async(e,t)=>new Promise((o=>{if(-1!==Array.from(e.ownerDocument.querySelectorAll("script[src]")).map((e=>e.src)).indexOf(t))return;const n=e.ownerDocument.createElement("script");n.async=!0,n.src=t,e.appendChild(n),n.addEventListener("load",o)})),ga=(0,p.debounce)((async(e,t,o=p.noop)=>{for(o(),t=window.structuredClone(t);t.length;){const o=t.shift();await ma(e,o)}}),1e3),fa=[{value:"infographic-label",label:(0,C.__)("infographic label","kubio")},{value:"infographic-number",label:(0,C.__)("infographic number","kubio")},{value:"address",label:(0,C.__)("address","kubio")},{value:"phone",label:(0,C.__)("phone number","kubio")},{value:"email",label:(0,C.__)("email","kubio")}],ba=({setIsModalVisible:e})=>(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.MenuGroup,{className:"kubio-block-settings-control kubio-block-settings-ai-desc",children:(0,j.jsx)(k.MenuItem,{onClick:()=>e(!0),children:(0,C.__)("AI block short desc","kubio")})})}),_a=()=>{const[e,t]=(0,c.useState)(!1),[o,n]=(0,c.useState)(""),i=(0,c.useRef)({clientId:null,onClose:p.noop}),{dataHelper:r}=(0,s.useKubioDataHelper)({clientId:i.current.clientId});(0,c.useEffect)((()=>{n(r.getAttribute("kubioAI.desc",""))}),[r,i.current.clientId]);const a=(0,c.useCallback)((()=>{r.setAttribute("kubioAI.desc",o||""),t(!1),i.current.onClose()}),[r,o]),l=(0,c.useCallback)((()=>{t(!1),i.current.onClose()}),[]),u=(0,c.useCallback)(((e,o)=>{i.current={clientId:o,onClose:e},t(!0)}),[]);return(0,j.jsxs)(j.Fragment,{children:[e&&(0,j.jsxs)(k.Modal,{title:(0,C.__)("Element short description","kubio"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:l,children:[(0,j.jsx)(k.BaseControl,{children:(0,j.jsx)(ct.SuggestionsInput,{label:(0,C.__)("Description","kubio"),options:fa,value:o,onChange:n,filterKeys:["value","label"],onSuggestionClick:(e,t)=>t(e.value),optionRender:e=>(0,j.jsxs)("div",{className:"kubio-ai-language-style-select-item",children:[(0,j.jsx)("span",{children:e.label}),(0,j.jsx)("i",{children:e.value})]})})}),(0,j.jsxs)(k.Flex,{align:"flex-start",children:[(0,j.jsx)(k.Button,{variant:"primary",onClick:a,children:(0,C.__)("Save","kubio")}),(0,j.jsx)(k.Button,{variant:"secondary",onClick:l,children:(0,C.__)("Cancel","kubio")})]})]}),(0,j.jsx)(y.BlockSettingsMenuControls,{children:({onClose:e,firstBlockClientId:t})=>(0,j.jsx)(ba,{setIsModalVisible:()=>u(e,t)})})]})},va=e=>{const{children:t,className:o}=e,n=(0,c.useRef)(),i=(0,c.useRef)(),[r,a]=(0,f.useGlobalSessionProp)("containerBgMediaUploadRef",{dataHelper:null,ref:null,blockId:null,value:null});(0,c.useEffect)((()=>{null!==i.current&&a({...r,ref:i})}),[i.current]);const s=(0,f.useGetGlobalSessionProp)("ready",!1);return(0,c.useLayoutEffect)((()=>{const e=n.current;if(e&&s){var t;const o=null===(t=e.ownerDocument.querySelector("#kubio-scripts-template"))||void 0===t?void 0:t.content.querySelectorAll("script");o&&ga(e.ownerDocument.head,Array.from(o).map((({src:e})=>e)).filter(Boolean))}}),[s]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:n}),(0,j.jsxs)(y.WritingFlow,{children:[(0,j.jsx)(y.BlockList,{className:Z()(o,"edit-site-block-editor__block-list","kubio-block-editor__block-list"),renderAppender:Ue.KubioBlockAppender}),(0,I.getShowInternalFeatures)("ai")&&(0,j.jsx)(_a,{}),t]}),(0,j.jsx)(y.MediaUploadCheck,{children:(0,j.jsx)(y.MediaUpload,{allowedTypes:["image","video"],value:r.value,onSelect:e=>{const{dataHelper:t}=r;if(!t)return;const o=t.getStyle("background");"image"===o.type&&"image"===e.type?o.image[0].source.url=e.url:"video"===o.type&&"video"===e.type&&(o.video.internal.url=e.url),t.setStyle("background",o)},render:({open:e})=>(0,j.jsx)("div",{ref:i,onClick:e})})})]})};var ya=o(9457),ka=o.n(ya);const xa=()=>(0,j.jsx)("div",{className:"kubio-loading-logo",children:(0,j.jsx)(k.Icon,{icon:Ge.KubioLoader})}),Sa=(0,c.memo)((()=>{const e=(0,x.useRefEffect)((e=>{e.contentWindow.document.open(),e.contentWindow.document.write(ka()),e.contentWindow.document.close();const t=e.contentDocument||e.contentWindow.document,o=null==t?void 0:t.querySelector("#content");o&&(0,s.reactRender)((0,j.jsx)(xa,{}),o)}),[]);return(0,j.jsx)("iframe",{title:"kubio-loader",ref:e,className:"kubio-loading-logo-iframe"})})),wa=()=>{const[e,t]=(0,c.useState)(""),o=(0,I.getBackendData)("multilanguage.hasTranslator");(0,c.useEffect)((()=>{n().then((e=>t(e.content))).catch((e=>console.log(e.message)))}),[]);const n=async()=>await A()({path:"/kubio/v1/get-language-selector-html",method:"GET"});return(0,j.jsx)(j.Fragment,{children:o&&(0,j.jsx)(c.RawHTML,{className:"--is-editor",children:e})})};let Ca;const Ia=(e,t)=>{var o,n;e&&(null===(o=e.querySelector("#kubio-editor-view"))||void 0===o||null===(n=o.classList)||void 0===n||n.remove("device-change-animation"),t?Ca=e.defaultView.setTimeout((()=>{if(e.body.classList.add("kubio-iframe-holder--show"),e.body.classList.remove("kubio-iframe-holder--hide"),e.body.classList.remove("h-ui-disable-transitions"),(0,I.getBackendData)("multilanguage.hasTranslator")){const t=e.createElement("div");t.classList.add("block-editor-block-list__layout");const o=e.createElement("div");o.id="kubio-language-selector",t.append(o),e.querySelector("body").append(t),window.ReactDOM.render(React.createElement(wa),e.getElementById("kubio-language-selector"))}}),100):(e.defaultView.clearTimeout(Ca),e.body.classList.remove("kubio-iframe-holder--show"),e.body.classList.add("kubio-iframe-holder--hide"),e.body.classList.add("h-ui-disable-transitions")))},ja=(0,x.pure)((({iframe:e,deviceType:t})=>{const o=(0,y.__experimentalUseResizeCanvas)(t,!0),n=(0,c.useRef)(),i=(0,c.useRef)(),r=(0,c.useRef)(),a=(0,x.useMergeRefs)([n,(0,y.__unstableUseTypingObserver)()]);return(0,f.useEditorIsLoadedChanged)((e=>{var t,o;Ia(null===(t=r.current)||void 0===t?void 0:t.ownerDocument,e),Ia(null===(o=n.current)||void 0===o?void 0:o.ownerDocument,e)})),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(y.BlockTools,{className:"kubio-block-tools",__unstableContentRef:n,children:(0,j.jsxs)("div",{id:"kubio-editor-view",ref:i,children:[(0,j.jsx)("div",{id:"kubio-iframe-holder",className:"editor-styles-wrapper edit-site-block-editor__editor-styles-wrapper",style:o,ref:r,children:e(a)}),(0,j.jsx)(Sa,{},"kubio-blinking-iframe")]})})})})),Ta="<style>body{width:100%;max-width:100%;overflow-x:hidden;}</style>",Pa=()=>{const[e]=(0,b.useIsAIConnected)(),[t,o]=(0,b.useAIServiceInfo)(),n=(0,f.useGetGlobalSessionProp)("ready"),i=(0,c.useRef)(!1);(0,c.useEffect)((()=>{!i.current&&n&&e&&(i.current=!0,"started"!==t.state&&"ready"!==t.state)&&(o({remainingCredits:0,perPageCredits:1/0,state:"started"}),(async()=>{const{remaining_credits:e=0,per_page_credits:n=480,account_email:i=null,ai_image_cost:r=150,ai_section_cost:a=30}=await(0,b.getAIInfo)();o({...t,state:"ready",remainingCredits:e,perPageCredits:n,email:i,aiImageCost:r,aiSectionCost:a})})())}),[n,e,t])},Ea=window.wp.htmlEntities,Ra=(e,t)=>`<a ${Aa(e)}>${t}</a>`,Aa=e=>`href="${e}" target="_blank" rel="noreferrer noopener"`,Oa=e=>{const{title:t,foreign_landing_url:o,creator:n,creator_url:i,license:r,license_version:a,license_url:s}=e,l=((e,t)=>{let o=e.trim();return"pdm"!==e&&(o=e.toUpperCase().replace("SAMPLING","Sampling")),t&&(o+=` ${t}`),["pdm","cc0"].includes(e)||(o=`CC ${o}`),o})(r,a),c=(0,Ea.decodeEntities)(n);let u;return u=c?t?(0,C.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
(0,C._x)('"%1$s" by %2$s/ %3$s',"caption","kubio"),Ra(o,(0,Ea.decodeEntities)(t)),i?Ra(i,c):c,s?Ra(`${s}?ref=openverse`,l):l):(0,C.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
(0,C._x)("<a %1$s>Work</a> by %2$s/ %3$s","caption","kubio"),Aa(o),i?Ra(i,c):c,s?Ra(`${s}?ref=openverse`,l):l):t?(0,C.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
(0,C._x)('"%1$s"/ %2$s',"caption","kubio"),Ra(o,(0,Ea.decodeEntities)(t)),s?Ra(`${s}?ref=openverse`,l):l):(0,C.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
(0,C._x)("<a %1$s>Work</a>/ %3$s","caption","kubio"),Aa(o),s?Ra(`${s}?ref=openverse`,l):l),u.replace(/\s{2}/g," ")},Na=async(e={})=>(await(0,w.resolveSelect)(S.store).getMediaItems({...e,orderBy:null!=e&&e.search?"relevance":"date"})).map((e=>{var t,o,n,i;return{...e,alt:e.alt_text,url:e.source_url,previewUrl:null===(t=e.media_details)||void 0===t||null===(o=t.sizes)||void 0===o||null===(n=o.medium)||void 0===n?void 0:n.source_url,caption:null===(i=e.caption)||void 0===i?void 0:i.raw}})),Da=[{name:"images",labels:{name:(0,C.__)("Images","kubio"),search_items:(0,C.__)("Search images","kubio")},mediaType:"image",fetch:async(e={})=>Na({...e,media_type:"image"})},{name:"videos",labels:{name:(0,C.__)("Videos","kubio"),search_items:(0,C.__)("Search videos","kubio")},mediaType:"video",fetch:async(e={})=>Na({...e,media_type:"video"})},{name:"audio",labels:{name:(0,C.__)("Audio","kubio"),search_items:(0,C.__)("Search audio","kubio")},mediaType:"audio",fetch:async(e={})=>Na({...e,media_type:"audio"})},{name:"openverse",labels:{name:(0,C.__)("Openverse","kubio"),search_items:(0,C.__)("Search Openverse","kubio")},mediaType:"image",async fetch(e={}){const t={...e,mature:!1,excluded_source:"flickr,inaturalist,wikimedia",license:"pdm,cc0"},o={per_page:"page_size",search:"q"},n=new URL("https://api.openverse.engineering/v1/images/");Object.entries(t).forEach((([e,t])=>{const i=o[e]||e;n.searchParams.set(i,t)}));const i=await window.fetch(n,{headers:{"User-Agent":"WordPress/inserter-media-fetch"}});return(await i.json()).results.map((e=>{var t;return{...e,title:null!==(t=e.title)&&void 0!==t&&t.toLowerCase().startsWith("file:")?e.title.slice(5):e.title,sourceId:e.id,id:void 0,caption:Oa(e),previewUrl:e.thumbnail}}))},getReportUrl:({sourceId:e})=>`https://wordpress.org/openverse/image/${e}/report/`,isExternalResource:!0}],Ma=Da;function Ba(){var e,t;const{setOpenInserter:o}=(0,w.useDispatch)(m.STORE_KEY),{storedSettings:n,canvasMode:i,templateType:r,siteSettings:a}=(0,w.useSelect)((e=>{const{canUser:t,getEntityRecord:n}=e(S.store),{getSettings:i,getCanvasMode:r,getEditedPostType:a}=e(m.STORE_KEY);return{storedSettings:i(o),canvasMode:null==r?void 0:r(),templateType:a(),siteSettings:t("read","settings")?n("root","site"):void 0}}),[]),s=null!==(e=n.__experimentalAdditionalBlockPatterns)&&void 0!==e?e:n.__experimentalBlockPatterns,l=null!==(t=n.__experimentalAdditionalBlockPatternCategories)&&void 0!==t?t:n.__experimentalBlockPatternCategories,{restBlockPatterns:u,restBlockPatternCategories:d,templateSlug:p,userPatternCategories:h}=(0,w.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:o}=e(m.STORE_KEY),{getEditedEntityRecord:n,getUserPatternCategories:i}=e(S.store),r=n("postType",t(),o());return{restBlockPatterns:e(S.store).getBlockPatterns(),restBlockPatternCategories:e(S.store).getBlockPatternCategories(),templateSlug:r.slug,userPatternCategories:(null==i?void 0:i())||[]}}),[]),g=function(e){const t=null==e?void 0:e.match(/^(category|tag|taxonomy-([^-]+))$|^(((category|tag)|taxonomy-([^-]+))-(.+))$/);let o,n,i,r=!1;if(t)t[1]?o=t[2]?t[2]:t[1]:t[3]&&(o=t[6]?t[6]:t[4],n=t[7]),o="tag"===o?"post_tag":o;else{const t=null==e?void 0:e.match(/^(author)$|^author-(.+)$/);t&&(r=!0,t[2]&&(i=t[2]))}return(0,w.useSelect)((e=>{const{getEntityRecords:t,getTaxonomy:a,getAuthors:s}=e(S.store);let l,c;var u,d;if(o&&(l=null===(u=a(o))||void 0===u||null===(d=u.labels)||void 0===d?void 0:d.singular_name),n){const e=t("taxonomy",o,{slug:n,per_page:1});e&&e[0]&&(c=e[0].name)}if(r&&(l="Author",i)){const e=s({slug:i});e&&e[0]&&(c=e[0].name)}return{archiveTypeLabel:l,archiveNameLabel:c}}),[i,r,o,n])}(p),f=(0,c.useMemo)((()=>[...s||[],...u||[]].filter(((e,t,o)=>t===o.findIndex((t=>e.name===t.name)))).filter((({postTypes:e})=>!e||Array.isArray(e)&&e.includes(r)))),[s,u,r]),b=(0,c.useMemo)((()=>[...l||[],...d||[]].filter(((e,t,o)=>t===o.findIndex((t=>e.name===t.name))))),[l,d]);return(0,c.useMemo)((()=>{const{__experimentalAdditionalBlockPatterns:e,__experimentalAdditionalBlockPatternCategories:t,focusMode:o,...r}=n;return{...r,inserterMediaCategories:Ma,__experimentalBlockPatterns:f,__experimentalBlockPatternCategories:b,__experimentalUserPatternCategories:h,focusMode:("view"!==i||!o)&&o,__experimentalArchiveTitleTypeLabel:g.archiveTypeLabel,__experimentalArchiveTitleNameLabel:g.archiveNameLabel,pageOnFront:null==a?void 0:a.page_on_front,pageForPosts:null==a?void 0:a.page_for_posts}}),[n,f,b,h,i,g.archiveTypeLabel,g.archiveNameLabel,null==a?void 0:a.page_on_front,null==a?void 0:a.page_for_posts])}const La=(0,x.createHigherOrderComponent)((e=>t=>{const{templateType:o,page:n,deviceType:i,templateId:r}=(0,w.useSelect)((e=>{const{getTemplateType:t,getTemplateId:o,getPage:n,__experimentalGetPreviewDeviceType:i}=e(m.STORE_KEY);return{templateType:t(),templateId:o(),page:n(),deviceType:i()}}),[]),a={settings:Ba(),templateType:o,page:n,deviceType:i,templateId:r};return n||o?(0,j.jsx)(e,{...t,...a}):null}),"currentEditorEntity"),za=(0,x.compose)(La,x.pure)((function({settings:e,templateType:t,page:o,deviceType:n,templateId:i}){Pa();const[r,a,s]=(0,S.useEntityBlockEditor)("postType",t,{id:i}),{setPage:l}=(0,w.useDispatch)(m.STORE_KEY),u=(0,y.__unstableUseMouseMoveTypingReset)(),d=window.__kubioEditorStyles.html+Ta,p=(0,w.useSelect)((e=>{const t=e(m.STORE_KEY).getCurrentKubioTemplateSource();return null==t?void 0:t.startsWith("kubio")}),[t,i]),h=(0,c.useMemo)((()=>e.styles),[p,e.styles]),g=(0,c.useCallback)((e=>(0,j.jsx)(ha,{headHTML:d,ref:u,head:(0,j.jsx)(y.__unstableEditorStyles,{styles:h}),contentRef:e,children:(0,j.jsx)(va,{})})),[u,d,h]);return(0,j.jsxs)(y.BlockEditorProvider,{settings:e,value:r,onInput:a,onChange:s,useSubRegistry:!1,children:[(0,j.jsx)(y.BlockEditorKeyboardShortcuts,{}),(0,j.jsx)(y.__experimentalLinkControl.ViewerFill,{children:(0,c.useCallback)((e=>(0,j.jsx)(Le,{...e,activePage:o,onActivePageChange:l})),[o])}),(0,j.jsx)(oa,{children:(0,j.jsx)(la,{})}),(0,j.jsx)(ja,{deviceType:n,iframe:g})]})})),Fa=function(){var e,t;Pa();const{setOpenInserter:o}=(0,w.useDispatch)(m.STORE_KEY),[n,i]=(0,c.useState)({}),{page:r,deviceType:a,classicTemplateId:s}=(0,w.useSelect)((e=>{const{getEntity:t,getPage:o,getClassicTemplateId:n,__experimentalGetPreviewDeviceType:i}=e(m.STORE_KEY);return{entity:t(),page:o(),classicTemplateId:n(),deviceType:i()}}),[o]),l=Ba();(0,c.useEffect)((()=>{$o()(r,n)||i(r)}),[r]);const[u,d,p]=(0,S.useEntityBlockEditor)("postType",null==n||null===(e=n.context)||void 0===e?void 0:e.postType,{id:null==n||null===(t=n.context)||void 0===t?void 0:t.postId}),{setPage:h}=(0,w.useDispatch)(m.STORE_KEY),g=(0,y.__unstableUseMouseMoveTypingReset)(),b=(0,f.useSetGlobalSessionProp)("ready"),_=(e,t)=>{t.body.id="kubio",b(!0)},v=window.__kubioEditorStyles.html+Ta,k=(0,f.useGetGlobalSessionProp)("blockEditorRootClasses",""),x=(0,c.useCallback)((e=>(null==n?void 0:n.path)&&(0,j.jsx)(ha,{headHTML:v,ref:g,contentRef:e,src:(0,Lo.addQueryArgs)(null==n?void 0:n.path,{"__kubio-site-edit-iframe-preview":!0,"__kubio-site-edit-iframe-classic-template":s}),contentHolderSelector:"#kubio-site-edit-content-holder",assetsHolderSelector:"#kubio-site-edit-assets-holder",onLoad:_,execStylesheetCompat:!1,children:(0,j.jsx)(va,{className:k,children:(0,j.jsx)(ct.LayoutPicker,{})})})),[null==n?void 0:n.path,g,v,v,l.styles,k]);return(0,j.jsxs)(y.BlockEditorProvider,{settings:l,value:u,onInput:d,onChange:p,useSubRegistry:!1,children:[(0,j.jsx)(y.BlockEditorKeyboardShortcuts,{}),(0,j.jsx)(y.__experimentalLinkControl.ViewerFill,{children:(0,c.useCallback)((e=>(0,j.jsx)(Le,{...e,activePage:n,onActivePageChange:h})),[n,h])}),(0,j.jsx)(oa,{children:(0,j.jsx)(la,{})}),(0,j.jsx)(ja,{deviceType:a,iframe:x})]})},Ga=()=>{const[e,t]=(0,c.useState)([]),o=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e("core");return t("postType","kubio_section",{per_page:-1})}),[]),n="kubio-content/custom";return(0,c.useEffect)((()=>{let i=e;null==o||o.forEach((t=>{if(e.includes(t.id))return;const o={name:`${n}/custom-section/${t.id}`,title:t.title.rendered,categories:[n],description:(0,C.__)("Custom section","kubio"),screenshot:!1,fromColibri:!0,fromFirebase:!0,isCustomSection:!0,isProOnFree:!1,isGutentagPattern:!0,content:JSON.parse(t.content.raw),internalTags:[],publicTags:[]};(0,a.registerPattern)(o),i=[...i,t.id]})),t(i)}),[o,e]),null};function Ha({record:e,checked:t,onChange:o,closePanel:n}){const{name:i,kind:r,title:a,key:s}=e,l=(0,w.useSelect)((e=>{var t;const{blocks:o=[]}=e("core").getEditedEntityRecord(r,i,s),n=e("core/block-editor").getBlockParents(null===(t=o[0])||void 0===t?void 0:t.clientId);return n[n.length-1]}),[]),u=(0,w.useSelect)((e=>{if("postType"!==r||"wp_template"!==i)return a;const t=e("core").getEditedEntityRecord(r,i,s);return e("core/editor").__experimentalGetTemplateInfo(t).title}),[i,r,a,s]),d=(0,w.useSelect)((e=>e("core/block-editor").getSelectedBlockClientId()===l),[l]),p=d?(0,C.__)("Selected","kubio"):(0,C.__)("Select","kubio"),{selectBlock:h}=(0,w.useDispatch)("core/block-editor"),m=(0,c.useCallback)((()=>h(l)),[l]),g=(0,c.useCallback)((()=>{h(l),n()}),[l]);return(0,j.jsxs)(k.PanelRow,{children:[(0,j.jsx)(k.CheckboxControl,{label:(0,j.jsx)("strong",{children:u||(0,C.__)("Untitled","kubio")}),checked:t,onChange:o}),l?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{onClick:m,className:"entities-saved-states__find-entity",disabled:d,children:p}),(0,j.jsx)(k.Button,{onClick:g,className:"entities-saved-states__find-entity-small",disabled:d,children:p})]}):null]})}const Ua={site:(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),page:(0,j.jsxs)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,j.jsx)(Q.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,j.jsx)(Q.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]})};function Wa({list:e,unselectedEntities:t,setUnselectedEntities:o,closePanel:n}){const i=e[0],r=(0,w.useSelect)((e=>e("core").getEntity(i.kind,i.name)),[i.kind,i.name]),{name:a}=i,s=Ua[a];return(0,j.jsx)(k.PanelBody,{title:r.label,initialOpen:!0,icon:s,children:e.map((e=>(0,j.jsx)(Ha,{record:e,checked:!(0,p.some)(t,(t=>t.kind===e.kind&&t.name===e.name&&t.key===e.key)),onChange:t=>o(e,t),closePanel:n},e.key||`${e.kind}-${e.name}-${e.property}`)))})}const Va={title:(0,C.__)("Title","kubio"),description:(0,C.__)("Tagline","kubio"),site_logo:(0,C.__)("Logo","kubio"),sitelogo:(0,C.__)("Logo","kubio"),show_on_front:(0,C.__)("Show on front","kubio"),page_on_front:(0,C.__)("Page on front","kubio")},Ka={wp_template_part:e=>(0,C._n)("template part","template parts",e,"kubio"),wp_template:e=>(0,C._n)("template","templates",e,"kubio"),post:e=>(0,C._n)("post","posts",e,"kubio"),page:e=>(0,C._n)("page","pages",e,"kubio"),site:e=>(0,C._n)("site","sites",e,"kubio")},$a=(0,k.withFocusReturn)((function({isOpen:e,close:t}){const{dirtyEntityRecords:o}=(0,w.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),o=e(S.store).getEntityRecordEdits("root","site"),n=[];for(const e in o)n.push({kind:"root",name:"site",title:Va[e]||e,property:e});return{dirtyEntityRecords:[...t,...n]}}),[]),{saveEditedEntityRecord:n}=(0,w.useDispatch)("core"),i=Object.values((0,p.groupBy)(o,"name")),r=[];i.forEach((e=>{Ka[e[0].name]&&r.push(Ka[e[0].name](e.length))}));const[a,s]=(0,c.useState)([]),l=({kind:e,name:t,key:o},n)=>{s(n?a.filter((n=>n.kind!==e||n.name!==t||n.key!==o)):[...a,{kind:e,name:t,key:o}])},u=(0,c.useCallback)((()=>t()),[t]),d=(0,C.__)("Save","kubio");return e?(0,j.jsxs)("div",{className:"entities-saved-states__panel kubio-entities-saved-states__panel",children:[(0,j.jsxs)("div",{className:"entities-saved-states__panel-header",children:[(0,j.jsx)(k.Button,{isPrimary:!0,disabled:o.length-a.length==0,onClick:()=>{const e=(()=>{const e=o.filter((({kind:e,name:t,key:o})=>!(0,p.some)(a,(n=>n.kind===e&&n.name===t&&n.key===o))));return e})();t(e),e.forEach((({kind:e,name:t,key:o})=>{n(e,t,o)}))},className:"editor-entities-saved-states__save-button",children:d}),(0,j.jsx)(k.Button,{onClick:u,icon:We,label:(0,C.__)("Close panel","kubio")})]}),(0,j.jsxs)("div",{className:"entities-saved-states__text-prompt",children:[(0,j.jsx)("strong",{children:(0,C.__)("Select the changes you want to save","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("Some changes may affect other areas of your site.","kubio")})]}),i.map((e=>(0,j.jsx)(Wa,{list:e,closePanel:u,unselectedEntities:a,setUnselectedEntities:l},e[0].name)))]}):null})),qa=(0,j.jsx)(Q.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)(Q.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})});var Ya=o(4670),Za=o.n(Ya);const Xa="IS_AI_PAGE_GENERATING_"+Za().generate(),Qa=()=>(0,f.useGlobalSessionProp)(Xa),Ja=["front-page","single-post","page","archive","search","404","index"],es="root",ts="template-parts",os="templates",ns="templates-general",is="templates-pages",rs="templates-posts",as="kubio__custom-templates",ss="kubio__theme-templates",ls="kubio__kubio-templates",cs=[{area:"header",menu:"template-parts-headers",title:(0,C.__)("Headers","kubio")},{area:"footer",menu:"template-parts-footers",title:(0,C.__)("Footers","kubio")},{area:"sidebar",menu:"template-parts-sidebars",title:(0,C.__)("Sidebars","kubio")},{area:"uncategorized",menu:"template-parts-general",title:(0,C.__)("General","kubio")}];function us({openEntitiesSavedStates:e}){const{saveEditedEntityRecord:t}=(0,w.useDispatch)("core"),{isSaving:o,isDirty:n}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:o}=e("core"),n=t();return{isDirty:n.length>0,isSaving:(0,p.some)(n,(e=>o(e.kind,e.name,e.key)))}})),i=!n||o,r=(0,C.__)("Save","kubio"),{dirtyEntityRecords:a}=(0,w.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),o=e(S.store).getEntityRecordEdits("root","site"),n=[];for(const e in o)n.push({kind:"root",name:"site",property:e});return{dirtyEntityRecords:[...t,...n]}}),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{isPrimary:!0,className:"edit-site-save-button__button","aria-disabled":i,disabled:i,isBusy:o,onClick:i?void 0:()=>{a.forEach((({kind:e,name:o,key:n})=>{t(e,o,n)}))},children:r}),(0,j.jsx)(k.Button,{isPrimary:!0,icon:Ge.ArrowDown,iconSize:24,className:"edit-site-save-button__dropdown","aria-disabled":i,disabled:i,onClick:i?void 0:e})]})}const ds=(0,c.memo)((({onClose:e})=>{const t=(0,I.isAdvancedMode)()?(0,C.__)("Switch to quick mode","kubio"):(0,C.__)("Switch to advanced mode","kubio");return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.MenuGroup,{className:"kubio-block-settings-control",children:(0,j.jsx)(k.MenuItem,{tag:k.MenuItem,onClick:()=>{e(),(0,I.toggleAdvancedMode)()},children:t})})})})),ps=((0,x.createHigherOrderComponent)((e=>t=>{const{isSelected:o}=t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(e,{...t}),o&&(0,j.jsx)(y.BlockSettingsMenuControls,{children:({onClose:e})=>(0,j.jsx)(ds,{onClose:e})})]})})),(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})})),hs=window.wp.a11y;function ms({feature:e,label:t,info:o,messageActivated:n,messageDeactivated:i}){const r=(0,w.useSelect)((t=>t(m.STORE_KEY).isFeatureActive(e)),[]),{toggleFeature:a}=(0,w.useDispatch)(m.STORE_KEY);return(0,j.jsx)(k.MenuItem,{icon:r&&Yi,isSelected:r,onClick:(0,p.flow)(a.bind(null,e),(()=>{r?(0,hs.speak)(i||(0,C.__)("Feature deactivated","kubio")):(0,hs.speak)(n||(0,C.__)("Feature activated","kubio"))})),role:"menuitemcheckbox",info:o,children:t})}const gs=e=>(0,s.convertTemplateFormatToBlock)([e]).map((e=>(0,I.refreshBlockStyleRefs)(e))),{getClientIdsWithDescendants:fs,getBlock:bs}=(0,w.select)("core/block-editor"),_s=(e,t=[])=>{const o=(0,b.getFromGenerationSession)("sectionsGeneratedAnchors",new Set),n=fs().filter((e=>!t.includes(e))).map((e=>{var t,o;return null===(t=bs(e))||void 0===t||null===(o=t.attributes)||void 0===o?void 0:o.anchor})).filter(Boolean).concat([...o]),i=(0,I.slugify)(e);let r=0,a=i;for(;-1!==n.indexOf(a);)r++,a=`${i}-${r}`;o.add(a),(0,b.setInGenerationSession)("sectionsGeneratedAnchors",o);let s=r?`${e} ${r}`:e;return s=s.split(" ").map(p.upperFirst).join(" "),{name:s,anchor:a}},vs=async({section:e,pageTitle:t,siteContext:o,pageContext:n,generateAnchorAndName:i=!0,isGuest:r,sectionParams:s,pregeneratedStructure:l})=>{const c=(0,a.sectionCategoryToLabel)(e.category);let u,d,p;const{name:h,anchor:m}=i?_s(c):{};try{[p,d]=await(0,b.fillSectionTemplate)({...e,pageTitle:t,siteContext:o,pageContext:n,label:h,anchor:m,isGuest:r,sectionParams:s,pregeneratedStructure:l}),u=gs(p),u=ys(u,o,n)}catch(e){throw e}return[u,d]},ys=(e,t,o)=>(e=(0,I.cleanFontFamilyFromBlocks)(e),(0,I.walkBlocks)(e,(n=>(0,u.applyFilters)("kubio.ai.generateSectionBlocks.afterBlockGenerated",n,t,o,e))),e),ks=async({clientId:e,sectionCategory:t,pageContext:o,siteContext:n,pageTitle:i,replaceBlocks:r,clearSelectedBlock:a=p.noop,setAIData:s=p.noop,summary:l="",currentSectionCloudId:c=null,usedSections:u=null},d)=>{let h=[];u&&u.items.has(e)&&(h=[...u.items.get(e)]);try{if(!d){Vo.Log.info(`Used sections: ${h.join()||"N/A"} | Section id: ${c}`);const e=(0,b.getPageContentSectionTemplate)({category:t,siteContext:n,returnAll:!0,skipIds:(0,p.isNumber)(c)?[c]:[]});let o=null;const i=e.filter((e=>!h.includes(e.cloudPresetId)));if(i.length)o=i[0],h.push(o.cloudPresetId);else{const t=h.shift();o=e.find((e=>e.cloudPresetId===t))||e[0]}(0,p.isNumber)(c)&&!h.includes(c)&&h.push(c),d=o.template}const[m]=await vs({section:{category:t,template:d,summary:l},pageContext:o,siteContext:n,pageTitle:i});r(e,m);const g=m[0].clientId;if(u){const t=new Map(u.items);t.delete(e),t.set(g,(0,p.uniq)(h)),u.setItems(t)}if(o.isFrontPage&&"cta"===t){const e=(0,p.cloneDeep)(n);(0,p.set)(e,["cta","pattern"],{category:t,template:m.map(I.transformBlockToTemplate),summary:l}),s(e,"siteContext"),(0,b.saveAiGeneralSettings)(e)}window.requestIdleCallback((()=>{a(g)}))}catch(e){Vo.Log.error("contentSectionReplaceDesign",e)}},xs=async({clientId:e,sectionCategory:t,pageContext:o,siteContext:n,pageTitle:i,replaceBlocks:r,block:a,setAIData:s=p.noop,summary:l="",isGuest:c,sectionParams:u,pregeneratedStructure:d})=>{try{const h=(0,I.transformBlockToTemplate)(a),m=await(async({section:e,pageTitle:t,siteContext:o,pageContext:n,includeContent:i=!0,clientId:r,isGuest:a,sectionParams:s,pregeneratedStructure:l})=>{const c=e.category.replaceAll(".",""),{name:u,anchor:d}=_s(c,[r]),[p]=await(0,b.rephraseSectionTemplate)({...e,pageTitle:t,siteContext:o,pageContext:n,label:u,anchor:d,includeContent:i,isGuest:a,sectionParams:s,pregeneratedStructure:l});let h=gs(p);return h=ys(h,o,n),h})({section:{category:t,template:h,summary:l},pageContext:o,siteContext:n,pageTitle:i,includeContent:!0,clientId:e,isGuest:c,sectionParams:u,pregeneratedStructure:d});if(r(e,m),o.isFrontPage&&"cta"===t){const e=(0,p.cloneDeep)(n);(0,p.set)(e,["cta","pattern"],{category:t,template:m.map(I.transformBlockToTemplate),summary:l}),s(e,"siteContext"),(0,b.saveAiGeneralSettings)(e)}}catch(e){Vo.Log.error("contentSectionReplaceContent",e)}},{NAVIGATION:Ss,NAVIGATION_TOP_BAR:ws,NAVIGATION_ITEMS:Cs,NAVIGATION_STICKY_ITEMS:Is}=(0,Ue.getNamesOfBlocks)(),js=async(e,{pageContext:t,siteContext:o,pageTitle:n,skipNavigationGeneration:i}={})=>{if(e=e.map((e=>(0,st.cloneBlock)(e))),i){const n=(0,I.transformBlockToTemplate)(e[0]);let i=gs(n);return i=ys(i,o,t),i}const r=[];return(0,s.walkBlockTree)(e,(async e=>{[ws,Cs,Is].includes(e.name)&&!i&&r.push((async()=>{try{const[i]=await vs({section:{category:ws===e.name?"navigation-top-bar":"navigation",template:(0,I.transformBlockToTemplate)(e)},pageTitle:n,siteContext:o,pageContext:t}),{attributes:r,innerBlocks:a}=i[0];h().set(e,"attributes",r),h().set(e,"innerBlocks",a)}catch(t){Vo.Log.error(`Kubio AI section generation error - navigation section: ${e.name}`,t,e)}}))})),await Promise.allSettled(r.map((e=>e()))),e},Ts=async({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,innerBlocks:r,clearSelectedBlock:a=p.noop,isGuest:s,sectionParams:l,pregeneratedStructure:c,skipNavigationGeneration:u=!1})=>{const d=r.filter((e=>e.name!==Ss)),h=r.filter((e=>[Ss].includes(e.name)));for(let r=0;r<d.length;r++){const a=d[r];await Ps({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,block:a,isGuest:s,sectionParams:l,pregeneratedStructure:c})}for(let r=0;r<h.length;r++){const a=h[r];await Ps({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,block:a,isGuest:s,sectionParams:l,pregeneratedStructure:c,skipNavigationGeneration:u})}a()},Ps=async({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,block:r,isGuest:a,sectionParams:s,pregeneratedStructure:l,skipNavigationGeneration:c})=>{try{const u=(0,I.transformBlockToTemplate)(r);if(r.name===Ss){const[e]=await js([r],{pageTitle:n,siteContext:o,pageContext:t,skipNavigationGeneration:c});return void i(r.clientId,e,0)}const[d]=await vs({section:{category:e,template:u},pageContext:t,siteContext:o,pageTitle:n,includeContent:!1,isGuest:a,sectionParams:s,pregeneratedStructure:l});i(r.clientId,d,0)}catch(e){Vo.Log.error("headerInnerBlocksReplaceContent",e)}},Es=()=>(0,j.jsx)(j.Fragment,{children:(0,c.createPortal)((0,j.jsx)("div",{id:"kubio-editor-view",className:"kubio-black-wizard-onboarding__editor-loader",children:(0,j.jsx)(xa,{})}),document.querySelector("body"))}),Rs=(0,c.memo)((({message:e,withFooter:t=!0,icon:o=Ge.KubioAI})=>(0,c.createPortal)((0,j.jsxs)("div",{className:"kubio-ai-page-generator-overlay",children:[(0,j.jsx)(k.Flex,{align:"center",justify:"center",children:(0,j.jsxs)(k.FlexBlock,{children:[(0,j.jsx)(He,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:o}),(0,j.jsx)("h2",{children:e})]})}),t&&(0,j.jsx)("div",{className:"kubio-ai-page-generator-overlay__footer",children:(0,j.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,C.sprintf)(// translators: %s is the url to pexels
// translators: %s is the url to pexels
(0,C.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}})})]}),window.document.body))),As="generated",Os=["cta","website-main-cta-section"];class Ns{constructor({generateFunction:e,ownerDocument:t,notify:o,sections:n,siteContext:i,pageContext:r}){ft(this,"generateFunction",void 0),ft(this,"siteContext",void 0),ft(this,"queue",[]),ft(this,"insertedSections",[]),ft(this,"queuedSections",new Map),ft(this,"ownerDocument",void 0),this.notify=o,this.ownerDocument=t,this.siteContext=i,this.pageContext=r,this.generateFunction=e,this.initialize(n)}initialize(e){for(const t of e){let e=t.slug;const o=Za().generate();Os.includes(t.category)||(e=`${t.slug}::${o}`),this.queuedSections.set(e,{id:o,itemSlug:t.slug,category:t.category,section:t,block:t.block,inserted:!1,status:null,isHeader:t.isHeader,contentIndex:t.contentIndex,isVisible:!1}),this.queue.push(e)}}async start(){this.hideSections(),this.generate(),await this.showGeneratedSectionsInOrder(),this.removeStyleNode()}hideSections(){this.updateHideSectionStyle()}getStyleNode(){let e=this.ownerDocument.querySelector("style[data-black-wizard-sections-style]");return e||(e=document.createElement("style"),e.setAttribute("data-black-wizard-sections-style",!0),this.ownerDocument.head.append(e)),e}removeStyleNode(){var e,t;const o=this.getStyleNode();o&&(null==o||null===(e=o.parentNode)||void 0===e||null===(t=e.removeChild)||void 0===t||t.call(e,o))}updateHideSectionStyle(){const e=[];let t=" ";this.queuedSections.forEach((t=>{if(!t.isVisible)return;if(t.isHeader)return void e.push('[data-type="kubio/header"]:not(#extra-1)');const o=t.contentIndex;e.push(`[data-type="core/post-content"]:not(#extra-1) [data-type="kubio/section"]:nth-child(${o+1})`)})),t+=e.join(",")+" { opacity: 1 !important;}",this.getStyleNode().innerHTML=t}async generateSection(e){const t=this.queuedSections.get(e);if(null===t.status)try{this.logInfo((0,C.sprintf)("Start tailoring - %1$s ( %2$s )",t.itemSlug,t.id)),this.queuedSections.set(e,{...t,status:"generating"}),await this.generateFunction({block:t.block,siteContext:this.siteContext}),this.queuedSections.set(e,{...t,status:As})}catch(o){this.queue.map(((t,o)=>t===e?o:-1)).filter((e=>e>=0)).forEach((e=>this.queue.splice(e,1))),this.logError("Kubio AI section generation error",o,t.section)}}async generate(e){e&&this.notify((0,C.__)("Preparing page content","kubio"));const t=this.queue[0],o=this.queue.slice(1);await this.executeChunk([t]);const n=(0,p.chunk)(o,4);for(const e of n)await this.executeChunk(e)}async executeChunk(e){await Promise.allSettled(e.map(((e,t)=>this.generateSection(e,t)))),await(0,I.sleep)(1e3)}getInsertedSections(){return this.insertedSections}async showGeneratedSectionsInOrder(){const e=this.queue[0],t=this.queuedSections.get(e);return this.notify(((e="")=>(0,C.sprintf)(// translators: %s section name
// translators: %s section name
(0,C.__)('Tailoring "%s" section',"kubio"),(0,a.sectionCategoryToLabel)(e)))(t.category)),t.status!==As?(await(0,I.sleep)(200),await this.showGeneratedSectionsInOrder()):(this.queue.shift(),this.logInfo((0,C.sprintf)("Inserted - %1$s ( %2$s )",t.itemSlug,t.id)),await this.showSection(e,t),await(0,I.sleep)(700),this.queue.length?await this.showGeneratedSectionsInOrder():void 0)}async showSection(e,t){this.queuedSections.set(e,{...t,isVisible:!0});const o=t.isHeader,n=t.contentIndex,i=o?'[data-type="kubio/header"]':`[data-type="core/post-content"] [data-type="kubio/section"]:nth-child(${n+1})`,r=this.ownerDocument.querySelector(i);r&&r.scrollIntoView({behavior:"smooth",block:"center"}),await(0,I.sleep)(500),this.updateHideSectionStyle()}logInfo(e,...t){Vo.Log.info(`[SectionsQueue] ${e}`,...t)}logError(e,...t){Vo.Log.error(`[SectionsQueue] ${e}`,...t)}}const Ds="{sitename}";function Ms(e){var t,o,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(o=Ms(e[t]))&&(n&&(n+=" "),n+=o)}else for(o in e)e[o]&&(n&&(n+=" "),n+=o);return n}const Bs=function(){for(var e,t,o=0,n="",i=arguments.length;o<i;o++)(e=arguments[o])&&(t=Ms(e))&&(n&&(n+=" "),n+=t);return n},Ls=({className:e,error:t,children:o})=>(0,j.jsx)("div",{className:Bs(e,"kubio-black-wizard-onboarding__control",{"kubio-black-wizard-onboarding__control--with-error":t}),children:o});Ls.Label=({children:e})=>(0,j.jsx)("label",{children:e}),Ls.Error=({children:e})=>(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__control__error",children:e});const zs=({typography:e,onClick:t,activeTypography:o})=>{const n=o,i=e,r=i.h1.family,a={fontFamily:r},s=i.p.family,l={fontFamily:s},u=h().get(n,"h1.family"),d=h().get(n,"p.family"),p=(0,c.useRef)(),m=(0,c.useRef)(),g=(0,c.useCallback)((()=>{var e;null!==(e=p.current)&&void 0!==e&&e.rel&&(p.current.rel="stylesheet")}),[]),f=(0,c.useCallback)((()=>{var e;null!==(e=m.current)&&void 0!==e&&e.rel&&(m.current.rel="stylesheet")}),[]),b=u===r&&d===s;return(0,j.jsxs)("div",{className:Bs("kubio-black-wizard-onboarding__typography__item",{"kubio-black-wizard-onboarding__typography__item--active":b}),onClick:()=>{t(e)},"aria-hidden":"true",children:[(0,j.jsx)("link",{href:`https://fonts.googleapis.com/css?family=${r}&display=swap`,rel:"preload",as:"style",ref:p,onLoad:g}),(0,j.jsx)("link",{href:`https://fonts.googleapis.com/css?family=${s}&display=swap`,rel:"preload",as:"style",ref:m,onLoad:f}),(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__typography__item__background",children:(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__typography__item__inner",children:[(0,j.jsx)("span",{style:a,children:"Aa"}),(0,j.jsx)("span",{style:l,children:"Bb"})]})})]})},Fs=({typographyList:e,onClick:t,activeTypography:o})=>(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__typography__list",children:e.map(((e,n)=>(0,j.jsx)(zs,{typography:e,onClick:t,activeTypography:o},n)))}),Gs={h1:{weight:400},h2:{weight:400},h3:{weight:400},h4:{weight:400},h5:{weight:400},h6:{weight:400}},Hs={family:"Open Sans"},Us={family:"Merriweather"},Ws={family:"DM Serif Display"},Vs={family:"Abril Fatface"},Ks={family:"Poppins"},$s={family:"IBM Plex Sans Condensed"},qs={family:"IBM Plex Sans"},Ys={family:"Work Sans"},Zs={family:"Oswald"},Xs={family:"Source Sans Pro"},Qs={family:"Yeseva One"},Js={family:"Josefin Sans"},el={family:"Della Respira"},tl={family:"DM Sans"},ol=[h().merge({},{h1:Ws,h2:Ws,h3:Ws,h4:Ws,h5:Ws,h6:Ws,p:tl,lead:tl,a:tl},Gs),h().merge({},{h1:Vs,h2:Vs,h3:Vs,h4:Vs,h5:Vs,h6:Vs,p:Ks,lead:Ks,a:Ks},Gs),h().merge({},{h1:$s,h2:$s,h3:$s,h4:$s,h5:$s,h6:$s,p:qs,lead:qs,a:qs},{h1:{weight:500},h2:{weight:600},h3:{weight:500},h4:{weight:600},h5:{weight:500},h6:{weight:500}}),h().merge({},{h1:Ys,h2:Ys,h3:Ys,h4:Ys,h5:Ys,h6:Ys,p:Us,lead:Us,a:Us},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500}}),h().merge({},{h1:Zs,h2:Zs,h3:Zs,h4:Zs,h5:Zs,h6:Zs,p:Xs,lead:Xs,a:Xs},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500}}),h().merge({},{h1:Qs,h2:Qs,h3:Qs,h4:Qs,h5:Qs,h6:Qs,p:Js,lead:Js,a:Js},Gs),h().merge({},{h1:el,h2:el,h3:el,h4:el,h5:el,h6:el,p:Hs,lead:Hs,a:Hs},Gs)],nl=()=>{const{typographyList:e,onSelectPreset:t,bodyTypographyHolders:o}=il();return(0,j.jsxs)(Ls,{children:[(0,j.jsx)(Ls.Label,{children:(0,C.__)("Typography","kubio")}),(0,j.jsx)(Fs,{typographyList:e,onClick:t,activeTypography:o})]})},il=()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:o}=Gr({typographyPresets:ol});return{bodyTypographyHolders:t,typographyList:(0,c.useMemo)((()=>e),[e]),onSelectPreset:o}},rl=[{label:(0,C.__)("Color Scheme 1","kubio"),colors:[{slug:"kubio-color-1",color:[16,111,95]},{slug:"kubio-color-2",color:[30,132,115]},{slug:"kubio-color-3",color:[83,164,150]},{slug:"kubio-color-4",color:[244,119,40]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[40,44,43]}]},{label:(0,C.__)("Color Scheme 2","kubio"),colors:[{slug:"kubio-color-1",color:[65,70,243]},{slug:"kubio-color-2",color:[96,101,255]},{slug:"kubio-color-3",color:[132,135,242]},{slug:"kubio-color-4",color:[22,226,175]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[38,38,44]}]},{label:(0,C.__)("Color Scheme 3","kubio"),colors:[{slug:"kubio-color-1",color:[206,28,202]},{slug:"kubio-color-2",color:[238,99,232]},{slug:"kubio-color-3",color:[245,178,211]},{slug:"kubio-color-4",color:[105,54,104]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[28,29,31]}]},{label:(0,C.__)("Color Scheme 4","kubio"),colors:[{slug:"kubio-color-1",color:[217,34,34]},{slug:"kubio-color-2",color:[245,127,127]},{slug:"kubio-color-3",color:[247,221,212]},{slug:"kubio-color-4",color:[92,145,58]},{slug:"kubio-color-5",color:[244,244,247]},{slug:"kubio-color-6",color:[41,46,56]}]},{label:(0,C.__)("Color Scheme 5","kubio"),colors:[{slug:"kubio-color-1",color:[251,133,0]},{slug:"kubio-color-2",color:[255,172,79]},{slug:"kubio-color-3",color:[255,233,207]},{slug:"kubio-color-4",color:[184,196,203]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[59,60,77]}]},{label:(0,C.__)("Color Scheme 6","kubio"),colors:[{slug:"kubio-color-1",color:[129,37,208]},{slug:"kubio-color-2",color:[142,59,213]},{slug:"kubio-color-3",color:[169,107,221]},{slug:"kubio-color-4",color:[251,129,69]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[35,35,38]}]},{label:(0,C.__)("Color Scheme 7","kubio"),colors:[{slug:"kubio-color-1",color:[230,176,46]},{slug:"kubio-color-2",color:[238,207,114]},{slug:"kubio-color-3",color:[250,235,188]},{slug:"kubio-color-4",color:[186,219,215]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[65,64,68]}]}],al=({palette:e,onClick:t,activePaletteColors:o})=>{const n=(0,c.useMemo)((()=>{var t,o;return null==e||null===(t=e.colors)||void 0===t||null===(o=t.slice)||void 0===o?void 0:o.call(t,0,3)}),[e]),i=(0,c.useMemo)((()=>(0,I.getColorPalettesAreEqual)(null==e?void 0:e.colors,o)),[o,e]);if(3!==n.length)return;const r=h().get(n,0),a=h().get(n,1),s=h().get(n,2);return(0,j.jsx)("div",{className:Bs("kubio-black-wizard-onboarding__color-scheme__item",{"kubio-black-wizard-onboarding__color-scheme__item--active":i}),onClick:()=>{t(e)},"aria-hidden":"true",children:(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__color-scheme__item__background",children:(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__color-scheme__item__inner",children:[(0,j.jsx)(k.ColorIndicator,{colorValue:`rgb(${r.color.join(",")})`}),(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__color-scheme__color-wrapper",children:[(0,j.jsx)(k.ColorIndicator,{colorValue:`rgb(${a.color.join(",")})`}),(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__color-scheme__color-wrapper",children:(0,j.jsx)(k.ColorIndicator,{colorValue:`rgb(${s.color.join(",")})`})})]})]})})})},sl=({paletteList:e,onClick:t,activePaletteColors:o})=>(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__color-scheme__list",children:e.map(((e,n)=>(0,j.jsx)(al,{palette:e,onClick:t,activePaletteColors:o},n)))}),ll=()=>{const{mergedPalettes:e,onHandleClick:t,activePaletteColors:o}=cl();return(0,j.jsxs)(Ls,{children:[(0,j.jsx)(Ls.Label,{children:(0,C.__)("Color Scheme","kubio")}),(0,j.jsx)(sl,{paletteList:e,onClick:t,activePaletteColors:o})]})},cl=()=>{const{onHandleClick:e,activePaletteValue:t}=Kr(),o=(0,c.useMemo)((()=>t),[]),{mergedPalettes:n}=(0,c.useMemo)((()=>({mergedPalettes:[{label:(0,C.__)("Theme colors","kubio"),isCustom:!0,colors:o}].concat(rl)})),[o]);return{mergedPalettes:n,onHandleClick:e,activePaletteColors:t}},{NAVIGATION:ul,HERO:dl}=(0,Ue.getNamesOfBlocks)(),pl=async()=>{const{getEntityRecords:e}=(0,w.resolveSelect)("core");return(await e("postType","wp_template_part",{per_page:-1})||[]).find((({kubio_template_source:e,slug:t})=>"kubio"===e&&["header","","kubio-header"].includes(t)))||null},hl=async(e=!1)=>{const t=await pl();if(!t)return Vo.Log.error("Inner header not found"),[];let o=[];try{o=(0,st.parse)((0,p.get)(t,["content","raw"]))}catch(e){Vo.Log.error("Inner header content not ok",e)}return e?o.map(I.transformBlockToTemplate):o},ml=async(e,t,o,n,i=!1,r=null,a=null)=>{let s=[];const l=await pl();if(!l)return;const c=h().get(e,"2",[]),d=(0,p.cloneDeep)(c.find((e=>e[0]===ul)));let m=(0,p.cloneDeep)(c.find((e=>e[0]===dl)));if(d&&(s=ys(s.concat((0,p.castArray)(gs(d))),o,n)),m){m=(0,u.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",m);const[e]=await vs({section:{category:"hero",template:m},pageTitle:t,siteContext:o,pageContext:n,pregeneratedStructure:a,isGuest:i,sectionParams:r});s=s.concat((0,p.castArray)(e))}if((0,p.isEmpty)(s))return;const g={blocks:s,content:({blocks:e=[]})=>(0,st.__unstableSerializeAndClean)(e)},{editEntityRecord:f}=(0,w.dispatch)("core");f("postType","wp_template_part",l.id,g)},gl=(0,I.getBackendData)("importDesignIndex"),fl=e=>{const t=(0,I.getBackendData)("importDesignAiStructure");return null==t?void 0:t[e]},bl=e=>t=>Array.isArray(t)?(t.forEach((t=>{var o,n;const i=null==e?void 0:e.business_name;null!=t&&null!==(o=t.content)&&void 0!==o&&null!==(n=o.includes)&&void 0!==n&&n.call(o,Ds)&&i&&(t.content=t.content.replace(Ds,i))})),t):t,_l=async e=>{const t=h().merge({retries:1},e),{sections:o,retries:n,setCurrentlyGeneratingMessage:i,pageTitle:r,siteContext:a,pageContext:s,currentTheme:l,initialBusinessName:c,colorSchemeAndTypography:u}=t;i((0,C.__)("Tailoring page structure","kubio"));let d=null;try{d=await(0,b.getDefaultHomepageSectionsSummariesByAnchor)({pageTitle:r,siteContext:a,pageContext:s,theme:l,importDesignIndex:gl,colorSchemeAndTypography:u,retries:n})}catch(e){console.error(e)}return h().isEmpty(d)?n>0?_l({...t,retries:n-1}):o:xl({sectionBlocks:o,summariesByAnchor:d,initialBusinessName:c})},vl=({bodyTypographyHolders:e,activePaletteColors:t,mergedPalettes:o})=>({typography:kl({bodyTypographyHolders:e}),colorScheme:yl({activePaletteColors:t,mergedPalettes:o})}),yl=({activePaletteColors:e,mergedPalettes:t})=>{let o={label:"Theme defaults",value:e.map((e=>`rgb(${e.color.join(",")})`))};return t.forEach(((t,n)=>{if((0,I.getColorPalettesAreEqual)(null==t?void 0:t.colors,e)){const e=null!=t&&t.isCustom?"Theme defaults":`Preset ${n+1}`;o={label:e,value:t.colors.map((e=>`rgb(${e.color.join(",")})`))}}})),o},kl=({bodyTypographyHolders:e})=>{const t=h().get(e,"h1.family"),o=h().get(e,"p.family");let n={};return n={label:"Theme defaults",value:[t,o]},ol.forEach(((e,i)=>{const r=h().get(e,"h1.family"),a=h().get(e,"p.family");if(r===t&&a===o){const e=`Preset ${i+2}`;n.label=e}})),n},xl=({sectionBlocks:e,summariesByAnchor:t,initialBusinessName:o})=>(e.forEach((e=>{const n=h().get(e,"attributes.anchor");let i=h().get(t,`${n}.summary`,"");i=i.replace(Ds,o);const r=h().get(t,`${n}.category`,"");h().set(e,"attributes.kubioAI.meta.category",r),h().set(e,"attributes.kubioAI.meta.summary",i)})),e),Sl=e=>{const t="kubio/header"===e.name,o=e.attributes,n=t?"hero":"section";let i=(h().get(o,"anchor",n)||n).replace(/\-\d+/,"");i=(0,b.normalizeCategorySlug)(i);const r=h().get(o,"kubioAI.meta.category",i);if(!b.allowedSections.includes(r)){if(r.includes("service"))return"features";if(r.includes("project"))return"portfolio";if(r.includes("hero"))return"hero"}return r},wl=()=>{const e=document.querySelector(".kubio-iframe");return null==e?void 0:e.contentDocument},Cl="kubio-black-wizard-onboarding-generating",Il=()=>{wl().body.classList.remove(Cl)},jl=({pluginsList:e,setPluginsList:t})=>h().isEmpty(e)?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__user-preferences-modal__plugins",children:[(0,j.jsxs)(k.BaseControl,{children:[(0,j.jsx)(k.BaseControl.VisualLabel,{children:(0,C.__)("The following features will be installed:","kubio")}),(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__user-preferences-modal__content__description",children:(0,C.__)("The following plugins will be installed to add features that are needed for this type of website.","kubio")}),e.map(((o,n)=>{const{label:i,checked:r,description:a}=o;return(0,j.jsxs)(k.BaseControl,{children:[(0,j.jsx)(k.CheckboxControl,{__nextHasNoMarginBottom:!0,label:i,onChange:()=>{const o=h().cloneDeep(e);h().set(o,`${n}.checked`,!r),t(o)},checked:r}),(0,j.jsx)("p",{className:"kubio-black-wizard-onboarding__user-preferences-modal__checkbox-description ",children:a})]},n)}))]}),(0,j.jsx)("hr",{})]}),Tl=({siteContext:e,generateFrontPage:t,setGenerateFrontPage:o})=>{const n=null==e?void 0:e.industry;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.BaseControl,{className:"kubio-black-wizard-onboarding__user-preferences-modal__generate-toggle",children:[(0,j.jsx)(k.CheckboxControl,{checked:t,label:(0,C.__)("Home page with tailored content","kubio"),onChange:()=>o(!t)}),(0,j.jsx)("p",{className:"kubio-black-wizard-onboarding__user-preferences-modal__checkbox-description",dangerouslySetInnerHTML:{__html:(0,C.sprintf)((0,C.__)("Our AI will create a first draft of home page content specific for the <strong>%s</strong> industry","kubio"),`<strong>${n}</strong>`)}})]}),(0,j.jsx)("hr",{})]})},Pl=({pagesList:e,setPagesList:t})=>h().isEmpty(e)?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.BaseControl,{children:[(0,j.jsx)(k.BaseControl.VisualLabel,{children:(0,C.__)("The following pages will be created:","kubio")}),e.map(((o,n)=>{const{label:i,checked:r}=o;return(0,j.jsx)(k.BaseControl,{children:(0,j.jsx)(k.CheckboxControl,{__nextHasNoMarginBottom:!0,label:i,onChange:()=>{const o=h().cloneDeep(e);h().set(o,`${n}.checked`,!r),t(o)},checked:r})},n)}))]}),(0,j.jsx)("hr",{})]}),El=({siteContext:e,onFinish:t,onApplySettingWithoutGenerating:o,onCancel:n,importDesignIndex:i,theme:r,sectionsBlocks:a})=>{const[l,u]=(0,c.useState)(!0),[d,p]=(0,c.useState)([]),[g,f]=(0,c.useState)(!1),[_,v]=(0,c.useState)(!1),[y,x]=(0,c.useState)((e=>(e=>{const t={"kubio/contact":m.DEFAULT_PLUGIN_FOR_PURPOSE.CONTACT_FORM,"kubio/subscribe-form":m.DEFAULT_PLUGIN_FOR_PURPOSE.SUBSCRIBE_FORM},o=Object.keys(t),n=[];return(0,s.walkBlockTree)(e,(e=>{if(null!=o&&o.includes(null==e?void 0:e.name)){const o=null==t?void 0:t[null==e?void 0:e.name];o&&!n.includes(n)&&n.push(o)}})),n})(e).map((e=>{var t,o;return{value:e,label:(null===m.THIRD_PARTY_PLUGINS_DETAILS||void 0===m.THIRD_PARTY_PLUGINS_DETAILS||null===(t=m.THIRD_PARTY_PLUGINS_DETAILS[e])||void 0===t?void 0:t.label)||e,checked:!0,description:(null===m.THIRD_PARTY_PLUGINS_DETAILS||void 0===m.THIRD_PARTY_PLUGINS_DETAILS||null===(o=m.THIRD_PARTY_PLUGINS_DETAILS[e])||void 0===o?void 0:o.description)||""}})))(a));return(0,c.useEffect)((()=>{try{(async()=>{try{const t=(await(0,b.generateSiteStructure)({siteContext:h().omit(e,"otherPages"),theme:r,importDesignIndex:i})).map((e=>({label:e,checked:!0})));p(t)}catch(e){console.error(e)}finally{f(!0)}})()}catch(e){console.error(e)}}),[]),g?(0,j.jsxs)(k.Modal,{title:(0,C.__)("Here's how we will tailor your website","kubio"),className:"kubio-black-wizard-onboarding__user-preferences-modal",shouldCloseOnClickOutside:!1,onRequestClose:n,shouldCloseOnEsc:!1,isDismissible:!1,children:[(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__user-preferences-modal__content",children:[(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__user-preferences-modal__content__description",children:(0,C.__)("You can deselect any of the suggested customizations if you don't think they would fit your website.","kubio")}),(0,j.jsx)(Tl,{siteContext:e,generateFrontPage:l,setGenerateFrontPage:u}),(0,j.jsx)(Pl,{pagesList:d,setPagesList:p}),(0,j.jsx)(jl,{pluginsList:y,setPluginsList:x})]}),(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__user-preferences-modal__footer",children:[(0,j.jsx)(k.Button,{isLink:!0,onClick:n,children:(0,C.__)("Skip","kubio")}),(0,j.jsx)(k.Button,{variant:"primary",onClick:async()=>{v(!0),l||await(0,I.sleep)(100);const e=d.filter((e=>e.checked)).map((e=>e.label)),n=y.filter((e=>e.checked)).map((e=>e.value)),i={generateFrontPage:l,pageNamesToGenerate:e,pluginsNamesToActivate:n};(e=>{e.forEach((({checked:e,value:t})=>{if(e)return;const o=t;(0,I.onToggleAllowPluginToInstall)(o,!1)}))})(y),l?t(i):o(i)},isBusy:_,children:(0,C.__)("Continue","kubio")})]})]}):(0,j.jsx)(j.Fragment,{})};let Rl=!1,Al=!1;const Ol=(0,I.getBackendData)("importDesignIndex"),Nl=({onFinish:e})=>{const[t,o]=(0,c.useState)((0,C.__)("","kubio")),[n,i]=(0,c.useState)(!1),r=(0,c.useMemo)((()=>{const e=document.querySelector(".kubio-iframe");return null==e?void 0:e.contentDocument}),[]),[a,l]=(0,b.useAIData)(),{pageContext:d,siteContext:p,pageTitle:g,getAIDataInRealTime:f,frontPageEntity:v}=a,{replaceBlocks:y,replaceInnerBlocks:k}=(0,w.useDispatch)("core/block-editor"),x=(0,c.useMemo)((()=>({language:"en_US",...p,business_name:Ds})),[p]),T=!!h().get(p,"industry");(0,c.useEffect)((()=>{T||e()}),[]);const P=(0,c.useMemo)((()=>null==p?void 0:p.business_name),[]),{postContentClientId:E,contentSectionsBlocks:R,currentTheme:A}=(0,w.useSelect)((e=>{const{getClientIdsWithDescendants:t,getBlock:o,getBlocks:n}=e("core/block-editor"),{currentPageHasFSETemplate:i}=e(m.STORE_KEY)||{},r=null==i?void 0:i();let a=null;const s=e("core").getCurrentTheme().stylesheet;return r&&(a=t().find((e=>{var t;return"core/post-content"===(null===(t=o(e))||void 0===t?void 0:t.name)})),a)?{postContentClientId:a,contentSectionsBlocks:n(a),currentTheme:s}:{postContentClientId:null,contentSectionsBlocks:[],currentTheme:s}}),[]),O=(0,w.useSelect)((e=>{const{getClientIdsWithDescendants:t,getBlock:o,getBlocks:n}=e("core/block-editor"),i=(e=>{const n=h().castArray("kubio/header"),i=t().map((e=>o(e))).find((e=>n.includes(e.name)));return null==i?void 0:i.clientId})();return i?o(i):null}),[]),{setPalette:N}=(0,_.useGlobalDataColors)(),{globalStyle:D}=(0,_.useGlobalDataStyle)(),{editEntityRecord:M,saveEntityRecord:B}=(0,w.useDispatch)("core"),{setLogoImage:L}=(0,_.useSiteLogoImages)(),[,z]=(0,S.useEntityProp)("root","site","title"),{getBlockOrder:F,getBlock:G}=(0,w.select)("core/block-editor"),H=(0,c.useRef)(),U=async({block:e,siteContext:t})=>{const{clientId:o}=e,n=null==r?void 0:r.querySelector(`[data-block="${o}"]`);if(!n)return;H.current||(H.current=n);const i=(({block:e,siteContext:t})=>{var o,n,i,r;const a="kubio/header"===e.name,s={};a&&(s.innerBlocks=F(e.clientId).map(G));let c=null==e||null===(o=e.attributes)||void 0===o?void 0:o.anchor;if(a){var u,p;const e=null===(u=s.innerBlocks)||void 0===u?void 0:u[1];c=null==e||null===(p=e.attributes)||void 0===p?void 0:p.anchor}return{sectionCategory:Sl(e),clientId:e.clientId,pageContext:d,siteContext:t,pageTitle:g,replaceBlocks:y,block:e,setAIData:l,summary:null==e||null===(n=e.attributes)||void 0===n||null===(i=n.kubioAI)||void 0===i||null===(r=i.meta)||void 0===r?void 0:r.summary,isGuest:!0,sectionParams:{anchor:c,theme:A,importDesignIndex:Ol},pregeneratedStructure:fl(c),...s}})({block:e,siteContext:t});if(null==i?void 0:i.pregeneratedStructure){try{"kubio/header"===e.name?await Ts({...i,skipNavigationGeneration:!0}):await xs(i)}catch(e){console.error(e)}"about"===i.sectionCategory&&(async({siteContext:e,pageContext:t,pageTitle:o,currentTheme:n}={})=>{const i=fl(m.INNER_HERO_ANCHOR);if(!i)return;const r=await hl();h().set(r,"1.attributes.anchor",m.INNER_HERO_ANCHOR);const a={anchor:m.INNER_HERO_ANCHOR,theme:n,importDesignIndex:gl},s=["kubio/header",{},r.map(I.transformBlockToTemplate)];ml(s,o,e,t,!0,a,i)})({siteContext:t,pageContext:d,pageTitle:g,currentTheme:A})}},{bodyTypographyHolders:W}=il(),{activePaletteColors:V,mergedPalettes:K}=cl(),{setItems:$}=(0,lo.usePrimaryMenuBlockEditor)(),{saveEditedEntityRecord:q}=(0,w.useDispatch)("core"),Y=(0,c.useMemo)((()=>{var e;let t=null==p||null===(e=p.customizerData)||void 0===e?void 0:e.colorScheme;return t?(t=h().cloneDeep(t),t=t.map((e=>({...e,color:e.color.map((e=>parseInt(e)))}))),t):null}),[]),Z=(0,c.useMemo)((()=>{var e;return null===(e=p.customizerData)||void 0===e?void 0:e.typography}),[]),X=async()=>{var e;const t=f(),{pageContext:o,siteContext:n,pageTitle:i,record:r,isFrontPage:a}=t;M("postType",r.type,r.id,{meta:{saved_in_kubio:!0},title:i,kubio_ai_page_context:o}),null!==(e=n.website_logo)&&void 0!==e&&e.id&&L(n.website_logo.id),P&&z(P),Y&&N(Y),Z&&D.setStyle("typography.holders",h().cloneDeep(Z),{styledComponent:"body",media:"desktop"})},Q=async()=>{await(0,I.sleep)(2e3);const{getEntityRecordEdits:e,__experimentalGetDirtyEntityRecords:t}=(0,w.resolveSelect)("core"),o=(await t()).filter((e=>!("root"===e.kind&&"site"===e.name))),n=await e("root","site"),i=[];for(const e in n)i.push({kind:"root",name:"site",property:e});const r=[...o,...i];for(const e of r)await q(e.kind,e.name,e.key)},J=()=>{Rl=!1,top.skipSaveAiData=!1,(0,u.removeFilter)("kubio.aiFetch.isGuest","blackWizardGenerator"),Il()},ee=e=>(0,b.createSiteStructureAndUpdateMenu)({localAIData:{...a,siteContext:x},frontPageEntity:v,setMenuItems:$,blogPageEntity:a.blogPageEntity,addBlogToMenu:!0,theme:A,importDesignIndex:Ol,setCurrentlyGeneratingMessage:o,generatingMessage:(0,C.__)("Preparing site structure","kubio"),pageNamesPregenerated:e,usePregeneratedInnerPages:!0});(0,c.useLayoutEffect)((()=>{try{!Rl&&T&&(Rl=!0,wl().body.classList.add(Cl),top.skipSaveAiData=!0,(0,u.addFilter)("kubio.aiFetch.isGuest","blackWizardGenerator",(e=>!0)),i(!0))}catch(e){console.error(e)}}),[]);const te=async()=>{await X(),J();const t=(0,I.kubioCloneDeep)(f());h().set(t,"siteContext.business_name",P),h().unset(t,"siteContext.customizerData"),l(t),(0,b.saveAiGeneralSettings)(t.siteContext),e(),i(!1),Q()},{retrieve:oe}=(0,Ue.useContactFormApi)();if(!T)return(0,j.jsx)(j.Fragment,{});const ne=[O,...R].filter(Boolean);return n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Es,{}),(0,j.jsx)(El,{sectionsBlocks:ne,siteContext:p,theme:A,importDesignIndex:Ol,onFinish:t=>{if(Al)return;Al=!0;const{pageNamesToGenerate:n}=t;i(!1);try{(async({pageNamesToGenerate:t})=>{let n=x,i=[],a=!1;const s=(0,b.initGenerationSession)();let c=R;const m=Y||V,_=Z||W;try{X();const e=_l({sections:R,setCurrentlyGeneratingMessage:o,pageTitle:g,siteContext:n,pageContext:d,currentTheme:A,initialBusinessName:P,colorSchemeAndTypography:vl({bodyTypographyHolders:_,activePaletteColors:m,mergedPalettes:K})}),r=ee(t),s=await(async({siteContext:e,theme:t,importDesignIndex:o})=>{if(top.kubioGuestAiSkipCache)return!1;const n=await(0,b.getDefaultHomepageSectionsUsedImages)({siteContext:e,theme:t,importDesignIndex:o});if(h().isEmpty(n))return!1;const i=new Map;return h().each(n,((e,t)=>{i.set(t,{items:e,page:1,per_page:30,total_pages:1})})),(0,b.setInGenerationSession)("previousQueries",i),!0})({siteContext:p,theme:A,importDesignIndex:Ol}),[l,u,f]=await Promise.allSettled([e,r,s]);"fulfilled"===l.status&&(c=l.value),"fulfilled"===u.status&&(i=u.value),"fulfilled"===f.status&&(a=f.value),k(E,c),n={...x,otherPages:i}}catch(e){console.error(e)}const v=[O,...c].filter(Boolean);(0,u.addFilter)("kubio.rephraseSectionTemplate.beforeFillSectionContent","blackWizardGenerator",bl(p)),(0,u.addFilter)("kubio.fillSectionTemplate.beforeFillSectionContent","blackWizardGenerator",bl(p));try{const e=v.map(((e,t)=>{var o;let n=null==e||null===(o=e.attributes)||void 0===o?void 0:o.anchor;const i="kubio/header"===e.name;if(i){var r;const t=F(e.clientId).map(G),o=null==t?void 0:t[1];n=null==o||null===(r=o.attributes)||void 0===r?void 0:r.anchor}return{isHeader:i,index:t,block:e,category:Sl(e),slug:n,contentIndex:i?0:t-1}})),t=new Ns({generateFunction:U,ownerDocument:r,notify:o,sections:e,siteContext:n,pageContext:d});await t.start()}catch(e){console.error(e)}(0,u.removeFilter)("kubio.rephraseSectionTemplate.onReplacePlaceholderTextsFromAi","blackWizardGenerator"),(0,u.removeFilter)("kubio.fillSectionTemplate.beforeFillSectionContent","blackWizardGenerator"),Il(),r.body.scrollIntoView({behavior:"smooth",block:"start"});try{(({siteContext:e,theme:t,importDesignIndex:o})=>{const n=(0,b.getFromGenerationSession)("previousQueries",new Map),i=h().cloneDeep(n),r=Object.fromEntries(i);let a=!1;const s={};h().each(r,((e,t)=>{if(h().isEmpty(e.items))return void(a=!0);const o=e.items.slice(0,15);s[t]=o})),(0,b.updateDefaultHomepageSectionsUsedImages)({siteContext:e,theme:t,importDesignIndex:o,content:JSON.stringify(s)})})({siteContext:p,theme:A,importDesignIndex:Ol})}catch(e){console.error(e)}const y=(0,I.kubioCloneDeep)(f());h().set(y,"siteContext.business_name",P),h().set(y,"siteContext.otherPages",i),h().unset(y,"siteContext.customizerData"),J(),l(y),(0,b.saveAiGeneralSettings)(y.siteContext),s(),Q(),e()})({pageNamesToGenerate:n})}catch(e){console.error(e)}},onApplySettingWithoutGenerating:async e=>{if(Al)return;Al=!0;const{pageNamesToGenerate:t,pluginsNamesToActivate:o}=e;try{t.length>0&&await ee(t)}catch(e){console.error(e)}try{(async e=>{for(const t of e)try{await(0,s.installAndActivatePlugin)(t),t===m.DEFAULT_PLUGIN_FOR_PURPOSE.CONTACT_FORM&&oe()}catch(e){console.error(e)}})(o)}catch(e){console.error(e)}await te()},onCancel:async()=>{Al||(Al=!0,te())}})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Rs,{message:t,icon:Ge.KubioLoader})})},Dl=async()=>{const e=await hl();if(h().isEmpty(e))return null;const t=e[1];return h().set(t,"attributes.anchor",m.INNER_HERO_ANCHOR),t},Ml={className:"edit-site-more-menu__content",position:"bottom left"},Bl={tooltipPosition:"bottom"},Ll=()=>{const{isGutentagDebug:e,baseUrl:t,currentPage:o,hasBlockSelected:n,isAICapabilityEnabled:i}=(0,w.useSelect)((e=>{const{isGutentagDebug:t=h().noop,getPage:o=h().noop,isAICapabilityEnabled:n}=e(m.STORE_KEY)||{},{url:i}=e("core").getEntityRecord("root","site")||{};return{isGutentagDebug:t(),currentPage:o(),baseUrl:i,hasBlockSelected:!!e("core/block-editor").getSelectedBlockClientId(),isAICapabilityEnabled:n()}}),[]),r=(0,c.useRef)(p.noop),a=()=>{const e=null==o?void 0:o.link,n=encodeURIComponent(e);window.open(`${t}/wp-admin/customize.php?url=${n}`).focus()},{toggleGutentagDebug:l}=(0,w.useDispatch)(m.STORE_KEY),{onExportAiStructure:u}=(()=>{const{contentSectionsBlocks:e}=(0,w.useSelect)((e=>{const{getClientIdsWithDescendants:t,getBlock:o,getBlocks:n}=e("core/block-editor"),{currentPageHasFSETemplate:i}=e(m.STORE_KEY)||{};let r=null;return(null==i?void 0:i())&&(r=t().find((e=>{var t;return"core/post-content"===(null===(t=o(e))||void 0===t?void 0:t.name)})),r)?{contentSectionsBlocks:n(r)}:{contentSectionsBlocks:[]}}),[]),t=(0,w.useSelect)((e=>{const{getClientIdsWithDescendants:t,getBlock:o,getBlockOrder:n}=e("core/block-editor"),i=(e=>{const n=h().castArray("kubio/header"),i=t().map((e=>o(e))).find((e=>n.includes(e.name)));return null==i?void 0:i.clientId})();return i?n(i).map(o).find((e=>"kubio/hero"===e.name)):null}),[]);return{onExportAiStructure:async()=>{const o=await Dl(),n=[t,o,...e].filter(Boolean);let i=!1;const r={};if(n.forEach((e=>{if(i)return;const t=h().get(e,"attributes.anchor");if(!t)return window.alert(`Section with clientId: ${e.clientId} does not have anchor. Please update the design and reexport`),void(i=!0);if(r[t])return window.alert(`Multiple sections use the anchor ${t}, the id should be unique. Please update the design and reexport`),void(i=!0);const o=(0,I.transformBlockToTemplate)(e),n=Sl(e),a=(0,b.normalizeSection)(o,n,{includeContent:!0});r[t]=a})),i)return;const a=JSON.stringify(r),s=new Blob([a],{type:"application/json"}),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download="ai-structure.json",l.click(),URL.revokeObjectURL(l.href)}}})(),d=(0,I.getShowInternalFeatures)();let f=(0,j.jsx)(j.Fragment,{});d&&(f=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.MenuItem,{icon:e&&Yi,isSelected:e,onClick:()=>l(!e),role:"menuitemcheckbox",children:(0,C.__)("Toggle Kubio debug","kubio")}),(0,j.jsx)(k.MenuItem,{onClick:u,role:"menuitemcheckbox",children:(0,C.__)("Export AI structure","kubio")})]}));const{uiVersion:_,setUIVersion:v}=(0,g.useUIVersion)(),{openSidebar:y,toggleAICapabilities:x}=(0,w.useDispatch)(m.STORE_KEY),S=()=>{const e=2===_?1:2;v(e),2===e&&y(n?"block-inspector":"document")},[T,P]=Do(),[E,R]=(0,b.useIsAIConnected)(),A=(0,c.useCallback)((()=>{const e=!i;x(e),e&&!E&&(P(),r.current())}),[P,i,E,x]),O=1===_?(0,C.__)("Switch to Kubio Editor layout","kubio"):(0,C.__)("Switch to WordPress Editor layout","kubio"),N=1===_?(0,C.__)("Switch to the new Kubio editor layout for a more friendly editing experience","kubio"):(0,C.__)("Switch to the WordPress editor layout to have the default editing experience","kubio"),D=i?(0,C.__)("Disable Kubio AI capabilities","kubio"):(0,C.__)("Enable Kubio AI capabilities","kubio"),M=i?(0,C.__)("Hide Kubio AI buttons in editors interface","kubio"):(0,C.__)("Show Kubio AI buttons in editors interface","kubio"),[B]=(0,b.useAIServiceInfo)();(0,c.useCallback)((()=>{R(!1),(0,b.setAIKey)("")}),[R]);let L,z=(0,j.jsx)(j.Fragment,{});if((0,I.getShowInternalFeatures)("cloud")){const[e,t,o]=(0,s.useKubioCloudConnect)();z=(0,j.jsx)(k.MenuGroup,{label:"Kubio Cloud",children:"connected"!==e.status?(0,j.jsx)(k.MenuItem,{iconPosition:"left",onClick:t,info:(0,C.__)("Connect this site to Kubio Cloud","kubio"),children:(0,C.__)("Connect to Kubio Cloud","kubio")}):(0,j.jsx)(k.MenuItem,{onClick:o,iconPosition:"left",info:(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,C.sprintf)(// translators: %s is Kubio Cloud the account email
// translators: %s is Kubio Cloud the account email
(0,C.__)("Currently connected as %s","kubio"),`<strong><em>${e.email}</em></strong>`)}}),children:(0,C.__)("Disconnect from Kubio Cloud","kubio")})})}return I.AI_IN_PRO||(L=(0,j.jsx)(k.MenuGroup,{label:"Kubio AI",children:(0,j.jsx)(k.MenuItem,{onClick:A,iconPosition:"left",info:M,children:D})})),(0,j.jsxs)(j.Fragment,{children:[T,(0,j.jsx)(k.DropdownMenu,{className:"edit-site-more-menu",icon:ps,label:(0,C.__)("More tools & options","kubio"),popoverProps:Ml,toggleProps:Bl,children:({onClose:e})=>(r.current=e,(0,j.jsxs)(j.Fragment,{children:[z,L,(0,j.jsxs)(k.MenuGroup,{label:(0,C._x)("View","noun","kubio"),children:[(0,j.jsx)(k.MenuItem,{onClick:S,info:N,children:O}),(0,j.jsx)(ms,{feature:"focusMode",label:(0,C.__)("Spotlight mode","kubio"),info:(0,C.__)("Focus on one block at a time","kubio"),messageActivated:(0,C.__)("Spotlight mode activated","kubio"),messageDeactivated:(0,C.__)("Spotlight mode deactivated","kubio")}),f,(0,j.jsx)(k.MenuItem,{onClick:a,children:(0,C.__)("Open theme customizer","kubio")}),(0,j.jsx)(Ie.Slot,{name:"kubio/edit-site/plugin-more-menu",label:(0,C.__)("Plugins","kubio"),as:[k.MenuGroup,k.MenuItem],fillProps:{onClick:e}}),!1]})]}))})]})};var zl=o(5800);function Fl(e,t){return function(){return e.apply(t,arguments)}}const{toString:Gl}=Object.prototype,{getPrototypeOf:Hl}=Object,Ul=(Wl=Object.create(null),e=>{const t=Gl.call(e);return Wl[t]||(Wl[t]=t.slice(8,-1).toLowerCase())});var Wl;const Vl=e=>(e=e.toLowerCase(),t=>Ul(t)===e),Kl=e=>t=>typeof t===e,{isArray:$l}=Array,ql=Kl("undefined"),Yl=Vl("ArrayBuffer"),Zl=Kl("string"),Xl=Kl("function"),Ql=Kl("number"),Jl=e=>null!==e&&"object"==typeof e,ec=e=>{if("object"!==Ul(e))return!1;const t=Hl(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},tc=Vl("Date"),oc=Vl("File"),nc=Vl("Blob"),ic=Vl("FileList"),rc=Vl("URLSearchParams");function ac(e,t,{allOwnKeys:o=!1}={}){if(null==e)return;let n,i;if("object"!=typeof e&&(e=[e]),$l(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=o?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(n=0;n<r;n++)a=i[n],t.call(null,e[a],a,e)}}function sc(e,t){t=t.toLowerCase();const o=Object.keys(e);let n,i=o.length;for(;i-- >0;)if(n=o[i],t===n.toLowerCase())return n;return null}const lc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,cc=e=>!ql(e)&&e!==lc,uc=(dc="undefined"!=typeof Uint8Array&&Hl(Uint8Array),e=>dc&&e instanceof dc);var dc;const pc=Vl("HTMLFormElement"),hc=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),mc=Vl("RegExp"),gc=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),n={};ac(o,((o,i)=>{let r;!1!==(r=t(o,i,e))&&(n[i]=r||o)})),Object.defineProperties(e,n)},fc="abcdefghijklmnopqrstuvwxyz",bc="0123456789",_c={DIGIT:bc,ALPHA:fc,ALPHA_DIGIT:fc+fc.toUpperCase()+bc},vc=Vl("AsyncFunction"),yc={isArray:$l,isArrayBuffer:Yl,isBuffer:function(e){return null!==e&&!ql(e)&&null!==e.constructor&&!ql(e.constructor)&&Xl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Xl(e.append)&&("formdata"===(t=Ul(e))||"object"===t&&Xl(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Yl(e.buffer),t},isString:Zl,isNumber:Ql,isBoolean:e=>!0===e||!1===e,isObject:Jl,isPlainObject:ec,isUndefined:ql,isDate:tc,isFile:oc,isBlob:nc,isRegExp:mc,isFunction:Xl,isStream:e=>Jl(e)&&Xl(e.pipe),isURLSearchParams:rc,isTypedArray:uc,isFileList:ic,forEach:ac,merge:function e(){const{caseless:t}=cc(this)&&this||{},o={},n=(n,i)=>{const r=t&&sc(o,i)||i;ec(o[r])&&ec(n)?o[r]=e(o[r],n):ec(n)?o[r]=e({},n):$l(n)?o[r]=n.slice():o[r]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ac(arguments[e],n);return o},extend:(e,t,o,{allOwnKeys:n}={})=>(ac(t,((t,n)=>{o&&Xl(t)?e[n]=Fl(t,o):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,o,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},toFlatObject:(e,t,o,n)=>{let i,r,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==o&&Hl(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},kindOf:Ul,kindOfTest:Vl,endsWith:(e,t,o)=>{e=String(e),(void 0===o||o>e.length)&&(o=e.length),o-=t.length;const n=e.indexOf(t,o);return-1!==n&&n===o},toArray:e=>{if(!e)return null;if($l(e))return e;let t=e.length;if(!Ql(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},forEachEntry:(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=o.next())&&!n.done;){const o=n.value;t.call(e,o[0],o[1])}},matchAll:(e,t)=>{let o;const n=[];for(;null!==(o=e.exec(t));)n.push(o);return n},isHTMLForm:pc,hasOwnProperty:hc,hasOwnProp:hc,reduceDescriptors:gc,freezeMethods:e=>{gc(e,((t,o)=>{if(Xl(e)&&-1!==["arguments","caller","callee"].indexOf(o))return!1;const n=e[o];Xl(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")}))}))},toObjectSet:(e,t)=>{const o={},n=e=>{e.forEach((e=>{o[e]=!0}))};return $l(e)?n(e):n(String(e).split(t)),o},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,o){return t.toUpperCase()+o})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:sc,global:lc,isContextDefined:cc,ALPHABET:_c,generateString:(e=16,t=_c.ALPHA_DIGIT)=>{let o="";const{length:n}=t;for(;e--;)o+=t[Math.random()*n|0];return o},isSpecCompliantForm:function(e){return!!(e&&Xl(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),o=(e,n)=>{if(Jl(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const i=$l(e)?[]:{};return ac(e,((e,t)=>{const r=o(e,n+1);!ql(r)&&(i[t]=r)})),t[n]=void 0,i}}return e};return o(e,0)},isAsyncFn:vc,isThenable:e=>e&&(Jl(e)||Xl(e))&&Xl(e.then)&&Xl(e.catch)};function kc(e,t,o,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),i&&(this.response=i)}yc.inherits(kc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yc.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xc=kc.prototype,Sc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Sc[e]={value:e}})),Object.defineProperties(kc,Sc),Object.defineProperty(xc,"isAxiosError",{value:!0}),kc.from=(e,t,o,n,i,r)=>{const a=Object.create(xc);return yc.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),kc.call(a,e.message,t,o,n,i),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};const wc=kc;function Cc(e){return yc.isPlainObject(e)||yc.isArray(e)}function Ic(e){return yc.endsWith(e,"[]")?e.slice(0,-2):e}function jc(e,t,o){return e?e.concat(t).map((function(e,t){return e=Ic(e),!o&&t?"["+e+"]":e})).join(o?".":""):t}const Tc=yc.toFlatObject(yc,{},null,(function(e){return/^is[A-Z]/.test(e)})),Pc=function(e,t,o){if(!yc.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(o=yc.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!yc.isUndefined(t[e])}))).metaTokens,i=o.visitor||c,r=o.dots,a=o.indexes,s=(o.Blob||"undefined"!=typeof Blob&&Blob)&&yc.isSpecCompliantForm(t);if(!yc.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(yc.isDate(e))return e.toISOString();if(!s&&yc.isBlob(e))throw new wc("Blob is not supported. Use a Buffer instead.");return yc.isArrayBuffer(e)||yc.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,o,i){let s=e;if(e&&!i&&"object"==typeof e)if(yc.endsWith(o,"{}"))o=n?o:o.slice(0,-2),e=JSON.stringify(e);else if(yc.isArray(e)&&function(e){return yc.isArray(e)&&!e.some(Cc)}(e)||(yc.isFileList(e)||yc.endsWith(o,"[]"))&&(s=yc.toArray(e)))return o=Ic(o),s.forEach((function(e,n){!yc.isUndefined(e)&&null!==e&&t.append(!0===a?jc([o],n,r):null===a?o:o+"[]",l(e))})),!1;return!!Cc(e)||(t.append(jc(i,o,r),l(e)),!1)}const u=[],d=Object.assign(Tc,{defaultVisitor:c,convertValue:l,isVisitable:Cc});if(!yc.isObject(e))throw new TypeError("data must be an object");return function e(o,n){if(!yc.isUndefined(o)){if(-1!==u.indexOf(o))throw Error("Circular reference detected in "+n.join("."));u.push(o),yc.forEach(o,(function(o,r){!0===(!(yc.isUndefined(o)||null===o)&&i.call(t,o,yc.isString(r)?r.trim():r,n,d))&&e(o,n?n.concat(r):[r])})),u.pop()}}(e),t};function Ec(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Rc(e,t){this._pairs=[],e&&Pc(e,this,t)}const Ac=Rc.prototype;Ac.append=function(e,t){this._pairs.push([e,t])},Ac.toString=function(e){const t=e?function(t){return e.call(this,t,Ec)}:Ec;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Oc=Rc;function Nc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dc(e,t,o){if(!t)return e;const n=o&&o.encode||Nc,i=o&&o.serialize;let r;if(r=i?i(t,o):yc.isURLSearchParams(t)?t.toString():new Oc(t,o).toString(n),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Mc=class{constructor(){this.handlers=[]}use(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yc.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Bc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lc={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Oc,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},zc=function(e){function t(e,o,n,i){let r=e[i++];const a=Number.isFinite(+r),s=i>=e.length;return r=!r&&yc.isArray(n)?n.length:r,s?(yc.hasOwnProp(n,r)?n[r]=[n[r],o]:n[r]=o,!a):(n[r]&&yc.isObject(n[r])||(n[r]=[]),t(e,o,n[r],i)&&yc.isArray(n[r])&&(n[r]=function(e){const t={},o=Object.keys(e);let n;const i=o.length;let r;for(n=0;n<i;n++)r=o[n],t[r]=e[r];return t}(n[r])),!a)}if(yc.isFormData(e)&&yc.isFunction(e.entries)){const o={};return yc.forEachEntry(e,((e,n)=>{t(function(e){return yc.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,o,0)})),o}return null},Fc={transitional:Bc,adapter:["xhr","http"],transformRequest:[function(e,t){const o=t.getContentType()||"",n=o.indexOf("application/json")>-1,i=yc.isObject(e);if(i&&yc.isHTMLForm(e)&&(e=new FormData(e)),yc.isFormData(e))return n&&n?JSON.stringify(zc(e)):e;if(yc.isArrayBuffer(e)||yc.isBuffer(e)||yc.isStream(e)||yc.isFile(e)||yc.isBlob(e))return e;if(yc.isArrayBufferView(e))return e.buffer;if(yc.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Pc(e,new Lc.classes.URLSearchParams,Object.assign({visitor:function(e,t,o,n){return Lc.isNode&&yc.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=yc.isFileList(e))||o.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Pc(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,o){if(yc.isString(e))try{return(0,JSON.parse)(e),yc.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Fc.transitional,o=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&yc.isString(e)&&(o&&!this.responseType||n)){const o=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw wc.from(e,wc.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lc.classes.FormData,Blob:Lc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yc.forEach(["delete","get","head","post","put","patch"],(e=>{Fc.headers[e]={}}));const Gc=Fc,Hc=yc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Uc=Symbol("internals");function Wc(e){return e&&String(e).trim().toLowerCase()}function Vc(e){return!1===e||null==e?e:yc.isArray(e)?e.map(Vc):String(e)}function Kc(e,t,o,n,i){return yc.isFunction(n)?n.call(this,t,o):(i&&(t=o),yc.isString(t)?yc.isString(n)?-1!==t.indexOf(n):yc.isRegExp(n)?n.test(t):void 0:void 0)}class $c{constructor(e){e&&this.set(e)}set(e,t,o){const n=this;function i(e,t,o){const i=Wc(t);if(!i)throw new Error("header name must be a non-empty string");const r=yc.findKey(n,i);(!r||void 0===n[r]||!0===o||void 0===o&&!1!==n[r])&&(n[r||t]=Vc(e))}const r=(e,t)=>yc.forEach(e,((e,o)=>i(e,o,t)));return yc.isPlainObject(e)||e instanceof this.constructor?r(e,t):yc.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?r((e=>{const t={};let o,n,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),o=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!o||t[o]&&Hc[o]||("set-cookie"===o?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)})),t})(e),t):null!=e&&i(t,e,o),this}get(e,t){if(e=Wc(e)){const o=yc.findKey(this,e);if(o){const e=this[o];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(e);)t[n[1]]=n[2];return t}(e);if(yc.isFunction(t))return t.call(this,e,o);if(yc.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Wc(e)){const o=yc.findKey(this,e);return!(!o||void 0===this[o]||t&&!Kc(0,this[o],o,t))}return!1}delete(e,t){const o=this;let n=!1;function i(e){if(e=Wc(e)){const i=yc.findKey(o,e);!i||t&&!Kc(0,o[i],i,t)||(delete o[i],n=!0)}}return yc.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let o=t.length,n=!1;for(;o--;){const i=t[o];e&&!Kc(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,o={};return yc.forEach(this,((n,i)=>{const r=yc.findKey(o,i);if(r)return t[r]=Vc(n),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,o)=>t.toUpperCase()+o))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Vc(n),o[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return yc.forEach(this,((o,n)=>{null!=o&&!1!==o&&(t[n]=e&&yc.isArray(o)?o.join(", "):o)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const o=new this(e);return t.forEach((e=>o.set(e))),o}static accessor(e){const t=(this[Uc]=this[Uc]={accessors:{}}).accessors,o=this.prototype;function n(e){const n=Wc(e);t[n]||(function(e,t){const o=yc.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+o,{value:function(e,o,i){return this[n].call(this,t,e,o,i)},configurable:!0})}))}(o,e),t[n]=!0)}return yc.isArray(e)?e.forEach(n):n(e),this}}$c.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yc.reduceDescriptors($c.prototype,(({value:e},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[o]=e}}})),yc.freezeMethods($c);const qc=$c;function Yc(e,t){const o=this||Gc,n=t||o,i=qc.from(n.headers);let r=n.data;return yc.forEach(e,(function(e){r=e.call(o,r,i.normalize(),t?t.status:void 0)})),i.normalize(),r}function Zc(e){return!(!e||!e.__CANCEL__)}function Xc(e,t,o){wc.call(this,null==e?"canceled":e,wc.ERR_CANCELED,t,o),this.name="CanceledError"}yc.inherits(Xc,wc,{__CANCEL__:!0});const Qc=Xc,Jc=Lc.isStandardBrowserEnv?{write:function(e,t,o,n,i,r){const a=[];a.push(e+"="+encodeURIComponent(t)),yc.isNumber(o)&&a.push("expires="+new Date(o).toGMTString()),yc.isString(n)&&a.push("path="+n),yc.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function eu(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const tu=Lc.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let o;function n(o){let n=o;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return o=n(window.location.href),function(e){const t=yc.isString(e)?n(e):e;return t.protocol===o.protocol&&t.host===o.host}}():function(){return!0};function ou(e,t){let o=0;const n=function(e,t){e=e||10;const o=new Array(e),n=new Array(e);let i,r=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[a];i||(i=l),o[r]=s,n[r]=l;let u=a,d=0;for(;u!==r;)d+=o[u++],u%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),l-i<t)return;const p=c&&l-c;return p?Math.round(1e3*d/p):void 0}}(50,250);return i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,s=r-o,l=n(s);o=r;const c={loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&r<=a?(a-r)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const nu="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,o){let n=e.data;const i=qc.from(e.headers).normalize(),r=e.responseType;let a,s;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}yc.isFormData(n)&&(Lc.isStandardBrowserEnv||Lc.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?yc.isString(s=i.getContentType())&&i.setContentType(s.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",o=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+o))}const u=eu(e.baseURL,e.url);function d(){if(!c)return;const n=qc.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,o){const n=o.config.validateStatus;o.status&&n&&!n(o.status)?t(new wc("Request failed with status code "+o.status,[wc.ERR_BAD_REQUEST,wc.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):e(o)}((function(e){t(e),l()}),(function(e){o(e),l()}),{data:r&&"text"!==r&&"json"!==r?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Dc(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(o(new wc("Request aborted",wc.ECONNABORTED,e,c)),c=null)},c.onerror=function(){o(new wc("Network Error",wc.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||Bc;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),o(new wc(t,n.clarifyTimeoutError?wc.ETIMEDOUT:wc.ECONNABORTED,e,c)),c=null},Lc.isStandardBrowserEnv){const t=tu(u)&&e.xsrfCookieName&&Jc.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===n&&i.setContentType(null),"setRequestHeader"in c&&yc.forEach(i.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),yc.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),r&&"json"!==r&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",ou(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",ou(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{c&&(o(!t||t.type?new Qc(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===Lc.protocols.indexOf(p)?o(new wc("Unsupported protocol "+p+":",wc.ERR_BAD_REQUEST,e)):c.send(n||null)}))},iu={http:null,xhr:nu};yc.forEach(iu,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const ru=e=>`- ${e}`,au=e=>yc.isFunction(e)||null===e||!1===e,su=e=>{e=yc.isArray(e)?e:[e];const{length:t}=e;let o,n;const i={};for(let r=0;r<t;r++){let t;if(o=e[r],n=o,!au(o)&&(n=iu[(t=String(o)).toLowerCase()],void 0===n))throw new wc(`Unknown adapter '${t}'`);if(n)break;i[t||"#"+r]=n}if(!n){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let o=t?e.length>1?"since :\n"+e.map(ru).join("\n"):" "+ru(e[0]):"as no adapter specified";throw new wc("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n};function lu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qc(null,e)}function cu(e){return lu(e),e.headers=qc.from(e.headers),e.data=Yc.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),su(e.adapter||Gc.adapter)(e).then((function(t){return lu(e),t.data=Yc.call(e,e.transformResponse,t),t.headers=qc.from(t.headers),t}),(function(t){return Zc(t)||(lu(e),t&&t.response&&(t.response.data=Yc.call(e,e.transformResponse,t.response),t.response.headers=qc.from(t.response.headers))),Promise.reject(t)}))}const uu=e=>e instanceof qc?e.toJSON():e;function du(e,t){t=t||{};const o={};function n(e,t,o){return yc.isPlainObject(e)&&yc.isPlainObject(t)?yc.merge.call({caseless:o},e,t):yc.isPlainObject(t)?yc.merge({},t):yc.isArray(t)?t.slice():t}function i(e,t,o){return yc.isUndefined(t)?yc.isUndefined(e)?void 0:n(void 0,e,o):n(e,t,o)}function r(e,t){if(!yc.isUndefined(t))return n(void 0,t)}function a(e,t){return yc.isUndefined(t)?yc.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(o,i,r){return r in t?n(o,i):r in e?n(void 0,o):void 0}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(uu(e),uu(t),!0)};return yc.forEach(Object.keys(Object.assign({},e,t)),(function(n){const r=l[n]||i,a=r(e[n],t[n],n);yc.isUndefined(a)&&r!==s||(o[n]=a)})),o}const pu={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{pu[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}}));const hu={};pu.transitional=function(e,t,o){function n(e,t){return"[Axios v1.6.0] Transitional option '"+e+"'"+t+(o?". "+o:"")}return(o,i,r)=>{if(!1===e)throw new wc(n(i," has been removed"+(t?" in "+t:"")),wc.ERR_DEPRECATED);return t&&!hu[i]&&(hu[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(o,i,r)}};const mu={assertOptions:function(e,t,o){if("object"!=typeof e)throw new wc("options must be an object",wc.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const r=n[i],a=t[r];if(a){const t=e[r],o=void 0===t||a(t,r,e);if(!0!==o)throw new wc("option "+r+" must be "+o,wc.ERR_BAD_OPTION_VALUE)}else if(!0!==o)throw new wc("Unknown option "+r,wc.ERR_BAD_OPTION)}},validators:pu},gu=mu.validators;class fu{constructor(e){this.defaults=e,this.interceptors={request:new Mc,response:new Mc}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=du(this.defaults,t);const{transitional:o,paramsSerializer:n,headers:i}=t;void 0!==o&&mu.assertOptions(o,{silentJSONParsing:gu.transitional(gu.boolean),forcedJSONParsing:gu.transitional(gu.boolean),clarifyTimeoutError:gu.transitional(gu.boolean)},!1),null!=n&&(yc.isFunction(n)?t.paramsSerializer={serialize:n}:mu.assertOptions(n,{encode:gu.function,serialize:gu.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&yc.merge(i.common,i[t.method]);i&&yc.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=qc.concat(r,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[cu.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let p=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{c=cu.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Dc(eu((e=du(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}yc.forEach(["delete","get","head","options"],(function(e){fu.prototype[e]=function(t,o){return this.request(du(o||{},{method:e,url:t,data:(o||{}).data}))}})),yc.forEach(["post","put","patch"],(function(e){function t(t){return function(o,n,i){return this.request(du(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:o,data:n}))}}fu.prototype[e]=t(),fu.prototype[e+"Form"]=t(!0)}));const bu=fu;class _u{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const o=this;this.promise.then((e=>{if(!o._listeners)return;let t=o._listeners.length;for(;t-- >0;)o._listeners[t](e);o._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{o.subscribe(e),t=e})).then(e);return n.cancel=function(){o.unsubscribe(t)},n},e((function(e,n,i){o.reason||(o.reason=new Qc(e,n,i),t(o.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new _u((function(t){e=t})),cancel:e}}}const vu=_u,yu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yu).forEach((([e,t])=>{yu[t]=e}));const ku=yu,xu=function e(t){const o=new bu(t),n=Fl(bu.prototype.request,o);return yc.extend(n,bu.prototype,o,{allOwnKeys:!0}),yc.extend(n,o,null,{allOwnKeys:!0}),n.create=function(o){return e(du(t,o))},n}(Gc);xu.Axios=bu,xu.CanceledError=Qc,xu.CancelToken=vu,xu.isCancel=Zc,xu.VERSION="1.6.0",xu.toFormData=Pc,xu.AxiosError=wc,xu.Cancel=xu.CanceledError,xu.all=function(e){return Promise.all(e)},xu.spread=function(e){return function(t){return e.apply(null,t)}},xu.isAxiosError=function(e){return yc.isObject(e)&&!0===e.isAxiosError},xu.mergeConfig=du,xu.AxiosHeaders=qc,xu.formToJSON=e=>zc(yc.isHTMLForm(e)?new FormData(e):e),xu.getAdapter=su,xu.HttpStatusCode=ku,xu.default=xu;const Su=xu,wu={demoParts:null,demoSitesList:null,demoSitesListBySlug:null,demoPartsContentById:{pages:{},templates:{},templateParts:{},globalData:{}}};function Cu(e){if(!e)return;const t=["demoPartsContentById","globalData",e.id];if(h().get(wu,t))return;const o={contentUrlPath:e.content_url_path,content:null};h().set(wu,t,o)}async function Iu(e){return ju(e,"globalData")}async function ju(e,t){const o=h().get(wu,["demoPartsContentById",t,e]);let n=null==o?void 0:o.content;if(n)await(10,new Promise((e=>setTimeout((()=>{e()}),10))));else{const e=null==o?void 0:o.contentUrlPath;if(!e)return;try{const t=await Su.get(e);n=null==t?void 0:t.data,o.content=n}catch(e){console.error(e)}}return n}async function Tu(){if(wu.demoParts)return wu.demoParts;let e=h().get(window,["kubioUtilsData","demo_parts_by_slug"]);h().isEmpty(e)&&(e=await async function(){try{var e;const t=h().get(window,["kubioUtilsData","demo_parts_url"],""),o=await Su.get(t);return(null==o||null===(e=o.data)||void 0===e?void 0:e.body)||{}}catch(e){return console.error(e),[]}}());const t=[];return h().each(e,((e,o)=>{t[o]=function(e,t){const o=h().get(window,["kubioUtilsData","demo_sites"],{}),n=h().get(o,t),i=h().get(n,"thumb",""),r=["index","home"],a=[],s=r.concat(["single","search","404"]);let l=e.filter((({slug:e,type:t})=>"template"===t?(r.includes(e)&&a.push(e),s.includes(e)):"page"!==t||"sample-page"!==e));if(a.length>1){const e=r.filter((e=>a.includes(e)));e.pop(),l=l.filter((({slug:t,type:o})=>"template"!==o||!e.includes(t)))}const c={};return l.forEach(((e,t)=>{c[e.content_url_path]=t})),h().sortBy(l,(e=>"page"===e.type?c[e.content_url_path]:100+h().indexOf(s,e.slug))).map((({content_url_path:e,id:o,preview_image_url:r,preview_image_url_full:a,page_preview_url:s,title:l,type:c,slug:u})=>{return{contentUrlPath:e,id:o,slug:u,uniqueId:Za().generate(),screenshot:r||i,screenshotFull:a||i,label:(d=Pu({title:l,slug:u,type:c}),function(e){return e.split(" ").map((e=>{return(t=e).charAt(0).toUpperCase()+t.slice(1);var t})).join(" ")}((p=d,Ou.innerHTML=p,Ou.innerText))),isPro:!(null==n||!n.is_pro),type:c,demoSiteSlug:t,pagePreviewUrl:Nu({page_preview_url:s,currentDemoSite:n,type:c,slug:u}),categories:(null==n?void 0:n.categories)||[]};var d,p}))}(e,o)})),o=e,h().each(o,((e,t)=>{e.forEach((e=>{"page"===(null==e?void 0:e.type)?function(e){var t,o;const n={templateId:null==e||null===(t=e.template)||void 0===t?void 0:t.id,globalDataId:null==e||null===(o=e.globalData)||void 0===o?void 0:o.id,contentUrlPath:e.content_url_path,content:null},i=e.globalData;i&&(n.globalDataId=null==i?void 0:i.id),h().set(wu,["demoPartsContentById","pages",e.id],n),Cu(i)}(e):function(e){const t=["demoPartsContentById","templates",e.id],o=h().get(e,"templateParts",[]);o.forEach((e=>{!function(e){const t=["demoPartsContentById","templateParts",e.id];if(h().get(wu,t))return;const o={area:e.area,contentUrlPath:e.content_url_path,content:null};h().set(wu,t,o)}(e)}));const n=null==e?void 0:e.globalData;if(Cu(),h().get(wu,t))return;const i={templatePartsIds:o.map((e=>e.id)),contentUrlPath:e.content_url_path,content:null};n&&(i.globalDataId=null==n?void 0:n.id),h().set(wu,t,i)}(e)}))})),wu.demoParts=t,h().isEmpty(t)?{}:wu.demoParts;var o}function Pu({title:e,slug:t,type:o}){if("template"===o)switch(t){case"index":case"home":return(0,C.__)("Blog","kubio");case"search":return(0,C.__)("Search","kubio");case"single":return(0,C.__)("Post Page","kubio");default:return e}return e}async function Eu(){if(wu.demoSitesList)return wu.demoSitesList;let e=h().get(window,["kubioUtilsData","demo_sites"],null);if(h().isEmpty(e)&&(e=await async function(){const e=h().get(window,["kubioUtilsData","demo_sites_url"],null);if(e){try{var t;const o=await Su.get(e),n=(null==o||null===(t=o.data)||void 0===t?void 0:t.body)||{};n.forEach((e=>{const t=h().get(e,"plugins",[]),o=[];h().each(t,((e,t)=>{const n=null==t?void 0:t.split("/")[0];o.push({label:e,slug:n})})),e.plugins=o}));const i=h().keyBy(n,"slug");return h().set(window,["kubioUtilsData","demo_sites"],i),i}catch(e){console.error(e)}return null}}()),h().isEmpty(e))return[];const t=Object.values(e).map((({is_pro:e,name:t,thumb:o,categories:n,slug:i,preview:r,pro_template_slug:a,plugins:s})=>({isPro:!!e,label:Au(t),preview:r,screenshot:o,proTemplateSlug:a,categories:n,slug:i,plugins:s}))),o=h().keyBy(t,"slug");return t.forEach((e=>{const{proTemplateSlug:t}=e;if(!t)return;const n=h().get(o,t);n&&(e.relatedDemoSite=n,n.relatedDemoSite=e)})),wu.demoSitesList=t,wu.demoSitesListBySlug=o,wu.demoSitesList}const Ru=e=>{e&&setTimeout((()=>{const t=document.querySelector(".kubio-iframe");if(t){const o=null==t?void 0:t.contentDocument,n=null==o?void 0:o.querySelector(`[data-block="${e}"]`);null==n||n.scrollIntoView({behavior:"smooth"})}}),100)};function Au(e=""){return(e=e.replace(/ (Free|Pro)/i,"")).trim()}const Ou=document.createElement("div");function Nu({page_preview_url:e,currentDemoSite:t,type:o,slug:n}){if("page"===o||!["404","search"].includes(n))return e;const i=null==t?void 0:t.preview;switch(n){case"404":return`${i}/404-page`;case"search":return`${i}?s="lorem"`}}!async function(){await Eu(),await Tu()}();const Du={currentDemoParts:[],demoPartsIsLoaded:!1,selectedDemoPart:null,setSelectedDemoPart:h().noop},Mu=(0,c.createContext)(Du),Bu=(0,c.memo)((({children:e})=>{const{selectedDemoSlug:t,initialDemoPart:o,setInitialDemoPart:n,demosPartsPerSlug:i,demoPartsIsLoaded:r,currentDemoSite:a}=ef(),s=(0,c.useMemo)((()=>h().get(i,null==a?void 0:a.slug,[])),[a,i]),l=null==a?void 0:a.relatedDemoSite,u=(0,c.useMemo)((()=>h().get(i,null==l?void 0:l.slug,[])),[l,i]),d=(0,c.useMemo)((()=>{const e=h().get(s,[0]);if(!o)return e;return s.find((e=>(null==e?void 0:e.uniqueId)===(null==o?void 0:o.uniqueId)))||e}),[t,o]),[p,m]=(0,c.useState)(d),g=(0,c.useCallback)((e=>{o&&n(null),m(e)}),[m,o,n]);(0,c.useEffect)((()=>{o&&g(o)}),[o]),(0,c.useEffect)((()=>{g(d)}),[t]);const f=(0,c.useMemo)((()=>({currentDemoParts:s,demoPartsIsLoaded:r,selectedDemoPart:p,setSelectedDemoPart:g,relatedDemoParts:u})),[s,r,p,g,u]);return(0,j.jsx)(Mu.Provider,{value:f,children:e})})),Lu=()=>(0,c.useContext)(Mu),zu="content",Fu="wholePage",Gu=((0,C.__)("Content","kubio"),(0,C.__)("Full page","kubio"),"onlyThisPage"),Hu="allPages",Uu=((0,C.__)("Only this page","kubio"),(0,C.__)("All pages","kubio"),["singular","single"]),Wu=["index","archive","home"],Vu=Uu.concat(Wu),Ku=(0,c.createContext)({}),$u="starterSite",qu="pages",Yu="sections",Zu="favorites",Xu=[{label:(0,C.__)("Starter sites","kubio"),value:$u},{label:(0,C.__)("Pages","kubio"),value:qu},{label:(0,C.__)("Sections","kubio"),value:Yu},{label:(0,C.__)("Favorites","kubio"),value:Zu}],Qu=(0,c.memo)((({onClose:e,children:t,initialParams:o})=>{const n=h().get(o,"page",$u),[i,r]=(0,c.useState)(n),[a,s]=(0,c.useState)(n),l=(0,c.useCallback)((e=>{s(i),r(e)}),[i]),[u,d]=(0,c.useState)(!1),{templateId:p,postId:m}=(0,w.useSelect)((e=>{const{getPage:t=h().noop,getTemplateId:o=h().noop}=e("kubio/edit-site")||{},n=t();return{templateId:o()||"",postId:h().get(n,"context.postId")}}),[]);(0,c.useEffect)((()=>{u&&d(!1)}),[p,m]);const g=(0,c.useMemo)((()=>({activePage:i,setActivePage:l,onClose:e,showLoadingOverlay:u,setShowLoadingOverlay:d,initialParams:o,previousActivePage:a})),[i,l,e,u,d,o,a]);return(0,j.jsx)(Ku.Provider,{value:g,children:t})})),Ju=()=>(0,c.useContext)(Ku),ed={isImporting:!1,importDemoPart:h().noop},td=(0,c.createContext)(ed),od=(0,c.memo)((({children:e})=>{const t=(0,c.useRef)(!1),[o,n]=(0,c.useState)(!1),{selectedDemoPart:i}=Lu(),[r,a]=(0,c.useState)(zu),[s,l]=(0,c.useState)(Gu),[u,d]=(0,c.useState)(),p=t.current,h=(0,c.useCallback)((e=>{t.current=e}),[t]),m=(0,c.useCallback)((()=>{p||d(i)}),[p,d,i]),g=(0,c.useMemo)((()=>({isImporting:p,setIsImporting:h,importDemoPart:m,demoPartThatIsImporting:u,setDemoPartThatIsImporting:d,whatToImport:r,setWhatToImport:a,whereToApplyChanges:s,setWhereToApplyChanges:l,shouldConvertGlobalColors:o,setShouldConvertGlobalColors:n})),[p,h,u,d,m,r,a,s,l,o,n]);return(0,j.jsx)(td.Provider,{value:g,children:e})})),nd=()=>(0,c.useContext)(td),id={typography:{holders:{}}};["a","lead","p","h1","h2","h3","h4","h5","h6"].forEach((e=>{h().set(id,`typography.holders.${e}`,{transform:"none",style:"normal",decoration:"none"})}));const rd=e=>(e.forEach((e=>{switch(null==e?void 0:e.name){case"kubio/contact":case"kubio/subscribe-form":h().set(e,["attributes","shortcode"],""),h().set(e,["attributes","formId"],"");break;case"kubio/shortcode":h().set(e,["attributes","shortcode"],"")}const t=h().get(e,"innerBlocks",[]);rd(t)})),e),ad=e=>h().cloneDeep(h().get(e,"globalStyle.style.descendants.body",{}));function sd(e){return h()(e).pickBy(h().isObject).mapValues(sd).omitBy(h().isEmpty).assign(h().omitBy(e,(e=>h().isObject(e)&&!Array.isArray(e)))).value()}const ld=["header","footer","sidebar"],cd={header:"kubio/header",footer:"kubio/footer",sidebar:"kubio/sidebar"},ud=e=>{const t=top.document;e?t.defaultView.setTimeout((()=>{t.body.classList.add("kubio-iframe-holder--show"),t.body.classList.remove("kubio-iframe-holder--hide"),t.body.classList.remove("h-ui-disable-transitions")}),100):(t.body.classList.remove("kubio-iframe-holder--show"),t.body.classList.add("kubio-iframe-holder--hide"),t.body.classList.add("h-ui-disable-transitions"))};let dd=!1;const pd=(0,c.memo)((()=>{const{isImporting:e,setIsImporting:t,demoPartThatIsImporting:o,setDemoPartThatIsImporting:n,whereToApplyChanges:i,whatToImport:r,shouldConvertGlobalColors:a}=nd(),{onClose:l=h().noop}=Ju(),{contentClientId:u,nrOfBlocksInsideContent:d,postType:p,postId:m,isClassicTemplate:g,pagePath:b,isFrontPageClassic:v,currentTheme:y,currentPostTitle:k}=(0,w.useSelect)((e=>{var t,o;const{getBlocks:n,getBlockOrder:i}=e("core/block-editor"),{getPage:r=h().noop,getTemplateId:a}=e("kubio/edit-site")||{},{getEditedEntityRecord:s,getCurrentTheme:l,getEntityRecord:c}=e("core"),u=s("root","site"),d=null===(t=l())||void 0===t?void 0:t.stylesheet,p=r()||{},{path:m}=p,{postType:g,postId:f}=(null==p?void 0:p.context)||{},b=a()||"",_=!h().get(b.split("//"),"[1]"),v=null==u?void 0:u.page_on_front,y="page"===u.show_on_front,k=_&&y&&parseInt(v)===parseInt(f),x=n()||[],S=(0,I.findBlockByName)(x,"core/post-content"),w=null==S?void 0:S.clientId,C=null===(o=i(w))||void 0===o?void 0:o.length,j=c("postType",g,f);return{contentClientId:w,nrOfBlocksInsideContent:C,postType:g,postId:f,pagePath:m,isClassicTemplate:_,isFrontPageClassic:k,currentTheme:d,currentPost:j,currentPostTitle:h().get(j,"title.rendered","Kubio")}}),[]),{saveEntityRecord:S,editEntityRecord:T}=(0,w.useDispatch)("core"),{insertBlocks:P,replaceInnerBlocks:E,resetBlocks:R,selectBlock:A,removeBlocks:O}=(0,w.useDispatch)("core/block-editor"),{createErrorNotice:N}=(0,s.useKubioNotices)(),D=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[b],M=(0,c.useRef)(),[,B=h().noop]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{onProcessGlobalDataSettings:L}=(({shouldConvertGlobalColors:e,whatToImport:t,contentClientId:o,isClassicTemplate:n})=>{const{parseVariableColor:i,setPalette:r,getPalette:a}=(0,_.useGlobalDataColors)(),{updateBlockAttributes:l}=(0,w.useDispatch)("core/block-editor"),{editEntityRecord:u}=(0,w.useDispatch)("core"),d=(0,c.useRef)(!1),p=(0,c.useRef)(!1),m="globalStyle.style.descendants.body",{globalStyle:g}=(0,_.useGlobalDataStyle)(),f=(0,c.useMemo)((()=>a()),[]),b=(0,c.useMemo)((()=>g.getStyle("",{},{styledComponent:"body",fromRoot:!0})),[g]),v=(0,c.useMemo)((()=>g.getStyle("",{},{styledComponent:"sectionSpacing",fromRoot:!0})),[g]),{getBlocks:y,pages:k,templateParts:x,templates:S,currentPostId:C}=(0,w.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:o}=e("core"),{getPage:n=h().noop}=e("kubio/edit-site")||{},i=n(),{postId:r}=(null==i?void 0:i.context)||{},a=e=>o("postType",e,{per_page:-1});return{currentPostId:r,getBlocks:t,pages:a("page"),templateParts:a("wp_template_part"),templates:a("wp_template").filter((({slug:e})=>Vu.includes(e)))}})),j=(0,c.useCallback)((e=>{r(e)}),[r]),T=(0,c.useCallback)((e=>{g.setStyle("",e,{styledComponent:"body"})}),[g]),P=(0,c.useCallback)((e=>{g.setStyle("",e,{styledComponent:"sectionSpacing"})}),[g]),E=(0,c.useCallback)(((e,t)=>{const o=t.colors;return h().isEqual(o,f)||(e=(0,I.removeThemeColorsFromBlocks)({blocks:e,colorPalette:o,parseVariableColor:i,generateColorVariants:_.generateColorVariants,shouldUpdateAttributes:!1})),e}),[f,j,i]),R=(0,c.useCallback)(((e,t)=>{const o=ad(t);let n=h().merge({},id,o);const r=t.colors;n=(0,I.removeThemeColorsFromObject)(n,{colorPalette:r,parseVariableColor:i,generateColorVariants:_.generateColorVariants});const a=h().merge({},id,b);let l=(0,I.getObjectDifference)(n,a);if(l=sd(l),h().isEmpty(l))return e;const c="typography.holders.lead";h().set(l,c,h().merge({},h().get(b,c),h().get(l,c))),h().each(h().get(l,"typography.holders"),((e,t)=>{h().isEmpty(e)||null==e||!e.family||null!=e&&e.weight||(e.weight=h().get(o,`typography.holders.${t}.weight`))}));const u=["kubio/header","kubio/footer","kubio/sidebar","core/post-content"],d="typography.holders.lead.color",p=h().get(l,d);return e.forEach((e=>{var t;const o=!!h().get(e,"attributes.kubio");if(u.includes(null==e?void 0:e.name)||!o)return;const n=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`;let i=h().get(e,n,{});const r=h().get(i,"typography.holders.p.color");r&&p&&(i=h().cloneDeep(i),h().set(i,d,r));const a=h().merge({},l,i);h().set(e,n,a)})),e}),[b,i,_.generateColorVariants]),A=(0,c.useCallback)((e=>{const t=e.colors;h().isEqual(t,f)||j(t)}),[f,j]),O=(0,c.useCallback)((e=>{const t=h().get(e,m,{}),o=h().merge({},id,t),n=h().merge({},id,b),i=sd((0,I.getObjectDifference)(o,n));h().isEmpty(i)||T(o)}),[b,m]),N=(0,c.useCallback)((e=>{const t=h().get(e,"globalStyle.style.descendants.sectionSpacing",{});h().isEqual(v,t)||P(t)}),[v,P]),D=(0,c.useCallback)((e=>{d.current||(d.current=!0,A(e),O(e),N(e))}),[A,O,N,d]),M=(0,c.useCallback)(((e,t,o=!0)=>{const n=t.colors;let i=!1;const r=e.map((e=>{if(!h().get(e,"attributes.kubio"))return e;const{updatedBlock:r,hasUpdates:a}=(({block:e,colorPalette:t})=>{t=h().cloneDeep(t);const o=h().cloneDeep(e);let n=!1;const i=(0,_.generateColorVariants)(t),r=e=>{if(!Array.isArray(e))return e;let t;return t=4===e.length?"rgba":"rgb",`${t}(${e.join(", ")})`};t.forEach((e=>{e.color=r(e.color)})),i.forEach((e=>{e.color=r(e.color)}));const a=e=>{const o=h().get(e,"attributes.kubio",{});h().eachDeep(o,((e,o,r)=>{if("string"==typeof e&&(e.startsWith("#")&&(e=Xo(e).toRgbString()),e.startsWith("rgb"))){const a=({color:t,slug:i})=>{if(t===e){n=!0;const e=Xo(t);return r[o]=`rgba(var(--${i}),${e.getAlpha()})`,!0}return!1};t.find(a)||i.find(a)}}),{leavesOnly:!0});const{innerBlocks:r}=e;r.forEach((e=>{a(e)}))};return a(o),{updatedBlock:o,hasUpdates:n}})({block:e,colorPalette:n}),c=ad(t),{updatedBlock:u,hasUpdates:d}=(({block:e,generalBodyStyle:t})=>{var o;let n=!1;const i=`attributes.kubio.style.descendants.${null===(o=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===o?void 0:o.name}`,r=h().get(e,i,{}),a=h().merge({},id,t),l=sd((0,I.getObjectDifference)(r,a));return h().isEmpty(l)||h().isEqual(l,r)||(h().set(e,i,l),n=!0),{updatedBlock:e,hasUpdates:n}})({block:r,generalBodyStyle:c});return i=i||d||a,o&&(d||a)&&l(null==u?void 0:u.clientId,u.attributes),u}));return{blocks:r,blocksHaveChanges:i}}),[l]),B=(0,c.useCallback)((e=>{if(p.current=!0,t===Fu)return;let i=[],r=[];n||(r=y(),["kubio/header","kubio/footer","kubio/sidebar"].forEach((e=>{const t=(0,I.findBlockByName)(r,e);if(!t)return;const o=y(null==t?void 0:t.clientId);i=i.concat(o)})));const a=y(o),s=r.concat(i,a);M(s,e)}),[t,o,n,M]),L=((0,c.useCallback)((e=>{k.concat(x,S).forEach((t=>{if(t.id===C)return;const o=h().get(t,"content.raw",""),n=(0,st.parse)(o);if(h().isEmpty(n))return;const{blocks:i,blocksHaveChanges:r}=M(n,e,!1);if(!r)return;const a={content:(0,st.serialize)(i)},{id:s,type:l}=t;u("postType",l,s,a)}))}),[M,k,x,S,C]),(0,c.useCallback)((e=>{p.current||B(e)}),[B])),z=(0,c.useCallback)(((e,t)=>{const o=h().get(t,"globalStyle.style.descendants.sectionSpacing",{});if(h().isEqual(v,o))return e;let n=(0,I.getObjectDifference)(o,v);n=sd(n);const i=["kubio/section","kubio/navigation","kubio/hero","kubio/query-layout"];return e.forEach((e=>{var t;const o=!!h().get(e,"attributes.kubio");if(!i.includes(null==e?void 0:e.name)||!o)return;const r=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`,a=h().get(e,r,{}),l=h().merge({},n,a);h().set(e,r,l)})),e}),[v]);return{onProcessGlobalDataSettings:(0,c.useCallback)(((t,o)=>(e?(D(o),L(o)):(t=E(t,o),t=R(t,o),t=z(t,o)),t)),[E,R,z,L,e,D])}})({shouldConvertGlobalColors:a,whatToImport:r,contentClientId:u,isClassicTemplate:g}),z=(0,c.useCallback)(((e,t)=>(e=rd(e),e=L(e,t),(0,s.getBlocksWithNewRefs)(e))),[L]),F=(0,x.useDebounce)((0,c.useCallback)((e=>{clearTimeout(M.current),ud(!0),M.current=setTimeout((()=>{Ru(e)}),100)}),[]),100);(0,c.useEffect)((()=>()=>{clearTimeout(M.current)}),[]);const G=(0,c.useCallback)((()=>{n(null),t(!1)}),[n,t]),{templatePartIsUsedOnMultipleTemplates:H,templatePartIsFoundOnPage:U,refreshPage:W,templateIsUsedOnMultiplePages:V}=(0,s.useTemplateData)("header"),{templatePartIsUsedOnMultipleTemplates:K,templatePartIsFoundOnPage:$}=(0,s.useTemplateData)("footer"),{templatePartIsUsedOnMultipleTemplates:q,templatePartIsFoundOnPage:Y}=(0,s.useTemplateData)("sidebar"),Z=(0,c.useMemo)((()=>({header:H,footer:K,sidebar:q})),[H,K,q]),X=(0,c.useMemo)((()=>({header:U,footer:$,sidebar:Y})),[U,$,Y]),{getBlocks:Q}=(0,w.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:o}=e("core");return{getBlocks:t,getEntityRecords:o}})),J=(0,c.useCallback)((()=>{t(!0),l(),ud(!1)}),[t,l]),ee=(0,c.useCallback)((({templatePartName:e,templateBlocks:t,newSlug:o,newTheme:n})=>{const i=(0,I.findBlockByName)(t,e);i&&(i.attributes.slug=o,i.attributes.theme=n)}),[]),te=(0,c.useCallback)((async(e,t,o)=>{var n;const i=Q(),r=cd[t],a=(0,I.findBlockByName)(i,r),s=null==a?void 0:a.clientId;if(!s)return;await E(s,e);const l=null==a||null===(n=a.attributes)||void 0===n?void 0:n.slug;ee({templateBlocks:o,templatePartName:r,newSlug:l,newTheme:y})}),[Q,E,y,ee]),oe=(0,c.useCallback)((async(e,t,o)=>{const n=`${k} ${t}`,i={title:n,slug:n,area:t,kubio_template_source:"kubio-custom",content:(0,st.serialize)(e)},r=await S("postType","wp_template_part",i),a=cd[t],s=null==r?void 0:r.slug,l=null==r?void 0:r.theme;s&&l&&ee({templateBlocks:o,templatePartName:a,newSlug:s,newTheme:l})}),[k,S,ee]),ne=(0,c.useCallback)((async e=>{const{title:t,slug:o,assignTemplateToPage:n}=(({isFrontPageClassic:e,isClassicTemplate:t,classicTemplateSlug:o,postType:n,currentPostTitle:i})=>{let r="page"===n,a=`${i} template`,s=a;const l=Uu,c="search"===o,u="404"===o,d=t&&Wu.includes(o),p=t&&l.includes(o);return e?(a="Front page",s="front-page",r=!1):d?(a="Index",s="index",r=!1):p?(a="Single Post",s="single",r=!1):c?(a="Search",s="search",r=!1):u?(a="404",s="404",r=!1):n&&(s=`${n}-${s}`),{title:a,slug:s,assignTemplateToPage:r}})({isFrontPageClassic:v,isClassicTemplate:g,classicTemplateSlug:D,postType:p,currentPostTitle:k}),i={title:t,slug:o,kubio_template_source:n?"kubio-custom":"kubio",content:(0,st.serialize)(e)},r=await S("postType","wp_template",i);return n&&await T("postType",p,m,{template:null==r?void 0:r.slug}),B(!0),await W(r),r}),[v,g,D,p,k,S,B,W,T,m]),ie=(0,c.useCallback)((async({templateBlocks:e,templateParts:t,globalData:o})=>{const n=Q(),i={};if(ld.forEach((e=>{const t=cd[e];i[e]=(0,I.findBlockByName)(n,t)})),await Promise.all(t.map((async({area:t,content:n})=>{var r;const a=z((0,st.parse)(n),o),s=null===(r=i[t])||void 0===r?void 0:r.clientId;s?await E(s,a):await oe(a,t,e)}))),!h().isEmpty(t)){const o=Object.values(i),n=t.map((({area:e})=>cd[e]));o.forEach((t=>{var o;if(!t)return;const i=null==t?void 0:t.name;if(!n.includes(i))return;const r=null==t||null===(o=t.attributes)||void 0===o?void 0:o.slug;ee({templateBlocks:e,templatePartName:i,newSlug:r,newTheme:y})}))}g?await ne(e):await R(e),F()}),[Q,g,F,z,E,oe,y,ee,ne,R]),re=(0,c.useCallback)((async({templateBlocks:e,templateParts:t,globalData:o})=>{await Promise.all(t.map((async({area:t,content:n})=>{const i=z((0,st.parse)(n),o);Z[t]||!X[t]?await oe(i,t,e):await te(i,t,e)}))),await R(e)}),[R,z,Z,X,oe,te]),ae=(0,c.useCallback)((async({templateBlocks:e,templateParts:t,globalData:o})=>{await Promise.all(t.map((async({area:t,content:n})=>{const i=z((0,st.parse)(n),o);await oe(i,t,e)}))),await ne(e)}),[oe,ne,z]),se=(0,c.useCallback)((async({templateBlocks:e,templateParts:t,globalData:o})=>{V||g?await ae({templateBlocks:e,templateParts:t,globalData:o}):await re({templateBlocks:e,templateParts:t,globalData:o}),B(!0),F()}),[V,g,B,F,ae,re]),le=(0,c.useCallback)((async({templateBlocks:e,templateParts:t,globalData:o})=>{let n=i;p&&"page"!==p&&!g&&(n=Hu);const r=Hu===n;Gu===n&&await se({templateBlocks:e,templateParts:t,globalData:o}),r&&await re({templateBlocks:e,templateParts:t,globalData:o})}),[g,p,i,re,se]),ce=(0,c.useCallback)((async({templateBlocks:e,templateParts:t,globalData:o})=>{const n=Q(),i=e[1];let r,a;n.forEach(((e,t)=>{("kubio/header"===e.name||"core/template-part"===e.name&&"header"===(null==e?void 0:e.area))&&(r=t),("kubio/footer"===e.name||"core/template-part"===e.name&&"footer"===(null==e?void 0:e.area))&&(a=t)}));let s=[];s=s.concat(n.slice(0,r+1)),s.push(i),s=s.concat(n.slice(a));const l=t.filter((({area:e})=>!["footer","header"].includes(e)));ie({templateBlocks:s,templateParts:l,globalData:o}),F()}),[Q,F,ie]),ue=(0,c.useCallback)((async e=>{let t=r===zu;g&&(t=!1);const{template:o,templateParts:n,globalData:i}=await async function(e,t=!0){const o=["demoPartsContentById","templates",e],n=h().get(wu,o),i=h().get(n,"templatePartsIds",[]);let r={template:await async function(e){return ju(e,"templates")}(e),templateParts:await Promise.all(i.map((async e=>({area:h().get(wu,["demoPartsContentById","templateParts",e,"area"]),content:await async function(e){return ju(e,"templateParts")}(e)}))))};if(t){const e=null==n?void 0:n.globalDataId,t=await Iu(e);r.globalData=t}return r=h().cloneDeep(r),r}(e);if(!o)return void G();const a=z((0,st.parse)(o),i);t?await ce({templateBlocks:a,templateParts:n,globalData:i}):await le({templateBlocks:a,templateParts:n,globalData:i})}),[r,g,J,z,G,ce,le]),de=(0,c.useCallback)((async({pageBlocks:e,globalData:t})=>{const o=h().get(e,[0,"clientId"]);await P(e,d,u,!1),F(o)}),[P,d,u,F]),pe=(0,c.useCallback)((async({pageBlocks:e,pageId:t})=>{g&&await R([]),await E(u,e);const o=(n=t,h().get(wu,["demoPartsContentById","pages",n]));var n;const i=null==o?void 0:o.templateId;await ue(i),F()}),[g,E,u,ue,F,R]),he=(0,c.useCallback)((async e=>{const t=r===zu,o=r===Fu,{page:n,globalData:i}=await async function(e){const t=["demoPartsContentById","pages",e],o=h().get(wu,t),n=await async function(e){return ju(e,"pages")}(e),i=null==o?void 0:o.globalDataId;let r={page:n,globalData:await Iu(i)};return r=h().cloneDeep(r),r}(e);if(!n)return void G();const a=z((0,st.parse)(n),i);t&&await de({pageBlocks:a,globalData:i,pageId:e}),o&&await pe({pageBlocks:a,globalData:i,pageId:e})}),[r,z,G,de,pe]),me=(0,c.useCallback)((async()=>{if(!o||e||dd)return;dd=!0;const t="page"===(null==o?void 0:o.type),n="template"===(null==o?void 0:o.type),i=null==o?void 0:o.id;if(i)try{J(),t&&await he(i),n&&await ue(i)}catch(e){console.error(e),N((0,C.__)("Could not import content. Please try again later","kubio"))}finally{dd=!1,F()}}),[o,e,J,he,ue,N,F]);return(0,s.useEffectDeep)((()=>{me()}),[o]),(0,j.jsx)(j.Fragment,{})})),hd=(0,c.memo)((()=>{const{categoriesList:e=[],selectedCategory:t,setSelectedCategory:o,nrOfItemsPerCategory:n}=Yg(),i=(0,w.useSelect)((e=>{const{getExcludedSectionCategories:t}=e("kubio/edit-site");return t()})),r=e.filter((e=>!i.includes(e.value))),[a,s]=(0,c.useState)(t),l=(0,c.useCallback)((e=>{e!==t&&(s(e),o(e))}),[o,t,s]);return(0,c.useEffect)((()=>{a!==t&&s(t)}),[t]),(0,j.jsxs)("div",{className:"kubio-predefined-layouts__category-list",onClick:e=>e.stopPropagation(),children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__category-list__title",children:"CATEGORIES"}),r.map((({label:e,value:t})=>(0,j.jsxs)(k.Button,{onClick:()=>l(t),className:Z()("kubio-predefined-layouts__category-list__item",{"kubio-predefined-layouts__category-list__item--active":t===a}),children:[e,(0,j.jsx)("span",{children:n[t]})]},t)))]})})),md=(0,c.memo)((({type:e,id:t,relatedFavoriteId:o})=>{const{favoritesDataByType:n,onAddToFavorites:i}=af(),r=(0,c.useMemo)((()=>h().get(n,[e,t],!1)),[n]),[a,s]=(0,c.useState)(r);(0,c.useEffect)((()=>{r!==a&&s(r)}),[r]);const l=(0,c.useMemo)((()=>a?"font-awesome/heart":"font-awesome/heart-o"),[a]),u=(0,c.useCallback)((async n=>{n.stopPropagation();const r=!a;s(r),i(e,o?[t,o]:t,r)}),[a,i,s,o]);return(0,j.jsx)(ct.CanvasIcon,{onClick:u,className:"kubio-predefined-layouts__favorite-button",name:l})})),gd=(0,c.memo)((({fontsToLoad:e})=>{const t=(0,c.useCallback)((e=>{e.target.rel="stylesheet"}),[e]);return Array.isArray(e)?(0,j.jsx)(j.Fragment,{children:e.map((e=>(0,j.jsx)("link",{href:`https://fonts.googleapis.com/css?family=${e}&display=swap`,rel:"preload",as:"style",onLoad:t},e)))}):(0,j.jsx)(j.Fragment,{})})),fd=(0,c.memo)((()=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__img__placeholder"}))),bd=({src:e,uniqueId:t,showAnimationAtLoad:o,addImageType:n=!0,onLoad:i=h().noop,...r})=>{const[a,s]=(0,c.useState)(!0),l=(0,c.useRef)(),u=(0,c.useRef)(),d=(0,c.useRef)(!1),p=(0,c.useRef)(),m=(0,c.useRef)(!1),g=(0,c.useRef)(!1);(0,c.useEffect)((()=>{a||s(!0)}),[e]);const f=(0,c.useCallback)((()=>{var e,t;const o=l.current;if(!o)return;const n=parseInt((null===(e=u.current)||void 0===e?void 0:e.naturalWidth)||0),i=parseInt((null===(t=u.current)||void 0===t?void 0:t.naturalHeight)||0),r=o.parentNode;let a=!1;if(0!==n&&0!==i){const e=(i+10)/n;a=parseInt(r.clientHeight)/parseInt(r.clientWidth)>e}}),[l,u]),b=(0,c.useCallback)((()=>{g.current=!0;const t=l.current;t&&(t.src=e,t.setAttribute("data-is-loaded",""),s(!1),d.current&&i(),n&&f())}),[e,s,n,f]),_=(0,c.useMemo)((()=>{if(e.startsWith("data:image/"))return!0;g.current=!1,m.current=!1;const t=new Image;return u.current=t,clearTimeout(m.current),p.current=setTimeout((()=>{m.current=!0,g.current||t.complete&&b()}),350),t.onload=()=>{m.current&&b()},t.src=e,t.complete}),[e]);return(0,c.useEffect)((()=>()=>{clearTimeout(m.current)}),[]),(0,c.useLayoutEffect)((()=>{var e;null!==(e=u.current)&&void 0!==e&&e.complete&&f()}),[]),(0,j.jsxs)("div",{className:Z()("kubio-predefined-layouts__img__outer",{"kubio-predefined-layouts__img__outer--with-placeholder":!_&&a}),...r,children:[(0,j.jsx)("img",{className:Z()("kubio-predefined-layouts__img",{"kubio-predefined-layouts__img--with-animation":!_}),ref:l,src:e,onLoad:()=>{a||(d.current=!0,i())}}),!_&&a&&(0,j.jsx)(fd,{})]})},_d=(0,c.memo)((({list:e,children:t=h().noop})=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__screenshot-list",children:e.map((e=>t(e)))}))),vd=(0,c.memo)((0,c.forwardRef)((({screenshot:e,screenshotFull:t,label:o="",isPack:n=!1,labelSlot:i,showFull:r=!1,uniqueId:a,isPro:s=!1,showFavorite:l=!0,isLandscape:u=!1,showLabel:d=!0,addUniquePreviewAttribute:p=!0,showAnimationAtLoad:h,onClick:m,onLoad:g,favoriteType:f,favoriteId:b,relatedFavoriteId:_,children:v,addImageType:y,...k},x)=>{const S=r?t:e;a=a||S;const w=(0,c.useMemo)((()=>Math.random()),[a]),C=s;let I={};return p&&(I={"data-unique-id":a}),(0,j.jsxs)("div",{className:"kubio-predefined-layouts__screenshot-preview__outer",...I,...k,children:[(0,j.jsxs)("div",{ref:x,className:Z()("kubio-predefined-layouts__screenshot-preview__parent",{"kubio-predefined-layouts__screenshot-preview__parent--with-pack":n,"kubio-predefined-layouts__screenshot-preview__parent--is-landscape":u}),children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__screenshot-preview kubio-pro-item--small",onClick:m,children:(0,j.jsx)(bd,{src:S,uniqueId:a,showAnimationAtLoad:h,onLoad:g,addImageType:y})}),d&&(0,j.jsxs)("div",{className:"kubio-predefined-layouts__screenshot-preview__label",children:[(0,j.jsxs)("div",{className:"kubio-predefined-layouts__screenshot-preview__label__with-badge",children:[C&&(0,j.jsx)("span",{className:"kubio-pro-item__badge",children:"PRO"}),o]}),l&&(0,j.jsx)(md,{type:f,id:b,relatedFavoriteId:_}),i]}),v]}),n&&(0,j.jsxs)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack",children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-1"}),(0,j.jsx)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-2"})]})]},w)}))),yd=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),kd=(0,c.memo)((({placeholder:e="Search"})=>{const{searchString:t,setSearchString:o}=qg(),[n,i]=(0,c.useState)(t),r=(0,s.useDebounce)(o,300),a=(0,c.useCallback)((e=>{const t=e.target.value;i(t),r(t)}),[i,r]);return(0,c.useEffect)((()=>{n!==t&&i(t)}),[t]),(0,j.jsx)(ct.InputControl,{className:"kubio-predefined-layouts__search-input",value:n,onInput:a,placeholder:e,suffix:(0,j.jsx)(k.Icon,{icon:yd})})})),xd=(0,c.memo)((({label:e=(0,C.__)("PRO","kubio"),className:t})=>(0,j.jsxs)("div",{className:Z()("kubio-predefined-layouts__free-pro-separator",t),children:[e,(0,j.jsx)("div",{className:"kubio-predefined-layouts__free-pro-separator__line"})]})));function Sd(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function wd(e){this.setState(function(t){var o=this.constructor.getDerivedStateFromProps(e,t);return null!=o?o:null}.bind(this))}function Cd(e,t){try{var o=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(o,n)}finally{this.props=o,this.state=n}}function Id(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var o=null,n=null,i=null;if("function"==typeof t.componentWillMount?o="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(o="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==o||null!==n||null!==i){var r=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+r+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==o?"\n  "+o:"")+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Sd,t.componentWillReceiveProps=wd),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Cd;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,o){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:o;s.call(this,e,t,n)}}return e}function jd(e){var t,o,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=jd(e[t]))&&(n&&(n+=" "),n+=o);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}(0,C.__)("ALL","kubio"),(0,C.__)("FREE","kubio"),(0,C.__)("PRO","kubio"),Sd.__suppressDeprecationWarning=!0,wd.__suppressDeprecationWarning=!0,Cd.__suppressDeprecationWarning=!0;const Td=function(){for(var e,t,o=0,n="";o<arguments.length;)(e=arguments[o++])&&(t=jd(e))&&(n&&(n+=" "),n+=t);return n};function Pd(e){var t=e.cellCount,o=e.cellSize,n=e.computeMetadataCallback,i=e.computeMetadataCallbackProps,r=e.nextCellsCount,a=e.nextCellSize,s=e.nextScrollToIndex,l=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===r&&("number"!=typeof o&&"number"!=typeof a||o===a)||(n(i),l>=0&&l===s&&c())}function Ed(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;o[n]=e[n]}return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var Rd=function(){function e(t){var o=t.cellCount,n=t.cellSizeGetter,i=t.estimatedCellSize;_t(this,e),ft(this,"_cellSizeAndPositionData",{}),ft(this,"_lastMeasuredIndex",-1),ft(this,"_lastBatchedIndex",-1),ft(this,"_cellCount",void 0),ft(this,"_cellSizeGetter",void 0),ft(this,"_estimatedCellSize",void 0),this._cellSizeGetter=n,this._cellCount=o,this._estimatedCellSize=i}return yt(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,o=e.estimatedCellSize,n=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=o,this._cellSizeGetter=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),o=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var i=this._cellSizeGetter({index:n});if(void 0===i||isNaN(i))throw Error("Invalid size returned for cell ".concat(n," of value ").concat(i));null===i?(this._cellSizeAndPositionData[n]={offset:o,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[n]={offset:o,size:i},o+=i,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,o=void 0===t?"auto":t,n=e.containerSize,i=e.currentOffset,r=e.targetIndex;if(n<=0)return 0;var a,s=this.getSizeAndPositionOfCell(r),l=s.offset,c=l-n+s.size;switch(o){case"start":a=l;break;case"end":a=c;break;case"center":a=l-(n-s.size)/2;break;default:a=Math.max(c,Math.min(l,i))}var u=this.getTotalSize();return Math.max(0,Math.min(u-n,a))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,o=e.offset;if(0===this.getTotalSize())return{};var n=o+t,i=this._findNearestCell(o),r=this.getSizeAndPositionOfCell(i);o=r.offset+r.size;for(var a=i;o<n&&a<this._cellCount-1;)a++,o+=this.getSizeAndPositionOfCell(a).size;return{start:i,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,o){for(;t<=e;){var n=t+Math.floor((e-t)/2),i=this.getSizeAndPositionOfCell(n).offset;if(i===o)return n;i<o?t=n+1:i>o&&(e=n-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var o=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=o,o*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),o=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(o,0,e):this._exponentialSearch(o,e)}}]),e}(),Ad=function(){function e(t){var o=t.maxScrollSize,n=void 0===o?"undefined"!=typeof window&&window.chrome?16777100:15e5:o,i=Ed(t,["maxScrollSize"]);_t(this,e),ft(this,"_cellSizeAndPositionManager",void 0),ft(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Rd(i),this._maxScrollSize=n}return yt(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize(),r=this._getOffsetPercentage({containerSize:t,offset:o,totalSize:i});return Math.round(r*(i-n))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,o=void 0===t?"auto":t,n=e.containerSize,i=e.currentOffset,r=e.targetIndex;i=this._safeOffsetToOffset({containerSize:n,offset:i});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:n,currentOffset:i,targetIndex:r});return this._offsetToSafeOffset({containerSize:n,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,o=e.offset;return o=this._safeOffsetToOffset({containerSize:t,offset:o}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:o})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,o=e.offset,n=e.totalSize;return n<=t?0:o/(n-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(n===i)return o;var r=this._getOffsetPercentage({containerSize:t,offset:o,totalSize:n});return Math.round(r*(i-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(n===i)return o;var r=this._getOffsetPercentage({containerSize:t,offset:o,totalSize:i});return Math.round(r*(n-t))}}]),e}();function Od(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(o){var n=o.callback,i=o.indices,r=Object.keys(i),a=!e||r.every((function(e){var t=i[e];return Array.isArray(t)?t.length>0:t>=0})),s=r.length!==Object.keys(t).length||r.some((function(e){var o=t[e],n=i[e];return Array.isArray(n)?o.join(",")!==n.join(","):o!==n}));t=i,a&&s&&n(i)}}function Nd(e){var t=e.cellSize,o=e.cellSizeAndPositionManager,n=e.previousCellsCount,i=e.previousCellSize,r=e.previousScrollToAlignment,a=e.previousScrollToIndex,s=e.previousSize,l=e.scrollOffset,c=e.scrollToAlignment,u=e.scrollToIndex,d=e.size,p=e.sizeJustIncreasedFromZero,h=e.updateScrollIndexCallback,m=o.getCellCount(),g=u>=0&&u<m;g&&(d!==s||p||!i||"number"==typeof t&&t!==i||c!==r||u!==a)?h(u):!g&&m>0&&(d<s||m<n)&&l>o.getTotalSize()-d&&h(m-1)}const Dd=!("undefined"==typeof window||!window.document||!window.document.createElement);var Md,Bd;function Ld(e){if((!Md&&0!==Md||e)&&Dd){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Md=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Md}var zd,Fd,Gd=(Bd="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||Bd.webkitRequestAnimationFrame||Bd.mozRequestAnimationFrame||Bd.oRequestAnimationFrame||Bd.msRequestAnimationFrame||function(e){return Bd.setTimeout(e,1e3/60)},Hd=Bd.cancelAnimationFrame||Bd.webkitCancelAnimationFrame||Bd.mozCancelAnimationFrame||Bd.oCancelAnimationFrame||Bd.msCancelAnimationFrame||function(e){Bd.clearTimeout(e)},Ud=Gd,Wd=Hd,Vd=function(e){return Wd(e.id)},Kd=function(e,t){var o;Promise.resolve().then((function(){o=Date.now()}));var n={id:Ud((function i(){Date.now()-o>=t?e.call():n.id=Ud(i)}))};return n};function $d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function qd(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?$d(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):$d(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Yd="requested",Zd=(Fd=zd=function(e){function t(e){var o;_t(this,t),ft(kt(o=xt(this,St(t).call(this,e))),"_onGridRenderedMemoizer",Od()),ft(kt(o),"_onScrollMemoizer",Od(!1)),ft(kt(o),"_deferredInvalidateColumnIndex",null),ft(kt(o),"_deferredInvalidateRowIndex",null),ft(kt(o),"_recomputeScrollLeftFlag",!1),ft(kt(o),"_recomputeScrollTopFlag",!1),ft(kt(o),"_horizontalScrollBarSize",0),ft(kt(o),"_verticalScrollBarSize",0),ft(kt(o),"_scrollbarPresenceChanged",!1),ft(kt(o),"_scrollingContainer",void 0),ft(kt(o),"_childrenToDisplay",void 0),ft(kt(o),"_columnStartIndex",void 0),ft(kt(o),"_columnStopIndex",void 0),ft(kt(o),"_rowStartIndex",void 0),ft(kt(o),"_rowStopIndex",void 0),ft(kt(o),"_renderedColumnStartIndex",0),ft(kt(o),"_renderedColumnStopIndex",0),ft(kt(o),"_renderedRowStartIndex",0),ft(kt(o),"_renderedRowStopIndex",0),ft(kt(o),"_initialScrollTop",void 0),ft(kt(o),"_initialScrollLeft",void 0),ft(kt(o),"_disablePointerEventsTimeoutId",void 0),ft(kt(o),"_styleCache",{}),ft(kt(o),"_cellCache",{}),ft(kt(o),"_debounceScrollEndedCallback",(function(){o._disablePointerEventsTimeoutId=null,o.setState({isScrolling:!1,needToResetStyleCache:!1})})),ft(kt(o),"_invokeOnGridRenderedHelper",(function(){var e=o.props.onSectionRendered;o._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:o._columnStartIndex,columnOverscanStopIndex:o._columnStopIndex,columnStartIndex:o._renderedColumnStartIndex,columnStopIndex:o._renderedColumnStopIndex,rowOverscanStartIndex:o._rowStartIndex,rowOverscanStopIndex:o._rowStopIndex,rowStartIndex:o._renderedRowStartIndex,rowStopIndex:o._renderedRowStopIndex}})})),ft(kt(o),"_setScrollingContainerRef",(function(e){o._scrollingContainer=e})),ft(kt(o),"_onScroll",(function(e){e.target===o._scrollingContainer&&o.handleScrollEvent(e.target)}));var n=new Ad({cellCount:e.columnCount,cellSizeGetter:function(o){return t._wrapSizeGetter(e.columnWidth)(o)},estimatedCellSize:t._getEstimatedColumnSize(e)}),i=new Ad({cellCount:e.rowCount,cellSizeGetter:function(o){return t._wrapSizeGetter(e.rowHeight)(o)},estimatedCellSize:t._getEstimatedRowSize(e)});return o.state={instanceProps:{columnSizeAndPositionManager:n,rowSizeAndPositionManager:i,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(o._initialScrollTop=o._getCalculatedScrollTop(e,o.state)),e.scrollToColumn>0&&(o._initialScrollLeft=o._getCalculatedScrollLeft(e,o.state)),o}return Ct(t,e),yt(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,o=void 0===t?this.props.scrollToAlignment:t,n=e.columnIndex,i=void 0===n?this.props.scrollToColumn:n,r=e.rowIndex,a=void 0===r?this.props.scrollToRow:r,s=qd({},this.props,{scrollToAlignment:o,scrollToColumn:i,scrollToRow:a});return{scrollLeft:this._getCalculatedScrollLeft(s),scrollTop:this._getCalculatedScrollTop(s)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,o=void 0===t?0:t,n=e.scrollTop,i=void 0===n?0:n;if(!(i<0)){this._debounceScrollEnded();var r=this.props,a=r.autoHeight,s=r.autoWidth,l=r.height,c=r.width,u=this.state.instanceProps,d=u.scrollbarSize,p=u.rowSizeAndPositionManager.getTotalSize(),h=u.columnSizeAndPositionManager.getTotalSize(),m=Math.min(Math.max(0,h-c+d),o),g=Math.min(Math.max(0,p-l+d),i);if(this.state.scrollLeft!==m||this.state.scrollTop!==g){var f={isScrolling:!0,scrollDirectionHorizontal:m!==this.state.scrollLeft?m>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:g!==this.state.scrollTop?g>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};a||(f.scrollTop=g),s||(f.scrollLeft=m),f.needToResetStyleCache=!1,this.setState(f)}this._invokeOnScrollMemoizer({scrollLeft:m,scrollTop:g,totalColumnsWidth:h,totalRowsHeight:p})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,o=e.rowCount,n=this.state.instanceProps;n.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),n.rowSizeAndPositionManager.getSizeAndPositionOfCell(o-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=void 0===t?0:t,n=e.rowIndex,i=void 0===n?0:n,r=this.props,a=r.scrollToColumn,s=r.scrollToRow,l=this.state.instanceProps;l.columnSizeAndPositionManager.resetCell(o),l.rowSizeAndPositionManager.resetCell(i),this._recomputeScrollLeftFlag=a>=0&&(1===this.state.scrollDirectionHorizontal?o<=a:o>=a),this._recomputeScrollTopFlag=s>=0&&(1===this.state.scrollDirectionVertical?i<=s:i>=s),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,o=e.rowIndex,n=this.props.columnCount,i=this.props;n>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(qd({},i,{scrollToColumn:t})),void 0!==o&&this._updateScrollTopForScrollToRow(qd({},i,{scrollToRow:o}))}},{key:"componentDidMount",value:function(){var e=this.props,o=e.getScrollbarSize,n=e.height,i=e.scrollLeft,r=e.scrollToColumn,a=e.scrollTop,s=e.scrollToRow,l=e.width,c=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){var t=qd({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=o(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof i&&i>=0||"number"==typeof a&&a>=0){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:i,scrollTop:a});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var d=n>0&&l>0;r>=0&&d&&this._updateScrollLeftForScrollToColumn(),s>=0&&d&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:i||0,scrollTop:a||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var o=this,n=this.props,i=n.autoHeight,r=n.autoWidth,a=n.columnCount,s=n.height,l=n.rowCount,c=n.scrollToAlignment,u=n.scrollToColumn,d=n.scrollToRow,p=n.width,h=this.state,m=h.scrollLeft,g=h.scrollPositionChangeReason,f=h.scrollTop,b=h.instanceProps;this._handleInvalidatedGridSize();var _=a>0&&0===e.columnCount||l>0&&0===e.rowCount;g===Yd&&(!r&&m>=0&&(m!==this._scrollingContainer.scrollLeft||_)&&(this._scrollingContainer.scrollLeft=m),!i&&f>=0&&(f!==this._scrollingContainer.scrollTop||_)&&(this._scrollingContainer.scrollTop=f));var v=(0===e.width||0===e.height)&&s>0&&p>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Nd({cellSizeAndPositionManager:b.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:m,scrollToAlignment:c,scrollToIndex:u,size:p,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return o._updateScrollLeftForScrollToColumn(o.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Nd({cellSizeAndPositionManager:b.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:f,scrollToAlignment:c,scrollToIndex:d,size:s,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return o._updateScrollTopForScrollToRow(o.props)}}),this._invokeOnGridRenderedHelper(),m!==t.scrollLeft||f!==t.scrollTop){var y=b.rowSizeAndPositionManager.getTotalSize(),k=b.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:m,scrollTop:f,totalColumnsWidth:k,totalRowsHeight:y})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Vd(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,o=e.autoHeight,n=e.autoWidth,i=e.className,r=e.containerProps,a=e.containerRole,s=e.containerStyle,l=e.height,c=e.id,u=e.noContentRenderer,d=e.role,p=e.style,h=e.tabIndex,m=e.width,g=this.state,f=g.instanceProps,b=g.needToResetStyleCache,_=this._isScrolling(),v={boxSizing:"border-box",direction:"ltr",height:o?"auto":l,position:"relative",width:n?"auto":m,WebkitOverflowScrolling:"touch",willChange:"transform"};b&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var y=f.columnSizeAndPositionManager.getTotalSize(),k=f.rowSizeAndPositionManager.getTotalSize(),x=k>l?f.scrollbarSize:0,S=y>m?f.scrollbarSize:0;S===this._horizontalScrollBarSize&&x===this._verticalScrollBarSize||(this._horizontalScrollBarSize=S,this._verticalScrollBarSize=x,this._scrollbarPresenceChanged=!0),v.overflowX=y+x<=m?"hidden":"auto",v.overflowY=k+S<=l?"hidden":"auto";var w=this._childrenToDisplay,C=0===w.length&&l>0&&m>0;return X.createElement("div",q({ref:this._setScrollingContainerRef},r,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Td("ReactVirtualized__Grid",i),id:c,onScroll:this._onScroll,role:d,style:qd({},v,{},p),tabIndex:h}),w.length>0&&X.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:a,style:qd({width:t?"auto":y,height:k,maxWidth:y,maxHeight:k,overflow:"hidden",pointerEvents:_?"none":"",position:"relative"},s)},w),C&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=e.cellRenderer,n=e.cellRangeRenderer,i=e.columnCount,r=e.deferredMeasurementCache,a=e.height,s=e.overscanColumnCount,l=e.overscanIndicesGetter,c=e.overscanRowCount,u=e.rowCount,d=e.width,p=e.isScrollingOptOut,h=t.scrollDirectionHorizontal,m=t.scrollDirectionVertical,g=t.instanceProps,f=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,b=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,_=this._isScrolling(e,t);if(this._childrenToDisplay=[],a>0&&d>0){var v=g.columnSizeAndPositionManager.getVisibleCellRange({containerSize:d,offset:b}),y=g.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:f}),k=g.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:d,offset:b}),x=g.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:f});this._renderedColumnStartIndex=v.start,this._renderedColumnStopIndex=v.stop,this._renderedRowStartIndex=y.start,this._renderedRowStopIndex=y.stop;var S=l({direction:"horizontal",cellCount:i,overscanCellsCount:s,scrollDirection:h,startIndex:"number"==typeof v.start?v.start:0,stopIndex:"number"==typeof v.stop?v.stop:-1}),w=l({direction:"vertical",cellCount:u,overscanCellsCount:c,scrollDirection:m,startIndex:"number"==typeof y.start?y.start:0,stopIndex:"number"==typeof y.stop?y.stop:-1}),C=S.overscanStartIndex,I=S.overscanStopIndex,j=w.overscanStartIndex,T=w.overscanStopIndex;if(r){if(!r.hasFixedHeight())for(var P=j;P<=T;P++)if(!r.has(P,0)){C=0,I=i-1;break}if(!r.hasFixedWidth())for(var E=C;E<=I;E++)if(!r.has(0,E)){j=0,T=u-1;break}}this._childrenToDisplay=n({cellCache:this._cellCache,cellRenderer:o,columnSizeAndPositionManager:g.columnSizeAndPositionManager,columnStartIndex:C,columnStopIndex:I,deferredMeasurementCache:r,horizontalOffsetAdjustment:k,isScrolling:_,isScrollingOptOut:p,parent:this,rowSizeAndPositionManager:g.rowSizeAndPositionManager,rowStartIndex:j,rowStopIndex:T,scrollLeft:b,scrollTop:f,styleCache:this._styleCache,verticalOffsetAdjustment:x,visibleColumnIndices:v,visibleRowIndices:y}),this._columnStartIndex=C,this._columnStopIndex=I,this._rowStartIndex=j,this._rowStopIndex=T}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Vd(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Kd(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,o=e.scrollLeft,n=e.scrollTop,i=e.totalColumnsWidth,r=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var o=e.scrollLeft,n=e.scrollTop,a=t.props,s=a.height;(0,a.onScroll)({clientHeight:s,clientWidth:a.width,scrollHeight:r,scrollLeft:o,scrollTop:n,scrollWidth:i})},indices:{scrollLeft:o,scrollTop:n}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var o=e.scrollLeft,n=e.scrollTop,i=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:o,scrollTop:n});i&&(i.needToResetStyleCache=!1,this.setState(i))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,o)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t._getScrollLeftForScrollToColumnStateUpdate(e,o);n&&(n.needToResetStyleCache=!1,this.setState(n))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,o)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,o=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var n=this._rowStartIndex;n<=this._rowStopIndex;n++)for(var i=this._columnStartIndex;i<=this._columnStopIndex;i++){var r="".concat(n,"-").concat(i);this._styleCache[r]=e[r],o&&(this._cellCache[r]=t[r])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t._getScrollTopForScrollToRowStateUpdate(e,o);n&&(n.needToResetStyleCache=!1,this.setState(n))}}],[{key:"getDerivedStateFromProps",value:function(e,o){var n={};0===e.columnCount&&0!==o.scrollLeft||0===e.rowCount&&0!==o.scrollTop?(n.scrollLeft=0,n.scrollTop=0):(e.scrollLeft!==o.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==o.scrollTop&&e.scrollToRow<0)&&Object.assign(n,t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var i,r,a=o.instanceProps;return n.needToResetStyleCache=!1,e.columnWidth===a.prevColumnWidth&&e.rowHeight===a.prevRowHeight||(n.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==a.prevColumnCount&&0!==a.prevRowCount||(a.prevColumnCount=0,a.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===a.prevIsScrolling&&Object.assign(n,{isScrolling:!1}),Pd({cellCount:a.prevColumnCount,cellSize:"number"==typeof a.prevColumnWidth?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){i=t._getScrollLeftForScrollToColumnStateUpdate(e,o)}}),Pd({cellCount:a.prevRowCount,cellSize:"number"==typeof a.prevRowHeight?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollTopForScrollToRowStateUpdate(e,o)}}),a.prevColumnCount=e.columnCount,a.prevColumnWidth=e.columnWidth,a.prevIsScrolling=!0===e.isScrolling,a.prevRowCount=e.rowCount,a.prevRowHeight=e.rowHeight,a.prevScrollToColumn=e.scrollToColumn,a.prevScrollToRow=e.scrollToRow,a.scrollbarSize=e.getScrollbarSize(),void 0===a.scrollbarSize?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,n.instanceProps=a,qd({},n,{},i,{},r)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,o=e.scrollLeft,n=e.scrollTop,i={scrollPositionChangeReason:Yd};return"number"==typeof o&&o>=0&&(i.scrollDirectionHorizontal=o>t.scrollLeft?1:-1,i.scrollLeft=o),"number"==typeof n&&n>=0&&(i.scrollDirectionVertical=n>t.scrollTop?1:-1,i.scrollTop=n),"number"==typeof o&&o>=0&&o!==t.scrollLeft||"number"==typeof n&&n>=0&&n!==t.scrollTop?i:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var o=e.columnCount,n=e.height,i=e.scrollToAlignment,r=e.scrollToColumn,a=e.width,s=t.scrollLeft,l=t.instanceProps;if(o>0){var c=o-1,u=r<0?c:Math.min(c,r),d=l.rowSizeAndPositionManager.getTotalSize(),p=l.scrollbarSizeMeasured&&d>n?l.scrollbarSize:0;return l.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:a-p,currentOffset:s,targetIndex:u})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,o){var n=o.scrollLeft,i=t._getCalculatedScrollLeft(e,o);return"number"==typeof i&&i>=0&&n!==i?t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:i,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var o=e.height,n=e.rowCount,i=e.scrollToAlignment,r=e.scrollToRow,a=e.width,s=t.scrollTop,l=t.instanceProps;if(n>0){var c=n-1,u=r<0?c:Math.min(c,r),d=l.columnSizeAndPositionManager.getTotalSize(),p=l.scrollbarSizeMeasured&&d>a?l.scrollbarSize:0;return l.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:o-p,currentOffset:s,targetIndex:u})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,o){var n=o.scrollTop,i=t._getCalculatedScrollTop(e,o);return"number"==typeof i&&i>=0&&n!==i?t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:-1,scrollTop:i}):{}}}]),t}(X.PureComponent),ft(zd,"propTypes",null),Fd);ft(Zd,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,o=e.cellRenderer,n=e.columnSizeAndPositionManager,i=e.columnStartIndex,r=e.columnStopIndex,a=e.deferredMeasurementCache,s=e.horizontalOffsetAdjustment,l=e.isScrolling,c=e.isScrollingOptOut,u=e.parent,d=e.rowSizeAndPositionManager,p=e.rowStartIndex,h=e.rowStopIndex,m=e.styleCache,g=e.verticalOffsetAdjustment,f=e.visibleColumnIndices,b=e.visibleRowIndices,_=[],v=n.areOffsetsAdjusted()||d.areOffsetsAdjusted(),y=!l&&!v,k=p;k<=h;k++)for(var x=d.getSizeAndPositionOfCell(k),S=i;S<=r;S++){var w=n.getSizeAndPositionOfCell(S),C=S>=f.start&&S<=f.stop&&k>=b.start&&k<=b.stop,I="".concat(k,"-").concat(S),j=void 0;y&&m[I]?j=m[I]:a&&!a.has(k,S)?j={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(j={height:x.size,left:w.offset+s,position:"absolute",top:x.offset+g,width:w.size},m[I]=j);var T={columnIndex:S,isScrolling:l,isVisible:C,key:I,parent:u,rowIndex:k,style:j},P=void 0;!c&&!l||s||g?P=o(T):(t[I]||(t[I]=o(T)),P=t[I]),null!=P&&!1!==P&&_.push(P)}return _},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Ld,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,o=e.overscanCellsCount,n=e.scrollDirection,i=e.startIndex,r=e.stopIndex;return 1===n?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(t-1,r+o)}:{overscanStartIndex:Math.max(0,i-o),overscanStopIndex:Math.min(t-1,r)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),Id(Zd);const Xd=Zd;function Qd(e){var t=e.cellCount,o=e.overscanCellsCount,n=e.scrollDirection,i=e.startIndex,r=e.stopIndex;return o=Math.max(1,o),1===n?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(t-1,r+o)}:{overscanStartIndex:Math.max(0,i-o),overscanStopIndex:Math.min(t-1,r+1)}}var Jd,ep;function tp(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var op,np,ip=(ep=Jd=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),ft(kt(o),"_columnStartIndex",0),ft(kt(o),"_columnStopIndex",0),ft(kt(o),"_rowStartIndex",0),ft(kt(o),"_rowStopIndex",0),ft(kt(o),"_onKeyDown",(function(e){var t=o.props,n=t.columnCount,i=t.disabled,r=t.mode,a=t.rowCount;if(!i){var s=o._getScrollState(),l=s.scrollToColumn,c=s.scrollToRow,u=o._getScrollState(),d=u.scrollToColumn,p=u.scrollToRow;switch(e.key){case"ArrowDown":p="cells"===r?Math.min(p+1,a-1):Math.min(o._rowStopIndex+1,a-1);break;case"ArrowLeft":d="cells"===r?Math.max(d-1,0):Math.max(o._columnStartIndex-1,0);break;case"ArrowRight":d="cells"===r?Math.min(d+1,n-1):Math.min(o._columnStopIndex+1,n-1);break;case"ArrowUp":p="cells"===r?Math.max(p-1,0):Math.max(o._rowStartIndex-1,0)}d===l&&p===c||(e.preventDefault(),o._updateScrollState({scrollToColumn:d,scrollToRow:p}))}})),ft(kt(o),"_onSectionRendered",(function(e){var t=e.columnStartIndex,n=e.columnStopIndex,i=e.rowStartIndex,r=e.rowStopIndex;o._columnStartIndex=t,o._columnStopIndex=n,o._rowStartIndex=i,o._rowStopIndex=r})),o}return Ct(t,e),yt(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,o=e.scrollToRow;this.setState({scrollToRow:o,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.children,n=this._getScrollState(),i=n.scrollToColumn,r=n.scrollToRow;return X.createElement("div",{className:t,onKeyDown:this._onKeyDown},o({onSectionRendered:this._onSectionRendered,scrollToColumn:i,scrollToRow:r}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,o=e.scrollToRow,n=this.props,i=n.isControlled,r=n.onScrollToChange;"function"==typeof r&&r({scrollToColumn:t,scrollToRow:o}),i||this.setState({scrollToColumn:t,scrollToRow:o})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?tp(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):tp(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}(X.PureComponent),ft(Jd,"propTypes",null),ep);function rp(e,t){var n,i=void 0!==(n=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:o.g).document&&n.document.attachEvent;if(!i){var r=function(){var e=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout;return function(t){return e(t)}}(),s=function(e){var t=e.__resizeTriggers__,o=t.firstElementChild,n=t.lastElementChild,i=o.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=o.offsetWidth+1+"px",i.style.height=o.offsetHeight+1+"px",o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=r((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(o){o.call(t,e)})))}))}},c=!1,u="",d="animationstart",p="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=n.document.createElement("fakeelement");if(void 0!==m.style.animationName&&(c=!0),!1===c)for(var g=0;g<p.length;g++)if(void 0!==m.style[p[g]+"AnimationName"]){u="-"+p[g].toLowerCase()+"-",d=h[g],c=!0;break}var f="resizeanim",b="@"+u+"keyframes "+f+" { from { opacity: 0; } to { opacity: 0; } } ",_=u+"animation: 1ms "+f+"; "}return{addResizeListener:function(t,o){if(i)t.attachEvent("onresize",o);else{if(!t.__resizeTriggers__){var r=t.ownerDocument,a=n.getComputedStyle(t);a&&"static"==a.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var o=(b||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=o:i.appendChild(t.createTextNode(o)),n.appendChild(i)}}(r),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=r.createElement("div")).className="resize-triggers";var c='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var u=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return c}});t.__resizeTriggers__.innerHTML=u.createHTML("")}else t.__resizeTriggers__.innerHTML=c;t.appendChild(t.__resizeTriggers__),s(t),t.addEventListener("scroll",l,!0),d&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==f&&s(t)},t.__resizeTriggers__.addEventListener(d,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(o)}},removeResizeListener:function(e,t){if(i)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}function ap(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function sp(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ap(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ap(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}ft(ip,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),Id(ip);var lp=(np=op=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"state",{height:o.props.defaultHeight||0,width:o.props.defaultWidth||0}),ft(kt(o),"_parentNode",void 0),ft(kt(o),"_autoSizer",void 0),ft(kt(o),"_window",void 0),ft(kt(o),"_detectElementResize",void 0),ft(kt(o),"_onResize",(function(){var e=o.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(o._parentNode){var r=o._parentNode.offsetHeight||0,a=o._parentNode.offsetWidth||0,s=(o._window||window).getComputedStyle(o._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,c=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,p=r-u-d,h=a-l-c;(!t&&o.state.height!==p||!n&&o.state.width!==h)&&(o.setState({height:r-u-d,width:a-l-c}),i({height:r,width:a}))}})),ft(kt(o),"_setRef",(function(e){o._autoSizer=e})),o}return Ct(t,e),yt(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=rp(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.className,n=e.disableHeight,i=e.disableWidth,r=e.style,a=this.state,s=a.height,l=a.width,c={overflow:"visible"},u={};return n||(c.height=0,u.height=s),i||(c.width=0,u.width=l),X.createElement("div",{className:o,ref:this._setRef,style:sp({},c,{},r)},t(u))}}]),t}(X.Component),ft(op,"propTypes",null),np);ft(lp,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var cp,up,dp=(up=cp=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"_child",void 0),ft(kt(o),"_measure",(function(){var e=o.props,t=e.cache,n=e.columnIndex,i=void 0===n?0:n,r=e.parent,a=e.rowIndex,s=void 0===a?o.props.index||0:a,l=o._getCellMeasurements(),c=l.height,u=l.width;c===t.getHeight(s,i)&&u===t.getWidth(s,i)||(t.set(s,i,u,c),r&&"function"==typeof r.recomputeGridSize&&r.recomputeGridSize({columnIndex:i,rowIndex:s}))})),ft(kt(o),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),o._child=e,e&&o._maybeMeasureCell()})),o}return Ct(t,e),yt(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child||(0,Tt.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var o=t.style.width,n=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var i=Math.ceil(t.offsetHeight),r=Math.ceil(t.offsetWidth);return o&&(t.style.width=o),n&&(t.style.height=n),{height:i,width:r}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,o=e.columnIndex,n=void 0===o?0:o,i=e.parent,r=e.rowIndex,a=void 0===r?this.props.index||0:r;if(!t.has(a,n)){var s=this._getCellMeasurements(),l=s.height,c=s.width;t.set(a,n,c,l),i&&"function"==typeof i.invalidateCellSizeAfterRender&&i.invalidateCellSizeAfterRender({columnIndex:n,rowIndex:a})}}}]),t}(X.PureComponent),ft(cp,"propTypes",null),up);function pp(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function hp(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?pp(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):pp(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}ft(dp,"__internalCellMeasurerFlag",!1);var mp="requested",gp=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),ft(kt(o),"_calculateSizeAndPositionDataOnNextUpdate",!1),ft(kt(o),"_onSectionRenderedMemoizer",Od()),ft(kt(o),"_onScrollMemoizer",Od(!1)),ft(kt(o),"_invokeOnSectionRenderedHelper",(function(){var e=o.props,t=e.cellLayoutManager,n=e.onSectionRendered;o._onSectionRenderedMemoizer({callback:n,indices:{indices:t.getLastRenderedIndices()}})})),ft(kt(o),"_setScrollingContainerRef",(function(e){o._scrollingContainer=e})),ft(kt(o),"_updateScrollPositionForScrollToCell",(function(){var e=o.props,t=e.cellLayoutManager,n=e.height,i=e.scrollToAlignment,r=e.scrollToCell,a=e.width,s=o.state,l=s.scrollLeft,c=s.scrollTop;if(r>=0){var u=t.getScrollPositionForCell({align:i,cellIndex:r,height:n,scrollLeft:l,scrollTop:c,width:a});u.scrollLeft===l&&u.scrollTop===c||o._setScrollPosition(u)}})),ft(kt(o),"_onScroll",(function(e){if(e.target===o._scrollingContainer){o._enablePointerEventsAfterDelay();var t=o.props,n=t.cellLayoutManager,i=t.height,r=t.isScrollingChange,a=t.width,s=o._scrollbarSize,l=n.getTotalSize(),c=l.height,u=l.width,d=Math.max(0,Math.min(u-a+s,e.target.scrollLeft)),p=Math.max(0,Math.min(c-i+s,e.target.scrollTop));if(o.state.scrollLeft!==d||o.state.scrollTop!==p){var h=e.cancelable?"observed":mp;o.state.isScrolling||r(!0),o.setState({isScrolling:!0,scrollLeft:d,scrollPositionChangeReason:h,scrollTop:p})}o._invokeOnScrollMemoizer({scrollLeft:d,scrollTop:p,totalWidth:u,totalHeight:c})}})),o._scrollbarSize=Ld(),void 0===o._scrollbarSize?(o._scrollbarSizeMeasured=!1,o._scrollbarSize=0):o._scrollbarSizeMeasured=!0,o}return Ct(t,e),yt(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,o=e.scrollLeft,n=e.scrollToCell,i=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=Ld(),this._scrollbarSizeMeasured=!0,this.setState({})),n>=0?this._updateScrollPositionForScrollToCell():(o>=0||i>=0)&&this._setScrollPosition({scrollLeft:o,scrollTop:i}),this._invokeOnSectionRenderedHelper();var r=t.getTotalSize(),a=r.height,s=r.width;this._invokeOnScrollMemoizer({scrollLeft:o||0,scrollTop:i||0,totalHeight:a,totalWidth:s})}},{key:"componentDidUpdate",value:function(e,t){var o=this.props,n=o.height,i=o.scrollToAlignment,r=o.scrollToCell,a=o.width,s=this.state,l=s.scrollLeft,c=s.scrollPositionChangeReason,u=s.scrollTop;c===mp&&(l>=0&&l!==t.scrollLeft&&l!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=l),u>=0&&u!==t.scrollTop&&u!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=u)),n===e.height&&i===e.scrollToAlignment&&r===e.scrollToCell&&a===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,o=e.cellCount,n=e.cellLayoutManager,i=e.className,r=e.height,a=e.horizontalOverscanSize,s=e.id,l=e.noContentRenderer,c=e.style,u=e.verticalOverscanSize,d=e.width,p=this.state,h=p.isScrolling,m=p.scrollLeft,g=p.scrollTop;(this._lastRenderedCellCount!==o||this._lastRenderedCellLayoutManager!==n||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=o,this._lastRenderedCellLayoutManager=n,this._calculateSizeAndPositionDataOnNextUpdate=!1,n.calculateSizeAndPositionData());var f=n.getTotalSize(),b=f.height,_=f.width,v=Math.max(0,m-a),y=Math.max(0,g-u),k=Math.min(_,m+d+a),x=Math.min(b,g+r+u),S=r>0&&d>0?n.cellRenderers({height:x-y,isScrolling:h,width:k-v,x:v,y}):[],w={boxSizing:"border-box",direction:"ltr",height:t?"auto":r,position:"relative",WebkitOverflowScrolling:"touch",width:d,willChange:"transform"},C=b>r?this._scrollbarSize:0,I=_>d?this._scrollbarSize:0;return w.overflowX=_+C<=d?"hidden":"auto",w.overflowY=b+I<=r?"hidden":"auto",X.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Td("ReactVirtualized__Collection",i),id:s,onScroll:this._onScroll,role:"grid",style:hp({},w,{},c),tabIndex:0},o>0&&X.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:b,maxHeight:b,maxWidth:_,overflow:"hidden",pointerEvents:h?"none":"",width:_}},S),0===o&&l())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,o=e.scrollLeft,n=e.scrollTop,i=e.totalHeight,r=e.totalWidth;this._onScrollMemoizer({callback:function(e){var o=e.scrollLeft,n=e.scrollTop,a=t.props,s=a.height;(0,a.onScroll)({clientHeight:s,clientWidth:a.width,scrollHeight:i,scrollLeft:o,scrollTop:n,scrollWidth:r})},indices:{scrollLeft:o,scrollTop:n}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,o=e.scrollTop,n={scrollPositionChangeReason:mp};t>=0&&(n.scrollLeft=t),o>=0&&(n.scrollTop=o),(t>=0&&t!==this.state.scrollLeft||o>=0&&o!==this.state.scrollTop)&&this.setState(n)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:mp}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:mp}}}]),t}(X.PureComponent);ft(gp,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),gp.propTypes={},Id(gp);const fp=gp;var bp=function(){function e(t){var o=t.height,n=t.width,i=t.x,r=t.y;_t(this,e),this.height=o,this.width=n,this.x=i,this.y=r,this._indexMap={},this._indices=[]}return yt(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),_p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;_t(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return yt(e,[{key:"getCellIndices",value:function(e){var t=e.height,o=e.width,n=e.x,i=e.y,r={};return this.getSections({height:t,width:o,x:n,y:i}).forEach((function(e){return e.getCellIndices().forEach((function(e){r[e]=e}))})),Object.keys(r).map((function(e){return r[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,o=e.width,n=e.x,i=e.y,r=Math.floor(n/this._sectionSize),a=Math.floor((n+o-1)/this._sectionSize),s=Math.floor(i/this._sectionSize),l=Math.floor((i+t-1)/this._sectionSize),c=[],u=r;u<=a;u++)for(var d=s;d<=l;d++){var p="".concat(u,".").concat(d);this._sections[p]||(this._sections[p]=new bp({height:this._sectionSize,width:this._sectionSize,x:u*this._sectionSize,y:d*this._sectionSize})),c.push(this._sections[p])}return c}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,o=e.index;this._cellMetadata[o]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:o})}))}}]),e}();function vp(e){var t=e.align,o=void 0===t?"auto":t,n=e.cellOffset,i=e.cellSize,r=e.containerSize,a=e.currentOffset,s=n,l=s-r+i;switch(o){case"start":return s;case"end":return l;case"center":return s-(r-i)/2;default:return Math.max(l,Math.min(s,a))}}var yp=function(e){function t(e,o){var n;return _t(this,t),(n=xt(this,St(t).call(this,e,o)))._cellMetadata=[],n._lastRenderedCellIndices=[],n._cellCache=[],n._isScrollingChange=n._isScrollingChange.bind(kt(n)),n._setCollectionViewRef=n._setCollectionViewRef.bind(kt(n)),n}return Ct(t,e),yt(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=q({},this.props);return X.createElement(fp,q({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,o=e.cellSizeAndPositionGetter,n=[],i=new _p(e.sectionSize),r=0,a=0,s=0;s<t;s++){var l=o({index:s});if(null==l.height||isNaN(l.height)||null==l.width||isNaN(l.width)||null==l.x||isNaN(l.x)||null==l.y||isNaN(l.y))throw Error("Invalid metadata returned for cell ".concat(s,":\n        x:").concat(l.x,", y:").concat(l.y,", width:").concat(l.width,", height:").concat(l.height));r=Math.max(r,l.y+l.height),a=Math.max(a,l.x+l.width),n[s]=l,i.registerCell({cellMetadatum:l,index:s})}return{cellMetadata:n,height:r,sectionManager:i,width:a}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,o=e.cellIndex,n=e.height,i=e.scrollLeft,r=e.scrollTop,a=e.width,s=this.props.cellCount;if(o>=0&&o<s){var l=this._cellMetadata[o];i=vp({align:t,cellOffset:l.x,cellSize:l.width,containerSize:a,currentOffset:i,targetIndex:o}),r=vp({align:t,cellOffset:l.y,cellSize:l.height,containerSize:n,currentOffset:r,targetIndex:o})}return{scrollLeft:i,scrollTop:r}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,o=e.height,n=e.isScrolling,i=e.width,r=e.x,a=e.y,s=this.props,l=s.cellGroupRenderer,c=s.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:o,width:i,x:r,y:a}),l({cellCache:this._cellCache,cellRenderer:c,cellSizeAndPositionGetter:function(e){var o=e.index;return t._sectionManager.getCellMetadata({index:o})},indices:this._lastRenderedCellIndices,isScrolling:n})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}(X.PureComponent);ft(yp,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,o=e.cellRenderer,n=e.cellSizeAndPositionGetter,i=e.indices,r=e.isScrolling;return i.map((function(e){var i=n({index:e}),a={index:e,isScrolling:r,key:e,style:{height:i.height,left:i.x,position:"absolute",top:i.y,width:i.width}};return r?(e in t||(t[e]=o(a)),t[e]):o(a)})).filter((function(e){return!!e}))}}),yp.propTypes={},(function(e){function t(e,o){var n;return _t(this,t),(n=xt(this,St(t).call(this,e,o)))._registerChild=n._registerChild.bind(kt(n)),n}return Ct(t,e),yt(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,o=t.columnMaxWidth,n=t.columnMinWidth,i=t.columnCount,r=t.width;o===e.columnMaxWidth&&n===e.columnMinWidth&&i===e.columnCount&&r===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.columnMaxWidth,n=e.columnMinWidth,i=e.columnCount,r=e.width,a=n||1,s=o?Math.min(o,r):r,l=r/i;return l=Math.max(a,l),l=Math.min(s,l),l=Math.floor(l),t({adjustedWidth:Math.min(r,l*i),columnWidth:l,getColumnWidth:function(){return l},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!=typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}(X.PureComponent)).propTypes={};var kp=function(e){function t(e,o){var n;return _t(this,t),(n=xt(this,St(t).call(this,e,o)))._loadMoreRowsMemoizer=Od(),n._onRowsRendered=n._onRowsRendered.bind(kt(n)),n._registerChild=n._registerChild.bind(kt(n)),n}return Ct(t,e),yt(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=Od(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,o=this.props.loadMoreRows;e.forEach((function(e){var n=o(e);n&&n.then((function(){var o;(o={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex}).startIndex>o.lastRenderedStopIndex||o.stopIndex<o.lastRenderedStartIndex||t._registeredChild&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;o?o.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,o=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=o,this._doStuff(t,o)}},{key:"_doStuff",value:function(e,t){var o,n=this,i=this.props,r=i.isRowLoaded,a=i.minimumBatchSize,s=i.rowCount,l=i.threshold,c=function(e){for(var t=e.isRowLoaded,o=e.minimumBatchSize,n=e.rowCount,i=e.stopIndex,r=[],a=null,s=null,l=e.startIndex;l<=i;l++)t({index:l})?null!==s&&(r.push({startIndex:a,stopIndex:s}),a=s=null):(s=l,null===a&&(a=l));if(null!==s){for(var c=Math.min(Math.max(s,a+o-1),n-1),u=s+1;u<=c&&!t({index:u});u++)s=u;r.push({startIndex:a,stopIndex:s})}if(r.length)for(var d=r[0];d.stopIndex-d.startIndex+1<o&&d.startIndex>0;){var p=d.startIndex-1;if(t({index:p}))break;d.startIndex=p}return r}({isRowLoaded:r,minimumBatchSize:a,rowCount:s,startIndex:Math.max(0,e-l),stopIndex:Math.min(s-1,t+l)}),u=(o=[]).concat.apply(o,Rt(c.map((function(e){return[e.startIndex,e.stopIndex]}))));this._loadMoreRowsMemoizer({callback:function(){n._loadUnloadedRanges(c)},indices:{squashedUnloadedRanges:u}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}(X.PureComponent);ft(kp,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),kp.propTypes={};var xp,Sp,Cp=(Sp=xp=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"Grid",void 0),ft(kt(o),"_cellRenderer",(function(e){var t=e.parent,n=e.rowIndex,i=e.style,r=e.isScrolling,a=e.isVisible,s=e.key,l=o.props.rowRenderer,c=Object.getOwnPropertyDescriptor(i,"width");return c&&c.writable&&(i.width="100%"),l({index:n,style:i,isScrolling:r,isVisible:a,key:s,parent:t})})),ft(kt(o),"_setRef",(function(e){o.Grid=e})),ft(kt(o),"_onScroll",(function(e){var t=e.clientHeight,n=e.scrollHeight,i=e.scrollTop;(0,o.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:i})})),ft(kt(o),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,i=e.rowStartIndex,r=e.rowStopIndex;(0,o.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:i,stopIndex:r})})),o}return Ct(t,e),yt(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,o=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:o,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=void 0===t?0:t,n=e.rowIndex,i=void 0===n?0:n;this.Grid&&this.Grid.recomputeGridSize({rowIndex:i,columnIndex:o})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.noRowsRenderer,n=e.scrollToIndex,i=e.width,r=Td("ReactVirtualized__List",t);return X.createElement(Xd,q({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:r,columnWidth:i,columnCount:1,noContentRenderer:o,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:n}))}}]),t}(X.PureComponent),ft(xp,"propTypes",null),Sp);ft(Cp,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Qd,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});const Ip=function(e,t,o,n,i){return"function"==typeof o?function(e,t,o,n,i){for(var r=o+1;t<=o;){var a=t+o>>>1;i(e[a],n)>=0?(r=a,o=a-1):t=a+1}return r}(e,void 0===n?0:0|n,void 0===i?e.length-1:0|i,t,o):function(e,t,o,n){for(var i=o+1;t<=o;){var r=t+o>>>1;e[r]>=n?(i=r,o=r-1):t=r+1}return i}(e,void 0===o?0:0|o,void 0===n?e.length-1:0|n,t)};function jp(e,t,o,n,i){this.mid=e,this.left=t,this.right=o,this.leftPoints=n,this.rightPoints=i,this.count=(t?t.count:0)+(o?o.count:0)+n.length}var Tp=jp.prototype;function Pp(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function Ep(e,t){var o=zp(t);e.mid=o.mid,e.left=o.left,e.right=o.right,e.leftPoints=o.leftPoints,e.rightPoints=o.rightPoints,e.count=o.count}function Rp(e,t){var o=e.intervals([]);o.push(t),Ep(e,o)}function Ap(e,t){var o=e.intervals([]),n=o.indexOf(t);return n<0?0:(o.splice(n,1),Ep(e,o),1)}function Op(e,t,o){for(var n=0;n<e.length&&e[n][0]<=t;++n){var i=o(e[n]);if(i)return i}}function Np(e,t,o){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var i=o(e[n]);if(i)return i}}function Dp(e,t){for(var o=0;o<e.length;++o){var n=t(e[o]);if(n)return n}}function Mp(e,t){return e-t}function Bp(e,t){return e[0]-t[0]||e[1]-t[1]}function Lp(e,t){return e[1]-t[1]||e[0]-t[0]}function zp(e){if(0===e.length)return null;for(var t=[],o=0;o<e.length;++o)t.push(e[o][0],e[o][1]);t.sort(Mp);var n=t[t.length>>1],i=[],r=[],a=[];for(o=0;o<e.length;++o){var s=e[o];s[1]<n?i.push(s):n<s[0]?r.push(s):a.push(s)}var l=a,c=a.slice();return l.sort(Bp),c.sort(Lp),new jp(n,zp(i),zp(r),l,c)}function Fp(e){this.root=e}Tp.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},Tp.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?Rp(this,e):this.left.insert(e):this.left=zp([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?Rp(this,e):this.right.insert(e):this.right=zp([e]);else{var o=Ip(this.leftPoints,e,Bp),n=Ip(this.rightPoints,e,Lp);this.leftPoints.splice(o,0,e),this.rightPoints.splice(n,0,e)}},Tp.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?Ap(this,e):2===(r=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===r&&(this.count-=1),r):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?Ap(this,e):2===(r=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===r&&(this.count-=1),r):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var o=this,n=this.left;n.right;)o=n,n=n.right;if(o===this)n.right=this.right;else{var i=this.left,r=this.right;o.count-=n.count,o.right=n.left,n.left=i,n.right=r}Pp(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Pp(this,this.left):Pp(this,this.right);return 1}for(i=Ip(this.leftPoints,e,Bp);i<this.leftPoints.length&&this.leftPoints[i][0]===e[0];++i)if(this.leftPoints[i]===e)for(this.count-=1,this.leftPoints.splice(i,1),r=Ip(this.rightPoints,e,Lp);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),1;return 0},Tp.queryPoint=function(e,t){return e<this.mid?this.left&&(o=this.left.queryPoint(e,t))?o:Op(this.leftPoints,e,t):e>this.mid?this.right&&(o=this.right.queryPoint(e,t))?o:Np(this.rightPoints,e,t):Dp(this.leftPoints,t);var o},Tp.queryInterval=function(e,t,o){var n;return e<this.mid&&this.left&&(n=this.left.queryInterval(e,t,o))||t>this.mid&&this.right&&(n=this.right.queryInterval(e,t,o))?n:t<this.mid?Op(this.leftPoints,t,o):e>this.mid?Np(this.rightPoints,e,o):Dp(this.leftPoints,o)};var Gp=Fp.prototype;Gp.insert=function(e){this.root?this.root.insert(e):this.root=new jp(e[0],null,null,[e],[e])},Gp.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},Gp.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},Gp.queryInterval=function(e,t,o){if(e<=t&&this.root)return this.root.queryInterval(e,t,o)},Object.defineProperty(Gp,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Gp,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var Hp,Up,Wp=function(){function e(){_t(this,e),ft(this,"_columnSizeMap",{}),ft(this,"_intervalTree",new Fp(null)),ft(this,"_leftMap",{})}return yt(e,[{key:"estimateTotalHeight",value:function(e,t,o){var n=e-this.count;return this.tallestColumnSize+Math.ceil(n/t)*o}},{key:"range",value:function(e,t,o){var n=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t=ht(e,3),i=t[0],r=(t[1],t[2]);return o(r,n._leftMap[r],i)}))}},{key:"setPosition",value:function(e,t,o,n){this._intervalTree.insert([o,o+n,e]),this._leftMap[e]=t;var i=this._columnSizeMap,r=i[t];i[t]=void 0===r?o+n:Math.max(r,o+n)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var o in e){var n=e[o];t=0===t?n:Math.min(t,n)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var o in e){var n=e[o];t=Math.max(t,n)}return t}}]),e}();function Vp(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Kp(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Vp(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Vp(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var $p=(Up=Hp=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"state",{isScrolling:!1,scrollTop:0}),ft(kt(o),"_debounceResetIsScrollingId",void 0),ft(kt(o),"_invalidateOnUpdateStartIndex",null),ft(kt(o),"_invalidateOnUpdateStopIndex",null),ft(kt(o),"_positionCache",new Wp),ft(kt(o),"_startIndex",null),ft(kt(o),"_startIndexMemoized",null),ft(kt(o),"_stopIndex",null),ft(kt(o),"_stopIndexMemoized",null),ft(kt(o),"_debounceResetIsScrollingCallback",(function(){o.setState({isScrolling:!1})})),ft(kt(o),"_setScrollingContainerRef",(function(e){o._scrollingContainer=e})),ft(kt(o),"_onScroll",(function(e){var t=o.props.height,n=e.currentTarget.scrollTop,i=Math.min(Math.max(0,o._getEstimatedTotalHeight()-t),n);n===i&&(o._debounceResetIsScrolling(),o.state.scrollTop!==i&&o.setState({isScrolling:!0,scrollTop:i}))})),o}return Ct(t,e),yt(t,[{key:"clearCellPositions",value:function(){this._positionCache=new Wp,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new Wp,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e,t){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Vd(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var e,t=this,o=this.props,n=o.autoHeight,i=o.cellCount,r=o.cellMeasurerCache,a=o.cellRenderer,s=o.className,l=o.height,c=o.id,u=o.keyMapper,d=o.overscanByPixels,p=o.role,h=o.style,m=o.tabIndex,g=o.width,f=o.rowDirection,b=this.state,_=b.isScrolling,v=b.scrollTop,y=[],k=this._getEstimatedTotalHeight(),x=this._positionCache.shortestColumnSize,S=this._positionCache.count,w=0;if(this._positionCache.range(Math.max(0,v-d),l+2*d,(function(o,n,i){var s;void 0===e?(w=o,e=o):(w=Math.min(w,o),e=Math.max(e,o)),y.push(a({index:o,isScrolling:_,key:u(o),parent:t,style:(s={height:r.getHeight(o)},ft(s,"ltr"===f?"left":"right",n),ft(s,"position","absolute"),ft(s,"top",i),ft(s,"width",r.getWidth(o)),s)}))})),x<v+l+d&&S<i)for(var C=Math.min(i-S,Math.ceil((v+l+d-x)/r.defaultHeight*g/r.defaultWidth)),I=S;I<S+C;I++)e=I,y.push(a({index:I,isScrolling:_,key:u(I),parent:this,style:{width:r.getWidth(I)}}));return this._startIndex=w,this._stopIndex=e,X.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Td("ReactVirtualized__Masonry",s),id:c,onScroll:this._onScroll,role:p,style:Kp({boxSizing:"border-box",direction:"ltr",height:n?"auto":l,overflowX:"hidden",overflowY:k<l?"hidden":"auto",position:"relative",width:g,WebkitOverflowScrolling:"touch",willChange:"transform"},h),tabIndex:m},X.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:k,maxWidth:"100%",maxHeight:k,overflow:"hidden",pointerEvents:_?"none":"",position:"relative"}},y))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Vd(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Kd(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,o=e.cellMeasurerCache,n=e.width,i=Math.max(1,Math.floor(n/o.defaultWidth));return this._positionCache.estimateTotalHeight(t,i,o.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,o=e.onScroll,n=this.state.scrollTop;this._onScrollMemoized!==n&&(o({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:n}),this._onScrollMemoized=n)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var o=this.props,n=o.cellMeasurerCache,i=o.cellPositioner,r=e;r<=t;r++){var a=i(r),s=a.left,l=a.top;this._positionCache.setPosition(r,s,l,n.getHeight(r))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}(X.PureComponent),ft(Hp,"propTypes",null),Up);function qp(){}ft($p,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:qp,onScroll:qp,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),Id($p);var Yp=function(){function e(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_t(this,e),ft(this,"_cellMeasurerCache",void 0),ft(this,"_columnIndexOffset",void 0),ft(this,"_rowIndexOffset",void 0),ft(this,"columnWidth",(function(e){var o=e.index;t._cellMeasurerCache.columnWidth({index:o+t._columnIndexOffset})})),ft(this,"rowHeight",(function(e){var o=e.index;t._cellMeasurerCache.rowHeight({index:o+t._rowIndexOffset})}));var n=o.cellMeasurerCache,i=o.columnIndexOffset,r=void 0===i?0:i,a=o.rowIndexOffset,s=void 0===a?0:a;this._cellMeasurerCache=n,this._columnIndexOffset=r,this._rowIndexOffset=s}return yt(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,o,n){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,o,n)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}();function Zp(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Xp(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Zp(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Zp(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Qp=function(e){function t(e,o){var n;_t(this,t),ft(kt(n=xt(this,St(t).call(this,e,o))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),ft(kt(n),"_deferredInvalidateColumnIndex",null),ft(kt(n),"_deferredInvalidateRowIndex",null),ft(kt(n),"_bottomLeftGridRef",(function(e){n._bottomLeftGrid=e})),ft(kt(n),"_bottomRightGridRef",(function(e){n._bottomRightGrid=e})),ft(kt(n),"_cellRendererBottomLeftGrid",(function(e){var t=e.rowIndex,o=Ed(e,["rowIndex"]),i=n.props,r=i.cellRenderer,a=i.fixedRowCount;return t===i.rowCount-a?X.createElement("div",{key:o.key,style:Xp({},o.style,{height:20})}):r(Xp({},o,{parent:kt(n),rowIndex:t+a}))})),ft(kt(n),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,o=e.rowIndex,i=Ed(e,["columnIndex","rowIndex"]),r=n.props,a=r.cellRenderer,s=r.fixedColumnCount,l=r.fixedRowCount;return a(Xp({},i,{columnIndex:t+s,parent:kt(n),rowIndex:o+l}))})),ft(kt(n),"_cellRendererTopRightGrid",(function(e){var t=e.columnIndex,o=Ed(e,["columnIndex"]),i=n.props,r=i.cellRenderer,a=i.columnCount,s=i.fixedColumnCount;return t===a-s?X.createElement("div",{key:o.key,style:Xp({},o.style,{width:20})}):r(Xp({},o,{columnIndex:t+s,parent:kt(n)}))})),ft(kt(n),"_columnWidthRightGrid",(function(e){var t=e.index,o=n.props,i=o.columnCount,r=o.fixedColumnCount,a=o.columnWidth,s=n.state,l=s.scrollbarSize;return s.showHorizontalScrollbar&&t===i-r?l:"function"==typeof a?a({index:t+r}):a})),ft(kt(n),"_onScroll",(function(e){var t=e.scrollLeft,o=e.scrollTop;n.setState({scrollLeft:t,scrollTop:o});var i=n.props.onScroll;i&&i(e)})),ft(kt(n),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,o=e.size,i=e.vertical,r=n.state,a=r.showHorizontalScrollbar,s=r.showVerticalScrollbar;if(t!==a||i!==s){n.setState({scrollbarSize:o,showHorizontalScrollbar:t,showVerticalScrollbar:i});var l=n.props.onScrollbarPresenceChange;"function"==typeof l&&l({horizontal:t,size:o,vertical:i})}})),ft(kt(n),"_onScrollLeft",(function(e){var t=e.scrollLeft;n._onScroll({scrollLeft:t,scrollTop:n.state.scrollTop})})),ft(kt(n),"_onScrollTop",(function(e){var t=e.scrollTop;n._onScroll({scrollTop:t,scrollLeft:n.state.scrollLeft})})),ft(kt(n),"_rowHeightBottomGrid",(function(e){var t=e.index,o=n.props,i=o.fixedRowCount,r=o.rowCount,a=o.rowHeight,s=n.state,l=s.scrollbarSize;return s.showVerticalScrollbar&&t===r-i?l:"function"==typeof a?a({index:t+i}):a})),ft(kt(n),"_topLeftGridRef",(function(e){n._topLeftGrid=e})),ft(kt(n),"_topRightGridRef",(function(e){n._topRightGrid=e}));var i=e.deferredMeasurementCache,r=e.fixedColumnCount,a=e.fixedRowCount;return n._maybeCalculateCachedStyles(!0),i&&(n._deferredMeasurementCacheBottomLeftGrid=a>0?new Yp({cellMeasurerCache:i,columnIndexOffset:0,rowIndexOffset:a}):i,n._deferredMeasurementCacheBottomRightGrid=r>0||a>0?new Yp({cellMeasurerCache:i,columnIndexOffset:r,rowIndexOffset:a}):i,n._deferredMeasurementCacheTopRightGrid=r>0?new Yp({cellMeasurerCache:i,columnIndexOffset:r,rowIndexOffset:0}):i),n}return Ct(t,e),yt(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=void 0===t?0:t,n=e.rowIndex,i=void 0===n?0:n;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,o):o,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,i):i}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=void 0===t?0:t,n=e.rowIndex,i=void 0===n?0:n,r=this.props,a=r.fixedColumnCount,s=r.fixedRowCount,l=Math.max(0,o-a),c=Math.max(0,i-s);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:o,rowIndex:c}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:l,rowIndex:c}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:o,rowIndex:i}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:l,rowIndex:i}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,o=e.scrollTop;if(t>0||o>0){var n={};t>0&&(n.scrollLeft=t),o>0&&(n.scrollTop=o),this.setState(n)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var e=this.props,t=e.onScroll,o=e.onSectionRendered,n=(e.onScrollbarPresenceChange,e.scrollLeft,e.scrollToColumn),i=(e.scrollTop,e.scrollToRow),r=Ed(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var a=this.state,s=a.scrollLeft,l=a.scrollTop;return X.createElement("div",{style:this._containerOuterStyle},X.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(r),this._renderTopRightGrid(Xp({},r,{onScroll:t,scrollLeft:s}))),X.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Xp({},r,{onScroll:t,scrollTop:l})),this._renderBottomRightGrid(Xp({},r,{onScroll:t,onSectionRendered:o,scrollLeft:s,scrollToColumn:n,scrollToRow:i,scrollTop:l}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,o=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof o){for(var n=0,i=0;i<t;i++)n+=o({index:i});this._leftGridWidth=n}else this._leftGridWidth=o*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,o=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof o){for(var n=0,i=0;i<t;i++)n+=o({index:i});this._topGridHeight=n}else this._topGridHeight=o*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,o=t.columnWidth,n=t.enableFixedColumnScroll,i=t.enableFixedRowScroll,r=t.height,a=t.fixedColumnCount,s=t.fixedRowCount,l=t.rowHeight,c=t.style,u=t.styleBottomLeftGrid,d=t.styleBottomRightGrid,p=t.styleTopLeftGrid,h=t.styleTopRightGrid,m=t.width,g=e||r!==this._lastRenderedHeight||m!==this._lastRenderedWidth,f=e||o!==this._lastRenderedColumnWidth||a!==this._lastRenderedFixedColumnCount,b=e||s!==this._lastRenderedFixedRowCount||l!==this._lastRenderedRowHeight;(e||g||c!==this._lastRenderedStyle)&&(this._containerOuterStyle=Xp({height:r,overflow:"visible",width:m},c)),(e||g||b)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:m},this._containerBottomStyle={height:r-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:m}),(e||u!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=Xp({left:0,overflowX:"hidden",overflowY:n?"auto":"hidden",position:"absolute"},u)),(e||f||d!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Xp({left:this._getLeftGridWidth(this.props),position:"absolute"},d)),(e||p!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=Xp({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},p)),(e||f||h!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Xp({left:this._getLeftGridWidth(this.props),overflowX:i?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},h)),this._lastRenderedColumnWidth=o,this._lastRenderedFixedColumnCount=a,this._lastRenderedFixedRowCount=s,this._lastRenderedHeight=r,this._lastRenderedRowHeight=l,this._lastRenderedStyle=c,this._lastRenderedStyleBottomLeftGrid=u,this._lastRenderedStyleBottomRightGrid=d,this._lastRenderedStyleTopLeftGrid=p,this._lastRenderedStyleTopRightGrid=h,this._lastRenderedWidth=m}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,o=e.fixedColumnCount,n=e.fixedRowCount,i=e.rowCount,r=e.hideBottomLeftGridScrollbar,a=this.state.showVerticalScrollbar;if(!o)return null;var s=a?1:0,l=this._getBottomGridHeight(e),c=this._getLeftGridWidth(e),u=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,d=r?c+u:c,p=X.createElement(Xd,q({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:o,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:l,onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,i-n)+s,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:d}));return r?X.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Xp({},this._bottomLeftGridStyle,{height:l,width:c,overflowY:"hidden"})},p):p}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,o=e.fixedColumnCount,n=e.fixedRowCount,i=e.rowCount,r=e.scrollToColumn,a=e.scrollToRow;return X.createElement(Xd,q({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-o),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,i-n),rowHeight:this._rowHeightBottomGrid,scrollToColumn:r-o,scrollToRow:a-n,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,o=e.fixedRowCount;return t&&o?X.createElement(Xd,q({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:o,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,o=e.enableFixedRowScroll,n=e.fixedColumnCount,i=e.fixedRowCount,r=e.scrollLeft,a=e.hideTopRightGridScrollbar,s=this.state,l=s.showHorizontalScrollbar,c=s.scrollbarSize;if(!i)return null;var u=l?1:0,d=this._getTopGridHeight(e),p=this._getRightGridWidth(e),h=l?c:0,m=d,g=this._topRightGridStyle;a&&(m=d+h,g=Xp({},this._topRightGridStyle,{left:0}));var f=X.createElement(Xd,q({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-n)+u,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:m,onScroll:o?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:i,scrollLeft:r,style:g,tabIndex:null,width:p}));return a?X.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Xp({},this._topRightGridStyle,{height:d,width:p,overflowX:"hidden"})},f):f}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:t.scrollTop}:null}}]),t}(X.PureComponent);function Jp(e){var t=e.className,o=e.columns,n=e.style;return X.createElement("div",{className:t,role:"row",style:n},o)}ft(Qp,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),Qp.propTypes={},Id(Qp),(function(e){function t(e,o){var n;return _t(this,t),(n=xt(this,St(t).call(this,e,o))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},n._onScroll=n._onScroll.bind(kt(n)),n}return Ct(t,e),yt(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,o=t.clientHeight,n=t.clientWidth,i=t.scrollHeight,r=t.scrollLeft,a=t.scrollTop,s=t.scrollWidth;return e({clientHeight:o,clientWidth:n,onScroll:this._onScroll,scrollHeight:i,scrollLeft:r,scrollTop:a,scrollWidth:s})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,o=e.clientWidth,n=e.scrollHeight,i=e.scrollLeft,r=e.scrollTop,a=e.scrollWidth;this.setState({clientHeight:t,clientWidth:o,scrollHeight:n,scrollLeft:i,scrollTop:r,scrollWidth:a})}}]),t}(X.PureComponent)).propTypes={},Jp.propTypes=null;const eh={ASC:"ASC",DESC:"DESC"};function th(e){var t=e.sortDirection,o=Td("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===eh.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===eh.DESC});return X.createElement("svg",{className:o,width:18,height:18,viewBox:"0 0 24 24"},t===eh.ASC?X.createElement("path",{d:"M7 14l5-5 5 5z"}):X.createElement("path",{d:"M7 10l5 5 5-5z"}),X.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function oh(e){var t=e.dataKey,o=e.label,n=e.sortBy,i=e.sortDirection,r=n===t,a=[X.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof o?o:null},o)];return r&&a.push(X.createElement(th,{key:"SortIndicator",sortDirection:i})),a}function nh(e){var t=e.className,o=e.columns,n=e.index,i=e.key,r=e.onRowClick,a=e.onRowDoubleClick,s=e.onRowMouseOut,l=e.onRowMouseOver,c=e.onRowRightClick,u=e.rowData,d=e.style,p={"aria-rowindex":n+1};return(r||a||s||l||c)&&(p["aria-label"]="row",p.tabIndex=0,r&&(p.onClick=function(e){return r({event:e,index:n,rowData:u})}),a&&(p.onDoubleClick=function(e){return a({event:e,index:n,rowData:u})}),s&&(p.onMouseOut=function(e){return s({event:e,index:n,rowData:u})}),l&&(p.onMouseOver=function(e){return l({event:e,index:n,rowData:u})}),c&&(p.onContextMenu=function(e){return c({event:e,index:n,rowData:u})})),X.createElement("div",q({},p,{className:t,key:i,role:"row",style:d}),o)}th.propTypes={},oh.propTypes=null,nh.propTypes=null;var ih=function(e){function t(){return _t(this,t),xt(this,St(t).apply(this,arguments))}return Ct(t,e),t}(X.Component);function rh(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ah(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?rh(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):rh(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}ft(ih,"defaultProps",{cellDataGetter:function(e){var t=e.dataKey,o=e.rowData;return"function"==typeof o.get?o.get(t):o[t]},cellRenderer:function(e){var t=e.cellData;return null==t?"":String(t)},defaultSortDirection:eh.ASC,flexGrow:0,flexShrink:1,headerRenderer:oh,style:{}}),ih.propTypes={};var sh=function(e){function t(e){var o;return _t(this,t),(o=xt(this,St(t).call(this,e))).state={scrollbarWidth:0},o._createColumn=o._createColumn.bind(kt(o)),o._createRow=o._createRow.bind(kt(o)),o._onScroll=o._onScroll.bind(kt(o)),o._onSectionRendered=o._onSectionRendered.bind(kt(o)),o._setRef=o._setRef.bind(kt(o)),o}return Ct(t,e),yt(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,o=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:o}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=void 0===t?0:t,n=e.rowIndex,i=void 0===n?0:n;this.Grid&&this.Grid.recomputeGridSize({rowIndex:i,columnIndex:o})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=(0,Tt.findDOMNode)(this.Grid),t=e.clientWidth||0;return(e.offsetWidth||0)-t}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,o=t.children,n=t.className,i=t.disableHeader,r=t.gridClassName,a=t.gridStyle,s=t.headerHeight,l=t.headerRowRenderer,c=t.height,u=t.id,d=t.noRowsRenderer,p=t.rowClassName,h=t.rowStyle,m=t.scrollToIndex,g=t.style,f=t.width,b=this.state.scrollbarWidth,_=i?c:c-s,v="function"==typeof p?p({index:-1}):p,y="function"==typeof h?h({index:-1}):h;return this._cachedColumnStyles=[],X.Children.toArray(o).forEach((function(t,o){var n=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[o]=ah({overflow:"hidden"},n)})),X.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":X.Children.toArray(o).length,"aria-rowcount":this.props.rowCount,className:Td("ReactVirtualized__Table",n),id:u,role:"grid",style:g},!i&&l({className:Td("ReactVirtualized__Table__headerRow",v),columns:this._getHeaderColumns(),style:ah({height:s,overflow:"hidden",paddingRight:b,width:f},y)}),X.createElement(Xd,q({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Td("ReactVirtualized__Table__Grid",r),cellRenderer:this._createRow,columnWidth:f,columnCount:1,height:_,id:void 0,noContentRenderer:d,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:b,scrollToRow:m,style:ah({},a,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,o=e.columnIndex,n=e.isScrolling,i=e.parent,r=e.rowData,a=e.rowIndex,s=this.props.onColumnClick,l=t.props,c=l.cellDataGetter,u=l.cellRenderer,d=l.className,p=l.columnData,h=l.dataKey,m=l.id,g=u({cellData:c({columnData:p,dataKey:h,rowData:r}),columnData:p,columnIndex:o,dataKey:h,isScrolling:n,parent:i,rowData:r,rowIndex:a}),f=this._cachedColumnStyles[o],b="string"==typeof g?g:null;return X.createElement("div",{"aria-colindex":o+1,"aria-describedby":m,className:Td("ReactVirtualized__Table__rowColumn",d),key:"Row"+a+"-Col"+o,onClick:function(e){s&&s({columnData:p,dataKey:h,event:e})},role:"gridcell",style:f,title:b},g)}},{key:"_createHeader",value:function(e){var t,o,n,i,r,a=e.column,s=e.index,l=this.props,c=l.headerClassName,u=l.headerStyle,d=l.onHeaderClick,p=l.sort,h=l.sortBy,m=l.sortDirection,g=a.props,f=g.columnData,b=g.dataKey,_=g.defaultSortDirection,v=g.disableSort,y=g.headerRenderer,k=g.id,x=g.label,S=!v&&p,w=Td("ReactVirtualized__Table__headerColumn",c,a.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:S}),C=this._getFlexStyleForColumn(a,ah({},u,{},a.props.headerStyle)),I=y({columnData:f,dataKey:b,disableSort:v,label:x,sortBy:h,sortDirection:m});if(S||d){var j=h!==b?_:m===eh.DESC?eh.ASC:eh.DESC,T=function(e){S&&p({defaultSortDirection:_,event:e,sortBy:b,sortDirection:j}),d&&d({columnData:f,dataKey:b,event:e})};r=a.props["aria-label"]||x||b,i="none",n=0,t=T,o=function(e){"Enter"!==e.key&&" "!==e.key||T(e)}}return h===b&&(i=m===eh.ASC?"ascending":"descending"),X.createElement("div",{"aria-label":r,"aria-sort":i,className:w,id:k,key:"Header-Col"+s,onClick:t,onKeyDown:o,role:"columnheader",style:C,tabIndex:n},I)}},{key:"_createRow",value:function(e){var t=this,o=e.rowIndex,n=e.isScrolling,i=e.key,r=e.parent,a=e.style,s=this.props,l=s.children,c=s.onRowClick,u=s.onRowDoubleClick,d=s.onRowRightClick,p=s.onRowMouseOver,h=s.onRowMouseOut,m=s.rowClassName,g=s.rowGetter,f=s.rowRenderer,b=s.rowStyle,_=this.state.scrollbarWidth,v="function"==typeof m?m({index:o}):m,y="function"==typeof b?b({index:o}):b,k=g({index:o}),x=X.Children.toArray(l).map((function(e,i){return t._createColumn({column:e,columnIndex:i,isScrolling:n,parent:r,rowData:k,rowIndex:o,scrollbarWidth:_})})),S=Td("ReactVirtualized__Table__row",v),w=ah({},a,{height:this._getRowHeight(o),overflow:"hidden",paddingRight:_},y);return f({className:S,columns:x,index:o,isScrolling:n,key:i,onRowClick:c,onRowDoubleClick:u,onRowRightClick:d,onRowMouseOver:p,onRowMouseOut:h,rowData:k,style:w})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),n=ah({},t,{flex:o,msFlex:o,WebkitFlex:o});return e.props.maxWidth&&(n.maxWidth=e.props.maxWidth),e.props.minWidth&&(n.minWidth=e.props.minWidth),n}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,o=t.children;return(t.disableHeader?[]:X.Children.toArray(o)).map((function(t,o){return e._createHeader({column:t,index:o})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,o=e.scrollHeight,n=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:o,scrollTop:n})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,o=e.rowOverscanStopIndex,n=e.rowStartIndex,i=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:o,startIndex:n,stopIndex:i})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),t}(X.PureComponent);ft(sh,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Qd,overscanRowCount:10,rowRenderer:nh,headerRowRenderer:Jp,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),sh.propTypes={};var lh=[],ch=null,uh=null;function dh(){uh&&(uh=null,document.body&&null!=ch&&(document.body.style.pointerEvents=ch),ch=null)}function ph(){dh(),lh.forEach((function(e){return e.__resetIsScrolling()}))}function hh(e){e.currentTarget===window&&null==ch&&document.body&&(ch=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){uh&&Vd(uh);var e=0;lh.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),uh=Kd(ph,e)}(),lh.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function mh(e,t){lh.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",hh),lh.push(e)}function gh(e,t){(lh=lh.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",hh),uh&&(Vd(uh),dh()))}var fh,bh,_h=function(e){return e===window},vh=function(e){return e.getBoundingClientRect()};function yh(e,t){if(e){if(_h(e)){var o=window,n=o.innerHeight,i=o.innerWidth;return{height:"number"==typeof n?n:0,width:"number"==typeof i?i:0}}return vh(e)}return{height:t.serverHeight,width:t.serverWidth}}function kh(e){return _h(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}function xh(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var Sh=function(){return"undefined"!=typeof window?window:void 0},wh=(bh=fh=function(e){function t(){var e,o;_t(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ft(kt(o=xt(this,(e=St(t)).call.apply(e,[this].concat(i)))),"_window",Sh()),ft(kt(o),"_isMounted",!1),ft(kt(o),"_positionFromTop",0),ft(kt(o),"_positionFromLeft",0),ft(kt(o),"_detectElementResize",void 0),ft(kt(o),"_child",void 0),ft(kt(o),"state",function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?xh(o,!0).forEach((function(t){ft(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):xh(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},yh(o.props.scrollElement,o.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),ft(kt(o),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),o._child=e,o.updatePosition()})),ft(kt(o),"_onChildScroll",(function(e){var t=e.scrollTop;if(o.state.scrollTop!==t){var n=o.props.scrollElement;n&&("function"==typeof n.scrollTo?n.scrollTo(0,t+o._positionFromTop):n.scrollTop=t+o._positionFromTop)}})),ft(kt(o),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",o._onResize,!1):o._detectElementResize.addResizeListener(e,o._onResize)})),ft(kt(o),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",o._onResize,!1):e&&o._detectElementResize.removeResizeListener(e,o._onResize)})),ft(kt(o),"_onResize",(function(){o.updatePosition()})),ft(kt(o),"__handleWindowScrollEvent",(function(){if(o._isMounted){var e=o.props.onScroll,t=o.props.scrollElement;if(t){var n=kh(t),i=Math.max(0,n.left-o._positionFromLeft),r=Math.max(0,n.top-o._positionFromTop);o.setState({isScrolling:!0,scrollLeft:i,scrollTop:r}),e({scrollLeft:i,scrollTop:r})}}})),ft(kt(o),"__resetIsScrolling",(function(){o.setState({isScrolling:!1})})),o}return Ct(t,e),yt(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=this.props.onResize,o=this.state,n=o.height,i=o.width,r=this._child||Tt.findDOMNode(this);if(r instanceof Element&&e){var a=function(e,t){if(_h(t)&&document.documentElement){var o=document.documentElement,n=vh(e),i=vh(o);return{top:n.top-i.top,left:n.left-i.left}}var r=kh(t),a=vh(e),s=vh(t);return{top:a.top+r.top-s.top,left:a.left+r.left-s.left}}(r,e);this._positionFromTop=a.top,this._positionFromLeft=a.left}var s=yh(e,this.props);n===s.height&&i===s.width||(this.setState({height:s.height,width:s.width}),t({height:s.height,width:s.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=rp(),this.updatePosition(e),e&&(mh(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t){var o=this.props.scrollElement,n=e.scrollElement;n!==o&&null!=n&&null!=o&&(this.updatePosition(o),gh(this,n),mh(this,o),this._unregisterResizeListener(n),this._registerResizeListener(o))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(gh(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,o=t.isScrolling,n=t.scrollTop,i=t.scrollLeft,r=t.height,a=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:r,isScrolling:o,scrollLeft:i,scrollTop:n,width:a})}}]),t}(X.PureComponent),ft(fh,"propTypes",null),bh);ft(wh,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:Sh(),serverHeight:0,serverWidth:0});const Ch=(0,c.memo)((e=>{const[t,o]=(0,c.useState)(!1),[n,i]=(0,c.useState)(Math.random());return(0,c.useEffect)((()=>{o(!0)}),[]),(0,s.useEffectDeep)((()=>{i(Math.random)}),[e.list]),(0,j.jsx)("div",{className:"kubio-predefined-layouts__virtual-grid",children:t&&(0,j.jsx)(Ih,{...e},n)})})),Ih=(0,c.memo)((({list:e,onSelect:t,ListItemComponent:o})=>{var n;const i=(0,c.useRef)(),[r,a]=(0,c.useState)(Math.random()),[l,u]=(0,c.useState)(jh()),d=(0,c.useMemo)((()=>{const t=l;let o=0,n=0;const i=[];return e.forEach((e=>{0===o&&(i[n]=[]),i[n][o]=e,o===t-1?(o=0,n++):o++})),i}),[e,l,r]),p=(0,c.useCallback)((({columnIndex:e,key:n,rowIndex:i,style:r})=>{const a=d[i][e];return a?(0,j.jsx)("div",{style:r,children:(0,j.jsx)(o,{value:a,onSelect:t},a.uniqueId)},n):(0,j.jsx)(j.Fragment,{})}),[d,r]),m=(0,c.useMemo)((()=>{const e=document.querySelector(".kubio-predefined-layouts__modal-layout__list");if(!e)return null;const t=window.getComputedStyle(e),o=parseInt(t.paddingLeft)+parseInt(t.paddingRight),n=parseInt(t.paddingTop)+parseInt(t.paddingBottom),i=e.clientWidth-o,r=e.clientHeight-n-5,a=i/l;return{containerWidth:i,containerHeight:r,columnWidth:a,columnHeight:a}}),[l,r]),g=null===(n=h().get(d,"0",[]))||void 0===n?void 0:n.length,f=(0,c.useCallback)((()=>{const e=jh();e!==l&&u(e),a(Math.random())}),[l,u,a]),b=(0,s.useDebounce)(f,50);return(0,c.useEffect)((()=>(window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)})),[b]),(0,j.jsx)("div",{ref:i,className:"kubio-predefined-layouts__virtual-grid__inner",children:m&&(0,j.jsx)(Xd,{cellRenderer:p,columnCount:g,columnWidth:m.columnWidth,rowCount:d.length,rowHeight:m.columnHeight,height:m.containerHeight,width:m.containerWidth},r)})})),jh=()=>{const e=document.querySelector(".kubio-predefined-layouts__virtual-grid");if(e)return parseInt(getComputedStyle(e).getPropertyValue("--number-columns"))},Th=e=>e.preventDefault(),Ph=(0,c.memo)((({title:e,onClose:t=h().noop,className:o,children:n,...i})=>{const r=(0,c.useRef)(),a=(0,c.useMemo)((()=>document.querySelector(".kubio-predefined-layouts__popup-slot")),[]),l=(0,c.useCallback)((e=>{var o;null!=e&&null!==(o=e.target)&&void 0!==o&&o.closest(".kubio-predefined-layouts__inner-modal")||t()}),[t]);return(0,s.useOnClickOutside)(r,l),(0,c.createPortal)((0,j.jsx)("div",{className:Z()("kubio-predefined-layouts__inner-modal__overlay",o),onClick:Th,onMouseDown:Th,...i,children:(0,j.jsx)("div",{className:"kubio-predefined-layouts__inner-modal",ref:r,children:(0,j.jsxs)("div",{className:" components-modal__content",children:[(0,j.jsxs)("div",{className:"components-modal__header",children:[(0,j.jsx)("div",{className:"components-modal__header-heading-container",children:(0,j.jsx)("h1",{className:"components-modal__header-heading",children:e})}),(0,j.jsx)(k.Button,{onClick:t,icon:Ve,label:(0,C.__)("Close dialog","kubio")})]}),n]})})}),a)})),Eh=(0,c.memo)((()=>(0,j.jsxs)("div",{className:"kubio-predefined-layouts__loading-overlay",children:[(0,j.jsx)(k.Icon,{icon:Ge.KubioLoader}),";"]}))),Rh=(0,c.memo)((({searchPlaceholder:e=(0,C.__)("Find a starter site…","kubio")})=>(0,j.jsxs)(Mm.Sidebar,{children:[(0,j.jsx)(Mm.Sidebar.Header,{}),(0,j.jsxs)(Mm.Sidebar.Content,{children:[(0,j.jsx)(Tm.Slot,{}),(0,j.jsx)(kd,{placeholder:e}),(0,j.jsx)(hd,{})]})]}))),Ah=(0,c.memo)((({value:e={},onSelect:t})=>{const{screenshot:o,isPro:n,label:i,slug:r,uniqueId:a,relatedDemoSite:s}=e,l=(0,c.useMemo)((()=>!n&&s?null==s?void 0:s.screenshot:o),[a,n,o,s]),u=h().get(s,"slug");return(0,j.jsx)(vd,{screenshot:l,label:i,isPack:!0,uniqueId:a,isPro:n,onClick:()=>{t(e)},favoriteType:"demoSite",favoriteId:r,relatedFavoriteId:u})}));var Oh=o(246),Nh=o.n(Oh);const Dh=(0,c.memo)((({list:e,onSelect:t})=>{const o=(0,c.useRef)(),[n,i]=(0,c.useState)(1),r=(0,c.useMemo)((()=>{let t=20*n;return t=Math.min(e.length,t),e.slice(0,t)}),[n,e]),a=(0,c.useCallback)((()=>{const t=n+1;20*t-20>e.length||i(t)}),[i,n,e]),l=(0,s.useDebounce)(a,100),u=(0,c.useMemo)((()=>e.length!==r.length),[r,e]);return(0,j.jsx)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:o,children:(0,j.jsx)(Nh(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:l,hasMore:u,threshold:2e3,loader:(0,j.jsx)("div",{className:"loader"},0),children:r.map(((e,o)=>(0,j.jsx)(Ah,{value:e,onSelect:t},e.slug+"__"+o)))})})})),Mh=()=>{const{onSelectDemo:e}=ef(),{list:t}=$g(),o=(0,c.useCallback)((t=>{e(null==t?void 0:t.slug)}),[e]);return(0,j.jsx)(Mm.Page.Content,{children:(0,j.jsx)(Dh,{list:t,onSelect:o})})},Bh=(0,c.memo)((()=>{const{currentDemoSite:e}=ef();return(0,j.jsxs)(Mm.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar",children:[(0,j.jsx)(Mm.Sidebar.Header,{children:(0,C.__)("Import Starter Site","kubio")}),(0,j.jsx)(Mm.Sidebar.Content,{children:(0,j.jsx)(vd,{showAnimationAtLoad:!0,...e,showFavorite:!1,showLabel:!1})}),(0,j.jsx)(Mm.Sidebar.Footer,{children:(0,j.jsx)("div",{className:"d-flex justify-content-end align-items-center",children:(0,j.jsx)("a",{href:null==e?void 0:e.preview,target:"_blank",rel:"noreferrer",children:(0,C.__)("Preview starter site","kubio")})})})]})})),Lh={ACTIVE:(0,C.__)("Active","kubio"),INSTALLED:(0,C.__)("Installed","kubio"),NOT_INSTALLED:(0,C.__)("Not installed","kubio")},zh=h().get(window,["kubioUtilsData","plugins_states"],{}),Fh=(0,c.memo)((()=>{const{currentDemoSite:e}=ef(),t=(0,c.useMemo)((()=>{const t=h().get(e,"plugins",[]);return Array.isArray(t)?t.map((e=>{const t=h().get(zh,null==e?void 0:e.slug),o=h().get(Lh,t);return{...e,statusLabel:o}})):[]}),[e]);return(0,j.jsx)(j.Fragment,{children:t.map((({slug:e,label:t,statusLabel:o})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("li",{className:"kubio-predefined-layouts__demo-site-import-page__plugin",children:(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("span",{className:"d-flex align-items-center",children:t}),(0,j.jsx)("span",{className:"kubio-predefined-layouts__demo-site-import-page__plugin__status",children:o})]})},e),(0,j.jsx)("hr",{})]})))})})),Gh=(0,c.memo)((()=>{const{currentDemoSite:e}=ef(),t=!h().isEmpty(null==e?void 0:e.plugins);return(0,j.jsxs)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title",children:(0,C.__)("You are about to import a demo site","kubio")}),(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,C.__)("Current pages will be moved to trash. You can restore the content back at any time.","kubio")}),(0,j.jsx)("li",{children:(0,C.__)("Posts, pages, images, widgets, menus and other theme settings will get imported.","kubio")}),(0,j.jsx)("li",{className:"text-danger",children:(0,C.__)("Your current design will be completely overwritten by the new template. This process is irreversible. If you wish to be able to go back to the current design,please create a backup of your site before proceedingwith the import.","kubio")})]})]}),t&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title",children:(0,C.__)("The following plugins will be installed as they are part of the demo","kubio")}),(0,j.jsx)("ul",{className:"kubio-predefined-layouts__demo-site-import-page__plugins-list",children:(0,j.jsx)(Fh,{})})]})]})})),Hh=(0,c.memo)((()=>{const{currentDemoSite:e}=ef(),t=null==e?void 0:e.label;return(0,j.jsxs)(Mm.Page.Content,{children:[(0,j.jsx)(Mm.Page.Content.Title,{children:(0,j.jsx)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name",children:t})}),(0,j.jsx)(Gh,{})]})})),Uh=(0,c.memo)((()=>{const{currentDemoSite:e,setShowDemoSiteImportPage:t}=ef(),{baseUrl:o}=(0,w.useSelect)((e=>{const{url:t}=e("core").getEntityRecord("root","site")||{};return{baseUrl:t}}),[]),n=(0,s.useUnloadStoreEntities)(),i=(0,s.useResetUndoStack)(),r=(0,c.useCallback)((()=>{n(),i()}),[n,i]),a=(0,c.useMemo)((()=>!0),[])&&(null==e?void 0:e.isPro)?Fe.ProItem:k.Button,l=(0,c.useCallback)((()=>{t(!1)}),[t]),u=(0,c.useCallback)((async()=>{if(!(null==e?void 0:e.slug))return;const t=new URL(`${o}/wp-admin/admin.php`),n=t.searchParams;n.set("page","kubio-get-started"),n.set("tab","demo-sites"),n.set("import",null==e?void 0:e.slug);const i=t.toString();r(),document.location.href=i}),[e]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Mm.Page.Footer,{children:(0,j.jsxs)("div",{className:" d-flex w-100 justify-content-end align-items-center",children:[(0,j.jsx)(k.Button,{isSecondary:!0,onClick:l,children:(0,C.__)("Cancel","kubio")}),(0,j.jsx)(a,{tag:k.Button,isPrimary:!0,urlArgs:{source:"templates_gallery",content:null==e?void 0:e.label},onClick:u,children:(0,C.__)("Import full starter site","kubio")})]})})})})),Wh=(0,c.memo)((e=>(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Mm,{...e,className:"kubio-predefined-layouts__demo-site-import-page",sidebar:(0,j.jsx)(Bh,{}),pageContent:(0,j.jsx)(Hh,{}),pageFooter:(0,j.jsx)(Uh,{})})}))),Vh=(0,c.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:o}=ef(),{list:n}=$g();return(0,j.jsxs)(j.Fragment,{children:[t&&(0,j.jsx)(zg,{...e}),o&&(0,j.jsx)(Wh,{}),(0,j.jsx)(Mm,{...e,className:"kubio-predefined-layouts__demo-list-page",items:n,sidebar:(0,j.jsx)(Rh,{}),pageContent:(0,j.jsx)(Mh,{}),emptyContent:(0,C.__)("No Starter Site Found","kubio")})]})})),Kh=(0,c.memo)((({children:e})=>{const{rawDemoList:t}=ef(),{favoritesDataByType:o}=cf(),n=(0,c.useMemo)((()=>null===o?t:h().isEmpty(o)?[]:t.filter((e=>!!h().get(o,["demoSite",null==e?void 0:e.slug])))),[t,o]),i=(0,c.useMemo)((()=>{const e=h().cloneDeep(n),t=[];return e.forEach((e=>{const{isPro:o,relatedDemoSite:n}=e;n?!o&&t.push(e):t.push(e)})),t}),[n]),r=(0,c.useMemo)((()=>({list:i})),[i]);return(0,j.jsx)(Fg.Provider,{value:r,children:e})})),$h=(0,c.memo)((e=>(0,j.jsx)(Jg,{children:(0,j.jsx)(Kh,{children:(0,j.jsx)(Vg,{children:(0,j.jsx)(Vh,{...e})})})}))),qh=(0,c.memo)((({value:e={},onSelect:t})=>{const{screenshot:o,isPro:n,label:i,slug:r,uniqueId:a,demoSiteSlug:s,id:l,type:u}=e,d=(0,c.useMemo)((()=>{const e=(e=>h().get(wu,["demoSitesListBySlug",e]))(s);return`STARTER SITE: ${null==e?void 0:e.label}`}),[s]),p=(0,c.useMemo)((()=>({favoriteType:`demo-${u}`,favoriteId:l})),[u,l]);return(0,j.jsxs)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item",onClick:()=>{t(e)},children:[(0,j.jsx)(vd,{screenshot:o,label:i,uniqueId:a,isPro:n,...p}),(0,j.jsx)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item__pack-label",onClick:e=>e.stopPropagation(),children:d})]})})),Yh=(0,c.memo)((({list:e,onSelect:t})=>(0,j.jsx)(Ch,{list:e,onSelect:t,ListItemComponent:qh}))),Zh=()=>{const{onSelectDemo:e}=ef(),{list:t}=$g(),o=(0,c.useCallback)((t=>{e(null==t?void 0:t.demoSiteSlug,t)}),[e]);return(0,j.jsx)(Mm.Page.Content,{children:(0,j.jsx)(Yh,{list:t,onSelect:o})})},Xh=(0,c.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:o,demoPartsIsLoaded:n}=ef(),{list:i}=$g();return(0,j.jsxs)(j.Fragment,{children:[t&&(0,j.jsx)(zg,{...e}),o&&(0,j.jsx)(Wh,{}),(0,j.jsx)(Mm,{...e,className:"kubio-predefined-layouts__demo-part-list-page",isLoading:!n,items:i,sidebar:(0,j.jsx)(Rh,{searchPlaceholder:(0,C.__)("Find a page…","kubio")}),pageContent:(0,j.jsx)(Zh,{}),emptyContent:(0,C.__)("No Page Found","kubio")})]})})),Qh=(0,c.memo)((({children:e})=>{const{rawDemoList:t,demosPartsPerSlug:o}=ef(),{favoritesDataByType:n}=cf(),i=(0,c.useMemo)((()=>{let e=[];return t.forEach((({slug:t,isPro:n,relatedDemoSite:i})=>{if(i){if(n)return;const r=t,a=null==i?void 0:i.slug,s=h().get(o,r,[]),l=h().get(o,a,[]);e=e.concat(s,l)}else{const n=h().get(o,t,[]);e=e.concat(n)}})),e}),[t,o]),r=(0,c.useMemo)((()=>null===n?i:h().isEmpty(n)?[]:i.filter((e=>{const{type:t,id:o}=e,i=[`demo-${t}`,o];return!!h().get(n,i)}))),[i,n]),a=(0,c.useMemo)((()=>({list:r})),[r]);return(0,j.jsx)(Fg.Provider,{value:a,children:e})})),Jh=(0,c.memo)((e=>(0,j.jsx)(Jg,{children:(0,j.jsx)(Qh,{children:(0,j.jsx)(Vg,{children:(0,j.jsx)(Xh,{...e})})})}))),em=(0,c.memo)((({value:e={},onSelect:t,onLoad:o})=>{const{screenshot:n,isProOnFree:i,label:r,name:a,categoryLabelWithIndex:s}=e,l=(0,c.useRef)(),u=i,d=u?Fe.ProItem:vd;let p={};return u&&(p={urlArgs:{source:"templates_gallery",content:r}}),(0,j.jsx)(Fe.ProModalTextContext.Provider,{value:(0,C.__)("This section is available only in the PRO version.","kubio"),children:(0,j.jsx)(d,{tag:vd,ref:l,title:r,screenshot:n,label:s,uniqueId:a,isPro:i,isLandscape:!0,onClick:()=>t(e),favoriteType:"section",favoriteId:a,onLoad:o,addImageType:!1,...p})})})),tm=(0,c.createContext)({}),om=(0,c.memo)((({children:e,filterByPublicTag:t=!0,activeTag:o,setActiveTag:n})=>{const[i,r]=nm(h().noop,"content"),[a]=nm(h().noop,"header"),[s]=nm(h().noop,"footer"),{favoritesDataByType:l}=cf(),{initialParams:u,activePage:d}=Ju(),g=h().get(u,["sections","internalTag"]),{isFrontPage:f}=(0,w.useSelect)((e=>{const{getIsFrontPage:t=h().noop}=e("kubio/edit-site")||{};return{isFrontPage:t()}}),[]),b=new URLSearchParams(window.location.search);let _=null;b.get("postId").match(/front-header|header|footer/gi)&&(_=b.get("postId").match(/front-header|header|footer/gi)[0]);let v="kubio-content";v=_?_.includes("header")?"kubio-header":"kubio-footer":h().get(u,[d,"categoryType"],"kubio-content");const y=(0,c.useMemo)((()=>a.concat(i,s)),[a,i,s]),k=(0,c.useMemo)((()=>y.filter((e=>{if(!v)return!0;const t=h().get(e,"categories.0"),o=t.split("/")[0];return(!f&&"front-header"!==_||t!==m.INNER_HEADERS_CATEGORY)&&o===v})).filter((e=>!(g&&!((null==e?void 0:e.internalTags)||[]).includes(g))&&!!(0,I.isPatternAvailableInCurrentTheme)(e)))),[y,v,f,g]),x=(0,c.useMemo)((()=>null===l?k:h().isEmpty(l)?[]:k.filter((e=>!!h().get(l,["section",null==e?void 0:e.name])))),[k,l]),S=(0,c.useMemo)((()=>{const e={};return x.map(((t,o)=>{var n;let i=t.screenshot;!i&&t.isCustomSection&&(i="data:image/svg+xml,"+`<svg background='#fff' xmlns='http://www.w3.org/2000/svg' width='400'  height='250'>\t<rect x='0' y='0' width='400' height='250' fill='white'></rect>\t<text x='50%' y="50%" fill='#a6adb5' dominant-baseline='middle' font-family='Open Sans, Arial, Helvetica, sans-serif' text-anchor='middle'>\t\t${t.title}\t</text></svg>`.replace(/"/g,"'").replace(/>\s{1,}</g,"><").replace(/\s{2,}/g," ").replace(/[\r\n%#()<>?[\\\]^`{|}]/g,encodeURIComponent));const a=null===(n=(0,p.find)(r,{name:h().get(t,"categories.0")}))||void 0===n?void 0:n.label;h().get(e,a)?e[a]++:e[a]=1;const s=`${a} #${e[a]}`;return{...t,label:t.title,categoryLabelWithIndex:s,screenshot:i}})).filter((e=>{const n=(null==e?void 0:e.publicTags)||[];return!(t&&o!==I.ALL_TAG&&!n.includes(o))})).sort(((e,t)=>0+e.isProPattern-t.isProPattern))}),[r,x,o]),C=(0,c.useMemo)((()=>r.map((({name:e,label:t})=>({label:t,value:e})))),[r]),T=(0,c.useCallback)(((e,t)=>{const o=e=>null==e?void 0:e.toLowerCase().replace("#",""),n=o(t);return e.filter((({label:e,categoryLabelWithIndex:t})=>{var i,r,a,s;return(null===(i=o(e))||void 0===i||null===(r=i.includes)||void 0===r?void 0:r.call(i,n))||(null===(a=o(t))||void 0===a||null===(s=a.includes)||void 0===s?void 0:s.call(a,n))}))}),[]),P=(0,c.useMemo)((()=>({list:S,categories:C,filterFunction:T})),[S,C,T]),E=(0,c.useMemo)((()=>({activeTag:o,setActiveTag:n})),[o,n]);return(0,j.jsx)(tm.Provider,{value:E,children:(0,j.jsx)(Fg.Provider,{value:P,children:e})})})),nm=(e,t="content")=>{const{patternCategories:o,patterns:n}=(0,w.useSelect)((e=>{const{getSettings:o}=e("core/block-editor");return{patterns:o().__experimentalBlockPatterns.filter((e=>e.isGutentagPattern&&0===e.name.indexOf(`kubio-${t}`))),patternCategories:o().__experimentalBlockPatternCategories}}),[t]),i=(0,c.useMemo)((()=>{const e={};o.forEach((({name:t},o)=>e[t]=o));const t=n.map(((t,o)=>{const n=h().get(t,"categories[0]"),i=e[n];return{...t,arrayIndex:o,categoryIndex:i}}));return h().orderBy(t,["categoryIndex","arrayIndex"],["asc","asc"])}),[n,o]),r=(0,c.useCallback)(((t,o)=>{const n=t.isGutentagPattern?(0,I.transformTemplateToBlock)(o):(0,p.map)(o,(e=>(0,st.cloneBlock)(e)));e(n,t)}),[]);return[i,o,r]},im=()=>(0,c.useContext)(tm),rm=()=>{const{activeTag:e,setActiveTag:t}=im();return(0,j.jsx)(om,{activeTag:e,setActiveTag:t,filterByPublicTag:!1,children:(0,j.jsx)(Vg,{children:(0,j.jsx)(am,{})})})},am=()=>{const{list:e}=$g(),{activeTag:t,setActiveTag:o}=im(),n=(0,c.useMemo)((()=>{const t=new Set;return e.forEach((e=>{(e.publicTags||[]).forEach((e=>t.add(e)))})),[...t]}),[e]);return(0,j.jsx)(j.Fragment,{children:!!n.length&&(0,j.jsx)(I.KubioSectionsTags,{activeTag:t,setActiveTag:o,availableTagSlugs:n})})},sm=(0,c.memo)((({list:e,onSelect:t})=>{const o=(0,c.useRef)(),[n,i]=(0,c.useState)(1),r=(0,c.useMemo)((()=>{let t=40*n;return t=Math.min(e.length,t),e.slice(0,t).map(((e,t)=>({...e,__internalId:t})))}),[n,e]),a=(0,c.useCallback)((()=>{i((t=>{const o=t+1;return 40*o-40>e.length?t:o}))}),[e]),l=(0,s.useDebounce)(a,100),u=(0,c.useMemo)((()=>e.length!==r.length),[r,e]),{onRestartMasonry:d}=(({containerRef:e})=>{const t=(0,c.useRef)({}),o=(0,c.useRef)({}),n=(0,c.useRef)(0),i="data-masonry-loaded",r=(0,c.useRef)(0),a=(0,c.useRef)(!1),[l,u]=(0,c.useState)(!1),d=(0,c.useRef)(!1),p=(0,c.useCallback)((e=>{if("top"!==e.propertyName)return;const t=e.target;r.current>0&&r.current--,t.removeEventListener("transitionend",p),0===r.current&&a.current&&u(!0)}),[]),h=(0,c.useCallback)((()=>{if(0!==r.current||d.current)return a.current=!0,void(d.current=!1);d.current=!0;const s=e.current.children[0],l=o.current,c=t.current,u=n.current,h=Array.from(s.children).filter((e=>!e.hasAttribute(i)&&e.querySelector("img").hasAttribute("data-is-loaded"))),m=e.current,g=s.offsetHeight;s.style.paddingTop=`${g}px`;const f=s.clientWidth,{getComputedStyle:b}=m.ownerDocument.defaultView,_=parseInt(b(m).getPropertyValue("--number-columns")),v=f/_;h.forEach(((e,t)=>{const o=u+t,n=Math.floor(o/_);void 0===c[n]&&(c[n]=0);const r=0!==n?c[n-1]:0,a=e.offsetHeight+r;if(a>c[n]&&(c[n]=a),o>=_){const t=c[n-1];e.style.top=`${t}px`}else e.style.top=0;const s=o%_*v;e.style.left=`${s}px`,e.style.width=`${v}px`,e.style.position="absolute",e.setAttribute(i,!0)})),h.forEach(((e,t)=>{const o=u+t,n=e.querySelector(".kubio-predefined-layouts__screenshot-preview__parent");let i;if(o>=_){const e=l[o-_];i=`${e}px`,l[o]=e+n.offsetHeight+30}else l[o]=n.offsetHeight+30,i="0.1px";e.style.top!==i&&(r.current++,e.addEventListener("transitionend",p)),e.style.top=i}));let y=0;for(let e=0;e<_;e++){const t=h[h.length-1-e];if(!t)continue;const o=t.offsetHeight+parseFloat(t.style.top);y<o&&(y=o)}n.current+=h.length,s.style.paddingTop=`${y}px`,d.current=!1}),[e,p]);(0,c.useEffect)((()=>{l&&(u(!1),h())}),[l]);const m=(0,c.useCallback)((()=>{t.current={},o.current={},n.current=0;const r=e.current.children[0];r.style.paddingTop="0",Array.from(r.children).forEach((e=>{e.hasAttribute(i)&&e.removeAttribute(i),e.style.left="",e.style.top="",e.style.width="",e.style.position=""})),h()}),[e,h]),g=(0,s.useDebounce)(m,50);return(0,c.useEffect)((()=>(window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)})),[g]),{onRestartMasonry:h}})({containerRef:o}),p=(0,s.useDebounce)((0,c.useCallback)(d,[]),500);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:o,children:[(0,j.jsx)(Nh(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:l,hasMore:u,threshold:2e3,loader:(0,j.jsx)(j.Fragment,{}),children:r.map(((e,o)=>(0,j.jsx)(em,{onLoad:p,value:e,index:o,onSelect:t},e.name+"__"+o)))}),(0,j.jsx)(rm,{})]})})})),lm=()=>{const{list:e}=$g(),{initialParams:t,activePage:o}=Ju(),n=h().get(t,[o,"onActionFunc"]),{insertBlocks:i}=(0,w.useDispatch)("core/block-editor"),{contentClientId:r,nrOfBlocksInsideContent:a,patternCategories:l,sectionNameAndIdHooks:u}=(0,w.useSelect)((e=>{var t;const{getBlocks:o,getBlockOrder:n,getClientIdsWithDescendants:i,getBlock:r}=e("core/block-editor"),{__experimentalBlockPatternCategories:a}=e("core/block-editor").getSettings(),s=o()||[],l=(0,I.findBlockByName)(s,"core/post-content"),c=null==l?void 0:l.clientId;return{patternCategories:a,contentClientId:c,nrOfBlocksInsideContent:null===(t=n(c))||void 0===t?void 0:t.length,sectionNameAndIdHooks:{getClientIdsWithDescendants:i,getBlock:r}}}),[]),{onClose:d=h().noop}=Ju(),g=(0,c.useCallback)((async e=>{var t;const o=null==e?void 0:e.content;let n=(0,I.transformTemplateToBlock)(o);n=function({block:e,pattern:t,patternCategories:o,hooks:n}){var i,r,a;const{categories:s}=t,l=null!==(i=null==s?void 0:s[0])&&void 0!==i?i:"__undefined__category__",c=null!==(r=null===(a=(0,p.find)(o,{name:l}))||void 0===a?void 0:a.label)&&void 0!==r?r:"Custom Section",{anchor:u,name:d}=(0,I.getNextSectionNameAndId)(c,n);return"kubio/section"===e.name&&(e={...e,attributes:{...e.attributes,anchor:u,attrs:{...e.attributes.attrs,name:d}}}),e}({pattern:e,block:n,hooks:u,patternCategories:l});let s=a;var c;-1!==e.categories.indexOf(m.HERO_ACCENT_CATEGORY)&&(s=0),await i((0,I.cleanFontFamilyFromBlocks)(n),s,r,!1),d(),null!==(t=n)&&void 0!==t&&t.clientId&&Ru(null===(c=n)||void 0===c?void 0:c.clientId)}),[r,a,i,d,l,u]),f=(0,s.useDeepMemo)((()=>Za().generate()),[e]),b=(0,c.useCallback)((async e=>{n?(n(e),d()):g(e)}),[n,d,g]);return(0,j.jsx)(Mm.Page.Content,{children:(0,j.jsx)(sm,{list:e,onSelect:b},f)})},cm="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found.png",um="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found+favorites.png";[cm,um].forEach((e=>{(new Image).src=e}));const dm=(0,c.memo)((({children:e})=>{const{activePage:t}=Ju(),o=e||(0,C.__)("NO ELEMENTS FOUND","kubio"),n=(0,c.useMemo)((()=>t===Zu?um:cm),[t]);return(0,j.jsxs)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content",children:[(0,j.jsx)("img",{src:n}),o]})})),pm=(0,c.memo)((({children:e})=>{const{activePage:t}=Ju(),{activeTag:o,setActiveTag:n}=im(),i=(0,c.useMemo)((()=>t===Zu?um:cm),[t]);return(0,j.jsxs)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content",children:[(0,j.jsx)(I.KubioSectionsTags,{activeTag:o,setActiveTag:n}),(0,j.jsx)("img",{src:i}),(0,C.__)("No Section Found","kubio")]})})),hm=(0,c.memo)((e=>{const{list:t}=$g(),o=!window.kubioPatternsRegistered;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Mm,{...e,className:"kubio-predefined-layouts__sections-page",isLoading:o,items:t,sidebar:(0,j.jsx)(Rh,{searchPlaceholder:(0,C.__)("Find a section…","kubio")}),pageContent:(0,j.jsx)(lm,{}),EmptyContentComponent:pm})})})),mm=(0,c.memo)((e=>{const{initialParams:t,activePage:o}=Ju(),n=h().get(t,["sections","tag"],I.ALL_TAG),[i,r]=(0,c.useState)(n);return(0,j.jsx)(om,{activeTag:i,setActiveTag:r,children:(0,j.jsx)(Vg,{children:(0,j.jsx)(hm,{...e})})})})),gm=(0,c.createContext)({value:null}),fm=(0,c.memo)((({children:e})=>{const{previousActivePage:t}=Ju(),[o,n]=(0,c.useState)(t),i=(0,c.useMemo)((()=>({activeTab:o,setActiveTab:n})),[o,n]);return(0,j.jsx)(gm.Provider,{value:i,children:e})})),bm=()=>(0,c.useContext)(gm),_m=Xu.filter((({value:e})=>e!==Zu)),vm=(0,c.memo)((()=>{const{activeTab:e,setActiveTab:t}=bm(),{initialParams:o}=Ju(),n=h().get(o,"disabledPages",[]);return(0,j.jsx)(ct.ToggleGroup,{value:e,onChange:t,disabledOptions:n,options:_m})})),ym=(0,c.memo)((()=>(0,j.jsx)(Tm.Fill,{children:(0,j.jsx)(vm,{})}))),km=(0,c.memo)((e=>{const{activeTab:t}=bm(),o=(0,c.useMemo)((()=>h().get(Sm,t,c.Fragment)),[t]);return(0,j.jsxs)("div",{className:"kubio-predefined-layouts__favorite-page",children:[(0,j.jsx)(o,{...e}),(0,j.jsx)(ym,{})]})})),xm=(0,c.memo)((e=>(0,j.jsx)(fm,{children:(0,j.jsx)(lf,{children:(0,j.jsx)(km,{...e})})}))),Sm={[$u]:$h,[qu]:Jh,[Yu]:mm,[Zu]:xm},wm=(0,c.memo)((e=>{const{activePage:t,onClose:o,showLoadingOverlay:n}=Ju(),i=(0,c.useRef)(),r=(0,c.useMemo)((()=>h().get(Sm,t,c.Fragment)),[t]),a=(0,c.useCallback)((()=>{o()}),[o]);return(0,s.useOnClickOutside)(i,a),(0,j.jsxs)("div",{ref:i,className:"kubio-predefined-layouts__pages-container position-relative",children:[(0,j.jsx)(r,{...e}),(0,j.jsx)("div",{className:"kubio-predefined-layouts__popup-slot"}),n&&(0,j.jsx)(Eh,{})]})})),Cm=(0,c.memo)((({children:e})=>{const t=e||(0,C.__)("Kubio Library","kubio");return(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header",children:(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header__inner",children:t})})})),Im=(0,c.memo)((({children:e})=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__content",children:e}))),jm=(0,c.memo)((({children:e})=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__footer",children:e}))),Tm=(0,k.createSlotFill)("PredefinedLayoutsSidebarTop"),Pm=(0,c.memo)((({children:e,className:t})=>(0,j.jsx)("div",{className:Z()("kubio-predefined-layouts__modal-layout__sidebar",t),children:e})));Pm.Header=Cm,Pm.Content=Im,Pm.Footer=jm;const Em=(0,c.memo)((({children:e})=>(0,j.jsx)("div",{children:e}))),Rm=(0,c.memo)((()=>{const{activePage:e,setActivePage:t,initialParams:o}=Ju(),n=h().get(o,"disabledPages",[]);return(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__pages-switcher",children:(0,j.jsx)(ct.ToggleGroup,{value:e,onChange:t,disabledOptions:n,options:Xu})})})),Am=(0,c.memo)((({children:e})=>(0,j.jsx)(j.Fragment,{children:e}))),Om=(0,c.memo)((({children:e})=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__list__title",children:e}))),Nm=(0,c.memo)((({children:e})=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__list__footer",children:e}))),Dm=(0,c.memo)((()=>(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__list--loading-content",children:(0,j.jsx)(k.Icon,{icon:Ge.KubioLoader})}))),Mm=(0,c.memo)((({items:e,sidebar:t,pageContent:o,pageFooter:n,className:i,isLoading:r=!1,emptyContent:a,EmptyContentComponent:s=dm})=>{const{onClose:l}=Ju();let c;if(Array.isArray(e)){const t=!(null==e?void 0:e.length);c=r?(0,j.jsx)(Dm,{}):t?(0,j.jsx)(s,{children:a}):o}else c=o;return(0,j.jsxs)("div",{className:Z()("kubio-predefined-layouts__modal-layout",i),children:[t,(0,j.jsxs)("div",{className:"kubio-predefined-layouts__modal-layout__list__container",children:[(0,j.jsxs)("div",{className:"kubio-predefined-layouts__modal-layout__header",children:[(0,j.jsx)(Rm,{}),(0,j.jsx)(k.Button,{className:"kubio-predefined-layouts__modal-layout__close",onClick:l,icon:We,size:12,label:(0,C.__)("Close","kubio")})]}),(0,j.jsxs)("div",{className:"kubio-predefined-layouts__modal-layout__list",children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__modal-layout__list__left-gradient"}),c]}),n]})]})}));Mm.Page=Em,Mm.Page.Content=Am,Mm.Page.Footer=Nm,Mm.Page.Content.Title=Om,Mm.Sidebar=Pm;const Bm=(0,c.memo)((({onSelectDemo:e})=>{const{activePage:t}=Ju(),o=(0,c.useMemo)((()=>{switch(t){case $u:return(0,C.__)("Back to Starter Sites","kubio");case qu:return(0,C.__)("Back to Pages","kubio")}return(0,C.__)("Back","kubio")}),[t]);return(0,j.jsx)(Mm.Sidebar.Header,{children:(0,j.jsx)(k.Button,{className:"kubio-predefined-layouts__preview-page__sidebar__back",icon:(0,j.jsx)(k.Dashicon,{icon:"redo"}),onClick:()=>e(null),children:o})})})),Lm=(0,c.createContext)({text:null,isDisabled:!1}),zm=(0,c.memo)((()=>(0,j.jsx)("div",{children:(0,C.__)("You can't import page content","kubio")}))),Fm=(0,c.memo)((({children:e})=>{const{selectedDemoPart:t}=Lu(),o=og(t),{currentPostIsPage:n}=(0,w.useSelect)((e=>{const{getPage:t=h().noop}=e("kubio/edit-site")||{},o=t(),{postType:n}=(null==o?void 0:o.context)||{};return{currentPostIsPage:"page"===n}}),[]),i=h().isEmpty(t),r=(0,c.useMemo)((()=>{const e=o.find((({isCurrentPageTemplate:e})=>e)),r=o.find((({isSelectedDemoPart:e})=>e));return r&&null!=r&&r.isDisabled?{text:r.noticeText,isDisabled:r.isDisabled}:e&&"page"===(null==t?void 0:t.type)||"page"===(null==t?void 0:t.type)&&!n?{text:ig,isDisabled:!0}:{text:zm,isDisabled:i}}),[o,t,n]);return(0,j.jsx)(Lm.Provider,{value:r,children:e})})),Gm=()=>(0,c.useContext)(Lm),Hm=["attachment","kubio_changeset"],Um=({onComplete:e=p.noop,closeModal:t=p.noop,entityName:o=(0,C.__)("other","kubio"),changeEntityText:n,ModalComponent:i=k.Modal,modalProps:r={},changeReadyState:a=!0,changePage:l=!0})=>{const d=(0,s.useUnloadStoreEntities)(),h=(0,s.useResetUndoStack)(),m=(0,f.useSetGlobalSessionProp)("ready"),[g,_]=(0,c.useState)(!1),{hasDirtyEntities:v,entitiesToSave:y}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((({kind:e,name:t})=>"postType"===e&&!Hm.includes(t))).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:x}=(0,w.useDispatch)("core"),{setIsNavigationPanelOpened:S,setPage:I}=(0,w.useDispatch)(Be),[,T]=(0,b.useAIData)(),P=(0,c.useCallback)((()=>{S(!1),a&&(m(!1),l&&I(null));const{requestIdleCallback:t}=window;t((()=>{d(),h(),(0,s.removeCachedAllMergedAttributes)(),T(null),t(e)})),(0,u.doAction)("kubio.editor.page-changed")}),[S,a,I,m,d,h,T,e]);let E;return(0,c.useEffect)((()=>{v||P()}),[P,v]),E=n||(0,C.sprintf)(// translators: %s: page name
// translators: %s: page name
(0,C.__)("You are being redirected to <strong>%s</strong> page.","kubio"),o),(0,j.jsx)(j.Fragment,{children:v&&(0,j.jsxs)(i,{title:(0,C.__)("You have unsaved changes","kubio"),onRequestClose:t,...r,children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:E}}),(0,j.jsx)("br",{}),(0,C.__)("Would you like to save these changes or discard them?","kubio")]}),(0,j.jsxs)(k.ButtonGroup,{className:"h-template-part-modal__button-group",children:[(0,j.jsx)(k.Button,{isLink:!0,onClick:()=>{P()},children:(0,C.__)("Discard changes","kubio")}),(0,j.jsx)(k.Button,{isPrimary:!0,onClick:()=>{_(!0),(()=>{const e=y.map((({kind:e,name:t,key:o})=>x(e,t,o)));return Promise.all(e)})().then((()=>{P(),_(!1)}))},isBusy:g,disabled:g,children:(0,C.__)("Save changes","kubio")})]})]})})},Wm=(0,c.memo)((({onClose:e=h().noop,children:t})=>{const[o,n]=(0,c.useState)(!1),[,i]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),r=(0,c.useMemo)((()=>({onClose:e})),[e]),a=(0,c.useCallback)((()=>{n(!0),i(!0)}),[i]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Um,{onComplete:a,onClose:e,ModalComponent:Ph,modalProps:r,changeReadyState:!1}),o&&t]})})),{memo:Vm,useState:Km}=o(9307),$m=Vm((({actionLabel:e,description:t,NoticeActionComponent:o,onClose:n=h().noop,onAction:i=h().noop,onShowAction:r=h().noop,fromPopup:a=!1,...s})=>{const[l,u]=Km(!1),d=(0,c.useCallback)((()=>{n(),u(!1)}),[n,u]),p=e=>{e.stopPropagation(),e.preventDefault(),r(),u(!0)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__disabled-notice__description",children:t}),(0,j.jsxs)("div",{children:[!a&&(0,j.jsx)("a",{className:"kubio-predefined-layouts__disabled-notice__action",onClick:p,children:e}),a&&(0,j.jsx)(k.Button,{isSecondary:!0,onClick:p,children:e})]}),l&&(0,j.jsx)(Wm,{onClose:d,children:(0,j.jsx)(o,{onAction:i,...s})})]})})),qm=(0,c.memo)((({onAction:e,templateSlug:t,thirdPartyUrl:o=null})=>{const n=(0,c.useRef)(!1),{storeData:i}=(0,w.useSelect)((e=>{var t;const{storeData:o={}}=null===(t=e(s.TEMPLATE_STORE_NAME))||void 0===t?void 0:t.getTemplateData();return{storeData:o}}),[]),{createErrorNotice:r}=(0,s.useKubioNotices)(),{setTemplate:a=h().noop}=(0,w.useDispatch)("kubio/edit-site")||{},l=(0,f.useSetGlobalSessionProp)("ready"),{onClose:u}=Ju(),d=(0,c.useCallback)((()=>{if(!o)return void r((0,C.__)("Could not redirect to the page you selected","kubio"));const e=document.createElement("a");e.setAttribute("href",o),document.body.append(e),e.click()}),[o,r]),p=(0,c.useMemo)((()=>{const e=(null==i?void 0:i.templates)||[],o=e=>{var t;const o=null==e||null===(t=e.id)||void 0===t?void 0:t.split("//");return h().get(o,"[1]")};if(Array.isArray(t)){let n=null;return h().reverse(t).forEach((t=>{if(n)return;const i=e.find((e=>o(e)===t));i&&(n=i)})),n}return e.find((e=>o(e)===t))}),[null==i?void 0:i.templates]),m=(0,c.useCallback)((()=>{n.current||(n.current=!0,l(!1),e(),u(),p?a(p.id,p.slug,!0):d())}),[p,a,e,n,u,l]);return(0,c.useEffect)((()=>{m()}),[]),(0,j.jsx)(j.Fragment,{})})),Ym=()=>{const{siteUrl:e}=(0,w.useSelect)((e=>{const{getSettings:t=h().noop}=e("kubio/edit-site"),{siteUrl:o}=t()||{};return{siteUrl:o}}),[]);return e},Zm=e=>{const t=Ym();return(0,c.useMemo)((()=>{try{const o=new URL(`${t}wp-admin/admin.php`),n=o.searchParams;return n.append("page","kubio"),n.append("pageURL",e),o.toString()}catch(e){return null}}),[e])},Xm=(0,c.memo)((e=>{const{blogLink:t}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getSettings:o=h().noop}=e("kubio/edit-site"),n=t("root","site");let i;if("page"===(null==n?void 0:n.show_on_front)){const e=t("postType","page",parseInt(null==n?void 0:n.page_for_posts));i=h().get(e,"link",null)}else{const{siteUrl:e}=o()||{};i=e}return{blogLink:i}}),[]),o=Zm(t);return(0,j.jsx)($m,{description:(0,C.__)("This content can be imported only on the blog template","kubio"),actionLabel:(0,C.__)("Switch to the blog template","kubio"),templateSlug:Wu,NoticeActionComponent:qm,thirdPartyUrl:o,...e})})),Qm=(0,c.memo)((({onAction:e,firstPost:t})=>{const o=(0,c.useRef)(!1),{createErrorNotice:n}=(0,s.useKubioNotices)(),{setTemplate:i=h().noop}=(0,w.useDispatch)("kubio/edit-site")||{},r=(0,f.useSetGlobalSessionProp)("ready"),{onClose:a}=Ju(),{setPage:l}=(0,w.useDispatch)(m.STORE_KEY),u=(0,c.useCallback)((()=>{!o.current&&t&&(o.current=!0,r(!1),e(),a(),l({type:t.type,slug:t.slug,path:(0,Lo.getPathAndQueryString)(t.link),context:{postType:t.type,postId:t.id}}))}),[t,i,e,o,a,r]);return(0,c.useEffect)((()=>{u()}),[]),(0,j.jsx)(j.Fragment,{})})),Jm=(0,c.memo)((e=>{const{firstPost:t}=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e("core"),o=t("postType","post",{per_page:1});return{firstPost:h().get(o,"0")}}),[]);return(0,j.jsx)($m,{description:(0,C.__)("This content can be imported only on the singe post template","kubio","kubio"),actionLabel:(0,C.__)("Switch to the singe post template","kubio"),firstPost:t,NoticeActionComponent:Qm,...e})})),eg=(0,c.memo)((e=>{const t=Ym(),o=Zm(`${t}?s=search-page`);return(0,j.jsx)($m,{description:(0,C.__)("This content can be imported only on the search template","kubio"),actionLabel:(0,C.__)("Switch to the search template","kubio"),templateSlug:"search",thirdPartyUrl:o,NoticeActionComponent:qm,...e})})),tg=(0,c.memo)((e=>{const t=Ym(),o=Zm(`${t}page-no-found`);return(0,j.jsx)($m,{description:(0,C.__)("This content can be imported only on the 404 template","kubio"),actionLabel:(0,C.__)("Switch to the 404 template","kubio"),templateSlug:"404",thirdPartyUrl:o,NoticeActionComponent:qm,...e})})),og=e=>{const{fseTemplateSlug:t,page:o}=(0,w.useSelect)((e=>{const{getPage:t=h().noop,getTemplateId:o=h().noop}=e("kubio/edit-site")||{},n=t(),i=o()||"";return{page:n,fseTemplateSlug:h().get(i.split("//"),"[1]")}}),[]),n=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[null==o?void 0:o.path],i=t||n,r=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:o,slug:n}=t;let i=!1;const r="template"===o&&(null==Wu?void 0:Wu.includes(n)),a=Wu.includes(e);return i=r&&!a,{type:"blog",noticeText:Xm,isDisabled:i,isCurrentPageTemplate:a,isSelectedDemoPart:r}})({templateSlug:i,selectedDemoPart:e}),a=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:o,slug:n}=t;let i=!1;const r="template"===o&&(null==Uu?void 0:Uu.includes(n)),a=Uu.includes(e);return i=r&&!a,{type:"single",noticeText:Jm,isDisabled:i,isCurrentPageTemplate:a,isSelectedDemoPart:r}})({templateSlug:i,selectedDemoPart:e}),s=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:o,slug:n}=t;let i=!1;const r="search"===e,a="template"===o&&"search"===n;return i=a&&!r,{type:"search",noticeText:eg,isDisabled:i,isCurrentPageTemplate:r,isSelectedDemoPart:a}})({templateSlug:i,selectedDemoPart:e}),l=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:o,slug:n}=t;let i=!1;const r="404"===e,a="template"===o&&"404"===n;return i=a&&!r,{type:"404",noticeText:tg,isDisabled:i,isCurrentPageTemplate:r,isSelectedDemoPart:a}})({templateSlug:i,selectedDemoPart:e});return[a,r,s,l]},ng=(0,c.memo)((({onAction:e})=>{const{saveEntityRecord:t,editEntityRecord:o,saveEditedEntityRecord:n}=(0,w.useDispatch)("core"),{setPage:i}=(0,w.useDispatch)(m.STORE_KEY),r=(0,c.useRef)(!1),{createErrorNotice:a}=(0,s.useKubioNotices)(),l=(0,f.useSetGlobalSessionProp)("ready"),{onClose:u}=Ju(),d=(0,c.useCallback)((async()=>{if(r.current)return;r.current=!0,l(!1),e(),u();const s={title:"Kubio page",status:"publish"};try{var c;const e=await t("postType","page",s);if(!e)return;const r=h().capitalize(null==e||null===(c=e.slug)||void 0===c?void 0:c.replaceAll("-"," "));await o("postType","page",e.id,{title:r}),await n("postType","page",e.id),i({type:e.type,slug:e.slug,path:(0,Lo.getPathAndQueryString)(e.link),context:{postType:e.type,postId:e.id}})}catch(e){a((0,C.__)("Could not create new page","kubio"))}}),[i,e,u,t,a,o]);return(0,c.useEffect)((()=>{d()}),[]),(0,j.jsx)(j.Fragment,{})})),ig=(0,c.memo)((e=>(0,j.jsx)($m,{description:(0,C.__)("This content can be imported only on a page","kubio"),actionLabel:(0,C.__)("Create new page","kubio"),NoticeActionComponent:ng,...e}))),rg=(0,c.memo)((({onAction:e=h().noop,...t})=>{const{text:o,isDisabled:n}=Gm();return(0,j.jsx)("div",{className:"kubio-predefined-layouts__disabled-notice__outer",children:o&&n&&(0,j.jsx)("div",{className:"kubio-predefined-layouts__disabled-notice",children:(0,j.jsx)(o,{onAction:e,...t})})})})),ag=(0,c.memo)((()=>(0,j.jsx)(Mm.Sidebar.Footer,{children:(0,j.jsx)(rg,{})}))),sg=(0,c.memo)((()=>(0,j.jsxs)("div",{className:"kubio-predefined-layouts__preview-page__sidebar__content--is-loading",children:[(0,j.jsx)(k.Icon,{icon:Ge.KubioLoader}),";"]}))),lg=(0,c.memo)((({currentDemoSite:e,selectedDemoPart:t})=>{const o=null==e?void 0:e.preview,n=(0,c.useRef)(),i=(0,c.useMemo)((()=>{const{pagePreviewUrl:e}=t||{};return e||o}),[o,t]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("a",{ref:n,href:i,target:"_blank",className:"kubio-predefined-layouts__preview-page__sidebar__preview-button",rel:"noreferrer",children:(0,j.jsx)(k.Icon,{icon:Ge.PreviewIcon})}),(0,j.jsx)(ct.ModalTooltip,{anchorRef:n,children:(0,C.__)("Live Preview","kubio")})]})})),cg=(0,c.memo)((({selectedDemoPart:e,currentDemoSite:t,demoPartsIsLoaded:o,currentDemoParts:n})=>{const[i,r]=(0,c.useState)(!1),{uniqueId:a}=e||{},s=(0,j.jsx)(lg,{currentDemoSite:t,selectedDemoPart:e});return(0,c.useEffect)((()=>{e&&!i&&(r(!0),function(e,t){if(!Array.isArray(e)||!t)return;const o=new Image;o.onload=()=>{e.filter((e=>e.uniqueId!==(null==t?void 0:t.uniqueId))).forEach((e=>{(new Image).src=e.screenshotFull}))},o.src=null==t?void 0:t.screenshotFull}(n,e))}),[e]),(0,j.jsxs)(Mm.Sidebar.Content,{children:[o&&(0,j.jsx)(vd,{showFull:!0,showAnimationAtLoad:!0,labelSlot:s,showFavorite:!1,addUniquePreviewAttribute:!1,...e},a),!o&&(0,j.jsx)(sg,{})]})})),ug=(0,c.memo)((()=>{const{selectedDemoPart:e,demoPartsIsLoaded:t,currentDemoParts:o}=Lu(),{currentDemoSite:n,onSelectDemo:i}=ef();return(0,j.jsxs)(Mm.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar",children:[(0,j.jsx)(Bm,{onSelectDemo:i}),(0,j.jsx)(cg,{selectedDemoPart:e,currentDemoSite:n,demoPartsIsLoaded:t,currentDemoParts:o}),(0,j.jsx)(ag,{})]})})),dg=(0,c.memo)((({colorPalette:e})=>{const t=(0,c.useMemo)((()=>e.map((({color:e})=>`rgb(${e.join(",")}`))),[e]);return(0,j.jsx)("td",{className:"kubio-predefined-layouts__color-palette-previewer__list",children:t.map(((e,t)=>(0,j.jsx)(ct.ColorIndicator,{value:e},t)))})})),pg=(0,c.memo)((({colorPalette:e})=>(0,j.jsxs)("tr",{className:"kubio-predefined-layouts__color-palette-previewer",children:[(0,j.jsx)("td",{children:(0,C.__)("Starter site colors","kubio")}),e&&(0,j.jsx)(dg,{colorPalette:e})]}))),hg=["h1","h2","h3","h4","h5","h6","p"],mg=[{label:(0,C.__)("Heading 1","kubio"),holder:"h1"},{label:(0,C.__)("Heading 2","kubio"),holder:"h2"},{label:(0,C.__)("Heading 3","kubio"),holder:"h3"},{label:(0,C.__)("Heading 4","kubio"),holder:"h4"},{label:(0,C.__)("Heading 5","kubio"),holder:"h5"},{label:(0,C.__)("Heading 6","kubio"),holder:"h6"},{label:(0,C.__)("Paragraph","kubio"),holder:"p"}],gg=(0,c.memo)((({typography:e})=>{const t=(0,c.useMemo)((()=>{const t=h().get(e,"holders",{});return h().pick(t,hg)}),[e]),o=(0,c.useCallback)((e=>{const o=h().get(t,e);if(!o)return{};const n=ca.typographyConfig.getTypographyCss(o,null,!1);return h().omit(n,"color")}),[t]);return e?(0,j.jsx)("td",{className:"kubio-predefined-layouts__typography-previewer__text-container",children:mg.map((({label:e,holder:n})=>{const i=o(n);return(0,j.jsx)(fg,{style:i,holder:n,styleByHolder:t,children:e},n)}))}):(0,j.jsx)(j.Fragment,{})})),fg=(0,c.memo)((({children:e,styleByHolder:t,holder:o,style:n})=>{const i=(0,c.useRef)(),r=(0,c.useMemo)((()=>{const e=h().get(t,o),{family:n,weight:i,size:r}=e;return`${n}, ${i}, ${null==r?void 0:r.value}${null==r?void 0:r.unit}`}),[t,o]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"kubio-predefined-layouts__typography-previewer__text",style:n,ref:i,children:e}),(0,j.jsx)("span",{className:"kubio-predefined-layouts__typography-previewer__text-separator",children:", "}),(0,j.jsx)(ct.ModalTooltip,{anchorRef:i,children:r})]})})),bg=(0,c.memo)((({typography:e})=>(0,j.jsxs)("tr",{className:"kubio-predefined-layouts__typography-previewer",children:[(0,j.jsx)("td",{children:(0,C.__)("Starter site typography","kubio")}),(0,j.jsx)(gg,{typography:e})]}))),_g=(0,c.memo)((({isOpen:e})=>{const[t,o]=(0,c.useState)(),{selectedDemoPart:n}=Lu();(0,c.useEffect)((()=>{!async function(){const e=await async function(e){const t=["demoPartsContentById","page"===(null==e?void 0:e.type)?"pages":"templates",null==e?void 0:e.id],o=h().get(wu,t);return Iu(null==o?void 0:o.globalDataId)}(n);e&&o(e)}()}),[n]);const i=(0,c.useMemo)((()=>null==t?void 0:t.colors),[t]),r=(0,c.useMemo)((()=>h().get(t,"globalStyle.style.descendants.body.typography")),[t]),a=(0,c.useRef)(),s=(0,c.useMemo)((()=>{var t;return e?{height:`${null==a||null===(t=a.current)||void 0===t?void 0:t.offsetHeight}px`}:{height:0}}),[e]),l=(0,c.useMemo)((()=>{const e=[];return h().get(t,["fonts","google"],[]).forEach((({family:t})=>{e.includes(t)||e.push(t)})),e}),[t]);return(0,j.jsxs)(vg.Fill,{children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings__control",style:s,children:(0,j.jsx)("div",{ref:a,className:"kubio-predefined-layouts__preview-page__advanced-settings__control__inner",children:(0,j.jsx)("table",{className:"kubio-predefined-layouts__preview-page__advanced-settings__global-data",children:(0,j.jsxs)("tbody",{children:[(0,j.jsx)(pg,{colorPalette:i}),(0,j.jsx)(bg,{typography:r})]})})})}),(0,j.jsx)(gd,{fontsToLoad:l})]})})),vg=(0,k.createSlotFill)("PredefinedLayoutsAdvancedSettings"),yg=(0,c.memo)((()=>{const{shouldConvertGlobalColors:e,setShouldConvertGlobalColors:t}=nd();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings",children:(0,j.jsx)(ct.ToggleControl,{label:(0,C.__)("Replace global styles","kubio"),value:e,onChange:t})}),(0,j.jsx)(_g,{isOpen:e})]})})),kg=(0,c.memo)((({value:e={},onSelect:t,selected:o})=>{const{screenshot:n,isPro:i,label:r,uniqueId:a,type:s,id:l}=e,u=a===(null==o?void 0:o.uniqueId),d=(0,c.useMemo)((()=>({favoriteType:`demo-${s}`,favoriteId:l})),[s,l]);return(0,j.jsx)("div",{className:Z()("kubio-predefined-layouts__preview-page__item",{"kubio-predefined-layouts__preview-page__item--selected":u}),onClick:()=>{t(e)},children:(0,j.jsx)(vd,{isPro:i,screenshot:n,label:r,uniqueId:a,...d})})})),xg=(0,c.memo)((({list:e,value:t,onSelect:o})=>(0,j.jsx)(_d,{list:e,children:e=>(0,j.jsx)(kg,{value:e,selected:t,onSelect:o},e.slug)}))),Sg=e=>{(0,c.useEffect)((()=>{if(!e)return;const t=document.querySelector(`[data-unique-id="${null==e?void 0:e.uniqueId}"]`);t&&(function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(t)||t.scrollIntoView({block:"center"}))}),[e])},wg=(0,c.memo)((()=>{const{currentDemoParts:e,setSelectedDemoPart:t,selectedDemoPart:o}=Lu();return Sg(o),(0,j.jsx)(xg,{list:e,onSelect:t,value:o})})),Cg=(0,c.memo)((()=>{const{currentDemoSite:e,onSelectDemo:t}=ef(),{currentDemoParts:o,relatedDemoParts:n,setSelectedDemoPart:i,selectedDemoPart:r}=Lu(),a=!!n,s=null==e?void 0:e.relatedDemoSite;Sg(r);const l=(0,c.useMemo)((()=>null!=e&&e.isPro?e:s),[e,s]),u=(0,c.useMemo)((()=>e===l?s:e),[e,l]),d=(0,c.useMemo)((()=>e.isPro?o:e.isPro||n?!e.isPro&&null!=e&&e.relatedDemoSite&&n?n:void 0:o),[o,e,n]),p=(0,c.useMemo)((()=>a&&o&&n?d===o?n:o:null),[a,d]),h=(0,c.useMemo)((()=>o===d),[d,o]),m=!h,g=(0,c.useCallback)((e=>{h?i(e):t(null==l?void 0:l.slug,e)}),[i,h,l]),f=(0,c.useCallback)((e=>{m?i(e):t(null==u?void 0:u.slug,e)}),[i,m,u]);return n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(xd,{label:(0,C.__)("FREE","kubio")}),(0,j.jsx)(xg,{list:p,onSelect:f,value:r}),(0,j.jsx)(xd,{label:(0,C.__)("PRO","kubio"),className:"kubio-predefined-layouts__free-pro-separator--second"}),(0,j.jsx)(xg,{list:d,onSelect:g,value:r})]}):(0,j.jsx)(j.Fragment,{})})),Ig=(0,c.memo)((()=>{const{currentDemoSite:e}=ef(),t=null==e?void 0:e.label,o=(0,c.useMemo)((()=>!(null==e||!e.relatedDemoSite)),[e])?Cg:wg;return(0,j.jsxs)(Mm.Page.Content,{children:[(0,j.jsx)(Mm.Page.Content.Title,{children:(0,j.jsxs)("div",{className:"kubio-predefined-layouts__preview-page__content__title",children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsx)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name",children:t}),(0,j.jsx)(yg,{})]}),(0,j.jsx)(vg.Slot,{})]})}),(0,j.jsx)(o,{})]})})),jg="content",Tg="fullPage",Pg="fullStarterSite",Eg=[{label:(0,C.__)("Content","kubio"),value:jg,description:(0,C.__)("The selected starter site content will be added after your existing sections","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/content.png"},{label:(0,C.__)("Full page","kubio"),value:Tg,description:(0,C.__)("Your header, content and footer will be all replaced with the ones from the selected page","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+page.png"},{label:(0,C.__)("Full starter site","kubio"),value:Pg,description:(0,C.__)("All content will be replaced with the selected full starter site","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+site.png"}],Rg=(0,c.memo)((({value:e,label:t,description:o,image:n,isActive:i,onClick:r,isDisabled:a=!1,isFreeOnPro:s=!1,urlArgs:l})=>{const u=(0,c.useMemo)((()=>[{label:t,value:e}]),[t,e]),d=(0,c.useMemo)((()=>i?e:null),[i,e]),p=(0,c.useCallback)((()=>{a||r()}),[r,a]),h=(0,c.useMemo)((()=>s?Fe.ProItem:Ag),[s]),m=(0,c.useMemo)((()=>s?{tag:Ag,urlArgs:{urlArgs:l}}:{}),[s]);return(0,j.jsxs)(h,{className:Z()("kubio-predefined-layouts__preview-page__import-popup__card",{"kubio-predefined-layouts__preview-page__import-popup__card--active":i,"kubio-predefined-layouts__preview-page__import-popup__card--disabled":a}),onClick:p,...m,children:[(0,j.jsx)("img",{className:"kubio-predefined-layouts__preview-page__import-popup__card__image",src:n}),(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__label",children:(0,j.jsx)(k.RadioControl,{options:u,selected:d})}),(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__description",children:o}),a&&(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__disabled-overlay"})]})})),Ag=(0,c.memo)((0,c.forwardRef)((({children:e,...t},o)=>(0,j.jsx)("div",{...t,ref:o,children:e})))),Og=(0,c.memo)((({onClose:e,onImportContent:t,onImportFullPage:o,onImportStarterSite:n,isFreeBuild:i,currentTemplateIsClassic:r,currentDemoSite:a})=>{const s=(0,c.useMemo)((()=>r?Tg:jg),[r]),[l,u]=(0,c.useState)(s),d=(0,c.useCallback)((e=>{e!==l&&u(e)}),[l,u]),p=(0,c.useMemo)((()=>Eg.map((e=>{const t={};return e.value===Tg&&i&&!r&&(t.isFreeOnPro=!0,t.urlArgs={source:"templates_gallery",content:null==a?void 0:a.label}),e.value===jg&&r&&(t.isDisabled=!0),{...e,...t}}))),[r,i,a]);return(0,j.jsx)(Ph,{title:(0,j.jsx)(Ng,{}),onClose:e,children:(0,j.jsxs)("div",{className:"kubio-predefined-layouts__preview-page__import-popup",children:[(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__list",children:p.map((e=>(0,j.jsx)(Rg,{...e,isActive:l===e.value,onClick:()=>d(e.value)},e.value)))}),(0,j.jsx)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__footer d-flex justify-content-end",children:(0,j.jsx)(k.Button,{isPrimary:!0,onClick:()=>{switch(l){case jg:return void t();case Tg:return void o();case Pg:e(),n()}},children:(0,C.__)("Import selection","kubio")})})]})})})),Ng=(0,c.memo)((()=>(0,j.jsx)("span",{style:{fontWeight:"700"},children:(0,C.__)("What to import:","kubio")}))),{memo:Dg}=o(9307),Mg=Dg((({onClose:e})=>{const[t,o]=(0,c.useState)(!1),n=(0,c.useCallback)((()=>{o(!0)}),[o]),i=(0,c.useMemo)((()=>{if(t)return"invisible"}),[t]);return(0,j.jsx)(Ph,{title:(0,j.jsx)("div",{children:(0,C.__)("This content can't be imported here","kubio")}),onClose:e,className:i,children:(0,j.jsx)(rg,{onAction:e,onClose:e,onShowAction:n,fromPopup:!0})})})),Bg=(0,c.memo)((()=>{const{selectedDemoPart:e}=Lu(),[t,o]=(0,c.useState)(!1),[n,i]=(0,c.useState)(!1),r=(0,c.useCallback)((()=>{o(!1)}),[o]),{currentDemoSite:a,setShowDemoSiteImportPage:s}=ef(),{importDemoPart:l,isImporting:u,whatToImport:d,setWhatToImport:p}=nd(),{isDisabled:m}=Gm(),{type:g,isPro:f}=e||{},{isClassicTemplate:b}=(0,w.useSelect)((e=>{const{getTemplateId:t=h().noop}=e("kubio/edit-site")||{};return{isClassicTemplate:!t()}})),_="template"===g&&b,v=(0,c.useMemo)((()=>!0),[]),y=v&&f,x=y?Fe.ProItem:k.Button,S=v&&(null==a?void 0:a.isPro),I=S?Fe.ProItem:k.Button;let T={};y&&(T={urlArgs:{source:"templates_gallery",content:null==a?void 0:a.label}});let P={};S&&(P={urlArgs:{source:"templates_gallery",content:null==a?void 0:a.label}});const E=(0,c.useCallback)((()=>{s(!0)}),[s]),R=(0,c.useCallback)((()=>{p(zu),setTimeout((()=>{l()}),0)}),[p,l]),A=(0,c.useCallback)((()=>{p(Fu),setTimeout((()=>{l()}),0)}),[p,l]),O=(0,c.useCallback)((()=>{m?i(!0):o(!0)}),[m,o,i]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Mm.Page.Footer,{children:(0,j.jsx)("div",{className:Z()("kubio-predefined-layouts__preview-page__footer d-flex w-100 align-items-center justify-content-end"),children:(0,j.jsxs)("div",{className:"kubio-predefined-layouts__preview-page__footer__buttons",children:[(0,j.jsx)(Fe.ProModalTextContext.Provider,{value:(0,C.__)("This page is only available in the PRO version of Kubio. Please select a free page to import or upgrade to the PRO version.","kubio"),children:(0,j.jsx)(x,{tag:k.Button,isPrimary:!0,onClick:O,isBusy:u,...T,propPopoverClass:"kubio-pro-popover-large",children:(0,C.__)("Import","kubio")})}),(0,j.jsx)(Fe.ProModalTextContext.Provider,{value:(0,C.__)("This starter site is only available in the PRO version of Kubio. Please select a free starter site to import or upgrade to the PRO version.","kubio"),children:(0,j.jsx)(I,{tag:k.Button,isSecondary:!0,onClick:E,...P,children:(0,C.__)("Import full starter site","kubio")})})]})})}),t&&(0,j.jsx)(Og,{currentTemplateIsClassic:_,currentDemoSite:a,selectedDemoPart:e,isFreeBuild:v,onClose:r,onImportContent:R,onImportFullPage:A,onImportStarterSite:E}),n&&(0,j.jsx)(Mg,{onClose:()=>i(!1)})]})})),Lg=(0,c.memo)((e=>{const{currentDemoParts:t,demoPartsIsLoaded:o}=Lu(),{demoPartThatIsImporting:n}=nd();return(0,j.jsxs)(j.Fragment,{children:[n&&(0,j.jsx)(pd,{}),(0,j.jsx)(Mm,{...e,isLoading:!o,className:"kubio-predefined-layouts__preview-page",items:t,sidebar:(0,j.jsx)(ug,{}),pageContent:(0,j.jsx)(Ig,{}),pageFooter:(0,j.jsx)(Bg,{})})]})})),zg=(0,c.memo)((e=>(0,j.jsx)(Bu,{children:(0,j.jsx)(od,{children:(0,j.jsx)(Fm,{children:(0,j.jsx)(Lg,{...e})})})}))),Fg=(0,c.createContext)({list:[],categories:null,filterFunction:null}),Gg=(0,c.createContext)({list:[]}),Hg=(0,c.createContext)({searchString:"",setSearchString:null}),Ug=(0,c.createContext)({categoriesList:[],selectedCategory:null,setSelectedCategory:null}),Wg=[],Vg=(0,c.memo)((({children:e})=>{const{list:t,categories:o=Wg,filterFunction:n=null}=Kg(),i=(0,w.useSelect)((e=>{const{getExcludedSectionCategories:t}=e("kubio/edit-site");return t()})),{selectedCategory:r,setSelectedCategory:a}=Yg(),{searchString:s,setSearchString:l}=qg(),{initialParams:u,activePage:d}=Ju(),p="all",m=h().get(u,[d,"category"],p);let g,f,b,_;if(a)g=r,f=a;else{const[e,t]=(0,c.useState)(m);g=e,f=t}if(l)b=s,_=l;else{const[e,t]=(0,c.useState)("");b=e,_=t}const v=(0,c.useMemo)((()=>{if(h().isEmpty(o))return{};const e={};return o.forEach((({label:t,value:o})=>{e[o]=t})),e}),[o]),y=(0,c.useMemo)((()=>n&&"function"==typeof n?n(t,b):Zg(t,b)),[b,t,n]),{resultedCategories:k,nrOfItemsPerCategory:x}=(0,c.useMemo)((()=>{let e=[{value:p,label:"All"}];const t={};if(y.forEach((o=>{const n=(null==o?void 0:o.categories)||[];n.forEach((o=>{if(i.includes(o))return;const r=e.map((e=>e.value));if(n.forEach((e=>{t[e]?t[e]++:t[e]=1})),r.includes(o))return;let a;h().get(v,o)?a=h().get(v,o):(a=h().startCase(o.replace("-"," & ")).trim(),a=a.replace(" "," & "));const s={value:o,label:a};e.push(s)}))})),t[p]=Object.keys(t).reduce(((e,o)=>e+t[o]),0),!h().isEmpty(o)){const t=o.map((({value:e})=>e));e=h().orderBy(e,(e=>h().indexOf(t,e.value)))}return{resultedCategories:e,nrOfItemsPerCategory:t}}),[y,o,i,v]),S=(0,c.useMemo)((()=>y.filter((e=>{const t=(null==e?void 0:e.categories)||[];return!t.some((e=>i.includes(e)))&&(g===p||t.includes(g))}))),[g,p,y,i]),C=(0,c.useMemo)((()=>({searchString:b,setSearchString:_})),[b,_]),I=(0,c.useMemo)((()=>({categoriesList:k,selectedCategory:g,setSelectedCategory:f,nrOfItemsPerCategory:x})),[k,g,f,x]),T=(0,c.useMemo)((()=>({list:S})),[S]);return(0,c.useEffect)((()=>{m&&(k.find((e=>e.value===m))||f(p))}),[]),(0,j.jsx)(Gg.Provider,{value:T,children:(0,j.jsx)(Hg.Provider,{value:C,children:(0,j.jsx)(Ug.Provider,{value:I,children:e})})})})),Kg=()=>(0,c.useContext)(Fg),$g=()=>(0,c.useContext)(Gg),qg=()=>(0,c.useContext)(Hg),Yg=()=>(0,c.useContext)(Ug),Zg=(e,t)=>{if(!t)return e;const o=t.toLowerCase();return e.filter((({label:e})=>e.toLowerCase().includes(o)))},Xg={selectedDemoSlug:null,onSelectDemo:h().noop,setSelectedDemoSlug:h().noop,currentDemoSite:null,selectedDemoPartId:null,setSelectedDemoPartId:h().noop},Qg=(0,c.createContext)(Xg),Jg=({children:e})=>{const[t,o]=(0,c.useState)(),[n,i]=(0,c.useState)([]),[r,a]=(0,c.useState)({}),[s,l]=(0,c.useState)(!1),[u,d]=(0,c.useState)(),[p,h]=(0,c.useState)(!1);(0,c.useEffect)((()=>{!async function(){const e=await Eu();i(e)}()}),[]),(0,c.useEffect)((()=>{!async function(){const e=await Tu();a(e),l(!0)}()}),[]);const m=(0,c.useCallback)(((e,t)=>{d(t),o(e)}),[o,d]),g=(0,c.useMemo)((()=>n.find((e=>e.slug===t))),[t,n]),f=(0,c.useMemo)((()=>({rawDemoList:n,selectedDemoSlug:t,onSelectDemo:m,setSelectedDemoSlug:o,currentDemoSite:g,initialDemoPart:u,setInitialDemoPart:d,demosPartsPerSlug:r,demoPartsIsLoaded:s,showDemoSiteImportPage:p,setShowDemoSiteImportPage:h})),[n,t,m,o,g,u,d,r,s,p,h]);return(0,j.jsx)(Qg.Provider,{value:f,children:e})},ef=()=>(0,c.useContext)(Qg),tf=(0,c.createContext)({favoritesDataByType:{},onAddToFavorites:h().noop}),of="kubio_favorites";let nf=!1;const rf=(0,c.memo)((({children:e})=>{const[t,o]=(0,c.useState)({}),{favoritesEntities:n}=(0,w.useSelect)((e=>{const{getEntityRecords:t,getEditedEntityRecord:o}=e("core");return{favoritesEntities:(t("postType",of,{per_page:-1})||[]).map((e=>o("postType",of,e.id)))}}),[]),{saveEntityRecord:i,editEntityRecord:r}=(0,w.useDispatch)("core"),a=(0,c.useRef)(!1),s=(0,c.useMemo)((()=>h().get(n,"0")),[n]),l=(0,c.useMemo)((()=>{try{const e=h().get(s,"content","{}");return JSON.parse(e)}catch(e){return{}}}),[s]);(0,c.useEffect)((()=>{h().isEmpty(t)&&!h().isEqual(l,t)&&o(l)}),[l]);const u=(0,c.useCallback)((async()=>{const e={title:"Favorites data",status:"publish",content:JSON.stringify({})};return await i("postType",of,e)}),[i]),d=(0,c.useCallback)((async(e,n,i)=>{var l,c;const d=h().cloneDeep(t);if(Array.isArray(n)||(n=[n]),n.forEach((t=>{!1===h().get(d,e,!1)&&h().set(d,e,{}),i?h().set(d,`${e}.${t}`,!0):h().unset(d,`${e}.${t}`)})),o(d),a.current)return;a.current=!0;let p=s;if(h().isEmpty(p)&&!nf&&(nf=!0,p=await u()),null===(l=p)||void 0===l||!l.id)return void(a.current=!1);const m={content:JSON.stringify(d)};r("postType",of,null===(c=p)||void 0===c?void 0:c.id,m),a.current=!1}),[u,a,s,t]),p=(0,c.useMemo)((()=>({favoritesDataByType:t,onAddToFavorites:d})),[t]);return(0,j.jsx)(tf.Provider,{value:p,children:e})})),af=()=>(0,c.useContext)(tf),sf=(0,c.createContext)({favoritesDataByType:null}),lf=(0,c.memo)((({children:e})=>{const{favoritesDataByType:t}=af(),o=(0,c.useMemo)((()=>({favoritesDataByType:t})),[t]);return(0,j.jsx)(sf.Provider,{value:o,children:e})})),cf=()=>(0,c.useContext)(sf),uf=(0,c.memo)((({buttonIconOnly:e=!1})=>{const[t,o]=(0,c.useState)(!1),[n,i]=(0,c.useState)({}),r=(0,c.useRef)(),a=(0,c.useCallback)((()=>{i({}),o(!t)}),[t,o]),{createErrorNotice:l}=(0,s.useKubioNotices)(),u=(0,c.useCallback)((e=>{"blur"!==(null==e?void 0:e.type)&&o(!1)}),[o]),d=(0,c.useCallback)((e=>{const t=(null==e?void 0:e.detail)||{};i(t),o(!0)}),[o]);(0,c.useEffect)((()=>(document.body.addEventListener("openTemplateGallery",d),()=>{document.body.removeEventListener("openTemplateGallery",d)})),[d]);const p=(0,c.useCallback)((()=>{l((0,C.__)("Something went wrong","kubio"))}),[l]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{ref:r,onClick:a,isPrimary:!0,icon:Ge.PredesignedLayoutsIcon,className:Z()("kubio-predefined-layouts__button",{"kubio-predefined-layouts__button--icon-only":e}),label:(0,C.__)("Templates Gallery","kubio"),showTooltip:!0,children:e?null:(0,C.__)("Templates Gallery","kubio")}),(0,j.jsx)(zl.ErrorBoundary,{FallbackComponent:df,onReset:()=>{o(!1)},onError:p,children:(0,j.jsx)(rf,{children:t&&(0,j.jsx)(k.Modal,{className:"kubio-predefined-layouts__modal",onRequestClose:u,children:(0,j.jsx)(Qu,{onClose:u,initialParams:n,children:(0,j.jsx)(wm,{})})})})})]})})),df=({error:e,resetErrorBoundary:t})=>((0,c.useEffect)((()=>{t()}),[]),(0,j.jsx)(j.Fragment,{})),pf=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})}),hf=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})}),mf=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})});var gf=o(1874),ff=o.n(gf);let bf=null,_f=Math.random();function vf(e){let t=ff().replace("{message}",(0,C.__)("Generating preview…","kubio"));t=t.replace("{svg_image}",(0,c.renderToString)(Ge.KubioLoader)),e.write(t),e.title=(0,C.__)("Generating preview…","kubio"),e.close()}function yf(){bf=window.open("",(0,C.__)("Generating preview…","kubio")+_f++)}const kf="preview",xf=[{kind:"kubio",name:"menu"},{kind:"root",name:"site"}];var Sf=o(6255),wf=o.n(Sf);const Cf=[{title:(0,C.__)("Desktop","kubio"),name:"Desktop",icon:pf},{title:(0,C.__)("Tablet","kubio"),name:"Tablet",icon:hf},{title:(0,C.__)("Mobile","kubio"),name:"Mobile",icon:mf}],If=({deviceType:e,setDeviceType:t})=>{const{isDirty:o}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{isDirty:t().length>0}})),n=(()=>{const{getDirtyEntityRecords:e,getAutosaves:t,getEntityRecordEdits:o,getEditedEntityRecord:n}=(0,w.useSelect)((e=>({getDirtyEntityRecords:e("core").__experimentalGetDirtyEntityRecords,getAutosaves:e("core").getAutosaves,getEntityRecordEdits:e("core").getEntityRecordEdits,getEditedEntityRecord:e("core").getEditedEntityRecord}))),{saveEditedEntityRecord:i}=(0,w.useDispatch)("core");return async(r,a={})=>{var s;const{autosaveType:l,statusForSave:c}=h().merge({autosaveType:kf,statusForSave:"autosave"},a);let d=[];d=r||e();const m=d.filter((({kind:e,name:t})=>!(0,p.find)(xf,{kind:e,name:t}))),g=d.filter((({kind:e,name:t,key:o})=>!(0,p.find)(m,{kind:e,name:t,key:o}))),f=m.map((({kind:e,name:t,key:o})=>{const r=n(e,t,o);let a;if(null!=r&&r.blocks)a=(0,st.serialize)(r.blocks);else{if("string"!=typeof(null==r?void 0:r.content))return null;a=null==r?void 0:r.content}return-1!==["wp_template","wp_template_part","page","post","product"].indexOf(r.type)?((e,t="publish",{fieldsToOmit:o=["blocks"],type:n=kf}={})=>A()({path:"kubio/v1/save-entity",method:"POST",data:{postData:(0,p.omit)({...e,id:e.id||e.wp_id},["selectionStart","selectionEnd"].concat(o)),type:n,status:t}}))({...r,content:a},c,{type:l}):i(e,t,o,{isAutosave:!0})})),b=g.map((({kind:e,name:t,key:n})=>({kind:e,name:t,key:n,...o(e,t,n)}))),_=null===(s=e())||void 0===s?void 0:s.filter((({name:e})=>"page"===e||"post"===e)).reduce(((e,{key:t,name:o,kind:i})=>{const r=n(i,o,t);return{...e,[t]:null==r?void 0:r.template}}),{});return Promise.all(f).then((e=>{const o=m.map((({name:o,key:n},i)=>e[i]?{id:e[i].ID||e[i].id,parent:e[i].post_parent||e[i].parent,data:e[i]}:(0,p.last)(t(o,n))));return Promise.all(o).then((e=>{const t=e.filter(Boolean).map((({id:e,parent:t})=>({id:e,parent:t})));return{updatesRecords:e.map((e=>null==e?void 0:e.data)),autosaves:t,customEntities:b,pageTemplatesMap:_,customData:(0,u.applyFilters)("kubio/custom-preview-data",{})}}))}))}})(),{saveChangeset:i}=(()=>{const[e,t]=(0,f.useGlobalSessionProp)("previewChangest",{}),o=(0,w.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSettings())||void 0===t?void 0:t.changeset_uuid}));(0,c.useEffect)((()=>{e.id||!o||e.isLoading||(t({...e,isLoading:!0}),A()({path:(0,Lo.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:o})}).then((e=>{e&&e.length&&t({...e[0],isLoading:!1})})))}),[e,t,o]);const n=(0,c.useCallback)((()=>{var t,o;e.id&&window.navigator.sendBeacon&&window.navigator.sendBeacon(`${window.ajaxurl}?action=kubio-delete-changeset&uuid=${e.slug}&_wpnonce=${null===(t=top)||void 0===t||null===(o=t.kubioUtilsData)||void 0===o?void 0:o.kubio_ajax_nonce}`)}),[e.id]);return(0,c.useEffect)((()=>(window.addEventListener("beforeunload",n),()=>window.removeEventListener("beforeunload",n))),[e.id]),{saveChangeset:async n=>{let i=e;return i.id||(i=await A()({path:(0,Lo.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:o})}),t(i)),await A()({path:`/wp/v2/kubio/preview-changeset/${i.id}`,method:"POST",data:{...(0,p.pick)(e,["title","slug","type"]),content:JSON.stringify((0,p.omit)(n,"updatesRecords"))}}),o}}})(),{currentPageURL:r}=(0,w.useSelect)((e=>{const t=e(m.STORE_KEY).getPage(),o=h().get(t,"link"),n=h().get(t,"path"),i=o||n;return{currentPageURL:(null!=i?i:"").replace(/\/$/,"")}})),a=(0,w.useSelect)((e=>()=>{const{getSelectedBlockClientIds:t}=e(y.store),o=t();return o.length?o[0]:""})),{hideInsertionPoint:s}=(0,w.useDispatch)("core/block-editor"),l=e=>()=>{t(e),s()},d=(0,f.useBlocksOwnerDocument)();return(0,c.useEffect)((()=>{const t=(0,I.getPreviewElementByModelId)(a(),d);t&&e&&wf()(t)}),[e]),(0,j.jsxs)("div",{className:"kubio-preview-options",children:[Cf.map((({name:t,title:o,icon:n})=>(0,j.jsx)(k.Button,{icon:n,isPressed:t===e,label:o,onClick:l(t)},t))),""!==r&&(0,j.jsx)(k.Button,{onClick:async({})=>{const e=(()=>{bf&&!bf.closed||yf();try{vf(bf.document)}catch(e){yf(),vf(bf.document)}return setTimeout((function(){bf.focus()}),100),bf})();let t="saved";const a=`${Za().generate()}-${Za().generate()}`;if(o){const e=await n();t=await i(e)}e.location=(0,Lo.addQueryArgs)(r,{"kubio-preview":t,"kubio-random":a})},children:(0,C.__)("Preview","kubio")})]})},jf=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})}),Tf=window.wp.keycodes;function Pf(){const e=(0,w.useSelect)((e=>e("core").hasRedo())),{clearSelectedBlock:t}=(0,w.useDispatch)("core/block-editor"),{redo:o}=(0,w.useDispatch)("core");return(0,j.jsx)(k.Button,{icon:jf,label:(0,C.__)("Redo","kubio"),shortcut:Tf.displayShortcut.primaryShift("z"),"aria-disabled":!e,onClick:e?()=>{t(),o()}:void 0})}const Ef=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})});function Rf(){const e=(0,w.useSelect)((e=>e("core").hasUndo())),{undo:t}=(0,w.useDispatch)("core"),{clearSelectedBlock:o}=(0,w.useDispatch)("core/block-editor");return(0,j.jsx)(k.Button,{icon:Ef,label:(0,C.__)("Undo","kubio"),shortcut:Tf.displayShortcut.primary("z"),"aria-disabled":!e,onClick:e?()=>{o(),t()}:void 0})}function Af({openEntitiesSavedStates:e}){const{deviceType:t,isEditorSidebarOpened:o,shortcut:n,getBlockSelectionStart:i,isListViewOpen:r,listViewShortcut:a,isAICapabilityEnabled:l}=(0,w.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t,isFeatureActive:o,getEditedPostType:n,getEditedPostId:i,isInserterOpened:r,getTemplateId:a,getTemplatePartId:s,getEntity:l,getPage:c,getShowOnFront:u,isListViewOpened:d,isAICapabilityEnabled:p}=e(m.STORE_KEY),{getEntityRecord:h}=e("core"),{__experimentalGetTemplateInfo:g}=e("core/editor"),f=a(),b=s(),_=n(),v=h("postType",_,i());let y;var k;y="wp_template"===_?null!=v&&v.title?null==v||null===(k=v.title)||void 0===k?void 0:k.raw:g(v).title:null==v?void 0:v.slug;const{getShortcutRepresentation:x}=e("core/keyboard-shortcuts");return{isListViewOpen:d(),deviceType:t(),entityTitle:y,hasFixedToolbar:o("fixedToolbar"),template:v,templateType:_,isInserterOpen:r(),templateId:f,templatePartId:b,entity:l(),page:c(),showOnFront:u(),isEditorSidebarOpened:e(m.STORE_KEY).isEditorSidebarOpened(),shortcut:x("core/edit-post/toggle-sidebar"),getBlockSelectionStart:e("core/block-editor").getBlockSelectionStart,listViewShortcut:x("kubio/edit-site/toggle-list-view"),isAICapabilityEnabled:p()}}),[]),{__experimentalSetPreviewDeviceType:u,openSidebar:d,closeSidebar:_}=(0,w.useDispatch)(m.STORE_KEY),{hideInsertionPoint:v}=(0,w.useDispatch)("core/block-editor"),y=(0,c.useCallback)((e=>{v(),u(e)}),[]),S=(0,x.useViewportMatch)("medium"),T=o?()=>{_(),O(!1)}:()=>{d(i()?"block-inspector":"document"),O(!1)},P=(0,s.usePageTitle)(),{isNavigationOpened:E}=(0,w.useSelect)(m.STORE_KEY),{setIsNavigationPanelOpened:R,openNavigationPanelToMenu:A,setIsListViewOpened:O}=(0,w.useDispatch)(m.STORE_KEY),{uiVersion:N}=(0,g.useUIVersion)(),D=(0,c.useCallback)((()=>{O(!r)}),[O,r]);let M=!0;2===N&&(M=!1);const B=(0,f.useGetGlobalSessionProp)("ready",!1),L=(0,p.get)(window,["kubioUtilsData","enable_starter_sites"],!0),[z,F]=(0,c.useState)(!1),[,G]=Qa(),{isPage:H,isBlog:U,isWooPage:W}=(0,w.useSelect)((e=>{const{getPage:t=h().noop,getIsBlogPage:o=h().noop}=e("kubio/edit-site")||{},n=t();return{isPage:"page"===h().get(n,"context.postType"),isBlog:o(),isWooPage:e(m.STORE_KEY).getIsWooCommercePage()}}),[]),V=H&&!U&&!W,K=I.AI_IN_PRO?Fe.ProItem:k.Button;return(0,j.jsxs)("div",{className:"edit-site-header",children:[(0,j.jsx)("div",{className:"edit-site-header_start",children:(0,j.jsxs)("div",{className:"edit-site-header__toolbar",children:[S&&(0,j.jsxs)(j.Fragment,{children:[1===N&&(0,j.jsx)(Qe,{}),(0,j.jsx)(Rf,{}),(0,j.jsx)(Pf,{}),(0,j.jsx)(k.Button,{className:"edit-site-header-toolbar__list-view-toggle",icon:qa,isPressed:r/* translators: button label text should, if possible, be under 16 characters. */,label:(0,C.__)("List View","kubio"),onClick:D,shortcut:a}),B&&L&&(0,j.jsx)(uf,{buttonIconOnly:l}),V&&l&&(0,j.jsx)(k.Tooltip,{text:(0,C.__)("AI page generation","kubio"),children:(0,j.jsx)(K,{tag:k.Button,isProItem:I.AI_IN_PRO,urlArgs:{source:"AI",content:"generate-ai-page"},icon:Ge.KubioAI,className:"kubio-ai-button-in-header kubio-ai-button",onClick:()=>F(!0),children:(0,C.__)("Generate page","kubio")})}),z&&(0,j.jsx)(b.AIWizard,{onFinish:()=>{F(!1),G(!0)},onCancel:()=>F(!1),isRegenerate:!0})]}),!1]})}),(0,j.jsx)("div",{className:"edit-site-header_center",children:(0,j.jsx)("div",{className:"edit-site-document-actions",children:(0,j.jsx)("div",{className:"edit-site-document-actions__title-wrapper",children:(0,j.jsx)(k.Button,{className:"edit-site-document-actions__title",onClick:()=>{E()?R(!1):A(2===N?"kubio-content-area-postType-page":es)},isPressed:E(),iconPosition:"right",showTooltip:!0,label:E()?(0,C.__)("Close the site content panel","kubio"):(0,C.__)("Change page","kubio"),children:(0,j.jsxs)(k.Flex,{align:"center",justify:"center",children:[(0,j.jsx)(k.FlexItem,{className:"edit-site-document-entity-title",children:(0,j.jsx)("span",{className:"kubio-entity-title-text",dangerouslySetInnerHTML:{__html:(0,C.sprintf)(// translators: Editing current page
// translators: Editing current page
(0,C.__)("Editing: %s","kubio"),(0,C.sprintf)('<span class="kubio-entity-title-name">%s</span>',(0,I.fromHtmlEntities)(null!=P?P:(0,C.__)("Page","kubio"))))}})}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Icon,{icon:Ge.SwitchPages,size:22})})]})})})})}),(0,j.jsx)("div",{className:"edit-site-header_end",children:(0,j.jsxs)("div",{className:"edit-site-header__actions",children:[(0,j.jsx)(If,{deviceType:t,setDeviceType:y}),(0,j.jsx)(us,{openEntitiesSavedStates:e}),M&&(0,j.jsx)(k.Button,{icon:ut,label:(0,C.__)("Settings","kubio"),onClick:T,isPressed:o,"aria-expanded":o,className:"kubio-secondary-panel-toggler",shortcut:n}),(0,j.jsx)(Ee.Slot,{scope:"kubio/edit-site"}),(0,j.jsx)(Ll,{})]})})]})}function Of({openEntitiesSavedStates:e}){const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:o}=(0,w.useSelect)(S.store),{redo:n,undo:i}=(0,w.useDispatch)(S.store);return(0,Me.useShortcut)("kubio/edit-site/save",(n=>{n.preventDefault();const i=t(),r=!!i.length;!i.some((e=>o(e.kind,e.name,e.key)))&&r&&e()})),(0,Me.useShortcut)("kubio/edit-site/undo",(e=>{i(),e.preventDefault()})),(0,Me.useShortcut)("kubio/edit-site/redo",(e=>{n(),e.preventDefault()})),null}Of.Register=function(){const{registerShortcut:e}=(0,w.useDispatch)(Me.store);return(0,c.useEffect)((()=>{e({name:"kubio/edit-site/save",category:"global",description:(0,C.__)("Save your changes.","kubio"),keyCombination:{modifier:"primary",character:"s"}}),e({name:"kubio/edit-site/undo",category:"global",description:(0,C.__)("Undo your last changes.","kubio"),keyCombination:{modifier:"primary",character:"z"}}),e({name:"kubio/edit-site/redo",category:"global",description:(0,C.__)("Redo your last undo.","kubio"),keyCombination:{modifier:"primaryShift",character:"z"}}),e({name:"kubio/edit-site/toggle-list-view",category:"global",description:(0,C.__)("Open the block list view.","kubio"),keyCombination:{modifier:"access",character:"o"}})}),[e]),null};const Nf=Of,Df=({children:e,templateId:t,templateType:o,page:n})=>{const[i,r]=(0,c.useState)(!1),[a,s]=(0,c.useState)(!1),l=Fo(),[u,d]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{createSuccessNotice:p}=(0,w.useDispatch)("core/notices");(0,c.useEffect)((()=>{r(l)}),[l,t,o,n]);const h=(0,c.useCallback)((()=>{a||r(!1)}),[a]),m=(0,c.useCallback)((async()=>{s(!0);try{await Bo()}catch(e){}d(!0),p((0,C.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,C.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),r(!1)}),[p,d]);return(0,j.jsxs)(j.Fragment,{children:[i&&!u&&(0,j.jsxs)(k.Modal,{title:(0,C.__)("💫 Start with the Kubio blog!","kubio"),onRequestClose:h,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!a,children:[(0,j.jsxs)("p",{children:[(0,C.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,j.jsx)("br",{}),(0,C.__)("Would you like to use the Kubio blog templates? ","kubio")]}),(0,j.jsxs)(k.ButtonGroup,{className:"h-template-part-modal__button-group",children:[!a&&(0,j.jsx)(k.Button,{isLink:!0,onClick:h,children:(0,C.__)("Maybe later","kubio")}),(0,j.jsxs)(k.Button,{isPrimary:!0,isBusy:a,onClick:m,children:[!a&&(0,C.__)("Import Kubio blog","kubio"),a&&(0,C.__)("Importing Kubio blog…","kubio")]})]})]}),e]})},Mf="__experimentalMainDashboardButton",{Fill:Bf,Slot:Lf}=(0,k.createSlotFill)(Mf),zf=Bf;zf.Slot=({children:e})=>(0,s.useSlotHasFills)(Mf)?(0,j.jsx)(Lf,{bubblesVirtually:!0}):e;const Ff=zf,Gf=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"})}),Hf=({setIsModalVisible:e})=>{var t;const{saveEntityRecord:o}=(0,w.useDispatch)("core"),n=(0,f.useSetGlobalSessionProp)("ready"),[,i]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),[r,a]=(0,c.useState)(!0),{setPage:s,setIsNavigationPanelOpened:l}=(0,w.useDispatch)(Be),[d,p]=(0,c.useState)(null),[h,m]=(0,c.useState)(!1),[g,_]=(0,c.useState)(!1),[,v]=Qa(),y=(0,w.useSelect)((e=>e(Be).getAvailablePageTemplates().map((e=>e.value)).find((e=>(0,I.getBackendData)("installedViaFreshSite")?e.endsWith("full-width"):"full-width"===e))||"")),k=(0,c.useCallback)((()=>{d&&(s({type:d.type,slug:d.slug,path:(0,Lo.getPathAndQueryString)(d.link),context:{postType:d.type,postId:d.id}}),_(!1),l(!1),i(!1),(0,u.addAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted",(function(){(0,u.removeAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted"),v(!0)})),setTimeout((()=>n(!0)),5e3),e(!1))}),[d,s,l,i,e,v,n]);return(0,j.jsxs)(j.Fragment,{children:[r&&(0,j.jsx)(b.AIWizard,{onFinish:async({pageContext:e})=>{_(!0),a(!1);const{title:t}=e,n=await o("postType","page",{title:t,status:"publish",template:y,meta:{saved_in_kubio:!0},kubio_ai_page_context:e});n&&(_(!1),m(!0),p(n))},onCancel:()=>e(!1),checkPageType:!1,isNewPageWizard:!0}),g&&(0,j.jsx)(Rs,{message:(0,C.__)("Creating new page…","kubio"),withFooter:!1}),h&&(0,j.jsx)(Um,{onComplete:k,closeModal:()=>m(!1),entityName:null==d||null===(t=d.title)||void 0===t?void 0:t.rendered})]})},Uf=({onNewAiPage:e,onNewKubioPage:t,showButton:o=!0,initialModalIsVisible:n=!1,title:i=(0,C.__)("How would you like to create your new page?","kubio"),description:r=(0,C.__)("Choose one of the two methods below for creating your new page.","kubio"),onCancel:a=h().noop})=>{const[s,l]=(0,c.useState)(n);return!(0,w.useSelect)((e=>e(Ni.Ls).isAICapabilityEnabled()),[])&&o?(0,j.jsx)(k.Button,{className:"kubio-navigation-new-page__button",icon:Ke,variant:"primary",iconSize:24,onClick:()=>t(),children:(0,C.__)("New Page","kubio")}):(0,j.jsxs)(j.Fragment,{children:[o&&(0,j.jsx)(k.Button,{className:"kubio-navigation-new-page__button",icon:Ke,variant:"primary",iconSize:24,onClick:()=>l(!0),children:(0,C.__)("New Page","kubio")}),s&&(0,j.jsx)(k.Modal,{title:(0,C.__)("Add page","kubio"),onRequestClose:()=>{l(!1),a()},className:"kubio-navigation-new-page__modal",children:(0,j.jsxs)("div",{className:"kubio-navigation-new-page__modal__content",children:[(0,j.jsx)("h2",{className:"kubio-navigation-new-page__modal__title",children:i}),(0,j.jsx)("span",{className:"kubio-navigation-new-page__modal__description",children:r}),(0,j.jsxs)("div",{className:"kubio-navigation-new-page__modal__cards",children:[(0,j.jsx)(Wf,{icon:Ge.KubioLogo,title:(0,C.__)("Create from scratch","kubio"),description:(0,C.__)("Build your page by hand starting from a blank canvas. This option is recommended for advanced users who wish to create their own, custom design.","kubio"),onClick:()=>{l(!1),t()}}),(0,j.jsx)(Wf,{icon:Ge.KubioAI,isProItem:I.AI_IN_PRO,iconClassName:"kubio-ai-logo-animated kubio-ai-logo-colored",title:(0,C.__)("Generate with Kubio AI","kubio"),description:(0,C.__)("Get a head start by letting Kubio Al generate a first draft of the page for you. Then you can further customize the page to your liking.","kubio"),onClick:()=>{l(!1),e()}})]})]})})]})},Wf=({icon:e,title:t,description:o,onClick:n,iconClassName:i,isProItem:r=!1})=>(0,j.jsxs)(Fe.ProItem,{isProItem:r,className:"kubio-navigation-new-page__modal__card",onClick:n,urlArgs:{source:"AI",content:"ai-settings"},children:[(0,j.jsx)(k.Icon,{className:Z()("kubio-navigation-new-page__modal__card__icon",i),icon:e}),(0,j.jsx)("h2",{className:"kubio-navigation-new-page__modal__card__title",children:t}),(0,j.jsx)("span",{className:"kubio-navigation-new-page__modal__card__description",children:o})]}),Vf=(0,j.jsx)(Q.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)(Q.Path,{d:"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z"})}),Kf=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),$f=({post:e,onCloseModal:t,onClickDuplicate:o})=>{const[n,i]=(0,c.useState)(!1),{createErrorNotice:r,createSuccessNotice:a}=(0,s.useKubioNotices)(),[l,u]=(0,c.useState)(""),{saveEntityRecord:d}=(0,w.dispatch)("core"),p=async(t,n,s)=>{i(!0);const c={title:s||l,status:"publish",content:null==e?void 0:e.content,excerpt:null==e?void 0:e.excerpt,meta:{...(null==e?void 0:e.meta)||{},saved_in_kubio:!0},template:null==e?void 0:e.template};let u=!1;try{u=await d(t,n,c),a((0,C.sprintf)(// translators: %s is the name of item that was saved
// translators: %s is the name of item that was saved
(0,C.__)("%s saved successfully!","kubio"),c.title))}catch(e){console.error(e),r((0,C.sprintf)(//translators: %s is the name of item that was not saved
//translators: %s is the name of item that was not saved
(0,C.__)("An error occurred. %s was not saved!","kubio"),c.title))}u&&o(u)};return(0,j.jsx)(k.Modal,{title:(0,C.__)("Duplicate page","kubio"),onRequestClose:e=>{e.stopPropagation(),t()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!n,shouldCloseOnClickOutside:!n,isDismissible:!n,children:(0,j.jsxs)("div",{className:"popover__content",children:[(0,j.jsx)(ct.InputControl,{value:l,onChange:e=>u(e),label:(0,C.__)("Title","kubio"),autoFocus:!0,onKeyPress:t=>{"Enter"===t.key&&p("postType",e.type,t.target.value)}}),(0,j.jsx)(k.__experimentalSpacer,{margin:3}),(0,j.jsx)(k.Button,{isPrimary:!0,isBusy:n,disabled:""===l,onClick:()=>{p("postType",e.type)},className:"add-button",children:(0,C.__)("Duplicate page","kubio")})]})})},qf=({post:e,onCloseModal:t})=>{var o,n;const[i,r]=(0,c.useState)(!1),{createErrorNotice:a,createSuccessNotice:l}=(0,s.useKubioNotices)();return(0,j.jsxs)(k.Modal,{title:(0,C.__)("Delete ","kubio")+(null==e||null===(o=e.title)||void 0===o?void 0:o.raw)+(0,C.__)(" page?","kubio"),onRequestClose:e=>{e.stopPropagation(),t()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!i,shouldCloseOnClickOutside:!i,isDismissible:!i,children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,C.sprintf)(// translators: %s: page name
// translators: %s: page name
(0,C.__)("The <strong>%s</strong> page will be moved in the trash.","kubio"),null==e||null===(n=e.title)||void 0===n?void 0:n.raw)}}),(0,j.jsx)("br",{}),(0,C.__)("You can recover it later from WP Admin -> Pages -> Trash","kubio")]}),(0,j.jsxs)(k.ButtonGroup,{className:"h-template-part-modal__button-group",children:[(0,j.jsx)(k.Button,{isLink:!0,onClick:t,children:(0,C.__)("Cancel","kubio")}),(0,j.jsx)(k.Button,{isPrimary:!0,onClick:async()=>{r(!0),await Yf(e,a,l),t()},children:(0,C.__)("Delete","kubio")})]})]})},Yf=(e,t,o)=>{var n;const i=e.id,r=null==e||null===(n=e.title)||void 0===n?void 0:n.raw;try{(0,w.dispatch)("core").deleteEntityRecord("postType",e.type,parseInt(i)),o(r+(0,C.__)(" moved to trash!","kubio"))}catch(e){t((0,C.sprintf)(//translators: %s is the name of item that was not saved
//translators: %s is the name of item that was not saved
(0,C.__)("An error occurred. %s was not saved","kubio"),r))}},Zf=e=>{var t;const o=e.taxonomy?e.name:null==e||null===(t=e.title)||void 0===t?void 0:t.rendered,n=document.createElement("div");return n.innerHTML=o,n.textContent||n.innerText||""},Xf=(e,t,o,n)=>{var i;let r=!1;var a,s,l;return void 0!==(null==e?void 0:e.taxonomy)?(null==e?void 0:e.id.toString())===(null===(a=o.context)||void 0===a||null===(s=a.postId)||void 0===s?void 0:s.toString())&&void 0===(null==o||null===(l=o.context)||void 0===l?void 0:l.postType)&&(r=!0):(null==o||null===(i=o.context)||void 0===i?void 0:i.postType)===n&&(r=t.includes(e.id.toString())),r};function Qf({item:e,entity:t}){const{setPage:o,setIsNavigationPanelOpened:n}=(0,w.useDispatch)(Be),{page_for_posts:i,page_on_front:r,show_on_front:a,wooCommercePagesIds:s,isActive:l}=(0,w.useSelect)((o=>{var n,i,r,a,s;const{page_for_posts:l,page_on_front:c,show_on_front:u}=o("core").getEditedEntityRecord("root","site"),d=null===(n=o("core/block-editor").getSettings())||void 0===n||null===(i=n.kubioBasicWooCommerce)||void 0===i?void 0:i.pagesIds,{getPage:p,getTemplateId:h,getTemplatePartId:m}=o(Be),g=[null===(r=p())||void 0===r||null===(a=r.context)||void 0===a||null===(s=a.postId)||void 0===s?void 0:s.toString(),h(),m()].filter(Boolean),f=Xf(e,g,p(),t);return{page_for_posts:l,page_on_front:c,show_on_front:u,wooCommercePagesIds:Object.values(d||{}),isActive:f}}),[t,e]),{duplicateContainerRef:u,delContainerRef:d}=(0,c.useRef)(),[p,h]=(0,c.useState)(!1),[m,g]=(0,c.useState)(!1),[b,_]=(0,c.useState)(!1),[v,y]=(0,c.useState)({}),[,x]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),S=(0,c.useCallback)((()=>{const{type:t,slug:i,link:r,id:a}=null!=v&&v.id?v:e;o({type:t,slug:i,path:(0,Lo.getPathAndQueryString)(r),context:{postType:t,postId:a}}),x(!0),n(!1)}),[v,e,o,x,n]),I=(0,c.useCallback)((()=>{l||_(!0)}),[l]),T=(0,c.useCallback)((()=>{h(!0)}),[]),P=(0,c.useCallback)((()=>{g(!0)}),[]);if(!e)return null;const E=Zf(e)||(0,C.__)("(no title)","kubio");let R,A;"page"===a&&r===e.id&&"page"===t&&(R=(0,j.jsx)(k.Icon,{title:(0,C.__)("Homepage","kubio"),icon:Gf,size:18})),"page"===a&&i===e.id&&"page"===t&&(R=(0,j.jsx)(k.Icon,{title:(0,C.__)("Posts page","kubio"),icon:Vf,size:18})),-1!==s.indexOf(e.id)&&"page"===t&&(R=(0,j.jsx)(k.Icon,{title:(0,C.__)("Shop page","kubio"),icon:Ge.WooCommerceSmallLogo,size:18}));const O=r!==e.id&&!l;"page"===a&&"page"===e.type&&i!==e.id&&(A=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.DropdownMenu,{className:"kubio-more-menu",icon:ps,label:(0,C.__)("More tools & options","kubio"),popoverProps:{className:"edit-site-kubio-more-menu__content edit-site-more-menu__content",position:"bottom left",isAlternate:!0},toggleProps:{tooltipPosition:"bottom"},children:({onClose:e})=>(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(k.MenuGroup,{children:[(0,j.jsx)(k.MenuItem,{icon:Ge.DuplicateItemIcon,ref:u,onClick:t=>{t.preventDefault(),T(t),e()},role:"menuitemcheckbox",children:(0,C.__)("Duplicate","kubio")}),O&&(0,j.jsx)(k.MenuItem,{icon:Kf,ref:d,onClick:t=>{t.preventDefault(),P(t),e()},role:"menuitemcheckbox",children:(0,C.__)("Delete","kubio")})]})})}),p&&(0,j.jsx)($f,{post:e,onCloseModal:()=>{h(!1)},onClickDuplicate:e=>{y(e),h(!1),_(!0)}}),m&&(0,j.jsx)(qf,{post:e,onCloseModal:()=>{g(!1)}})]}));const N=Z()("edit-site-navigation-panel__content-item",{"kubio-navigation-item-active":l});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.__experimentalNavigationItem,{className:N,item:`${e.taxonomy||e.type}-${e.id}`,title:E,children:[(0,j.jsxs)(k.Button,{onClick:I,children:[R&&(0,j.jsx)("span",{className:"components-navigation__item-badge",children:R}),(0,j.jsx)("span",{className:"components-truncate components-text components-navigation__item-title",children:E})]}),A]}),b&&(0,j.jsx)(Um,{onComplete:S,closeModal:()=>_(!1),entityName:E})]})}const Jf=e=>(0,p.deburr)(e).replace(/^\//,"").toLowerCase(),eb=(e,t)=>-1!==Jf(e).indexOf(Jf(t));function tb({item:e,icon:t}){const{title:o,description:n,isActive:i}=(0,w.useSelect)((t=>{var o,n,i,r;const{getPage:a,getTemplateId:s,getTemplatePartId:l}=t(Be),c=[null===(o=a())||void 0===o||null===(n=o.context)||void 0===n||null===(i=n.postId)||void 0===i?void 0:i.toString(),s(),l()].filter(Boolean);return{..."wp_template"===e.type?t("core/editor").__experimentalGetTemplateInfo(e):{title:(null==e||null===(r=e.title)||void 0===r?void 0:r.rendered)||(null==e?void 0:e.slug),description:""},isActive:c.includes(e.id.toString())}}),[]),{setTemplate:r,setTemplatePart:a,setIsNavigationPanelOpened:s,setPage:l}=(0,w.useDispatch)(Be),[u,d]=(0,c.useState)(!1),p=(0,c.useCallback)((()=>{i||d(!0)}),[d,i]),[,h]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked");if(!e)return null;const m=Z()("edit-site-navigation-panel__template-item",{"kubio-navigation-item-active":i});return(0,j.jsxs)(k.__experimentalNavigationItem,{className:m,item:`${e.type}-${e.id}`,title:o,icon:t,children:[(0,j.jsx)(k.Button,{onClick:p,children:(0,j.jsxs)("span",{className:"edit-site-navigation-panel__info-wrapper",children:[(0,j.jsxs)("div",{className:"edit-site-navigation-panel__template-item-title",children:["draft"===e.status&&(0,j.jsx)("em",{children:(0,C.__)("[Draft]","kubio")}),o]}),n&&(0,j.jsx)("div",{className:"edit-site-navigation-panel__template-item-description",children:n})]})}),u&&(0,j.jsx)(Um,{onComplete:()=>{"wp_template"===e.type?r(e.id,e.slug,!0):a(e.id),h(!1),s(!1)},closeModal:()=>d(!1),entityName:o,changePage:!1})]})}function ob({items:e,search:t}){const o=(null==e?void 0:e.length)>0?e[0].type:null,n=(0,w.useSelect)((t=>{if("wp_template"===o){const{__experimentalGetTemplateInfo:o}=t("core/editor");return e.map((e=>({slug:e.slug,...o(e)})))}return(e||[]).map((e=>{var t,o;return{slug:e.slug,title:null===(t=e.title)||void 0===t?void 0:t.rendered,description:null===(o=e.excerpt)||void 0===o?void 0:o.rendered}}))}),[e,o]),i=(0,c.useMemo)((()=>null===e||0===t.length?[]:e.filter((({slug:e})=>{const{title:o,description:i}=n.find((t=>t.slug===e));return eb(e,t)||eb(o,t)||eb(i,t)}))),[e,n,t]),r="wp_template"===o||"wp_template_part"===o?tb:Qf;return(0,j.jsx)(k.__experimentalNavigationGroup,{title:(0,C.__)("Search results","kubio"),children:(0,p.map)(i,(e=>(0,j.jsx)(r,{item:e},`${e.type}-${e.id}`)))})}const nb=({kind:e="postType",entity:t,title:o,hasSearch:n=!0,parentMenu:i=es})=>{const{search:r,searchQuery:a,onSearch:l,isDebouncing:u}=function(){const[e,t]=(0,c.useState)(""),[o,n]=(0,c.useState)(""),[i,r]=(0,c.useState)(!1);(0,c.useEffect)((()=>{r(!1)}),[o]);const a=(0,c.useCallback)((0,p.debounce)(n,75),[n]);return{search:e,searchQuery:o,isDebouncing:i,onSearch:(0,c.useCallback)((e=>{t(e),a(e),r(!0)}),[t,r,a])}}(),d=(0,w.useRegistry)(),{resetSelection:g}=d.dispatch(y.store),{setPage:b,setIsNavigationPanelOpened:_}=(0,w.useDispatch)(m.STORE_KEY),{saveEntityRecord:v}=(0,w.dispatch)("core"),{items:x,showOnFront:S,pageForPosts:I,pageOnFront:T,isResolved:P,siteURL:E}=(0,w.useSelect)((o=>{const{getEntityRecords:n,getEditedEntityRecord:i,hasFinishedResolution:r,getEntityRecord:s}=o("core"),l=[e,t,{search:a,status:"publish,private",per_page:50}],c=r("getEntityRecords",l),{page_for_posts:u,page_on_front:d}=o("core").getEditedEntityRecord("root","site");let h=n(...l);return"postType"===e&&"page"===t&&(0,p.isArray)(h)&&(h=[s("postType","page",d),s("postType","page",u),...h].filter(Boolean),h=(0,p.uniqBy)(h,(e=>parseInt(null==e?void 0:e.id)))),{items:h,isResolved:c,showOnFront:i("root","site").show_on_front,siteURL:o("core/block-editor").getSettings().siteUrl||"/",pageForPosts:u,pageOnFront:d,getEntityRecord:s}}),[a,t,e]),[R,A]=(0,c.useState)(""),[O,N]=(0,c.useState)(!1),[D,M]=(0,c.useState)(!1),[B,L]=(0,c.useState)(!1),[z,F]=(0,c.useState)({}),[,G]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),H=(0,c.useCallback)((()=>{N(!1),M(!0)}),[M]),U=async(e,t)=>{L(!0);const o={title:R,status:"publish",template:q,meta:{saved_in_kubio:!0}},n=await v(e,t,o);n&&(F(n),H(),L(!1),A(""))},{availableTemplates:W,isKubioTheme:V}=(0,w.useSelect)((e=>{const t=e(m.STORE_KEY),{getSettings:o}=e(y.store);return{availableTemplates:t.getAvailablePageTemplates(),isKubioTheme:o().isKubioTheme}}),[]),{templates:K,defaultTemplate:$}=(0,s.useDeepMemo)((()=>{let e,t=W;return V?(e=h().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width",t=W):(e="",(0,p.find)(t,{value:e})||(e=h().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width")),{defaultTemplate:e,templates:t}}),[W,V]),[q,Y]=(0,c.useState)($),X=(0,s.useDeepMemo)((()=>{const e=K.reduce(((e,t)=>{const o=t.source||"custom";return{...e,[o]:[...e[o]||[],t]}}),{}),t=[];return h().forEach(m.templateGroupPriorities,(function(o){var n;null!==(n=e[o])&&void 0!==n&&n.length&&(t.push({value:"template-group-"+o,label:m.templateGroups[o],disabled:!0}),h().forEach(e[o],(function(e){t.push(e)})))})),t}),[K]),[Q,J]=(0,c.useState)(!1),ee=(0,c.useCallback)((()=>{J(!1),b({type:"page",path:E,context:{queryContext:{page:1}}}),G(!1),_(!1)}),[G,_,b,E]),te=(0,f.useSetGlobalSessionProp)("ready"),oe=(0,c.useCallback)((()=>{z&&(b({type:z.type,slug:z.slug,path:(0,Lo.getPathAndQueryString)(z.link),context:{postType:z.type,postId:z.id}}),L(!1),G(!1),_(!1),setTimeout((()=>te(!0)),5e3))}),[z,b,G,_,te]),ne=!P||r&&u,[ie,re]=(0,c.useState)(!1);let ae=(0,j.jsx)(j.Fragment,{});"postType"===e&&"page"===t&&(ae=(0,j.jsxs)(j.Fragment,{children:[O&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.Modal,{title:(0,C.__)("Add page","kubio"),onRequestClose:()=>{N(!1)},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!B,shouldCloseOnClickOutside:!B,isDismissible:!B,children:(0,j.jsxs)("div",{className:"popover__content",children:[(0,j.jsx)(k.__experimentalInputControl,{value:R,onChange:e=>A(e),label:(0,C.__)("Title","kubio"),autoFocus:!0,onKeyPress:o=>{"Enter"===o.key&&U(e,t)}}),(0,j.jsx)(k.__experimentalSpacer,{margin:3}),(0,j.jsx)(k.SelectControl,{value:q,onChange:e=>Y(e),label:(0,C.__)("Template","kubio"),options:X}),(0,j.jsx)(k.__experimentalSpacer,{margin:6}),(0,j.jsx)(k.Button,{isPrimary:!0,isBusy:B,disabled:B||""===R.trim(),onClick:()=>{g(0,0,null),U(e,t)},className:"add-button",children:(0,C.__)("Add page","kubio")})]})})}),D&&(0,j.jsx)(Um,{onComplete:oe,closeModal:()=>M(!1),entityName:R})]}));const se=h().sortBy(x,(e=>"page"!==S||I!==e.id&&T!==e.id?1:0));return(0,j.jsxs)(k.__experimentalNavigationMenu,{menu:`kubio-content-area-${e}-${t}`,title:o,parentMenu:i,hasSearch:n,onSearch:l,search:r,isSearchDebouncing:u||!P,titleAction:(0,j.jsxs)(j.Fragment,{children:["page"===t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Uf,{onNewKubioPage:()=>N(!0),onNewAiPage:()=>re(!0)}),ie&&(0,j.jsx)(Hf,{setIsModalVisible:re})]}),ae]}),className:Z()("kubio-nav-menu-heading",{"kubio-nav-menu-heading--page":"page"===t}),children:[r&&!u&&(0,j.jsx)(ob,{items:se,search:r,disableFilter:!0}),!r&&(0,j.jsxs)(j.Fragment,{children:["posts"===S&&(0,j.jsx)(k.__experimentalNavigationItem,{item:"post-/",title:(0,C.__)("All Posts","kubio"),onClick:()=>J(!0),children:(0,j.jsx)(k.Button,{className:"components-button css-1g713f0 ejwewyf3",children:(0,j.jsxs)(k.Flex,{align:"center",children:[(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Icon,{icon:Gf,size:18})}),(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)("span",{children:(0,C.__)("All Posts","kubio")})}),Q&&(0,j.jsx)(Um,{onComplete:ee,closeModal:()=>M(!1),entityName:R})]})})}),null==se?void 0:se.map((e=>(0,j.jsx)(Qf,{item:e,entity:t},`${e.type||e.taxonomy}-${e.id}`)))]}),ne&&(0,j.jsx)(k.__experimentalNavigationItem,{title:(0,C.__)("Loading…","kubio"),isText:!0})]})};function ib({onActivateMenu:e,activeMenu:t}){const{page:o}=(0,w.useSelect)((e=>({page:e(m.STORE_KEY).getPage()})),[]),n=(0,c.useMemo)((()=>{var e,t;return[{kind:"postType",entity:"page",title:(0,C.__)("Pages","kubio")},{kind:"postType",entity:"post",title:(0,C.__)("Posts","kubio")},{kind:"taxonomy",entity:"category",title:(0,C.__)("Categories","kubio")},...(null===(e=window)||void 0===e||null===(t=e.kubioEditSiteSettings)||void 0===t?void 0:t.postTypes.filter((e=>"kubio_section"!==e.entity)))||[]]}),[]);return(0,j.jsxs)(k.__experimentalNavigation,{activeItem:o&&`content-${o.path}`,activeMenu:t,onActivateMenu:t=>{e(t)},children:[t===es&&(0,j.jsx)(Ff.Slot,{children:(0,j.jsx)(k.__experimentalNavigationBackButton,{backButtonLabel:(0,C.__)("Dashboard","kubio"),className:"edit-site-navigation-panel__back-to-dashboard",href:"index.php"})}),(0,j.jsx)(k.__experimentalNavigationMenu,{title:(0,C.__)("Site Content","kubio"),children:null==n?void 0:n.map((({kind:e,entity:t,title:o})=>(0,j.jsx)(k.__experimentalNavigationItem,{title:o,navigateToMenu:`kubio-content-area-${e}-${t}`},`${e}-${t}`)))}),null==n?void 0:n.map((e=>(0,X.createElement)(nb,{...e,key:`${e.kind}-${e.entity}`})))]})}function rb({menu:e,title:t,templateParts:o}){return(0,j.jsx)(k.__experimentalNavigationMenu,{menu:e,title:t,parentMenu:ts,isEmpty:!o||0===o.length,children:(0,p.map)(o,(e=>(0,j.jsx)(tb,{item:e},`wp_template_part-${e.id}`)))})}function ab(){const[e,t]=(0,c.useState)(""),o=(0,c.useCallback)((e=>{t(e)})),{isLoading:n,templateParts:i,templatePartsByArea:r}=(0,w.useSelect)((e=>{const t=e(S.store).getEntityRecords("postType","wp_template_part"),o=t||[],n=(0,p.groupBy)(o.map((e=>({...e,area:e.area||"uncategorized"}))),"area");return{isLoading:null===t,templateParts:o,templatePartsByArea:n}}),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.__experimentalNavigationMenu,{menu:ts,title:(0,C.__)("Template Parts","kubio"),parentMenu:es,hasSearch:!0,onSearch:o,search:e,children:[e&&(0,j.jsx)(ob,{items:i,search:e}),!e&&cs.map((({title:e,menu:t})=>(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:t,title:e,hideIfTargetMenuEmpty:!0},`template-parts-navigate-to-${t}`))),!e&&n&&(0,j.jsx)(k.__experimentalNavigationItem,{title:(0,C.__)("Loading…","kubio"),isText:!0})]}),cs.map((({area:e,menu:t,title:o})=>(0,j.jsx)(rb,{menu:t,title:o,templateParts:r[e]},`template-parts-menu-${t}`)))]})}function sb(){const{defaultTemplateTypes:e,templates:t,classicThemePrimaryTemplates:o}=(0,w.useSelect)((e=>{const{getSettings:t}=e(Be),o=e("core").getEntityRecords("postType","wp_template");return{defaultTemplateTypes:t().defaultTemplateTypes,classicThemePrimaryTemplates:t().classicThemePrimaryTemplates,templates:o}}),[]),{addTemplate:n}=(0,w.useDispatch)(Be),i=(0,p.map)(t,"slug"),r=(0,p.filter)(e,(e=>(0,p.includes)((0,p.uniq)([...Ja,...o]),e.slug)&&!(0,p.includes)(i,e.slug)));return r.length?(0,j.jsx)(k.DropdownMenu,{className:"edit-site-navigation-panel__new-template-dropdown",icon:null,label:(0,C.__)("Add Template","kubio"),popoverProps:{noArrow:!1},toggleProps:{children:(0,j.jsx)(k.Button,{isPrimary:!0,icon:Ke,iconPosition:"right",className:"kubio-new-page-btn",label:(0,C.__)("New","kubio"),children:(0,C.__)("New","kubio")})},children:({onClose:t})=>(0,j.jsx)(k.NavigableMenu,{className:"edit-site-navigation-panel__new-template-popover",children:(0,j.jsx)(k.MenuGroup,{label:(0,C.__)("Add Template","kubio"),children:(0,p.map)(r,(({title:o,description:i,slug:r})=>(0,j.jsx)(k.MenuItem,{info:i,onClick:()=>{(t=>{const{title:o,description:i}=(0,p.find)(e,{slug:t});n({content:"__KUBIO_REPLACE_WITH_APPROPRIATE_CONTENT__",excerpt:i,slug:t.toString(),status:"publish",title:o,kubio_template_source:"kubio-custom"})})(r),t()},children:o},r)))})})}):null}function lb({menu:e,title:t,templates:o,parentMenu:n}){const i=!o||0===o.length;return!i&&(0,j.jsx)(k.__experimentalNavigationMenu,{menu:e,title:t,parentMenu:n,isEmpty:i,children:(0,p.map)(o,(e=>(0,j.jsx)(tb,{item:e},`wp_template-${e.id}`)))})}const cb=(e,t="custom")=>!!e&&(null==e?void 0:e.filter((({kubio_template_source:e="custom"})=>e===t)));function ub({title:e,templates:t,menu:o,hasAdd:n=!0,parentMenu:i=os}){const r=(0,c.useMemo)((()=>{const e={},o=cb(t,"kubio"),n=cb(t,"theme"),i=!!t&&(0,p.difference)(t,[...o,...n]);return o&&o.length&&(e.kubio=o),n&&n.length&&(e.theme=n),i&&i.length&&(e.custom=n),e}),[t]),a=Object.keys(r).length<=1;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.__experimentalNavigationMenu,{menu:o,title:e,titleAction:n&&(0,j.jsx)(sb,{}),parentMenu:i,children:[a&&(0,j.jsx)(j.Fragment,{children:(0,p.map)(t,(e=>(0,j.jsx)(tb,{item:e,icon:Ge.KubioLogo},`wp_template-${e.id}`)))}),!a&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${ls}`,title:(0,C.__)("Kubio templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${ss}`,title:(0,C.__)("Theme templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${as}`,title:(0,C.__)("Custom templates","kubio"),hideIfTargetMenuEmpty:!0})]})]}),(0,j.jsx)(lb,{menu:`${o}--${ls}`,title:(0,C.__)("Kubio templates","kubio"),templates:r.kubio,parentMenu:o}),(0,j.jsx)(lb,{menu:`${o}--${ss}`,title:(0,C.__)("Theme templates","kubio"),templates:r.theme,parentMenu:o}),(0,j.jsx)(lb,{menu:`${o}--${as}`,title:(0,C.__)("Custom templates","kubio"),templates:r.custom,parentMenu:o})]})}function db(){var e,t,o,n,i,r;const[a,l]=(0,c.useState)(""),u=(0,c.useCallback)((e=>{l(e)})),{templates:d}=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e(S.store);return{templates:t("postType","wp_template",{per_page:-1})}}),[]),p=(0,c.useMemo)((()=>(d||[]).reduce(((e,t)=>{let o="general";const n=t.slug;return(0,s.currentTemplateIsPage)(n)&&(o="page"),(0,s.currentTemplateIsPost)(n)&&(o="post"),{...e,[o]:[...e[o]||[],t]}}),{})),[d]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.__experimentalNavigationMenu,{menu:os,title:(0,C.__)("Templates","kubio"),titleAction:(0,j.jsx)(sb,{}),parentMenu:es,hasSearch:!0,onSearch:u,search:a,children:[a&&(0,j.jsx)(ob,{items:d,search:a}),!a&&(0,j.jsxs)(j.Fragment,{children:[!(null===(e=p.page)||void 0===e||!e.length)&&(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:is,title:(0,C.__)("Page templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(t=p.post)||void 0===t||!t.length)&&(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:rs,title:(0,C.__)("Post templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(o=p.general)||void 0===o||!o.length)&&(0,j.jsx)(k.__experimentalNavigationItem,{navigateToMenu:ns,title:(0,C.__)("General templates","kubio"),hideIfTargetMenuEmpty:!0})]}),!a&&null===d&&(0,j.jsx)(k.__experimentalNavigationItem,{title:(0,C.__)("Loading…","kubio"),isText:!0})]}),!(null===(n=p.page)||void 0===n||!n.length)&&(0,j.jsx)(ub,{menu:is,title:(0,C.__)("Page templates","kubio"),templates:p.page,hasAdd:!1,category:"page"}),!(null===(i=p.post)||void 0===i||!i.length)&&(0,j.jsx)(ub,{menu:rs,title:(0,C.__)("Post templates","kubio"),templates:p.post,category:"post",hasAdd:!1}),!(null===(r=p.general)||void 0===r||!r.length)&&(0,j.jsx)(ub,{menu:ns,title:(0,C.__)("General templates","kubio"),templates:p.general,hasAdd:!1,category:"general"})]})}function pb({activeMenu:e,onActivateMenu:t}){const{postId:o,postType:n}=(0,w.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:o}=e(Be);return{postId:o(),postType:t()}}),[]);return(0,j.jsx)(k.__experimentalNavigation,{activeItem:`${n}-${o}`,activeMenu:e,onActivateMenu:e=>{t(e)},children:(0,j.jsxs)(k.__experimentalNavigationMenu,{title:(0,C.__)("Advanced","kubio"),children:[(0,j.jsx)(k.__experimentalNavigationItem,{title:(0,C.__)("Templates","kubio"),navigateToMenu:os}),(0,j.jsx)(k.__experimentalNavigationItem,{title:(0,C.__)("Template Parts","kubio"),navigateToMenu:ts}),(0,j.jsx)(db,{activeMenu:e}),(0,j.jsx)(ab,{})]})})}const hb=({isOpen:e})=>{const[t,o]=(0,c.useState)(es),[n,i]=(0,c.useState)(es),{siteTitle:r,openedMenu:a}=(0,w.useSelect)((e=>{const{getEntityRecord:t}=e("core");return{siteTitle:(t("root","__unstableBase",void 0)||{}).name,openedMenu:e(Be).getNavigationMenu()}}),[]),s=(0,c.useRef)();(0,c.useEffect)((()=>{e&&s.current.focus()}),[n]);const l=(0,x.usePrevious)(e);(0,c.useEffect)((()=>{a&&e&&!l&&o(a)}),[t,e,a]);const{setIsNavigationPanelOpened:u}=(0,w.useDispatch)(Be);return(0,j.jsx)("div",{className:Z()("edit-site-navigation-panel",{"is-open":e}),ref:s,tabIndex:"-1",onKeyDown:e=>{e.keyCode===Tf.ESCAPE&&(e.stopPropagation(),u(!1))},children:(0,j.jsxs)("div",{className:"edit-site-navigation-panel__inner",children:[(0,j.jsx)("div",{className:"edit-site-navigation-panel__site-title-container",children:(0,j.jsxs)(k.Flex,{children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)("div",{className:"edit-site-navigation-panel__site-title",children:r})}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Tooltip,{text:(0,C.__)("Close panel","kubio"),children:(0,j.jsx)(k.Button,{className:"kubio-edit-site-navigation-panel__close-button",icon:We,onClick:()=>u(!1)})})})]})}),(0,j.jsxs)("div",{className:"edit-site-navigation-panel__scroll-container",children:[n===es&&(0,j.jsx)(ib,{onActivateMenu:o,activeMenu:t}),t===es&&(0,j.jsx)(pb,{activeMenu:n,onActivateMenu:i})]})]})})},mb=function({isOpen:e}){const{isActive:t}=(0,w.useSelect)((e=>{const{isFeatureActive:t}=e(m.STORE_KEY);return{isActive:t("fullscreenMode")}}),[]),{setIsNavigationPanelOpened:o}=(0,w.useDispatch)(m.STORE_KEY);if(!t)return null;const n=(0,j.jsx)(k.Icon,{size:"36px",icon:Ge.HamburgerMenu});return(0,j.jsx)("div",{className:"edit-site-navigation-toggle"+(e?" is-open":""),children:(0,j.jsx)(k.Button,{className:"edit-site-navigation-toggle__button has-icon",label:(0,C.__)("Toggle navigation","kubio"),onClick:()=>o(!e),showTooltip:!0,children:n})})},{Fill:gb,Slot:fb}=(0,k.createSlotFill)("EditSiteNavigationPanelPreview");function bb(){const e=(0,w.useSelect)((e=>e(Be).isNavigationOpened()));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(mb,{isOpen:e}),e&&(0,j.jsx)(hb,{isOpen:e}),(0,j.jsx)(fb,{})]})}const _b=()=>{const e=(0,w.useSelect)((e=>e(d.store).getNotices().filter((e=>"snackbar"===e.type)).map((e=>({...e,className:`is-${e.status}`})))),[]),{removeNotice:t}=(0,w.useDispatch)(d.store);return(0,c.createPortal)((0,j.jsx)(k.SnackbarList,{className:"components-editor-notices__snackbar edit-site-notices",notices:e,onRemove:t}),document.body)},vb=(0,Ue.getNamesOfBlocks)(),yb=[vb.SECTION,vb.HERO,vb.NAVIGATION].map((e=>`[data-type="${e}"]`)).join(","),kb=({children:e})=>{const[t,o]=(0,c.useState)(null),n=(0,f.useBlocksOwnerDocument)(),i=(0,x.useThrottle)((0,c.useCallback)((e=>{var t,n;const i=null==e||null===(t=e.target)||void 0===t||null===(n=t.closest)||void 0===n?void 0:n.call(t,yb),r=(null==i?void 0:i.getAttribute("data-block"))||null;o(r)}),[]),300);(0,c.useEffect)((()=>{if(n)return n.addEventListener("mousemove",i),()=>n.removeEventListener("mousemove",i)}),[n]);const r=(0,c.useMemo)((()=>({clientId:t})),[t]);return(0,j.jsx)(s.HoveredSectionContext.Provider,{value:r,children:e})};function xb(){const{setIsListViewOpened:e}=(0,w.useDispatch)(m.STORE_KEY),{clearSelectedBlock:t,selectBlock:o}=(0,w.useDispatch)(y.store),n=(0,x.useFocusOnMount)("firstElement"),i=(0,x.useFocusReturn)(),r=`edit-site-editor__list-view-panel-label-${(0,x.useInstanceId)(xb)}`;return(0,j.jsxs)("div",{"aria-labelledby":r,className:"edit-site-editor__list-view-panel",onKeyDown:function(t){t.keyCode!==Tf.ESCAPE||t.defaultPrevented||e(!1)},children:[(0,j.jsxs)("div",{className:"edit-site-editor__list-view-panel-header",children:[(0,j.jsx)("strong",{id:r,children:(0,C.__)("List view","kubio")}),(0,j.jsx)(k.Button,{icon:Ve,label:(0,C.__)("Close list view sidebar","kubio"),onClick:()=>e(!1)})]}),(0,j.jsx)("div",{className:"edit-site-editor__list-view-panel-content",ref:(0,x.useMergeRefs)([i,n]),children:(0,j.jsx)(y.__experimentalListView,{onSelect:async function(e){await t(),o(e,-1)},showNestedBlocks:!0,__experimentalFeatures:!0,__experimentalPersistentListViewFeatures:!0})})]})}function Sb(){const{setTemplate:e,setTemplatePart:t,showHomepage:o,setPage:n}=(0,w.useDispatch)(m.STORE_KEY),{siteUrl:i,state:r}=window.kubioEditSiteSettings;(0,c.useEffect)((()=>{var a,s,l,c;const d=window.location.href;let p=(0,Lo.getQueryArg)(d,"postId")||(null==r||null===(a=r.entity)||void 0===a||null===(s=a.context)||void 0===s?void 0:s.postId);p=isNaN(parseInt(p))?p:parseInt(p);const h=(0,Lo.getQueryArg)(d,"pageURL");if(!p&&!h)return void o();const m=(0,Lo.getQueryArg)(d,"postType")||(null==r||null===(l=r.entity)||void 0===l||null===(c=l.context)||void 0===c?void 0:c.postType);if(h)n({path:h});else if("wp_template"===m)e(p);else if("wp_template_part"===m)t(p);else if(m){var g,f,b;const e=(null==r||null===(g=r.entity)||void 0===g||null===(f=g.context)||void 0===f?void 0:f.postId)===p?null==r||null===(b=r.entity)||void 0===b?void 0:b.path:`${i}?p=${p}`;n({context:{postType:m,postId:p},path:e})}else o();(0,u.doAction)("kubio.afterEntitySet")}),[]);const a=function(){const e=(0,c.useRef)(),t=(0,w.useSelect)((e=>{var t,o;const{getEditedPostType:n,getEditedPostId:i,getPage:r}=e(m.STORE_KEY),a=r();let s=i(),l=n();return null!=a&&null!==(t=a.context)&&void 0!==t&&t.postId&&null!=a&&null!==(o=a.context)&&void 0!==o&&o.postType&&(s=a.context.postId,l=a.context.postType),s&&l?{postId:s,postType:l,page:a}:{page:a}}));return $o()(e.current,t)||(e.current=t),e.current}();return(0,c.useEffect)((()=>{const e=(0,Lo.removeQueryArgs)(window.location.href,"postType","postId","pageURL"),{page:t,...o}=a||{};if(h().isEmpty(null==t?void 0:t.context))return;const n=a?(0,Lo.addQueryArgs)(e,o):e;window.history.replaceState({},"",n)}),[a]),null}const wb=(0,c.createContext)({}),Cb=[(0,Ue.getNamesOfBlocks)().HEADER,(0,Ue.getNamesOfBlocks)().FOOTER,(0,Ue.getNamesOfBlocks)().SIDEBAR,"core/template-part","core/post-content"],Ib=()=>(0,c.useContext)(wb),jb=({children:e,blockContext:t,templateId:o,templateType:n,page:i})=>{const r=(0,c.useRef)([]),[a,s]=(0,c.useState)(!1),l=(0,f.useSetGlobalSessionProp)("ready"),d=(0,f.useGetGlobalSessionProp)("ready",!1),h=(0,c.useRef)(d),{entitiesFinished:m,postLoaded:g,isEmptyPost:b,isPost:_,postEntity:v,isChangingPage:y}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t,hasFinishedResolution:i}=e("core"),{getCurrentPostType:a,getCurrentPostId:s,isChangingPage:l}=e(Ni.Ls),c=!(!d&&o&&n)||r.current.reduce(((e,{theme:o,slug:n,content:i})=>{let r=!0;var a;return i||(r=!o||!n||!(0,p.isUndefined)(null===(a=t("postType","wp_template_part",`${o}//${n}`))||void 0===a?void 0:a.content)),e&&r}),!0);let u=!0;const h=a(),m=s();let g,f=!1,b=!1;var _;return h&&m&&(["wp_template","wp_template_part"].includes(h)||(f=!0,b=t("postType",h,m),g=null===(_=b)||void 0===_?void 0:_.content,u=!(0,p.isUndefined)(g)&&i("getEditedEntityRecord",["postType",h,m]))),{entitiesFinished:c||u,postLoaded:u,postEntity:b,isEmptyPost:h&&m&&!(0,p.isUndefined)(g)&&(0,p.isString)(g)&&!(g.includes("\x3c!-- wp:")||g.includes("\x3c!--wp:")),isPost:f,isChangingPage:l()}}),[r.current.length,d,t,o,o]),k=(0,x.useDebounce)((0,c.useCallback)((()=>{s(!0)}),[]),200),S=(0,c.useCallback)((e=>{if(l(e),e){if(l(e),top.kubioStartTime){const e=Math.floor(performance.now()-top.kubioStartTime)/1e3;console.log("Kubio ready in: "+e+" seconds"),top.kubioStartTime=null}(0,u.doAction)("kubio.editorIsReady")}}),[l]),C=(0,c.useCallback)((e=>{h.current!==e&&e&&(0,ca.updateAllStyleManagers)((()=>{S(e)}))}),[S]),I=(0,x.useDebounce)(C,500),T=(0,x.useDebounce)((0,c.useCallback)((()=>{C(!0),s(!0)}),[]),2e3),P=(0,x.useDebounce)((0,c.useCallback)((()=>{C(!0),s(!0)}),[]),1e4);(0,c.useEffect)((()=>{(0,p.debounce)(C,15e3)}),[]);const{editEntityRecord:E}=(0,w.useDispatch)("core");(0,c.useEffect)((()=>{const e=v.content;_&&e&&"function"!=typeof e&&!v.blocks&&E("postType",v.type,v.id,{blocks:(0,st.parse)(e)},{undoIgnore:!0})}),[_,v,b,E]);const R=(0,x.usePrevious)(d);(0,c.useEffect)((()=>{h.current=d,R&&!d&&(s(!1),r.current=[])}),[d,R]),(0,c.useLayoutEffect)((()=>{if(!y&&!d)if(m){if(P.cancel(),T.cancel(),I.cancel(),_&&g&&b)return void T(!0);if(_)return void I(a);I(!0)}else T.cancel(),P(!0)}),[g,_,b,m,a,d,i,o,n,P,T,I,y]);const A=(0,c.useCallback)(((e,{theme:t,slug:o})=>{Cb.includes(e)&&(t&&o?(0,p.find)(r.current,{theme:t,slug:o})||r.current.push({theme:t,slug:o}):"core/post-content"===e&&r.current.push({content:!0})),k()}),[k]),O=(0,c.useMemo)((()=>({isReady:d,markAsLoaded:A})),[d,A]);return(0,j.jsx)(wb.Provider,{value:O,children:e})},Tb=(0,x.createHigherOrderComponent)((e=>t=>{const{markAsLoaded:o,isReady:n}=Ib();return(0,c.useLayoutEffect)((()=>{n||o(t.name,t.attributes)}),[n,o,t.attributes,t.name]),(0,j.jsx)(e,{...t})}),"BlockListEditorStateReady");function Pb(){return function(){const[e,t]=(0,v.useGlobalStylesOutput)(),{getSettings:o}=(0,w.useSelect)(Be),{updateSettings:n}=(0,w.useDispatch)(Be);(0,c.useEffect)((()=>{var i;if(h().isEmpty(e)||h().isEmpty(t))return;const r=o(),a=(null==r||null===(i=r.styles)||void 0===i?void 0:i.filter((e=>!e.isGlobalStyles||"base-layout"===e.__unstableType)))||[],s=(0,I.mergeNoArrays)({},r,{styles:[...a,...e],__experimentalFeatures:t});n(s)}),[e,t])}(),null}(0,u.addFilter)("editor.BlockListBlock","kubio/style/BlockListEditorStateReady",(0,x.compose)([Tb]),1);const Eb=({className:e,children:t,...o})=>{const n=(0,c.useRef)();return(({ref:e})=>{(0,c.useEffect)((()=>{if(!e.current)return;const t=new ResizeObserver((t=>{for(const s of t){var o,n,i,r;null===(o=e.current)||void 0===o||null===(n=o.classList)||void 0===n||null===(i=(r=n).toggle)||void 0===i||i.call(r,"kubio-has-scrollbar",!!(a=e.current)&&a.scrollHeight>a.clientHeight)}var a}));return t.observe(e.current),()=>{t.disconnect()}}),[e.current])})({ref:n}),(0,j.jsx)("div",{ref:n,className:Z()("kubio-editor-ai-post-generate-interface__wizard__list",e),...o,children:t})},Rb={BG_IMAGE:"bgImage",BG_SLIDESHOW:"bgSlideshow",COLUMN_BG_IMG:"columnBgImage",IMAGE_BLOCK:"imageBlock"},Ab=e=>()=>{const{activeImage:t,onChangeImage:o,initialImg:n,restOfImages:i,isMultiChoice:r}=Ob({type:e}),a=e===Rb.BG_SLIDESHOW,{onWizardDataChange:s}=Kb();return(0,c.useEffect)((()=>{s({currentSelectedImage:t})}),[]),(0,c.useEffect)((()=>{s(r?{currentSelectedImage:h().sortBy(t,(e=>h().indexOf(i,e)))}:{currentSelectedImage:t})}),[t]),(0,j.jsxs)(Eb,{className:"kubio-editor-ai-post-generate-interface__wizard__image-step",children:[(0,j.jsxs)("h2",{children:[!a&&(0,C.__)("Hero Image","kubio"),a&&(0,C.__)("Hero Slideshow","kubio")]}),(0,j.jsxs)("p",{children:[!a&&(0,C.__)("Are you happy with the hero image selected by Kubio AI?","kubio"),a&&(0,C.__)("Are you happy with the hero slideshow images selected by Kubio AI?","kubio")]}),n&&(0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item",children:(0,j.jsx)(Lr,{scrollIntoView:!1,children:(0,j.jsx)(Db,{src:n,activeImage:t,setActiveImage:o})})}),(0,j.jsx)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first",children:(0,C.__)("Below are a few alternatives. You can also change this later.","kubio")}),(0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__image-step__image-list",children:(0,j.jsx)(Lr,{scrollIntoView:!1,children:i.map(((e,n)=>(0,j.jsx)(Db,{src:e,activeImage:t,setActiveImage:o},n)))})})]})},Ob=({type:e}={})=>{const t=h().get((0,f.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",{}),e,{}),{currentValue:o,variants:n,clientId:i}=t,r=Array.isArray(o);let a,s;r?(s=o.concat(n),a=null):(a=o,s=n);const{wizardContextData:l,onWizardDataChange:u}=Kb(),d=`currentHeroImage${e}`,p=h().get(l,d,o),[m,g]=(0,c.useState)(p),{getBlockWithImageDataHelper:_}=Nb(),v=(0,c.useRef)();(0,c.useEffect)((()=>{v.current=void 0}),[e]);const y=(t,o={})=>{const{updateToLocalSlideshowImage:n,slideshowIndex:a}=h().merge({updateToLocalSlideshowImage:!1,slideshowIndex:0},o);let l=[];n||(l=(e=>{var t;if(!r)return g(e),null==u||u({[d]:e}),e;let o;if(null==m||null===(t=m.includes)||void 0===t?void 0:t.call(m,e)){var n;o=null==m||null===(n=m.filter)||void 0===n?void 0:n.call(m,(t=>t!==e)),h().isEmpty(o)&&(o=m),o=h().sortBy(o,(e=>h().indexOf(s,e)))}else{var i;o=null==m||null===(i=m.concat)||void 0===i?void 0:i.call(m,[e]),o=h().sortBy(o,(e=>h().indexOf(s,e)));const t=h().indexOf(o,e);if(t>0&&t<o.length-1){const n=o.slice(0,t),i=o.slice(t+1);o=[e].concat(i,n)}else if(0===t){const n=o.slice(t+1);o=[e].concat(n)}else if(t===o.length-1){const n=o.slice(0,t);o=[e].concat(n)}}Array.isArray(o)||(o=[]),o=h().uniq(o);const a=h().sortBy(o,(e=>h().indexOf(s,e)));return null==u||u({[d]:a}),g(o),o})(t)),v.current||(v.current=_(i));const c=v.current;if(c)switch(e){case Rb.BG_IMAGE:case Rb.COLUMN_BG_IMG:c.setStyle("background.image.0.source.url",t,{descendants:"outer",media:"desktop"});break;case Rb.BG_SLIDESHOW:if(n)c.setStyle(`background.slideshow.slides.${a}.url`,t,{descendants:"outer",media:"desktop",mergeData:!1});else if(Array.isArray(l)){const e=l.map(((e,t)=>({id:t+1,url:e,icon:!1})));c.setStyle("background.slideshow.slides",e,{descendants:"outer",media:"desktop",mergeData:!1})}break;case Rb.IMAGE_BLOCK:c.setAttribute("url",t)}};return{activeImage:m,onChangeImage:y,initialImg:a,restOfImages:s,saveImageOnNext:async(e,t="",o)=>{if(""===t)return!1;try{if(e.has(t))y(e.get(t),o);else{const n=await(0,b.aiSearchedImageSave)({selectedImage:t});""!==n&&(y(n.url,o),e.set(t,n.url))}}catch(e){console.log(e)}},isMultiChoice:r}},Nb=()=>{const e=(0,s.useColibriDataHooks)();return{getBlockWithImageDataHelper:t=>(0,s.getColibriData)({clientId:t,autoSave:!0,loadColibriData:!0},e)}},Db=({src:e,activeImage:t,setActiveImage:o})=>{const n=Array.isArray(t)?t.includes(e):e===t;return(0,j.jsxs)(Lr.Item,{isActive:n,onClick:()=>o(e),children:[(0,j.jsx)("img",{src:e,alt:""}),n&&(0,j.jsx)("div",{className:"kubio-style-preset-list__check",children:(0,j.jsx)(k.Icon,{icon:Yi})})]})},Mb=[{value:Rb.BG_IMAGE,Component:Ab(Rb.BG_IMAGE),nextButtonLabel:(0,C.__)("Continue","kubio")},{value:Rb.BG_SLIDESHOW,Component:Ab(Rb.BG_SLIDESHOW),nextButtonLabel:(0,C.__)("Continue","kubio")},{value:Rb.COLUMN_BG_IMG,Component:Ab(Rb.COLUMN_BG_IMG),nextButtonLabel:(0,C.__)("Continue","kubio")},{value:Rb.IMAGE_BLOCK,Component:Ab(Rb.IMAGE_BLOCK),nextButtonLabel:(0,C.__)("Continue","kubio")},{value:"colorScheme",Component:()=>{const{activePaletteWithData:e,restOfPalettes:t,onHandleClick:o,activePaletteValue:n}=(()=>{var e;const{mergedPalettes:t,onHandleClick:o,activePaletteValue:n}=Kr(),{wizardContextData:i,onWizardDataChange:r}=Kb(),[a]=(0,b.useAIData)(),s=(null==a||null===(e=a.siteContext)||void 0===e?void 0:e.siteMood)||"neutral",{activePaletteWithData:l,restOfPalettes:u}=(0,c.useMemo)((()=>{let{activePaletteWithData:e=null,restOfPalettes:o=[]}=i;if(e)return{activePaletteWithData:e,restOfPalettes:o};t.forEach((t=>{(0,I.getColorPalettesAreEqual)(t.colors,n)?e={...t,mood:s,label:(0,C.__)("Set 1","kubio")}:o.push(t)})),o=o.filter((e=>e.mood===s)).map(((e,t)=>({...e,label:(0,C.sprintf)(// translators: %s: number of the preset, Set refers to the color scheme preset
// translators: %s: number of the preset, Set refers to the color scheme preset
(0,C.__)("Set %s","kubio"),t+2)})));const a={activePaletteWithData:e,restOfPalettes:o};return r(a),a}),[n,t,s,r,i]);return{activePaletteWithData:l,restOfPalettes:u,onHandleClick:o,activePaletteValue:n}})();return(0,j.jsxs)(Eb,{children:[(0,j.jsx)("h2",{children:(0,C.__)("Color Scheme","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("Are you happy with the color scheme selected by Kubio AI?","kubio")}),(0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item",children:(0,j.jsx)(Lr,{scrollIntoView:!1,children:(0,j.jsx)($r,{palette:e,index:0,onHandleClick:o,activePaletteValue:n})})}),(0,j.jsx)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first",children:(0,C.__)("Below are a few alternatives. You can also change this later.","kubio")}),(0,j.jsx)(Lr,{scrollIntoView:!1,children:t.map(((e,t)=>(0,j.jsx)($r,{palette:e,index:t+1,onHandleClick:o,activePaletteValue:n},t)))})]})},nextButtonLabel:(0,C.__)("Continue","kubio")},{value:"typography",Component:()=>{const{activePresetWithData:e,restOfPresets:t,onSelectPreset:o,bodyTypographyHolders:n}=(()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:o}=Gr(),{wizardContextData:n,onWizardDataChange:i}=Kb(),{activePresetWithData:r,restOfPresets:a}=(0,c.useMemo)((()=>{let{activePresetWithData:o=null,restOfPresets:r=[]}=n;if(o)return{activePresetWithData:o,restOfPresets:r};const a=h().get(t,"h1.family"),s=h().get(t,"p.family");e.forEach((e=>{const t=e.h1.family,n=e.p.family;a===t&&s===n?o=e:r.push(e)}));const l={activePresetWithData:o,restOfPresets:r};return i(l),l}),[]);return{activePresetWithData:r,restOfPresets:a,onSelectPreset:o,bodyTypographyHolders:t}})();return(0,j.jsxs)(Eb,{children:[(0,j.jsx)("h2",{children:(0,C.__)("Typography","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("Are you happy with the family fonts selected by Kubio AI?","kubio")}),(0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item",children:(0,j.jsx)(Lr,{scrollIntoView:!1,children:(0,j.jsx)(Hr,{preset:e,index:0,bodyTypographyHolders:n,onSelect:o})})}),(0,j.jsx)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first",children:(0,C.__)("Below are a few alternatives. You can also change this later.","kubio")}),(0,j.jsx)(Lr,{scrollIntoView:!1,children:t.map(((e,t)=>(0,j.jsx)(Hr,{preset:e,index:t+1,bodyTypographyHolders:n,onSelect:o},t)))})]})},nextButtonLabel:(0,C.__)("Finish","kubio")}],Bb=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})}),Lb=(0,c.createContext)({}),zb=(0,k.createSlotFill)("BlackWizardSidebar"),Fb=({children:e})=>{const[t,o]=(0,c.useState)(!1),[n,i]=(0,c.useState)(!1),[r,a]=(0,c.useState)(!0),s=(0,c.useCallback)((e=>{o(e),e||a(!0)}),[]),l=(0,c.useMemo)((()=>{var e,o,n,i;return t&&(null===(e=document.querySelector(".kubio-iframe"))||void 0===e||null===(o=e.contentDocument)||void 0===o||null===(n=o.body)||void 0===n||null===(i=n.querySelector)||void 0===i?void 0:i.call(n,".block-editor-writing-flow > .edit-site-block-editor__block-list"))}),[t]),u=(0,c.useMemo)((()=>({showBlackWizard:t,setShowBlackWizard:s,overlayClicked:n,setOverlayClicked:i,showSidebar:r,setShowSidebar:a})),[t,s,n,i,r,a]);return(0,j.jsx)(Lb.Provider,{value:u,children:(0,j.jsxs)("div",{className:Z()("kubio-editor-ai-post-generate-interface",{"kubio-editor-ai-post-generate-interface--show-wizard":t&&r,"kubio-editor-ai-post-generate-interface--hide-sidebar":!r}),children:[(0,j.jsx)(Gb,{showBlackWizard:t}),(0,j.jsxs)("div",{className:"kubio-editor-ai-post-generate-interface__content position-relative",children:[e,t&&l&&(0,c.createPortal)((0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__content__overlay",onClick:()=>i(!0)}),l)]})]})})},Gb=({showBlackWizard:e})=>(0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__sidebar",children:e&&(0,j.jsx)(zb.Slot,{})}),Hb=()=>(0,c.useContext)(Lb),Ub=({footerRef:e})=>{const{setOverlayClicked:t}=Hb();return(0,j.jsxs)(k.Popover,{anchorRef:e,className:"kubio-options-popover kubio-editor-ai-post-generate-interface__wizard__overlay-popup",position:"top",offset:10,animate:!0,noArrow:!0,onClose:()=>{t(!1)},children:[(0,j.jsx)(k.Button,{icon:We,onClick:()=>t(!1)}),(0,j.jsx)("img",{src:(0,I.staticAssetURL)("ai-assets/info-icon.svg")}),(0,j.jsx)("h4",{children:(0,C.__)("You can edit the content of the website after you finish the setup.","kubio")})]})},Wb=(0,c.createContext)({}),Vb=({onFinish:e,overlayClicked:t})=>{const[o,n]=(0,c.useState)(0),[i,r]=(0,c.useState)({}),[a,s]=(0,c.useState)(new Map),l=(0,f.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",null),{clearSelectedBlock:u}=(0,w.useDispatch)("core/block-editor"),{openSidebar:d,setIsNavigationPanelOpened:p}=(0,w.useDispatch)("kubio/edit-site")||{};(0,c.useEffect)((()=>{u().then((()=>{null==d||d("document")})),null==p||p(!1)}),[u,d,p]);const m=(0,c.useRef)(),g=(0,c.useCallback)((e=>{const t=(0,I.mergeNoArrays)({},i,e);r(t)}),[i]),b=Object.values(Rb),_=(0,c.useMemo)((()=>Mb.filter((e=>!b.includes(e.value)||!h().isEmpty(h().get(l,e.value))))),[l]),v=_[o],{nextButtonLabel:y,Component:x}=v,{saveImageOnNext:S}=Ob({type:v.value}),T=(0,C.sprintf)(// translators: %1$s is the current step index, %2$s is the total number of steps
// translators: %1$s is the current step index, %2$s is the total number of steps
(0,C.__)("Step %1$s of %2$s","kubio"),o+1,_.length),P=(0,c.useMemo)((()=>({wizardContextData:i,onWizardDataChange:g})),[i,g]);return(0,j.jsx)(zb.Fill,{children:(0,j.jsxs)("div",{className:"kubio-editor-ai-post-generate-interface__wizard",children:[(0,j.jsxs)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header",children:[(0,j.jsxs)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header__container",children:[(0,j.jsx)(He,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:Ge.KubioAI}),(0,j.jsx)("span",{children:(0,C.__)("Finishing Touches","kubio")})]}),(0,j.jsx)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__header__current-step-header",children:T})]}),(0,j.jsx)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__content",children:(0,j.jsx)(Wb.Provider,{value:P,children:(0,j.jsx)(x,{})})}),(0,j.jsxs)("div",{ref:m,className:"kubio-editor-ai-post-generate-interface__wizard__footer",children:[(0,j.jsx)(k.Button,{icon:Bb,onClick:()=>{0!==o&&n(o-1)},disabled:0===o}),(0,j.jsx)(k.Button,{onClick:()=>{if(!h().isEmpty(l)&&b.includes(v.value)){let e=null==i?void 0:i.currentSelectedImage;Array.isArray(e)||(e=[e]),e.forEach(((e,t)=>{let o;v.value===Rb.BG_SLIDESHOW&&(o={updateToLocalSlideshowImage:!0,slideshowIndex:t}),S(a,e,o)}))}o===_.length-1?(n(0),null==e||e()):n(o+1)},className:"kubio-ai-button",children:y}),t&&(0,j.jsx)(Ub,{footerRef:m})]})]})})},Kb=()=>(0,c.useContext)(Wb),$b=()=>{const{showBlackWizard:e,setShowBlackWizard:t,overlayClicked:o,setOverlayClicked:n}=Hb(),i=(0,f.useGetGlobalSessionProp)("showAiPostGenerateInterface",!1),r=(0,f.useSetGlobalSessionProp)("showAiPostGenerateInterface");return(0,c.useEffect)((()=>{i&&!e&&t(!0)}),[i]),i?(0,j.jsx)(Vb,{onFinish:()=>{r(!1),t(!1)},overlayClicked:o,setOverlayClicked:n}):(0,j.jsx)(j.Fragment,{})},qb=({updateLocalAIDataPath:e,getSiteContextValue:t,validationErrors:o,getLocalAIDataInRealTime:n})=>{const[i,r]=(0,c.useState)(t("industry",null));(({getSiteContextValue:e,updateLocalAIDataPath:t})=>{const o=e("language",null),n=(0,c.useMemo)((()=>h().map((0,b.getContentLanguages)(),((e,t)=>({label:e,value:t})))),[]);(0,c.useEffect)((()=>{if(!o){const e=(0,I.getBackendData)("adminLanguage");let o=n.find((t=>t.value===e))?e:"en_US";switch(o.split("_")[0]){case"en":o="en_US";break;case"es":o="es_ES";break;case"fr":o="fr_FR";break;case"pt":o="pt_BR";break;case"zh":o="zh_CN"}t("siteContext.language",o)}}),[])})({getSiteContextValue:t,updateLocalAIDataPath:e}),(({getSiteContextValue:e,updateLocalAIDataPath:t})=>{const o=e("structure_type",null);(0,c.useEffect)((()=>{const e=[null===o?["siteContext.structure_type","multi-page"]:null].filter(Boolean);e.length&&t(e)}),[])})({getSiteContextValue:t,updateLocalAIDataPath:e});const a=null==o?void 0:o.industry;return(0,j.jsxs)(Ls,{className:"kubio-black-wizard-onboarding__industry",error:a,children:[(0,j.jsx)(Ls.Label,{children:(0,C.__)("3. What is your website about?","kubio")}),(0,j.jsx)(b.IndustrySuggestionsControl,{value:i,onChange:t=>{r(t),e([["siteContext.industry",t]])},menuClassName:"kubio-black-wizard-onboarding__industry__menu",dropdownOnTheRight:!0}),a&&(0,j.jsx)(Ls.Error,{children:a})]})},Yb=window.wp.mediaUtils,Zb=({...e})=>{const[t,o]=(0,c.useState)(!1);return(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__logo__container",children:[(0,j.jsx)("a",{className:Z()("kubio-black-wizard-onboarding__logo__toggler",{"kubio-black-wizard-onboarding__logo__toggler--active":t}),onClick:()=>o(!t),children:(0,C.__)("Add logo","kubio")}),(0,j.jsx)(Xb,{...e,showLogo:t})]})},Xb=({updateLocalAIDataPath:e,getSiteContextValue:t,showLogo:o})=>{const n={value:t("website_logo"),onChange:t=>{e([["siteContext.website_logo",t]])}},[i,r]=(0,c.useState)(null),[a,s]=(0,c.useState)(!1),[l,u]=(0,c.useState)(null),d=(0,c.useMemo)((()=>{let e=null;return i?e=i.url:n.value&&(e=n.value.url),e}),[i,n.value]),p=(0,c.useMemo)((()=>{let e=null;return i?e=i.url:n.value&&(e=n.value.url),e?e.split("/").pop():e}),[i,n.value]),h=(e,t)=>{if(null==h||!h.calledOnce)return void(h.calledOnce=!0);r(e[0]);const o={id:e[0].id,url:e[0].url};e[0].id,n.onChange(o),t.value="",s(!1)};return(0,j.jsx)(Ls,{children:(0,j.jsxs)("div",{className:Z()("kubio-black-wizard-onboarding__logo",{"kubio-black-wizard-onboarding__logo--visible":o,"kubio-black-wizard-onboarding__logo--hidden":!o}),children:[(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__logo__control",children:[(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__logo__button",children:(0,j.jsx)(k.FormFileUpload,{accept:"image/*",onChange:async e=>{s(!0),await(0,Yb.uploadMedia)({allowedTypes:["image"],filesList:e.currentTarget.files,onFileChange:t=>h(t,e.target),onError:e=>{"MIME_TYPE_NOT_SUPPORTED"===e.code?u("Sorry, this file type is not supported."):u("Something went wrong. Please, try again."),u(e.message),s(!1)}})},disabled:a,children:(0,C.__)("Choose File","kubio")})}),a&&(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__logo__loader",children:(0,j.jsx)(k.Spinner,{})}),(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__logo__text",children:p}),(i||n.value)&&(0,j.jsx)(k.Icon,{className:"kubio-black-wizard-onboarding__logo__remove",size:17,icon:"trash",onClick:()=>{r(null),n.onChange(null)}}),d&&(0,j.jsx)("img",{src:d,alt:"logo",className:"kubio-black-wizard-onboarding__logo__image"})]}),!a&&l&&(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__logo__errors",children:l})]})})},Qb=({localAIDataRef:e,getLocalAIDataInRealTime:t,updateLocalAIDataPath:o,getSiteContextValue:n,validationErrors:i})=>{const[r,a]=(0,c.useState)(n("business_name",null)),[,s]=(0,S.useEntityProp)("root","site","title"),l=null==i?void 0:i.businessName;return(0,j.jsxs)(Ls,{error:l,children:[(0,j.jsx)(Ls.Label,{children:(0,C.__)("2. What is your website name?","kubio")}),(0,j.jsx)(ct.InputControl,{value:r,onChange:e=>{a(e),o([["siteContext.business_name",e]]),s(e)}}),l&&(0,j.jsx)(Ls.Error,{children:l}),(0,j.jsx)(Zb,{updateLocalAIDataPath:o,localAIDataRef:e,getLocalAIDataInRealTime:t,getSiteContextValue:n})]})},Jb=({updateLocalAIDataPath:e,localAIDataRef:t,getLocalAIDataInRealTime:o,getSiteContextValue:n,validationErrors:i})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(Ls,{children:[(0,j.jsx)(Ls.Label,{children:(0,C.__)("1. Your Favorite Colors and Fonts","kubio")}),(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__colors-fonts-group",children:[(0,j.jsx)(ll,{}),(0,j.jsx)(nl,{})]})]}),(0,j.jsx)(Qb,{updateLocalAIDataPath:e,localAIDataRef:t,getLocalAIDataInRealTime:o,getSiteContextValue:n,validationErrors:i}),(0,j.jsx)(qb,{updateLocalAIDataPath:e,localAIDataRef:t,getLocalAIDataInRealTime:o,getSiteContextValue:n,validationErrors:i})]}),e_=(0,I.getBackendData)("autoStartBlackWizardOnboarding");let t_=!1;const o_=({onFinish:e,overlayClicked:t})=>{const[o,n]=(0,b.useAIData)(),[i,r]=(0,c.useState)(!1),a=(0,c.useRef)(o),{setShowSidebar:l}=Hb(),[u,d]=(0,c.useState)(),p=(0,c.useCallback)((e=>{d((t=>{var o,n;let i=t;const r=null==t?void 0:t.industry,a=null==e||null===(o=e.siteContext)||void 0===o?void 0:o.industry;r&&a&&(i=h().cloneDeep(i),h().unset(i,"industry"));const s=null==t?void 0:t.businessName,l=null==e||null===(n=e.siteContext)||void 0===n?void 0:n.business_name;return s&&l&&(i=h().cloneDeep(i),h().unset(i,"businessName")),i}))}),[]),m=(0,c.useCallback)((e=>{const t={...e};a.current=t,n(t),p(t)}),[]);(0,c.useEffect)((()=>{e_&&!t_&&r(!0)}),[]);const g=(0,c.useCallback)((()=>a.current),[]),f=(0,c.useCallback)(((e,t)=>{let o=(0,I.kubioCloneDeep)(g());h().isArray(e)?(e.forEach((e=>{const[t,n]=e;o=h().set(o,t,(0,I.kubioCloneDeep)(n))})),m(o)):e&&(o=h().set(o,e,(0,I.kubioCloneDeep)(t)),m(o))}),[o,m]),_=(0,c.useCallback)(((e,t)=>(e=Array.isArray(e)?e.join("."):e,h().get(g(),`siteContext.${e}`,t))),[]),{clearSelectedBlock:v}=(0,w.useDispatch)("core/block-editor"),{openSidebar:y,setIsNavigationPanelOpened:x}=(0,w.useDispatch)("kubio/edit-site")||{};(0,c.useEffect)((()=>{v().then((()=>{null==y||y("document")})),null==x||x(!1)}),[v,y,x]);const S=(0,c.useRef)(),T=(0,s.useUnloadStoreEntities)(),P=(0,s.useResetUndoStack)(),E=h().get(o,"siteContext.industry"),R=h().get(o,"siteContext.business_name"),A=(0,c.useRef)(),O=(0,c.useRef)();(0,c.useEffect)((()=>()=>{clearTimeout(O.current)}),[]);const N=(0,C.__)("Finish Setup","kubio");return(0,j.jsxs)(zb.Fill,{children:[(0,j.jsxs)("div",{ref:A,className:"kubio-black-wizard-onboarding",children:[(0,j.jsxs)("div",{className:"kubio-black-wizard-onboarding__header",children:[(0,j.jsx)("h2",{className:"kubio-black-wizard-onboarding__header__title",children:(0,C.__)("Initial Setup","kubio")}),(0,j.jsx)("p",{className:"kubio-black-wizard-onboarding__header__description",children:(0,C.__)("Let's set up your website essentials.","kubio")})]}),(0,j.jsx)("div",{className:"kubio-black-wizard-onboarding__content",children:(0,j.jsx)(Jb,{updateLocalAIDataPath:f,localAIDataRef:a,getLocalAIDataInRealTime:g,getSiteContextValue:_,validationErrors:u})}),(0,j.jsxs)("div",{ref:S,className:"kubio-black-wizard-onboarding__footer",children:[(0,j.jsx)(k.Button,{onClick:()=>{(t=>{const{requestIdleCallback:n}=window;T(),P(),(0,s.removeCachedAllMergedAttributes)();const{onResetAiData:i}=o;null==i||i(),n((()=>{null==e||e()}))})()},variant:"secondary",children:(0,C.__)("Skip","kubio")}),(0,j.jsx)(k.Button,{onClick:()=>{const t=(()=>{const e={};return E||(e.industry=(0,C.__)("Field is Required","kubio")),R||(e.businessName=(0,C.__)("Field is Required","kubio")),e})();d(t),h().isEmpty(t)?(()=>{const t=g();h().get(t,"siteContext.industry")?(l(!1),r(!0)):null==e||e()})():(clearTimeout(O.current),O.current=setTimeout((()=>{(()=>{const e=A.current;if(!e)return;const t=e.querySelector(".kubio-black-wizard-onboarding__control__error");t&&((t=>{if(!t)return;const o=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.top>=o.top&&n.left>=o.left&&n.bottom<=o.bottom&&n.right<=o.right})(t)||t.scrollIntoView())})()}),100))},className:"kubio-ai-button",children:N}),t&&(0,j.jsx)(Ub,{footerRef:S})]})]}),i&&(0,j.jsx)(Nl,{onFinish:()=>{e_&&(t_=!1),null==e||e()}})]})},n_=(0,I.getBackendData)("autoStartBlackWizardOnboarding");let i_=!1;const r_=()=>{const{showBlackWizard:e,setShowBlackWizard:t,overlayClicked:o,setOverlayClicked:n,setShowSidebar:i}=Hb(),{canShowBlackWizardOnboarding:r,blackWizardOnboardingWillBeVisible:a}=(({setShowBlackWizard:e,setShowSidebar:t})=>{const o=(0,f.useGetGlobalSessionProp)("ready"),[n,i]=(0,b.useAIData)(),{getAIDataInRealTime:r}=n,{isAIEnabled:a,canStartWithBlackWizardOnboarding:s}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t,getSettings:o}=e(m.STORE_KEY),n=o();return{isAIEnabled:t(),canStartWithBlackWizardOnboarding:!!n.startWithBlackWizardOnboarding&&!i_}}),[]),{record:l}=r(),u=(0,I.getBackendData)("importDesignAiStructure",!1),d=s&&o&&a&&u&&!i_&&!!l;return(0,c.useEffect)((()=>{if(d){const n=n_?2e3:0;if(n_){var o;const e="kubio-black-wizard-onboarding-generating";(null===(o=document.querySelector(".kubio-iframe"))||void 0===o?void 0:o.contentDocument).body.classList.add(e),t(!1)}setTimeout((()=>{e(!0)}),n)}}),[d]),{canShowBlackWizardOnboarding:d,blackWizardOnboardingWillBeVisible:s&&!i_}})({showBlackWizard:e,setShowBlackWizard:t,setShowSidebar:i});return e?(0,j.jsx)(j.Fragment,{children:r&&(0,j.jsx)(o_,{onFinish:()=>{document.body.classList.remove("kubio-will-have-black-wizard-onboarding"),i_=!0,t(!1)},overlayClicked:o,setOverlayClicked:n})}):(0,j.jsx)(j.Fragment,{children:a&&(0,j.jsx)(Es,{})})},a_=()=>(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.Icon,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:Ge.KubioAI})}),s_=(e,t,o,n=!1)=>{const i=null==e?void 0:e.querySelector(`[data-block="${t}"]`);if(i)if(o)if(n){const t=e.createElement("div");t.classList.add("kubio-ai-generating-section-overlay"),i.append(t),(0,s.reactRender)((0,j.jsx)(a_,{}),t)}else{const e=i.querySelector(".kubio-ai-generating-section-overlay");e&&((0,s.reactUnmount)(e),e.remove())}else i.classList[n?"add":"remove"]("kubio-ai-is-generating")},{HEADER:l_,FOOTER:c_,SECTION:u_,COLUMN:d_,IMAGE:p_}=(0,Ue.getNamesOfBlocks)(),h_=[l_,c_,u_,d_,p_],m_=e=>{const{ownerDocument:t}=(0,s.useOwnerDocumentContext)(),[o,n]=(0,c.useState)(!1),i=(0,w.useSelect)((()=>{const t=(0,w.select)("core/block-editor").getBlock(e);return!!t&&h_.includes(t.name)}),[e]);return[o,(0,c.useCallback)((o=>{n(o),s_(t,e,i,o)}),[e,i,t])]},g_=async({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,block:r,includeContent:a=!0,shouldReplaceBlock:s=!0})=>{try{const l=(0,I.transformBlockToTemplate)(r),[c]=await vs({section:{category:e,template:l},pageContext:t,siteContext:o,pageTitle:n,includeContent:a});return s&&i(r.clientId,c,0),c[0]}catch(e){Vo.Log.error("footerInnerBlocksReplaceContent",e)}},{HEADER:f_,FOOTER:b_}=(0,Ue.getNamesOfBlocks)(),{HEADER:v_,FOOTER:y_}=(0,Ue.getNamesOfBlocks)(),k_=e=>{const{getClientIdsWithDescendants:t,getBlock:o,getBlockIndex:n}=(0,w.select)("core/block-editor"),{updateBlockAttributes:i,__unstableMarkLastChangeAsPersistent:r}=(0,w.dispatch)("core/block-editor"),a=t().map(o).find((e=>"hero-accent"===(0,p.get)(e,["attributes","kubioAI","meta","category"])));if(a&&0===n(a.clientId)){const t=(0,p.cloneDeep)(a.attributes.kubio);(0,p.set)(t,"style.descendants.inner.margin.top.value",e?-170:0),(0,p.set)(t,"props.overlapSection",e),(0,p.set)(t,"hash",Za().generate()),r(),i(a.clientId,{kubio:t})}},x_=()=>{const{dataHelper:e,...t}=(()=>{const{dataHelper:e}=(0,s.useKubioBlockContext)(),t=e.clientId,[{pageContext:o,siteContext:n,pageTitle:i},r]=(0,b.useAIData)(),{replaceBlocks:l,replaceInnerBlocks:u,selectBlock:d,clearSelectedBlock:m}=(0,w.useDispatch)("core/block-editor"),{block:g,innerBlocks:f,isFrontPage:_}=(0,w.useSelect)((e=>{const{getBlockParentsByBlockName:o,getBlock:n}=e("core/block-editor"),{getIsFrontPage:i=h().noop}=e("kubio/edit-site")||{},r=n((0,p.first)(o(t,[f_,b_])||[])||t);return{block:r,innerBlocks:e("core/block-editor").getBlocks(r.clientId),isFrontPage:i()}}),[t]),v=(0,c.useMemo)((()=>{let t=(e.getAttribute("anchor","section")||"section").replace(/\-\d+/,"");return t=(0,a.normalizeCategorySlug)(t),e.getAttribute("kubioAI.meta.category",t)}),[e]);return(0,c.useMemo)((()=>({clientId:g.clientId,sectionCategory:v,pageContext:o,siteContext:n,pageTitle:i,replaceBlocks:l,replaceInnerBlocks:u,block:g,innerBlocks:f,name:g.name,selectBlock:d,clearSelectedBlock:m,isFrontPage:_,dataHelper:e,setAIData:r})),[g,v,o,n,i,l,u,f,d,m,_,e,r])})(),[o,n]=(0,f.useGlobalSessionProp)("kubioAISurpriseMeUsedItems",new Map),i=(0,c.useMemo)((()=>({...t,usedSections:{items:o,setItems:n}})),[n,t,o]),[r,l]=m_(i.clientId),{clearSelectedBlock:u}=(0,w.useDispatch)("core/block-editor"),d=(0,c.useCallback)((async(e,t={})=>{if(r)return;const o=h().merge({},i,t);u(),l(!0);const n=(0,b.initGenerationSession)();try{switch(o.name){case v_:const{pair:t,overlappable:n}=await(async({clientId:e,pageContext:t,siteContext:o,pageTitle:n,replaceInnerBlocks:i,clearSelectedBlock:r=p.noop,isFrontPage:a=!0,pairPattern:s,usedSections:l=null},c=null)=>{let u=null;const d=l&&l.items.get(e)||[];try{const{navigation:h,hero:m,pairCloudPresetId:g,name:f,overlappable:_}=(0,b.getPageHederTemplate)(c,a,{skipSlugs:d});Vo.Log.info(`Skipping headers: ${d.join()||"N/A"}`),d.includes(f)||d.push(f);const v=g?(0,b.findPattern)("*",{findBy:{cloudPresetId:g},skipSlugs:d}):null;u=s||v;let y=[];if(h){const e=(0,p.cloneDeep)(h);y=await js(gs(e),{pageTitle:n,siteContext:o,pageContext:t})}const[k]=await vs({section:{category:"hero",template:m},pageTitle:n,siteContext:o,pageContext:t});return y=ys(y,o,t),await i(e,[...y,...k].filter(Boolean)),l&&(l.items.set(e,d),l.setItems(new Map(l.items))),r(),{pair:u,overlappable:_}}catch(e){Vo.Log.error("headerReplaceDesign",e)}return{pair:u}})(o,e);o.isFrontPage&&t&&(await ml((0,p.get)(t,["content","2"],[]),o.pageTitle,o.siteContext,o.pageContext),k_(n||o.overlappable));break;case y_:await(async({clientId:e,pageContext:t,siteContext:o,pageTitle:n,replaceInnerBlocks:i,replaceBlocks:r,selectBlock:a=noop},s=null)=>{try{const l="footer",c=s||(0,b.getPageFooterTemplate)(o),u=gs(c)[0].innerBlocks,d=[];for(let e=0;e<u.length;e++){const i=u[e],a=await g_({sectionCategory:l,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:r,block:i,includeContent:!0,shouldReplaceBlock:!0});d.push(a)}await i(e,d),a(e)}catch(e){Vo.Log.error("footerReplaceDesign",e)}})(o,e);break;default:await ks(o,e)}}catch(e){Vo.Log.error("replaceDesign",e)}finally{n()}l(!1)}),[u,r,i,l]),g=(0,c.useCallback)((async(e={})=>{if(r)return;u(),l(!0);const t=(0,b.initGenerationSession)(),o=h().merge({},i,e);try{switch(o.name){case v_:await Ts(o);break;case y_:await(async({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,innerBlocks:r})=>{for(let a=0;a<r.length;a++){const s=r[a];await g_({sectionCategory:e,pageContext:t,siteContext:o,pageTitle:n,replaceBlocks:i,block:s,includeContent:!1})}})(o);break;default:await xs(o)}}catch(e){Vo.Log.error("replaceDesign",e)}finally{t()}l(!1)}),[u,r,i,l]),_=(0,c.useCallback)(((e=null)=>{if(r)return;const t=(()=>{switch(i.name){case v_:return"kubio-header";case y_:return"kubio-footer";default:return"kubio-content"}})(),o=(0,p.get)(i,"sectionCategory","section"),n="kubio-header"!==t||i.isFrontPage?"section"===o||"kubio-content"!==t?void 0:`${t}/${o}`:m.INNER_HEADERS_CATEGORY;let a=async(e,t="")=>{const o=(0,I.kubioCloneDeep)(e.content),n=e.categories[0].split("/")[1],i=e.pairCloudPresetId?(0,b.findPattern)("*",{findBy:{cloudPresetId:e.pairCloudPresetId}}):null;try{await d(o,{sectionCategory:n,pairPattern:i,summary:t,overlappable:[...e.publicTags||[],...e.internalTags||[]].includes("overlappable")})}catch(e){Vo.Log.error("replaceDesign",e)}};if(e){const t=a;a=o=>e(o,t)}const s={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:t,category:n,internalTag:m.AI_READY_TAG,onActionFunc:a}};(0,I.onOpenTemplateGalleryWithParams)(s)}),[r,i,d]);return{replaceDesign:d,replaceContent:g,replaceDesignFromGallery:_,dataHelper:e}},S_=e=>new Promise((t=>{setTimeout(t,e)})),w_="generating",C_="generated",I_=["cta","website-main-cta-section"];class j_{constructor(e,t,o,n,i){ft(this,"insertBlocks",void 0),ft(this,"queue",[]),ft(this,"insertedSections",[]),ft(this,"queuedSections",new Map),ft(this,"preCreatedSections",{}),ft(this,"pageTitle",void 0),ft(this,"siteContext",void 0),ft(this,"pageContext",void 0),this.pageTitle=t,this.siteContext=o,this.pageContext=n,this.notify=i,this.insertBlocks=e}initialize(e){for(const t of e){let e=t.slug;const o=Za().generate();I_.includes(t.category)||(e=`${t.slug}::${o}`),this.queuedSections.set(e,{id:o,itemSlug:t.slug,category:t.category,section:t,inserted:!1,blocks:null,status:null}),this.queue.push(e)}}async generateSection(e){const t=this.queuedSections.get(e),o=this.preCreatedSections[t.category];if(o)return t.status=w_,this.logInfo((0,C.sprintf)("Section was pre-created - %1$s ( %2$s )",t.itemSlug,t.id)),t.blocks=o.map(I.transformTemplateToBlock),void(t.status=C_);if(null===t.status)try{this.logInfo((0,C.sprintf)("Start generating - %1$s ( %2$s )",t.itemSlug,t.id)),this.queuedSections.set(e,{...t,status:w_});const[o]=await vs({section:t.section,pageTitle:this.pageTitle,siteContext:this.siteContext,pageContext:this.pageContext,generateAnchorAndName:!1});this.queuedSections.set(e,{...t,blocks:o,status:C_})}catch(o){this.queue.map(((t,o)=>t===e?o:-1)).filter((e=>e>=0)).forEach((e=>this.queue.splice(e,1))),this.logError("Kubio AI section generation error",o,t.section)}}async generate(e,t={}){e&&this.notify((0,C.__)("Preparing page content","kubio")),this.preCreatedSections=t;const o=(0,I.getBackendData)("kubioAIParallelCalls",3),n=(0,p.chunk)(this.queue,o);for(const t of n)await this.executeChunk(t,e)}async executeChunk(e,t){await S_(t?1e3:0),await Promise.allSettled(e.map(((e,t)=>this.generateSection(e,t))))}getInsertedSections(){return this.insertedSections}async insert(){const e=this.queue[0],t=this.queuedSections.get(e);if(this.notify(((e="")=>(0,C.sprintf)(// translators: %s section name
// translators: %s section name
(0,C.__)('Generating "%s" section',"kubio"),(0,a.sectionCategoryToLabel)(e)))(t.category)),t.status!==C_)return await S_(200),await this.insert();const o={...t,blocks:t.blocks.map((e=>{const t=(0,st.cloneBlock)((0,p.cloneDeep)(e)),o=(0,p.get)(e,"attributes.kubioAI.meta.category","section"),n=(0,a.sectionCategoryToLabel)(o),{name:i,anchor:r}=_s(n);return(0,p.set)(t,"attributes.anchor",r),(0,p.set)(t,"attributes.attrs.name",i),t}))};return this.insertedSections.push(o),this.queue.shift(),this.logInfo((0,C.sprintf)("Inserted - %1$s ( %2$s )",t.itemSlug,t.id)),await this.insertBlocks(o.blocks),this.queue.length?(await S_(500),await this.insert()):void 0}logInfo(e,...t){Vo.Log.info(`[SectionsQueue] ${e}`,...t)}logError(e,...t){Vo.Log.error(`[SectionsQueue] ${e}`,...t)}}const T_=(e,t)=>{const o=(0,p.get)(e,["attributes"]),n=(0,p.get)(o,["kubio","style","descendants",t,"background"]);return{blockAttributes:o,blockBg:n,blockBgType:(0,p.get)(n,"type")}},P_=async({imageData:e,block:t,imageDataPath:o="bgImage",styledComponent:n})=>{const{blockAttributes:i,blockBg:r,blockBgType:a}=T_(t,n);if("image"!==a)return;const s=(0,p.get)(r,["image","0","source","url"]),l=(0,p.get)(i,["kubioAI","imageTerms"]);try{const n=await(0,b.searchImages)({...R_,search:l,initialImage:s}),i=E_(n.items,s);h().set(e,o,{currentValue:s,variants:i,clientId:t.clientId,blockName:t.name}),A_(i)}catch(e){console.error(e)}},E_=(e,t)=>e.filter((e=>e.split("?")[0]!==t.split("?")[0])),R_={perPage:11},A_=e=>{e.forEach((e=>{(new window.Image).src=e}))},O_=(0,p.debounce)(I.scrollIntoView,300),{NAVIGATION:N_,HERO:D_}=(0,Ue.getNamesOfBlocks)(),M_=["home","about","features","portfolio","pricing","team","contact"],B_=(e,t,o=null)=>{e=Xo(e).toHsl();const n=o||t,i=t;return Xo({...e,l:Math.floor(Math.random()*(n-i+1)+i)}).toHexString()},L_=()=>{const[e,t]=(0,c.useState)(!1),[o,n]=(0,c.useState)((0,C.__)("Generating…","kubio")),i=(0,f.useBlocksOwnerDocument)(),{setItems:r}=(0,lo.usePrimaryMenuBlockEditor)(),{createErrorNotice:a}=(0,s.useKubioNotices)(),{postContentClientId:l,getHeaderClientId:d,getBlocks:v,isFSETemplate:y,themeSlug:k,nonFSEContentBlocksClientIds:x}=(0,w.useSelect)((e=>{var t;const{getClientIdsWithDescendants:o,getBlock:n,getBlocks:i}=e("core/block-editor"),{currentPageHasFSETemplate:r}=e(m.STORE_KEY),a=r(),s=e=>{const t=(0,p.castArray)(e),i=o().map((e=>n(e))).find((e=>t.includes(e.name)));return null==i?void 0:i.clientId},l=a?s("core/post-content"):null;return{isFSETemplate:a,getBlocks:i,postContentClientId:l,getHeaderClientId:()=>s("kubio/header"),getCurrentHeaderStructure:()=>{const e={};return i(s("kubio/header")).forEach((t=>{t.name===D_&&(e.hero=(0,I.transformBlockToTemplate)(t)),t.name===N_&&(e.navigation=(0,I.transformBlockToTemplate)(t))})),e},themeSlug:null===(t=e("core").getCurrentTheme())||void 0===t?void 0:t.template,nonFSEContentBlocksClientIds:i().map((({clientId:e})=>e))}}),[]),{insertBlocks:T,replaceInnerBlocks:P,clearSelectedBlock:E,removeBlocks:R}=(0,w.useDispatch)("core/block-editor"),{editEntityRecord:A,saveEntityRecord:O}=(0,w.useDispatch)("core"),{setLogoImage:N}=(0,_.useSiteLogoImages)(),[D,M]=Qa(),[B,L]=(0,b.useAIData)(),{globalStyle:z}=(0,_.useGlobalDataStyle)(),{setPalette:F}=(0,_.useGlobalDataColors)(),[,G]=(0,S.useEntityProp)("root","site","title"),H=(0,w.useSelect)((e=>{var t,o;const{getPage:n,getEntity:i}=e(m.STORE_KEY),r=(null===(t=n())||void 0===t?void 0:t.link)||null,a=(null===(o=i())||void 0===o?void 0:o.path)||null;return(r||a||"").replace(/\/$/,"")}),[]),U=(0,c.useCallback)((async e=>{await T(e,v(l).length,null===l?"":l,!1),await new Promise((t=>{setTimeout((()=>{O_(null==i?void 0:i.querySelector(`[data-block="${e[0].clientId}"]`),{block:"center",onScrollEnd:()=>(0,p.delay)(t,200)})}),300)}))}),[i,v,l,T]),W=(0,c.useRef)(null),V=(0,c.useCallback)((e=>{const t=W.current;t&&top.requestIdleCallback((()=>{setTimeout((()=>{O_(null==i?void 0:i.querySelector(`[data-block="${t}"]`),{block:"start",smooth:!0,onScrollEnd:e})}),500)}))}),[i]),K=(0,c.useCallback)((async()=>(E(),l?await P(l,[]):await R(x))),[E,x,l,R,P]),$=(0,c.useCallback)((e=>{const t=d();P(t,e)}),[d,P]),{frontPageEntity:q}=B,Y=(0,c.useCallback)((async e=>{var t;const{pageContext:o,siteContext:n,pageTitle:i,record:r,isFrontPage:a}=e;await A("postType",r.type,r.id,{meta:{saved_in_kubio:!0},title:i,kubio_ai_page_context:o}),null!==(t=n.website_logo)&&void 0!==t&&t.id&&N(n.website_logo.id),a&&n.business_name&&G(n.business_name)}),[A,N,G]),Z=(0,c.useCallback)((e=>{const t=(0,lo.generateItemInitialData)();if(e.length){const o=e.filter((e=>M_.includes(e.category))).map(((e,o)=>{const n=(0,p.get)(e.blocks,[0,"attributes","anchor"]),i=(0,p.get)(e.blocks,[0,"attributes","attrs","name"]);return{...t,id:t.id-1-o,objectId:t.id-1-o,url:`${H}/#${n}`,label:i,order:o+2}})),n=[q?{...t,id:t.id,type:"post_type",object:"page",objectId:q.id,label:q.title.rendered,order:1}:null,...o];r(n.filter(Boolean))}}),[H,q,r]),X=(0,c.useCallback)((async e=>{var t,o;const{siteContext:i,isFrontPage:r=!1}=e;let a=(null==i?void 0:i.siteMood)||m.SITE_MOOD_VALUES.NEUTRAL,s="organization",l="both",c="",u="";const d={pattern:r?null:null===(t=e.siteContext)||void 0===t||null===(o=t.cta)||void 0===o?void 0:o.pattern,text:""};if(r){n((0,C.__)("Determine the website particularities","kubio"));try{const{mood:e,websiteSubject:t,ownerType:o,clientType:n,cta:r,coreBusiness:h}=await(0,b.determineSiteMood)({siteContext:(0,p.omit)(i,"otherPages")});a=e,s=o,l=n,u=h,d.text=r,c=t}catch(e){Vo.Log.error("Unable to determine site mood with AI",e)}}return Vo.Log.info(`Site mood is: ${a}`),{siteMood:a,cta:d,ownerType:s,clientType:l,websiteSubject:c,coreBusiness:u}}),[]),Q=(0,c.useCallback)((async(e,t=3)=>{const{pageContext:o,siteContext:i,pageTitle:r}=e;n((0,C.__)("Generating page structure","kubio"));let a=await(0,b.getPageSectionsTemplates)({pageTitle:r,siteContext:i,pageContext:{...o,sortSections:!0}});if((0,p.isEmpty)(a)&&t)a=await Q(e,t-1);else if((0,p.isEmpty)(a)){const e=(0,C.__)("There was an error with the KubioAI services. If the error persists, please contact support","kubio");throw new b.AIApiError(e,{cause:"empty_page_structure"})}return a}),[]),J=(0,c.useCallback)((async(e,t)=>{const{pageContext:o,pageTitle:i,siteContext:r,isFrontPage:a=!1}=e;if(!a)return;let s=(0,p.sample)(m.colorPalettes.filter((e=>e.mood===t)));try{n((0,C.__)("Blending colors for an exceptional color palette","kubio"));const e=await(0,b.generateColorScheme)({pageContext:o,siteContext:r,pageTitle:i,mood:t});s={colors:[...e,B_(e[1],98,100),B_(e[0],5,10)]}}catch(e){Vo.Log.error("Error determining site colors",e)}s&&F(s.colors)}),[F]),ee=(0,f.useSetGlobalSessionProp)("aiFrontPageHeroImageVariantsData"),te=(0,c.useCallback)((async(e,t)=>{if(!y)return;const{pageContext:o,pageTitle:i,siteContext:r,isFrontPage:a=!1,isRegenerate:s}=e;if(!a)return;n((0,C.__)("Crafting an engaging website header","kubio"));let l,c=null,d=null,m=null,g=null,f=!0;s||(l=(0,b.getPageHederTemplate)(null,!0,{tag:[`theme-${k}`]})),l||(l=(0,b.getPageHederTemplate)(null,!0,{tag:[t]})),c=l.navigation,d=l.hero,m=l.bodyStyle,g=l.pairTemplate,f=l.overlappable,(0,b.setInGenerationSession)("currentHeaderIsOverlappable",f),d=(0,u.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",d);const[_,v]=await Promise.allSettled([c?js(gs(c),{pageContext:o,siteContext:r,pageTitle:i}):new Promise((e=>e([]))),vs({section:{category:"hero",template:d},pageTitle:i,siteContext:r,pageContext:o})]),x=await _.value,[S]=await v.value;if(g)try{ml(g,i,r,{...o,isFrontPage:!1})}catch(e){Vo.Log.error("Generating inner header error",e)}return m&&top.requestIdleCallback((()=>{setTimeout((()=>{z.setStyle("",m,{styledComponent:"body",media:"desktop",mergeData:!1})}),10)})),a&&(async({heroBlock:e,setAiFrontPageHeroImageVariantsData:t})=>{const o={};await P_({imageData:o,block:e,imageDataPath:"bgImage",styledComponent:"outer"}),await(async({imageData:e,block:t,styledComponent:o})=>{const{blockAttributes:n,blockBg:i,blockBgType:r}=T_(t,o);if("slideshow"!==r)return;const a=(0,p.get)(i,["slideshow","slides"],[]).map((e=>null==e?void 0:e.url)),s=h().get(a,0),l=(0,p.get)(n,["kubioAI","slideshowTerms",0]);try{const o=await(0,b.searchImages)({...R_,search:l,initialImage:s}),n=E_(o.items,s);h().set(e,"bgSlideshow",{currentValue:a,variants:n,clientId:t.clientId,blockName:t.name}),A_(n)}catch(e){console.error(e)}})({imageData:o,block:e,styledComponent:"outer"}),await(async({imageData:e,heroBlock:t})=>{const o=(0,I.findBlockByName)(t,"kubio/image");if(!o)return;const n=(0,p.get)(o,["attributes","url"]),i=(0,p.get)(o,["attributes","kubioAI","imageTerms"]);try{const t=await(0,b.searchImages)({...R_,search:i,initialImage:n}),r=E_(t.items,n);h().set(e,"imageBlock",{currentValue:n,variants:r,clientId:o.clientId,blockName:o.name}),A_(r)}catch(e){console.error(e)}})({imageData:o,heroBlock:e}),await(async({imageData:e,heroBlock:t})=>{const o=(0,I.findAllBlocksByName)(t,"kubio/column",[]);for(let t=0;t<o.length;t++){const n=o[t];await P_({imageData:e,block:n,imageDataPath:"columnBgImage",styledComponent:"inner"})}})({imageData:o,heroBlock:e}),h().isEmpty(o)?t(null):t(o)})({heroBlock:S[0],setAiFrontPageHeroImageVariantsData:ee}),$([...x,...S]),S[0].clientId}),[y,$,k,z,ee]),oe=(0,f.useSetGlobalSessionProp)("showAiPostGenerateInterface"),ne=(0,c.useCallback)((async()=>{const{pageContext:e,siteContext:o,pageTitle:i,isFrontPage:a=!1,isMultiPage:s}=B;t(!0),W.current=null,await Y(B);const l=await(0,b.createSiteStructureAndUpdateMenu)({localAIData:B,frontPageEntity:q,setMenuItems:r,setCurrentlyGeneratingMessage:n}),{siteMood:c,clientType:u,cta:d,ownerType:h,websiteSubject:m,coreBusiness:g}=await X(B),f={...B,siteContext:{...o,otherPages:l,isMultiPage:s,siteMood:c,clientType:u,cta:d,ownerType:h,websiteSubject:m,coreBusiness:g},pageContext:{...e,isFrontPage:a}},_=new j_(U,i,f.siteContext,f.pageContext,n);let v=await Q(f);if(a){const e=v.find((e=>"cta"===e.category));f.siteContext.cta.pattern=(0,p.cloneDeep)(e)}if(v=((e,t)=>{const{isFrontPage:o,siteContext:n}=t,i=n.cta.pattern||null;if(e=[...e],!i)return e;if(o){const t=(0,p.findIndex)(e,(e=>"features"===e.category));t>=0&&e.splice(t+1,0,i)}return e.map((e=>"cta"===e.category?{...i,slug:"website-main-cta-section"}:e))})(v,f),await K(),W.current=await te(f,c),await J(f,c),_.initialize(v),_.generate(a,{cta:a?null:(0,p.get)(f,"siteContext.cta.pattern.template",null)}),await _.insert(),y){const e=(0,b.getFromGenerationSession)("currentHeaderIsOverlappable",null);null!==e&&k_(e)}t(!1),M(!1);const k=_.getInsertedSections();if(a&&y&&(s||Z(k)),a){const e=k.find((e=>"cta"===e.category));e&&(f.siteContext.cta.pattern.template=e.blocks.map(I.transformBlockToTemplate))}W.current||(W.current=(0,p.get)(k,["0","blocks","0","clientId"])),a&&((0,b.saveAiGeneralSettings)(f.siteContext),L(f)),V((()=>{a&&y&&top.requestIdleCallback((()=>{setTimeout((()=>{oe(!0)}),300)}))}))}),[B,Y,X,U,Q,K,te,J,y,M,V,oe,Z,L]),[ie]=(0,b.useAIServiceInfo)(),re=(0,c.useRef)(!1);return(0,g.useEffectAsync)((async()=>{if(!B.record||!D||!0===re.current)return;if(null===l&&y)return;if(ie.remainingCredits<ie.perPageCredits)return(0,u.doAction)("kubio.ai.zero_credits",{type:"page_generation"}),t(!1),void M(!1);const e=performance.now(),o=(0,b.initGenerationSession)();try{(0,u.addFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration",(()=>!0)),document.body.classList.add("kubio-ai-is-page-generating"),re.current=!0,await ne()}catch(e){e instanceof b.AIApiError?Vo.Log.error("Page generation: AI API Error",e):(Vo.Log.error("Page generation: JS Error",e),a((0,C.__)("KUBIO AI: There was an unknown error. If it persists, please contact support","kubio"),{duration:3e3}))}finally{t(!1),M(!1),re.current=!1,o(),document.body.classList.remove("kubio-ai-is-page-generating"),Vo.Log.success("Generation time: "+Math.ceil((performance.now()-e)/100)/10),(0,u.removeFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration")}}),[ie,B,M,a,ne,y,l]),(0,j.jsx)(j.Fragment,{children:e&&(0,j.jsx)(Rs,{message:o})})},z_=()=>{const[e]=Qa(),t=(0,f.useGetGlobalSessionProp)("ready"),[o,n]=(0,c.useState)(),i=(0,s.useDebounce)((0,c.useCallback)((e=>n(e)),[]),300);return(0,c.useLayoutEffect)((()=>{t&&e&&i(!0)}),[t,e,i]),(0,j.jsx)(j.Fragment,{children:o&&(0,j.jsx)(L_,{})})},F_=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})}),G_=7500,H_=(0,c.memo)((()=>(0,j.jsx)(k.Icon,{icon:Ge.DashiconCheckedIcon,className:"kubio-comparison-check-icon"}))),U_=()=>(0,Fe.upgradeToPro)({source:"ai_upgrade_modal",content:"ai_upgrade_modal"}),W_=(0,c.memo)((()=>(0,j.jsx)(k.Icon,{icon:Ge.DashiconUncheckedIcon,className:"kubio-comparison-close-icon"}))),V_=({children:e})=>(0,j.jsx)("div",{className:"kubio-comparison-tooltip",children:e}),K_=["attachment","kubio_changeset"],$_=()=>{const[e]=(0,b.useAIServiceInfo)(),{aiImageCost:t=150,aiSectionCost:o=30}=e;return(0,j.jsxs)(V_,{children:[(0,j.jsx)("p",{children:(0,C.sprintf)(// translators: %s is the number of credits
// translators: %s is the number of credits
(0,C.__)("With %s credits you'll benefit of:","kubio"),Intl.NumberFormat().format(G_))}),(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,C.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,C.__)("%d full page generations","kubio"),Math.ceil(G_/(10*o)))}),(0,j.jsx)("li",{children:(0,C.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,C.__)("%d page sections generations","kubio"),Math.ceil(G_/o))}),(0,j.jsx)("li",{children:(0,C.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,C.__)("%d text generations","kubio"),Math.ceil(750))}),(0,j.jsx)("li",{children:(0,C.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,C.__)("%d image generations","kubio"),Math.ceil(G_/t))})]}),(0,j.jsx)("p",{children:(0,C.__)("The numbers provided are approximations and may vary based on the size and complexity of the generated content","kubio")})]})},q_=[{label:(0,C.__)("Generate pages with AI","kubio"),free:(0,C.__)("Homepage only","kubio"),pro:(0,C.__)("Multiple pages","kubio")},{label:(0,C.__)("Regenerate page section","kubio"),free:(0,j.jsx)(H_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Search images on Pexels","kubio"),free:(0,j.jsx)(H_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Generate images with AI","kubio"),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Kubio AI credits","kubio"),tooltip:()=>(0,j.jsx)($_,{}),free:500,pro:(0,C.sprintf)(// translators: %s is the amount of credits, e.g 7500
// translators: %s is the amount of credits, e.g 7500
(0,C.__)("Starting from %s","kubio"),Intl.NumberFormat().format(G_))},{label:(0,C.__)("Design variety on AI generated pages","kubio"),free:(0,C.__)("Limited","kubio"),pro:(0,C.__)("Full","kubio")},{label:(0,C.__)("Customize footer text","kubio"),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Sticky navigation","kubio"),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("High converting navigation layouts","kubio"),tooltip:()=>(0,j.jsx)(V_,{children:(0,C.__)("Navigation layouts containing “call to action” buttons that will lead to better conversion rates.","kubio")}),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Beautiful hero sections","kubio"),free:"9",pro:"35+"},{label:(0,C.__)("Different hero image for each page","kubio"),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Newsletter subscription forms","kubio"),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Pricing tables","kubio"),free:(0,j.jsx)(W_,{}),pro:(0,j.jsx)(H_,{})},{label:(0,C.__)("Technical support","kubio"),free:(0,C.__)("Best effort","kubio"),pro:(0,C.__)("Priority support","kubio")}];let Y_=(0,j.jsx)(j.Fragment,{});Y_=({onCancel:e})=>{const[t,o]=(0,c.useState)(!1),[n,i]=(0,c.useState)(!1),r=(0,c.useRef)(),{hasDirtyEntities:a,entitiesToSave:l}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((({kind:e,name:t})=>"postType"===e&&!K_.includes(t))).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:u}=(0,w.useDispatch)("core"),d=(0,s.useUnloadStoreEntities)(),h=(0,c.useCallback)((()=>{d(),window.location=(0,I.getBackendData)("wpAdminUpgradePage")}),[d]),m=(0,c.useCallback)((async()=>{o(!0);const e=l.map((({kind:e,name:t,key:o})=>u(e,t,o)));await Promise.all(e),window.location=(0,I.getBackendData)("wpAdminUpgradePage")}),[l,u]),g=(0,c.useCallback)((()=>{a?i(!0):window.location=(0,I.getBackendData)("wpAdminUpgradePage")}),[a]);return(0,j.jsx)("div",{className:"kubio-ai-zero-credits-upgrade",children:(0,j.jsxs)("div",{className:"kubio-ai-zero-credits-upgrade__content",children:[(0,j.jsx)("div",{className:"kubio-ai-zero-credits-upgrade__close-modal",children:(0,j.jsx)(k.Button,{icon:We,onClick:e})}),(0,j.jsxs)(k.Flex,{children:[(0,j.jsx)(k.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__content-column",children:(0,j.jsxs)("div",{className:"kubio-ai-zero-credits-upgrade__content-column__content",children:[(0,j.jsx)(k.Icon,{icon:Ge.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,j.jsx)("h1",{children:(0,C.__)("Looks like you have used all your free Kubio AI credits.","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("To continue generating website content with Kubio AI you will need to upgrade to Kubio PRO.","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("You can also continue using the Kubio builder for free and you can keep the generated content, but you won't be able to enjoy the AI features anymore.","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("On the right, you can see a few advantages offered by the PRO version.","kubio")}),(0,j.jsxs)(k.Flex,{className:"buttons-wrapper",justify:"flex-start",children:[(0,j.jsx)(k.Button,{variant:"primary",onClick:U_,className:"kubio-ai-button",children:(0,C.__)("Upgrade to PRO","kubio")}),(0,j.jsx)(k.Button,{onClick:e,className:"kubio-ai-button-tertiary",children:(0,C.__)("Maybe later","kubio")})]}),(0,j.jsxs)(k.Flex,{align:"center",className:"kubio-zero-credits-already-purchased-wrapper",children:[(0,j.jsx)("span",{children:(0,C.__)("Already purchased?","kubio")}),(0,j.jsx)(k.Button,{ref:r,onClick:g,variant:"link",className:"kubio-ai-button-link is-small kubio-ai-activate-pro",children:(0,C.__)("Activate PRO now","kubio")}),n&&(0,j.jsxs)(k.Popover,{inline:!0,anchor:r.current,placement:"top",offset:10,focusOnMount:!1,className:"kubio-ai-wizard-confirmation",shift:!0,flip:!0,onClose:()=>!t&&i(!1),children:[(0,j.jsxs)(k.Flex,{className:"kubio-ai-wizard-confirmation__message",align:"flex-start",direction:"column",children:[(0,j.jsx)("h3",{children:(0,C.__)("The current page has unsaved changes","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("The Kubio PRO license activation process will take you to the WordPress admin area and the page you are currently editing has unsaved changes.","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("Would you like to save these changes or discard them?","kubio")})]}),(0,j.jsxs)(k.Flex,{justify:"flex-start",gap:5,children:[(0,j.jsx)(k.Button,{className:"kubio-ai-button-tertiary has-text",onClick:h,children:(0,C.__)("Discard & activate","kubio")}),(0,j.jsx)(k.Button,{className:"kubio-ai-button has-text",isBusy:t,onClick:m,children:(0,C.__)("Save & activate","kubio")})]})]})]})]})}),(0,j.jsx)(k.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__bg-column",children:(0,j.jsxs)("table",{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"clear-border"}),(0,j.jsx)("th",{className:"kubio-comparison-header-free",children:(0,C.__)("FREE","kubio")}),(0,j.jsx)("th",{className:"kubio-comparison-header-pro",children:(0,C.__)("PRO","kubio")})]})}),(0,j.jsx)("tbody",{children:q_.map((e=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"label-column",children:(0,j.jsxs)("span",{children:[!e.tooltip&&(0,j.jsx)("span",{children:e.label}),!!e.tooltip&&(0,j.jsx)(k.Tooltip,{delay:100,className:"kubio-comparison-tooltip-title",placement:"right",text:(0,p.isFunction)(e.tooltip)?e.tooltip():e.tooltip,children:(0,j.jsxs)("span",{className:"item-has-tooltip",children:[e.label,(0,j.jsx)(k.Icon,{className:"tooltip-icon",icon:F_})]})})]})}),(0,j.jsx)("td",{className:"content-column",children:e.free}),(0,j.jsx)("td",{className:"content-column content-column--pro",children:e.pro})]},e.label)))})]})})]})]})})};const Z_=()=>{const e=(0,c.useRef)({}),[t,o]=(0,c.useState)(!1),n=(0,c.useCallback)(((t={})=>{if(!(0,u.applyFilters)("kubio.dismissZeroCreditsModal",!1)){switch(t.type||"general"){case"page_generation":e.current={title:(0,C.__)("Credit status","kubio"),message:(0,C.__)("You currently do not have enough credits to generate a new page. To continue using this feature, please consider purchasing more credits.","kubio")};break;case"general":e.current={title:(0,C.__)("Credit status","kubio"),message:(0,C.__)("You currently do not have enough credits. To continue using this feature, please consider purchasing more credits","kubio")}}o(!0)}}),[]);(0,s.useAddWPAction)("kubio.ai.zero_credits",n);const[i,r]=(0,b.useAIServiceInfo)(),{createSuccessNotice:a}=(0,s.useKubioNotices)(),l=(0,c.useCallback)((async()=>{o(!1);try{const{remaining_credits:e=0,per_page_credits:t=30}=await(0,b.getAIInfo)();r({...i,state:"ready",remainingCredits:e,perPageCredits:t}),a((0,C.__)("Credit status updated!","kubio"),{type:"snackbar",duration:3e3})}catch(e){Vo.Log.error("Zero credits modal",e)}}),[i,a,r]),d=(0,c.useCallback)((()=>{o(!1)}),[]);return t&&(0,j.jsx)(k.Modal,{className:Z()("kubio-ai-wizard-modal auto kubio-ai-zero-credits-upgrade-modal"),overlayClassName:"kubio-ai-zero-credits-upgrade__close-modal",__experimentalHideHeader:!0,title:null,isDismissible:!1,children:(0,j.jsx)(Y_,{message:e.current.message,refresh:l,onCancel:d})})},X_=-1,Q_=()=>{const{isReady:e}=Ib(),[t,o]=(0,c.useState)(0),[n,i]=(0,c.useState)(!1),[r,a]=Qa(),[s,l]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked",!0),{isAIEnabled:u,isWooPage:d}=(0,w.useSelect)((e=>({isAIEnabled:e(m.STORE_KEY).isAICapabilityEnabled(),isWooPage:e(m.STORE_KEY).getIsWooCommercePage()})),[]),{contentLength:p,isFrontPage:g,isPage:_,isBlogPage:v}=(0,w.useSelect)((e=>{var t;const{getBlocks:o,getBlockOrder:n}=e("core/block-editor"),i=o()||[],{getIsFrontPage:r=h().noop,getPage:a=h().noop,getIsBlogPage:s=h().noop}=e("kubio/edit-site")||{},l=a()||{},c=(0,I.findBlockByName)(i,"core/post-content"),u=null==c?void 0:c.clientId;return{isFrontPage:r(),isBlogPage:s(),contentLength:null===(t=n(u))||void 0===t?void 0:t.length,isPage:"page"===h().get(l,"context.postType")}}));return(0,c.useEffect)((()=>{e&&o(0)}),[e]),(0,c.useLayoutEffect)((()=>{if(t!==X_&&e&&u)if(r)o(X_);else if(_&&!g&&!d&&!v)return p?void o(X_):s?o(1):(o(X_),void l(!1))}),[e,p,g,_,r,u,n,t,s,l,d,v]),(0,j.jsxs)(j.Fragment,{children:[1===t&&(0,j.jsx)(Uf,{showButton:!1,initialModalIsVisible:!0,onNewAiPage:()=>{o(X_),i(!0)},onNewKubioPage:()=>{o(X_)},onCancel:()=>{o(X_)},title:(0,C.__)("Generate page content","kubio"),description:(0,C.__)("Choose a method to generate content for the current page","kubio")}),n&&(0,j.jsx)(b.AIWizard,{onFinish:()=>{o(X_),i(!1),a(!0)},onCancel:()=>{o(X_),i(!1)},isRegenerate:!0,forceGenerateTitle:!0})]})},J_=({enabled:e})=>{const t=(0,f.useGetGlobalSessionProp)("ready",!1),[o,n]=(0,f.useGlobalSessionProp)("AIFromGetStartedTriggered",!1),[i]=(0,b.useAIData)(),[r,a]=(0,b.useAIServiceInfo)(),[,s]=Qa();return(0,c.useEffect)((()=>{}),[a]),(0,c.useEffect)((()=>{if(e&&!o&&"ready"===r.state&&t&&i.isAIConnected){async function l(){a(await(0,b.getAIInfo)()),n(!0),s(!0)}l()}}),[i.isAIConnected,r.state,e,t,s,n,o,a]),(0,j.jsx)(j.Fragment,{})},ev=()=>{const[e,t]=(0,f.useGlobalSessionProp)("commercialFlowDisabled",!0),o=(0,w.useSelect)((e=>e("core").getCurrentTheme().template));(0,c.useEffect)((()=>{I.AI_IN_PRO&&(async()=>{const e=await A()({path:"kubio/v1/commercial-flow",method:"GET"}).then((e=>e));t(!(null==e||!e.disabled))})()}),[I.AI_IN_PRO]);const n=async()=>{t(!0),await A()({path:"kubio/v1/commercial-flow",method:"POST",data:{disabled:!0}})};if(I.AI_IN_PRO&&!e)return(0,j.jsxs)(k.Modal,{onRequestClose:()=>{},className:"kubio-ai-commercial-flow-modal",overlayClassName:"kubio-ai-commercial-flow-modal__overlay",isDismissible:!1,title:"",onKeyDown:e=>{"Escape"===e.key&&n()},__experimentalHideHeader:!0,children:[(0,j.jsx)("div",{className:"kubio-ai-commercial-flow-modal__close-modal",children:(0,j.jsx)(k.Button,{icon:We,onClick:n})}),(0,j.jsxs)("div",{className:"kubio-ai-commercial-flow-modal__content",children:[(0,j.jsx)("div",{className:"kubio-ai-commercial-flow-modal__content__video",children:(0,j.jsx)("iframe",{src:"https://player.vimeo.com/video/901485891?h=28cd98f111&title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1",width:"100%",height:"auto",frameBorder:"0",allow:"autoplay; fullscreen;",allowFullScreen:!0,title:(0,C.__)("Get started with Kubio AI","kubio")})}),(0,j.jsxs)("div",{className:"kubio-ai-commercial-flow-modal__content__text",children:[(0,j.jsx)(k.Icon,{icon:Ge.KubioAI,className:"kubio-ai-logo-colored"}),(0,j.jsx)("h3",{children:(0,C.__)("Let's get your homepage done in 30 seconds, using AI","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("We'll bet you didn't think you could get your website done this fast. Upgrade to Kubio PRO to be able to generate your pages for you in seconds! It's incredibly simple:","kubio")}),(0,j.jsxs)("ul",{children:[(0,j.jsxs)("li",{children:[(0,j.jsxs)("span",{children:[" ",(0,C.__)("Step 1","kubio")," "]}),(0,C.__)("Insert a quick description of your site","kubio")]}),(0,j.jsxs)("li",{children:[(0,j.jsxs)("span",{children:[" ",(0,C.__)("Step 2","kubio")," "]}),(0,C.__)("Get a customized homepage, including text, images, colour schemes, typography, forms and social media integration.","kubio")]})]}),(0,j.jsx)("p",{children:(0,C.__)("It really is that simple! To get started, simply upgrade to PRO below:","kubio")}),(0,j.jsx)("div",{className:"kubio-ai-commercial-flow-modal__content__text__buttons-container",children:(0,j.jsx)(k.Button,{className:"kubio-ai-button",onClick:()=>{window.open((0,Lo.addQueryArgs)(window.kubioUtilsData.upgrade_url,{utm_source:"ai-demo-modal",utm_medium:"editor"}),"_blank")},children:(0,C.__)("Upgrade to PRO","kubio")})}),(0,j.jsxs)("div",{className:"kubio-ai-commercial-flow-modal__content__text__footer",children:[(0,j.jsx)("p",{children:(0,C.__)("Curious to see it in action?","kubio")}),(0,j.jsx)("a",{target:"_blank",href:window.kubioUtilsData.try_starter_site.split("?").join(`/${o}?`),rel:"noreferrer",children:(0,C.__)("Try it free on a separate test site.","kubio")})]})]})]})]})},tv=()=>{const[e,t]=(0,c.useState)(!0),[,o]=Qa(),n=(0,f.useGetGlobalSessionProp)("ready");return(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[])&&n&&e&&(0,j.jsx)(b.AIWizard,{onFinish:()=>{t(!1),o(!0)},onCancel:()=>t(!1),isFrontPage:!0,startWithAIFrontPage:!0})},ov={sectionAction:null,sectionId:null};function nv(){const e=(0,f.useGetGlobalSessionProp)("ready",!1),t=(0,f.useGetGlobalSessionProp)("variations-loaded"),[o,n]=(0,c.useState)(!1),[i,r]=(0,c.useState)(ov),a=(0,w.useSelect)((e=>{const{getClientIdsWithDescendants:t,getBlock:o}=e("core/block-editor");return t().map((e=>o(e))).map((e=>{var t;const o=null===(t=e.attributes)||void 0===t?void 0:t.anchor;return o?{anchor:o,block:e}:null})).filter(Boolean)})),{selectBlock:s,replaceBlocks:l}=(0,w.useDispatch)("core/block-editor"),u=(0,c.useMemo)((()=>"replace"===i.sectionAction),[i]);return(0,c.useEffect)((()=>{if(e){const e=new URL(window.location.href),t=e.searchParams.get("section_action"),o=e.searchParams.get("section_id");r((e=>e===ov?{sectionAction:t,sectionId:o}:e)),e.searchParams.delete("section_action"),e.searchParams.delete("section_id"),window.history.replaceState(null,"",e.toString())}}),[e]),(0,c.useEffect)((()=>{if(t){const e=setTimeout((()=>{n(!0)}),200);return()=>clearTimeout(e)}}),[t]),(0,c.useEffect)((()=>{const{sectionAction:t,sectionId:n}=i;if(!t||!n)return;const c=!u||o;if(e){var d;const e=null===(d=a.find((e=>e.anchor===n)))||void 0===d?void 0:d.block;if(!e)return;switch(Ru(e.clientId),t){case"select":case"edit":s(e.clientId),r(ov);break;case"replace":s(e.clientId),c&&(((e,t)=>{let o="kubio-content";switch(e.name){case"kubio/hero":case"kubio/header":case"kubio/navigation-section":o="kubio-header";break;case"kubio/footer":o="kubio-footer"}let n=(0,p.get)(e,"attributes.kubioAI.meta.category");if(!n){const t=(e=>{var t;let o=(null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t?void 0:t.__experimentalBlockPatternCategories)||[];return o=o.filter((({name:t})=>t.startsWith(`${e}/`))).map((({name:t})=>t.replace(`${e}/`,"").replace(/\./gim,"").toLowerCase())),o})(o),i=(0,p.get)(e,"attributes.anchor","").replace(/-\d+$/,"").replace(/\./gim,"").toLowerCase();t.includes(i)&&(n=i)}n&&(n=`${o}/${n}`),(0,I.onOpenTemplateGalleryWithParams)({page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:o,category:n,onActionFunc:async o=>{const n=(0,I.kubioCloneDeep)(o.content),i=(0,I.transformTemplateToBlock)(n);t(e.clientId,i)}}})})(e,l),r(ov))}}}),[a,e,l,s,t,o,u,i]),null}const iv={secondarySidebar:(0,C.__)("Block Library","kubio"),drawer:(0,C.__)("Navigation Sidebar","kubio")},rv=["label",'[class*="-label"]',".components-base-control__label",".component-box-control__label"].join(","),av=(0,x.createHigherOrderComponent)((e=>({initialSettings:t})=>{var o,n,i,r;const{isFullscreenActive:a,sidebarIsOpened:l,settings:u,templateId:d,templateType:g,page:f,isNavigationOpen:b,isInserterOpen:_,isListViewOpen:v,isFSETemplate:y,currentSidebar:k}=(0,w.useSelect)((e=>{const{isFeatureActive:t,getSettings:o,getEditedPostType:n,getEditedPostId:i,getPage:r,isNavigationOpened:a,isListViewOpened:s,getEditorOpenedSidebar:l}=e(m.STORE_KEY),c=n(),u=i();return{isFullscreenActive:t("fullscreenMode"),sidebarIsOpened:e(m.STORE_KEY).isEditorSidebarOpened(),settings:o(),templateType:c,page:r(),templateId:u,isNavigationOpen:a(),isInserterOpen:e(m.STORE_KEY).getOpenedInserter(),isFSETemplate:!!u&&!!c,isListViewOpen:s(),currentSidebar:l()}}),[]),{postId:x,post:S,currentTemplateId:I,isKubioTheme:T}=(0,w.useSelect)((e=>{const t=h().get(f,["context","postId"]),o=h().get(f,["context","postType"]),{getEntityRecords:n,getEntityRecord:i}=e("core"),{getTemplateId:r=h().noop}=e("kubio/edit-site");if(!t||!o)return{postId:null,currentTemplateId:null,isKubioTheme:null,post:{}};let a;if(["wp_template","wp_template_part"].includes(o)){const e=n("postType",o,{wp_id:t});a=null==e?void 0:e[0]}else a=i("postType",o,parseInt(t));const s=r(),{getEditorSettings:l}=e($.store);return{postId:t,currentTemplateId:s,isKubioTheme:l().supportsTemplateMode,post:a}}),[null==f||null===(o=f.context)||void 0===o?void 0:o.postId,null==f||null===(n=f.context)||void 0===n?void 0:n.postType]),{openSidebar:P}=(0,w.useDispatch)(m.STORE_KEY),{createInfoNotice:E}=(0,w.useDispatch)("core/notices");(0,c.useEffect)((()=>{P("document")}),[]);const{editEntityRecord:R}=(0,w.useDispatch)("core"),{updateEditorSettings:A,setupEditorState:O}=(0,w.useDispatch)("core/editor"),{defaultTemplateTypes:N}=u;(0,c.useEffect)((()=>{A({...t,defaultTemplateTypes:N})}),[N,t,A]),(0,c.useLayoutEffect)((()=>{const e=h().get(f,["context","postId"]),t=h().get(f,["context","postType"]);e&&t&&O({id:e,type:t})}),[null==f||null===(i=f.context)||void 0===i?void 0:i.postId,null==f||null===(r=f.context)||void 0===r?void 0:r.postType]),(0,c.useLayoutEffect)((()=>{var e;if(S&&"page"===S.type&&(null===(e=S.meta)||void 0===e||!e.saved_in_kubio)&&(0,p.isString)(I)){const e=T?"full-width":"kubio-full-width",t=I.includes(e),o=h().get(S,["content","raw"]),n=h().get(S,"template"),i=h().get(S,"id"),r=h().get(S,"type");!o&&t&&""===n&&((0,s.markLastChangeAsPersistent)(),R("postType",r,i,{template:e}),E((0,C.__)('New empty page detected. Page template was set to "Full Width"',"kubio"),{type:"snackbar"}))}}),[I,R,T,S,x]);const D={startGeneratingAIFrontPage:t.startGeneratingAIFrontPage,isListViewOpen:v,isFullscreenActive:a,sidebarIsOpened:l,templateId:d,templateType:g,page:f,isNavigationOpen:b,isInserterOpen:_,isFSETemplate:y,currentSidebar:k,startWithAIFrontPage:u.startWithAIFrontPage||!1,__experimentalGlobalStylesBaseStyles:u.__experimentalGlobalStylesBaseStyles,__experimentalGlobalStylesUserEntityId:u.__experimentalGlobalStylesUserEntityId};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(e,{...D}),(0,j.jsx)(Sb,{})]})}),"WithEditorCurrentEntity"),sv=(0,x.compose)(av,x.pure)((function(e){const{__experimentalGlobalStylesUserEntityId:t,sidebarIsOpened:o,templateId:n,templateType:i,page:r,isNavigationOpen:l,isInserterOpen:u,isListViewOpen:d,isFSETemplate:p,startWithAIFrontPage:h,currentSidebar:x,startGeneratingAIFrontPage:T}=e,{setPage:E}=(0,w.useDispatch)("core/editor"),R=(0,s.useActiveMedia)(),[A,O]=(0,c.useState)(!1),N=(0,c.useCallback)((()=>O(!0)),[]),M=(0,c.useCallback)((()=>{O(!1)}),[]);!function(){const{hasBlockSelection:e,isEditorSidebarOpened:t,isGlobalStyleEditing:o}=(0,w.useSelect)((e=>({hasBlockSelection:!!e("core/block-editor").getBlockSelectionStart(),isEditorSidebarOpened:e(m.STORE_KEY).isEditorSidebarOpened(),isGlobalStyleEditing:e(m.STORE_KEY).isGlobalStyleEditing()})),[]),{openSidebar:n}=(0,w.useDispatch)(m.STORE_KEY);(0,c.useEffect)((function(){t&&n(e?"block-inspector":o?"document/general-settings":"document")}),[e,t,o])}(),(()=>{const[e,t]=(0,c.useState)({}),[,o]=(0,ze.useCurrentInspectorTab)(),n=(0,w.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{clientId:null==t?void 0:t.clientId,name:null==t?void 0:t.name}}));(0,c.useEffect)((()=>{(null==e?void 0:e.clientId)!==(null==n?void 0:n.clientId)&&(null==e?void 0:e.name)!==(null==n?void 0:n.name)&&(o("content"),t(n))}),[n,e,t,o])})();const B=(0,f.useGetGlobalSessionProp)("ready",!1),L=(0,c.useMemo)((()=>{var e;return{...null==r?void 0:r.context,queryContext:[null==r||null===(e=r.context)||void 0===e?void 0:e.queryContext,e=>{var t;return E({...r,context:{...null==r?void 0:r.context,queryContext:{...null==r||null===(t=r.context)||void 0===t?void 0:t.queryContext,...e}}})}]}}),[r,E]);(0,c.useEffect)((()=>{l?document.body.classList.add("is-navigation-sidebar-open"):document.body.classList.remove("is-navigation-sidebar-open")}),[l]),(0,c.useEffect)((()=>(0,a.initializeGutentagPatterns)()),[]);const{uiVersion:z}=(0,g.useUIVersion)(),F=Z()("kubio-sidebar",{"kubio-sidebar-hidden":(!o||u||d)&&1===z}),G=!(u||d),H=Z()("kubio-secondary-sidebar",{"kubio-secondary-sidebar--closed":G,"kubio-secondary-sidebar--opened":!G,"kubio-secondary-sidebar-hidden":!(u||d)&&1===z}),{createErrorNotice:U}=(0,w.useDispatch)("core/notices");let W=(0,j.jsx)(j.Fragment,{}),V=(0,j.jsx)(j.Fragment,{});const K=(0,c.useCallback)((e=>{const t=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if(!e.querySelectorAll)return;const t=[...e.querySelectorAll(rv)||[]];e.matches(rv)&&t.push(e),t.length&&t.forEach((t=>{if(e.getAttribute("label"))return;const o=t.textContent.trim();o&&t.setAttribute("title",o)}))}))}))}));return e&&t.observe(e,{childList:!0,subtree:!0}),()=>{t.disconnect()}}),[]);B&&(2===z?V=(0,j.jsxs)("div",{className:"kubio-sidebar-v2-wrapper",children:[d&&(0,j.jsx)("div",{className:"kubio-sidebar-list-view",children:(0,j.jsx)(xb,{})}),(0,j.jsxs)("div",{id:"kubio-main-sidebar",className:F,"data-sidebar-name":x,ref:K,children:[(0,j.jsx)(Oe.Slot,{scope:`${m.STORE_KEY}/sidebars`}),(0,j.jsx)(ea,{})]}),(0,j.jsx)("div",{className:H,children:u&&(0,j.jsx)(Ye,{})})]}):(W=(0,j.jsxs)("div",{id:"kubio-main-sidebar",className:F,"data-sidebar-name":x,ref:K,children:[(0,j.jsx)(Oe.Slot,{scope:`${m.STORE_KEY}/sidebars`}),(0,j.jsx)(ea,{})]}),V=(0,j.jsxs)("div",{className:H,children:[u&&(0,j.jsx)(Ye,{}),d&&(0,j.jsx)(xb,{})]})));const q=(0,j.jsx)(jb,{blockContext:L,templateId:n,templateType:i,page:r,children:(0,j.jsxs)(b.AIDataProvider,{children:[(0,j.jsx)(_.KubioGlobalDataContextProvider,{children:(0,j.jsx)(kb,{children:(0,j.jsx)(v.GlobalStylesProvider,{children:(0,j.jsxs)(y.BlockContextProvider,{value:L,children:[(0,j.jsx)(Pb,{}),(0,j.jsx)(Nf.Register,{}),(0,j.jsx)(ta,{}),(0,j.jsxs)(Fb,{children:[(0,j.jsx)(r_,{}),(0,j.jsx)($b,{}),(0,j.jsx)(De,{labels:iv,drawer:(0,j.jsx)(bb,{}),sidebar:W,secondarySidebar:V,header:(0,j.jsx)(Af,{openEntitiesSavedStates:N}),notices:(0,j.jsx)(_b,{}),content:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)($.EditorNotices,{}),p&&(0,j.jsx)(za,{}),!p&&(0,j.jsx)(Fa,{}),(0,j.jsx)(Nf,{openEntitiesSavedStates:N}),(0,j.jsx)("div",{id:"kubio-toolbar-boundary"})]}),actions:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)($a,{isOpen:A,close:M})}),footer:(0,j.jsx)(y.BlockBreadcrumb,{})})]}),(0,c.createPortal)((0,j.jsxs)("div",{className:"kubio-popover-slot-container",children:[(0,j.jsx)(k.Popover.Slot,{}),(0,j.jsx)(k.Popover.Slot,{name:"kubio-popover-slot"})]}),document.body),(0,j.jsx)(ye.PluginArea,{onError:function(e){U((0,C.sprintf)(/* translators: %s: plugin name */ /* translators: %s: plugin name */(0,C.__)('The "%s" plugin has encountered an error and cannot be rendered.',"kubio"),e))}}),(0,j.jsx)(z_,{}),(0,j.jsx)(nv,{})]})})})}),(0,j.jsx)(Q_,{}),(0,j.jsx)(J_,{enabled:T})]})});return(0,j.jsx)("div",{className:Z()("kubio-editor-wrapper",`kubio-editor-wrapper--media-${R}`),children:(0,j.jsxs)(k.SlotFillProvider,{children:[(0,j.jsx)(Ne,{isActive:!0}),(0,j.jsx)($.UnsavedChangesWarning,{}),(0,j.jsx)(Me.ShortcutProvider,{style:{height:"100%"},children:(0,j.jsxs)(S.EntityProvider,{kind:"root",type:"site",children:[p&&(0,j.jsx)(S.EntityProvider,{kind:"postType",type:i,id:n,children:(0,j.jsx)(S.EntityProvider,{kind:"postType",type:"wp_global_styles",id:t,children:q})}),!p&&q]})}),B&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ga,{}),(0,j.jsx)(Df,{blockContext:L,templateId:n,templateType:i,page:r}),I.AI_IN_PRO&&(0,j.jsx)(ev,{}),(0,j.jsx)(P,{}),(0,j.jsx)(D,{})]}),h&&(0,j.jsx)(tv,{}),(0,j.jsx)(Z_,{})]})})}));(0,u.addFilter)("editor.MediaUpload","kubio/edit-site/components/media-upload",(()=>Yb.MediaUpload)),(0,u.addFilter)("editor.BlockEdit","kubio/advancedPanel",Fn.withInspectorControlsAdvancedPanel);const lv=window.wp.dataControls,cv={fullscreenMode:!0},uv=(0,w.combineReducers)({features:(e=cv,t)=>"TOGGLE_FEATURE"===t.type?{...e,[t.feature]:!e[t.feature]}:e}),dv=(0,w.combineReducers)({preferences:uv,deviceType:function(e="Desktop",t){return"SET_PREVIEW_DEVICE_TYPE"===t.type?t.deviceType:e},settings:function(e={},t){switch(t.type){case"UPDATE_SETTINGS":return{...e,...t.settings};case"UPDATE_UI_VERSION":return A()({path:(0,Lo.addQueryArgs)("/kubio/v1/update-ui-version",{version:t.version})}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorUIVersion:t.version}};case"TOGGLE_AI_CAPABILITIES":return A()({path:"/kubio/v1/update-enable-ai-capabilities",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},enableAICapabilities:t.value}};case"UPDATE_EDITOR_MODE":return A()({path:"/kubio/v1/update-editor-mode",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorMode:t.value}};case"UPDATE_EXCLUDED_SECTION_CATEGORIES":return A()({path:"/kubio/v1/update-excluded-section-categories",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},excludedSectionCategories:t.value}};case"UPDATE_FLAG_SETTINGS":A()({path:"/kubio/v1/update-flag-settings",method:"POST",data:{value:t.value,path:t.path}});const o={...e.kubioGlobalSettings||{}};return h().set(o,t.path,t.value),{...e,kubioGlobalSettings:{...o}}}return e},editedPost:function(e={},t){switch(t.type){case"SET_TEMPLATE":case"SET_PAGE":return{type:"wp_template",id:t.templateId,page:t.page};case"SET_PAGE_CONTENT":return{page:t.page};case"SET_TEMPLATE_PART":return{type:"wp_template_part",id:t.templatePartId,page:{context:{}}}}return e},homeTemplateId:function(e,t){return"SET_HOME_TEMPLATE"===t.type?t.homeTemplateId:e},navigationPanel:function(e={menu:es,isOpen:!1},t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return{...e,isOpen:!0,menu:t.menu};case"SET_IS_NAVIGATION_PANEL_OPENED":return{...e,menu:t.isOpen?e.menu:es,isOpen:t.isOpen};case"SET_IS_INSERTER_OPENED":return{...e,menu:e.isOpen&&t.isOpen?es:e.menu,isOpen:!t.isOpen&&e.isOpen}}return e},blockInserterPanel:function(e=!1,t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return t.isOpen}return e},currentAncestor:function(e="",t){return"SET_CURRENT_ANCESTOR"===t.type?t.currentAncestor:e},templateId:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return t.templateId;case"SET_TEMPLATE_PART":return}return e},templatePartId:function(e,t){return"SET_TEMPLATE_PART"===t.type?t.templatePartId:e},templateType:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return"wp_template";case"SET_TEMPLATE_PART":return"wp_template_part"}return e},templateIds:function(e=[],t){switch(t.type){case"ADD_TEMPLATE":return[...e,t.templateId];case"REMOVE_TEMPLATE":return e.filter((e=>e!==t.templateId))}return e},templatePartIds:function(e=[]){return e},page:function(e={},t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":case"SET_TEMPLATE":return t.page;case"SET_TEMPLATE_PART":return{context:{}}}return e},entity:function(e={},t){return"SET_ENTITY"===t.type?t.entity:e},showOnFront:function(e){return e},subSidebars:function(e={},t){switch(t.type){case"ADD_SUBSIDEBAR":return e[t.areaIdentifier]?e:{...e,[t.areaIdentifier]:t.sidebar};case"REMOVE_SUBSIDEBAR":return{...e,[t.areaIdentifier]:!1}}return e},globalStyleEditing:function(e={value:void 0,previousEntity:null},t){return"TOGGLE_GLOBAL_STYLE_EDITING"===t.type?{...e,value:t.value,previousEntity:t.previousEntity}:e},openedInserter:function(e=!1,t){return"TOGGLE_IS_INSERTER_OPEN"===t.type?(t.options=t.options||{},$o()(e,t)?e:{value:null==t?void 0:t.value,clientId:null==t?void 0:t.rootClientId,options:(null==t?void 0:t.options)||{}}):e},isGutentagDebug:function(e=!1,t){return"TOGGLE_GUTENTAG_DEBUG"===t.type?null==t?void 0:t.value:e},classicTemplate:function(e,t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":return{...e,id:null==t?void 0:t.classicTemplateId}}return e},listViewPanel:function(e=!1,t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return!t.value&&e;case"SET_IS_LIST_VIEW_OPENED":return t.isOpen}return e},aiInfo:function(e={remainingCredits:0},t){return"UPDATE_AI_INFO"===t.type?(0,p.merge)(e,(0,p.cloneDeep)(t.value||{})):e},isChangingPage:function(e=!1,t){return"SET_PAGE"===t.type&&(e=!!t.changingPage),e}}),{select:pv,dispatch:hv}=w.controls;function mv(e){return{type:"TOGGLE_FEATURE",feature:e}}function gv(e){return{type:"SET_PREVIEW_DEVICE_TYPE",deviceType:e}}function*fv(e,t,o=!1){const n={templateSlug:t};if(!t){const t=yield w.controls.resolveSelect("core","getEntityRecord","postType","wp_template",e);n.templateSlug=null==t?void 0:t.slug}return{type:"SET_TEMPLATE",templateId:e,page:{context:o?{}:n}}}function*bv(e){const t=yield w.controls.dispatch("core","saveEntityRecord","postType","wp_template",e);return{type:"SET_TEMPLATE",templateId:t.id,page:{context:{templateSlug:t.slug}}}}function*_v(e){yield(0,lv.apiFetch)({path:`/wp/v2/templates/${e}`,method:"DELETE"});const t=yield w.controls.select(m.STORE_KEY,"getPage");yield w.controls.dispatch(m.STORE_KEY,"setPage",t)}function vv(e){return{type:"SET_TEMPLATE_PART",templatePartId:e}}function yv(e){return{type:"SET_HOME_TEMPLATE",homeTemplateId:e}}function*kv(e,t,o=!0){var n;if(null===e)return{type:"SET_PAGE",page:null,templateId:null,changingPage:!0};if(!e.path&&null!==(n=e.context)&&void 0!==n&&n.postId){const t=yield w.controls.resolveSelect("core","getEntityRecord","postType",e.context.postType||"post",e.context.postId);e.path=(0,Lo.getPathAndQueryString)(t.link)}if(!o)return void(yield{type:"SET_PAGE_CONTENT",page:e,classicTemplateId:""!==t?t:"page.php"});let i;if(!t&&o&&(i=yield w.controls.resolveSelect("core","__experimentalGetTemplateForLink",(0,Lo.addQueryArgs)(e.path,{_:Date.now()})),!i))return void(yield{type:"SET_PAGE",page:e,templateId:null});const r=t||i,{id:a,slug:s}=r;return yield{type:"SET_PAGE",page:s?{...e,context:{...e.context,templateSlug:s}}:e,templateId:a},a}function*xv(){const{show_on_front:e,page_on_front:t}=yield w.controls.resolveSelect("core","getEntityRecord","root","site"),{siteUrl:o}=yield w.controls.select(m.STORE_KEY,"getSettings"),n={path:o,context:"page"===e?{postType:"page",postId:t}:{}},i=yield*kv(n);if(!i)return{type:"GUTENTAG_NO_ACTION"};yield yv(i)}function Sv(e){return{type:"OPEN_NAVIGATION_PANEL_TO_MENU",menu:e}}function wv(e){return{type:"SET_IS_NAVIGATION_PANEL_OPENED",isOpen:e}}function Cv(e){return{type:"UPDATE_SETTINGS",settings:e}}function*Iv(e){return yield hv("core/interface","enableComplementaryArea",`${m.STORE_KEY}/sidebars`,`${m.STORE_KEY}/sidebar/${e}`)}function*jv(){return yield hv("core/interface","enableComplementaryArea",`${m.STORE_KEY}/sidebars`,`${m.STORE_KEY}/sidebar/block-inserter`)}function*Tv({areaIdentifier:e,sidebar:t}){return{type:"ADD_SUBSIDEBAR",sidebar:t,areaIdentifier:e}}function*Pv({areaIdentifier:e}){return{type:"REMOVE_SUBSIDEBAR",areaIdentifier:e}}function*Ev(){yield hv("core/interface","disableComplementaryArea",`${m.STORE_KEY}/sidebars`)}function*Rv(e,t=null){return{type:"TOGGLE_GLOBAL_STYLE_EDITING",value:e,previousEntity:t}}function*Av(e){return{type:"TOGGLE_GUTENTAG_DEBUG",value:e}}function*Ov(e,t=!1,o={}){return{type:"TOGGLE_IS_INSERTER_OPEN",value:e,rootClientId:t||!1,options:{closeOnSelect:!1,replace:!1,...o}}}function Nv(e){return{type:"SET_CURRENT_ANCESTOR",currentAncestor:e}}function Dv(e){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen:e}}function Mv(e){return{type:"UPDATE_UI_VERSION",version:e}}function Bv(e){return{type:"UPDATE_EDITOR_MODE",value:e}}function Lv(e){return{type:"TOGGLE_AI_CAPABILITIES",value:e}}function zv(e){return{type:"UPDATE_AI_INFO",value:e}}function Fv(e){return{type:"UPDATE_EXCLUDED_SECTION_CATEGORIES",value:e}}function Gv({path:e,value:t}){return{type:"UPDATE_FLAG_SETTINGS",path:e,value:t}}var Hv,Uv;function Wv(e){return[e]}function Vv(e){return!!e&&"object"==typeof e}function Kv(){var e={clear:function(){e.head=null}};return e}function $v(e,t,o){var n;if(e.length!==t.length)return!1;for(n=o;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function qv(e,t){var o,n;function i(){o=Uv?new WeakMap:Kv()}function r(){var o,i,r,a,s,l=arguments.length;for(a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];for(s=t.apply(null,a),(o=n(s)).isUniqueByDependants||(o.lastDependants&&!$v(s,o.lastDependants,0)&&o.clear(),o.lastDependants=s),i=o.head;i;){if($v(i.args,a,1))return i!==o.head&&(i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=o.head,i.prev=null,o.head.prev=i,o.head=i),i.val;i=i.next}return i={val:e.apply(null,a)},a[0]=null,i.args=a,o.head&&(o.head.prev=i,i.next=o.head),o.head=i,i.val}return t||(t=Wv),n=Uv?function(e){var t,n,i,r,a=o,s=!0;for(t=0;t<e.length;t++){if(!Vv(n=e[t])){s=!1;break}a.has(n)?a=a.get(n):(i=new WeakMap,a.set(n,i),a=i)}return a.has(Hv)||((r=Kv()).isUniqueByDependants=s,a.set(Hv,r)),a.get(Hv)}:function(){return o},r.getDependants=t,r.clear=i,i(),r}Hv={},Uv="undefined"!=typeof WeakMap;const Yv=Object.values(s.defaultTemplatesByPostType).map((e=>`${e}.php`));function Zv(e,t){return"fullscreenMode"===t||"fixedToolbar"!==t&&(0,p.get)(e.preferences.features,[t],!1)}function Xv(e){return e.deviceType}const Qv=(0,w.createRegistrySelector)((e=>()=>e("core").canUser("create","media"))),Jv=qv(((e,t)=>{const o={...e.settings,outlineMode:!0,focusMode:Zv(e,"focusMode"),hasFixedToolbar:Zv(e,"fixedToolbar"),__experimentalSetIsInserterOpened:t};return Qv(e)?(o.mediaUpload=({onError:t,...o})=>{(0,Yb.uploadMedia)({wpAllowedMimeTypes:e.settings.allowedMimeTypes,onError:({message:e})=>t(e),...o})},o):o}),(e=>[Qv(e),e.settings,Zv(e,"focusMode"),Zv(e,"fixedToolbar")]));function ey(e){return e.homeTemplateId}function ty(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.type}function oy(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.id}function ny(e){return e.editedPost.page}function iy(e){return e.navigationPanel.isOpen}function ry(e){var t;return null===(t=e.navigationPanel)||void 0===t?void 0:t.menu}function ay(e){return e.blockInserterPanel}function sy(e){return e.templateId}function ly(e){return e.templatePartId}function cy(e){return e.templateType}function uy(e){return e.templateIds}function dy(e){return e.templatePartIds}function py(e){return e.entity}function hy(e){return e.showOnFront}const my=(0,w.createRegistrySelector)((e=>(t,o=null)=>{const n=e("core/interface").getActiveComplementaryArea(`${m.STORE_KEY}/sidebars`);return o?n===`${m.STORE_KEY}/sidebar/${o}`:!(0,p.isEmpty)(n)}));function gy(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.value}function fy(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.clientId}function by(e){var t,o;return!(null===(t=e.openedInserter)||void 0===t||null===(o=t.options)||void 0===o||!o.replace)}function _y(e){var t,o;return!(null===(t=e.openedInserter)||void 0===t||null===(o=t.options)||void 0===o||!o.closeOnSelect)}function vy(e){return e.currentAncestor}function yy(){return(0,w.select)("core/interface").getActiveComplementaryArea(`${m.STORE_KEY}/sidebars`)}function ky(e){return e.subSidebars}function xy(e){return e.globalStyleEditing.value}function Sy(e){return e.globalStyleEditing.previousEntity}function wy(e){return e.isGutentagDebug}function Cy(e){const{rootClientId:t,insertionIndex:o}=e.blockInserterPanel;return{rootClientId:t,insertionIndex:o}}function Iy(e){return e.listViewPanel}const jy=e=>{var t;const{templateId:o,templateType:n}=e;return o&&n&&(null===(t=(0,w.select)("core").getEditedEntityRecord("postType",n,o))||void 0===t?void 0:t.kubio_template_source)||null},Ty=e=>{var t;const o=null==e||null===(t=e.page)||void 0===t?void 0:t.context;let n=null;var i,r,a;n=null!=o&&o.postType&&null!=o&&o.postId?o.templateSlug?o.templateSlug:null!==(i=(0,w.select)("core").getEditedEntityRecord("postType",null==o?void 0:o.postType,null==o?void 0:o.postId).template)&&void 0!==i?i:null:null!==(r=null===(a=e.templateId)||void 0===a?void 0:a.split("//").pop())&&void 0!==r?r:null;const s=(0,w.select)("core").getEditedEntityRecord("root","site");if("page"===s.show_on_front&&s.page_on_front===parseInt(null==o?void 0:o.postId)){const e=((0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1})||[]).map((({id:e})=>e.split("//").pop())).includes("front-page"),{classicHasFrontPageTemplate:t}=(0,w.select)("core/block-editor").getSettings();if(e||t)return"front-page"}return""===n&&(n="page"===(null==o?void 0:o.postType)?"page":"single"),n},Py=e=>{const t=Ty(e),o=(0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1});return!!t&&(o||[]).map((({id:e})=>e.split("//").pop())).includes(t)},Ey=e=>{var t;const o=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==o?void 0:o.postType)||null},Ry=e=>{var t;const o=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==o?void 0:o.postId)||null},Ay=e=>{var t;const o=null==e||null===(t=e.page)||void 0===t?void 0:t.context,n=(0,w.select)("core").getEditedEntityRecord("root","site"),i=null==n?void 0:n.page_for_posts;return parseInt(i)===parseInt(null==o?void 0:o.postId)},Oy=e=>{var t,o;const n=ny(e),i="front-page"===(null==n||null===(t=n.context)||void 0===t?void 0:t.templateSlug),r=(0,w.select)("core").getEditedEntityRecord("root","site"),a=null==r?void 0:r.page_on_front,s=null==n||null===(o=n.context)||void 0===o?void 0:o.postId,l="page"===r.show_on_front&&parseInt(a)===parseInt(s);return i||l},Ny=e=>{const t=(0,w.select)("core").getEditedEntityRecord("root","site"),o=ny(e),n=h().get(o,"context",{}),{postType:i,postId:r}=n,a="page"===(null==t?void 0:t.show_on_front),s=null==t?void 0:t.page_on_front,l=a&&parseInt(s)===parseInt(r),c=a&&parseInt(null==t?void 0:t.page_for_posts)===parseInt(r);return"page"===i&&!c&&!l},Dy=()=>{var e,t;const o=(null===(e=(0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1}))||void 0===e?void 0:e.filter((({slug:e})=>(0,s.currentTemplateIsPage)(e))))||[],n=(null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t?void 0:t.classicThemeTemplates)||[],i=o.map((({title:e,slug:t,kubio_template_source:o="custom"})=>({value:t,label:"kubio"===o?e.rendered.replace("Kubio","").trim():e.rendered,source:o})));return Object.keys(n).forEach((e=>{const t=n[e];(0,p.find)(o,{slug:e.replace(".php","")})||i.push({value:Yv.includes(e)?e.replace(".php",""):e,label:t,isClassicTemplate:!0,source:"theme"})})),i.forEach((e=>{"page"===e.value&&(e.value="")})),h().sortBy(i,["source","label"])};function My(e){var t;return null==e||null===(t=e.classicTemplate)||void 0===t?void 0:t.id}function By(e){var t,o;const n=ny(e),i=h().get(n,"context",{}),{postType:r,postId:a}=i,s=null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t||null===(o=t.kubioBasicWooCommerce)||void 0===o?void 0:o.pagesIds;return"product"===r||Object.values(s||{}).includes(parseInt(a))}const Ly=qv((e=>{var t;const o=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==o?void 0:o.editorUIVersion)||1}),(e=>[e.settings])),zy=qv((e=>{var t;const o=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==o?void 0:o.enableAICapabilities)||!1}),(e=>[e.settings])),Fy=qv((e=>{var t;return null===(t=e.settings)||void 0===t||t.kubioGlobalSettings,"full"}),(e=>[e.settings])),Gy=e=>(Fy(e),!1),Hy=e=>e.aiInfo||{remainingCredits:0,isStub:!0},Uy=e=>!0===e.isChangingPage;function Wy(e){return e.canvasMode}const Vy=e=>{var t,o;return(null===(t=e.settings)||void 0===t||null===(o=t.kubioGlobalSettings)||void 0===o?void 0:o.excludedSectionCategories)||[]},Ky={reducer:dv,actions:i,selectors:r,controls:lv.controls,persist:["preferences"]};async function $y(e){return(0,w.registerStore)(Be,{...Ky,initialState:e})}const qy=(0,c.forwardRef)((({menuItems:e,toggleButton:t,onClose:o,onOpen:n,popoverProps:i,className:r},a)=>{const[s,l]=(0,c.useState)(!1),u=(0,c.useCallback)((e=>{l(e),e?null==n||n():null==o||o()}),[l,n,o]),d=(0,c.useRef)();return(0,c.useImperativeHandle)(a,(()=>({getPopupIsVisible:()=>s}))),(0,j.jsx)(ct.DropdownWithHover,{className:Z()("kubio-dropdown-with-hover__section-options",r),ref:d,onToggle:u,toggleElement:t,popoverProps:{className:"kubio-ai-design-section-button__dropdown__popup",...i},children:(0,j.jsx)(Yy,{dropdownRef:d,menuItems:e})})})),Yy=({dropdownRef:e,menuItems:t})=>{const o=h().get(e,["current","onClose"],h().noop);return(0,j.jsx)(k.MenuGroup,{children:t.map((({label:e,description:t,icon:n,onClick:i,className:r,isPro:a,urlArgs:s,...l},c)=>{const u=a?Fe.ProItem:k.MenuItem;return(0,X.createElement)(u,{...s,tag:k.MenuItem,key:c,onClick:async()=>{await i(),o()},...l},(0,j.jsxs)("div",{className:Z()("kubio-ai-design-section-button__dropdown",r),children:[(0,j.jsx)("div",{className:"kubio-ai-design-section-button__dropdown__icon",children:(0,j.jsx)(k.Icon,{icon:n})}),(0,j.jsxs)("div",{className:"kubio-ai-design-section-button__dropdown__content",children:[(0,j.jsx)("div",{className:"kubio-ai-design-section-button__dropdown__content__label",children:e}),(0,j.jsx)("div",{className:"kubio-ai-design-section-button__dropdown__content__description",children:t})]})]}))}))})},Zy=({setVisible:e,sectionRef:t,onChangeSection:o,askForSummary:n=!0,isNewSection:i=!1})=>{var r,a,s,l;const{replaceDesign:u,replaceContent:d,dataHelper:p}=x_(),[h,m]=(0,c.useState)((()=>i?"":p.getAttribute("kubioAI.meta.summary",""))),g=(0,c.useRef)(!1),f=(0,c.useCallback)((async o=>{if(e(!1),!g.current)try{var n;switch(g.current=!0,null===(n=t.current)||void 0===n?void 0:n.type){case"surprise":await u(null,{summary:o,currentSectionCloudId:p.getAttribute("kubioAI.meta.cloudPresetId","")});break;case"regenerate":await d({summary:o});break;case"hand-pick":await t.current.insert(t.current.pattern,o)}}catch(e){Vo.Log.error("Generate section modal error",e)}finally{g.current=!1}}),[t,e,u,d]),b=(0,c.useCallback)((()=>f(h)),[f,h]);return(0,c.useEffect)((()=>{if(!n){const e=p.getAttribute("kubioAI.meta.summary","");f(e)}}),[f,p,n]),n?(0,j.jsx)(k.Modal,{className:"kubio-ai-wizard-modal kubio-generate-ai-section auto",title:(0,j.jsxs)(k.Flex,{children:[(0,j.jsxs)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title",children:[(0,j.jsx)(k.Icon,{icon:Ge.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),"hand-pick"===(null===(r=t.current)||void 0===r?void 0:r.type)?(0,C.__)("Generate new section AI","kubio"):(0,C.__)("Regenerate content","kubio")]}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Button,{onClick:()=>e(!1),icon:We,label:(0,C.__)("Close","kubio")})})]}),isDismissible:!1,onRequestClose:()=>{},shouldCloseOnClickOutside:!1,children:(0,j.jsxs)(k.Flex,{className:"kubio-generate-ai-section__content",align:"normal",children:[(0,j.jsx)(k.Flex,{className:"kubio-generate-ai-section__content__section-preview",justify:"center",children:(0,j.jsx)("div",{className:Z()("section-preview-image-wrapper",(null===(a=t.current)||void 0===a?void 0:a.pattern)&&"ai-hand-picked-section"),children:(0,j.jsx)("img",{src:null!==(s=t.current)&&void 0!==s&&s.pattern?t.current.pattern.screenshot:(0,I.staticAssetURL)("ai-assets/placeholder.png"),alt:"placeholder"})})}),(0,j.jsxs)(k.Flex,{className:"kubio-generate-ai-section__content__summary-wrapper",direction:"column",gap:3.75,children:[(0,j.jsx)(ct.TextareaControl,{label:(0,C.__)("Write a brief description to Kubio AI about the new section's content.","kubio"),className:Z()("kubio-ai-summary-field"),value:h,onChange:m,rows:6}),(0,j.jsxs)(k.Flex,{justify:"flex-end",gap:2.5,children:["hand-pick"===(null===(l=t.current)||void 0===l?void 0:l.type)&&(0,j.jsx)(k.Button,{className:"kubio-ai-change-section",onClick:o,children:(0,C.__)("Change section","kubio")}),(0,j.jsx)(k.Button,{className:"kubio-ai-button",onClick:b,children:(0,C.__)("Generate","kubio")})]})]})]})}):(0,j.jsx)(j.Fragment,{})},Xy=({sectionClientId:e,insertBefore:t=!0,shouldUseSectionClientId:o=!1,aiIntermediateCallback:n=null})=>{const{newSectionIndex:i,parentClientId:r}=(0,w.useSelect)((n=>{const{getBlockIndex:i,getBlockRootClientId:r,getBlockOrder:a}=n("core/block-editor"),s=r(e);let l=i(e);return t||l++,o&&(l=a(e).length),{newSectionIndex:l,parentClientId:o?e:s}}),[e]),{insertBlock:a,replaceBlocks:l,selectBlock:u}=(0,w.useDispatch)("core/block-editor"),{ownerDocument:d}=(0,s.useOwnerDocumentContext)(),[{pageContext:p,siteContext:g,pageTitle:f}]=(0,b.useAIData)();return{onGenerateAiSection:(0,c.useCallback)((({onCallback:e}={})=>{let t=async(t,o="")=>{const n=(0,I.kubioCloneDeep)(t.content),s=(0,I.transformTemplateToBlock)(n);await a(s,i,r,!0),d.defaultView.requestIdleCallback((async()=>{const i=(0,b.initGenerationSession)();s_(d,s.clientId,!0,!0);try{await ks({pageContext:p,siteContext:g,pageTitle:f,clientId:s.clientId,sectionCategory:t.categories.at(0).replace("kubio-content/",""),replaceBlocks:l,selectBlock:u,summary:o},n)}catch(e){throw e}finally{s_(d,s.clientId,!0,!1),null==e||e()}i()}))};if(n){const e=t;t=t=>n(t,e)}const o={page:"sections",disabledPages:["starterSite","pages"],sections:{internalTag:m.AI_READY_TAG,categoryType:"kubio-content",onActionFunc:t}};(0,I.onOpenTemplateGalleryWithParams)(o)}),[n,a,i,d,p,f,r,l,u,g]),onInsertNormalSection:(0,c.useCallback)((()=>{const e={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:"kubio-content",onActionFunc:async e=>{const t=(0,I.kubioCloneDeep)(e.content);let o=(0,I.transformTemplateToBlock)(t);const{anchor:n,name:s}=(0,I.getNextSectionNameAndIdForPattern)(e);o=h().merge({},o,{attributes:{anchor:n,attrs:{name:s}}}),await a(o,i,r,!0)}}};(0,I.onOpenTemplateGalleryWithParams)(e)}),[a,i,r])}},Qy=(0,c.forwardRef)(((e,t)=>{const{sectionClientId:o,disabled:n,insertBefore:i=!0,blockTitle:r,hasSingleBlockType:a,dropdownRef:s,onDropdownClose:l,onDropdownOpen:u,onActionStarted:d,onActionEnded:p,...h}=e,g=a?(0,C.sprintf)(// translators: %s: the name of the block when there is only one
// translators: %s: the name of the block when there is only one
(0,C.__)("Add %s","kubio"),r):(0,C.__)("Add block","kubio"),f=(0,c.useRef)(),[b,_]=(0,c.useState)(!1),v=(0,c.useCallback)(((e,t)=>{f.current={type:"hand-pick",pattern:e,insert:t},_(!0)}),[]),{onGenerateAiSection:y,onInsertNormalSection:x}=Xy({sectionClientId:o,insertBefore:i,aiIntermediateCallback:v}),[S,T]=Do(),P=(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[]),E=(0,c.useCallback)(((...e)=>{null==d||d(),T((()=>y({onCallback:()=>{null==p||p()}})))}),[T,y,d,p]),R=(0,c.useCallback)((()=>{_(!1),E()}),[E]),A=(0,c.useMemo)((()=>[P?{label:(0,C.__)("Generate a new AI section","kubio"),description:(0,C.__)("Choose a section and let Kubio AI generate your content.","kubio"),icon:Ge.KubioAI,isPro:!0,urlArgs:{source:"AI",content:"generate-new-ai-section"},isProItem:I.AI_IN_PRO,onClick:E}:null,{label:(0,C.__)("Select from templates gallery","kubio"),description:(0,C.__)("Choose a section and write your content.","kubio"),icon:Ge.PredesignedLayoutsIcon,onClick:x,className:"kubio-select-from-template-gallery-button"}].filter(Boolean)),[P,E,x]),O=(0,j.jsx)("div",{className:"kubio-between-sections-inserter__container",children:(0,j.jsx)(k.Button,{ref:t,icon:Ke,label:g,isPrimary:!0,tooltipPosition:"bottom",className:"kubio-between-sections-inserter","aria-haspopup":!1,"aria-expanded":!1,disabled:n,...h,children:(0,C.__)("Add section","kubio")})});return(0,j.jsxs)(j.Fragment,{children:[S,b&&(0,j.jsx)(Zy,{setVisible:_,sectionRef:f,onChangeSection:R,askForSummary:!0,isNewSection:!0}),(0,j.jsx)(qy,{menuItems:A,toggleButton:O,ref:s,onClose:l,onOpen:u,popoverProps:{position:"bottom"}})]})}));(0,u.addFilter)("kubio.BetweenSectionsInserter","BetweenSectionsInserter",(()=>Qy));const Jy=(0,c.createContext)({}),ek=()=>(0,c.useContext)(Jy),tk={imageSearch:{slug:"AI-IMAGE-SEARCH",label:(0,C.__)("AI Image","kubio")},imageGenerate:{slug:"AI-IMAGE-GENERATE",label:(0,C.__)("AI Image","kubio")}},ok={generate:"GENERATE"},nk=e=>{const t=Object.keys(tk).filter((t=>tk[t].slug===e));return t.length>0?tk[t[0]].label:(0,C.__)("AI Image Editor","kubio")},ik=({classNames:e,children:t})=>(0,j.jsx)("div",{className:Z()("kubio-ai-image-editor-sidebar",e),children:t}),rk=({children:e,classes:t=""})=>(0,j.jsx)("div",{className:`kubio-ai-image-editor-content ${t}`,children:e}),ak=({image:e,grid:t=4})=>{const{onSelectImageAction:o,editImageAction:n}=ek();return(0,j.jsxs)("div",{className:Z()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${t}`),children:[(0,j.jsx)("img",{src:e.filename,alt:""}),(0,j.jsxs)("div",{className:"kubio-ai-image-overlay",children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{o(e.filename)},children:(0,C.__)("Use this image","kubio")}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{n(e)},children:(0,C.__)("Edit","kubio")})]})]})},sk=({generatedImages:e,totalImages:t})=>(0,j.jsx)(j.Fragment,{children:e&&e.map(((e,o)=>(0,j.jsx)(ak,{image:e,grid:t},o)))}),lk=({label:e,onClick:t,isBusy:o,disabled:n,loadingMessage:i,infoMessage:r,variant:a="primary"})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:t,isBusy:o,disabled:n,variant:a,__experimentalIsFocusable:!0,children:e}),i&&o&&(0,j.jsx)("p",{className:"kubio-ai-info kubio-ai-info-loading",children:i}),r&&!o&&(0,j.jsx)("p",{className:"kubio-ai-info",children:r})]}),ck=((0,C.__)("3D Model","kubio"),(0,C.__)("Analog Film","kubio"),(0,C.__)("Anime","kubio"),(0,C.__)("Cinematic","kubio"),(0,C.__)("Comic Book","kubio"),(0,C.__)("Digital Art","kubio"),(0,C.__)("Enhance","kubio"),(0,C.__)("Fantasy Art","kubio"),(0,C.__)("Isometric","kubio"),(0,C.__)("Line Art","kubio"),(0,C.__)("Low Poly","kubio"),(0,C.__)("Modeling Compound","kubio"),(0,C.__)("Neon Punk","kubio"),(0,C.__)("Origami","kubio"),(0,C.__)("Photographic","kubio"),(0,C.__)("Pixel Art","kubio"),(0,C.__)("Tile Texture","kubio"),()=>(0,I.getBackendData)("aiSDImageTypes",{})),uk=()=>(0,I.getBackendData)("aiSDImageStyles",{}),dk=[{label:(0,C.__)("Square (1024x1024)","kubio"),value:"1024x1024"},{label:(0,C.__)("Landscape (1152x896)","kubio"),value:"1152x896"},{label:(0,C.__)("Wide Landscape (1216x832)","kubio"),value:"1216x832"},{label:(0,C.__)("Panoramic (1344x768)","kubio"),value:"1344x768"},{label:(0,C.__)("Tall portrait (768x1344)","kubio"),value:"768x1344"},{label:(0,C.__)("Portrait (832x1216)","kubio"),value:"832x1216"},{label:(0,C.__)("Compact portrait (896x1152)","kubio"),value:"896x1152"}],pk=()=>{const[e,t]=(0,c.useState)(!1),{imagePrompt:o,setImagePrompt:n,isGenerating:i,setIsGenerating:r,initialImage:a,saveGeneratedImages:s,setEditorSection:l,aspectRatio:u,setAspectRatio:d,imageStyle:h,setImageStyle:m,imageType:g,setImageType:f,imageSize:b,numberOfImages:_,setNumberOfImages:v,setImageSizeFromOptions:y,aiCreditsPerImageCost:x}=ek(),S=(0,c.useMemo)((()=>(0,p.map)(ck(),((e,t)=>({label:e,value:t})))),[]),w=(0,c.useMemo)((()=>{const e=uk(),t={},o={value:"",label:(0,C.__)("None","kubio")};return Object.keys(e).forEach((n=>{t[n]=(0,p.map)(e[n],((e,t)=>({label:e,value:t}))),t[n].unshift(o)})),t}),[]);(0,c.useEffect)((()=>{var e;t(null!==(e=w[g])&&void 0!==e?e:"")}),[w,S,g]);const I=(0,c.useCallback)((async()=>!1),[u,g,o,b,h,a,i,_,l,s,r]);return(0,j.jsxs)("div",{className:"kubio-ai-sidebar-controls",children:[(0,j.jsx)("p",{className:"kubio-ai-info",children:(0,C.__)("Experiment with the latest generative AI and let your imagination define your images.","kubio")}),(0,j.jsx)(k.TextareaControl,{onChange:n,value:o,label:(0,C.__)("Image Description","kubio"),useDebounce:!1}),(0,j.jsx)(k.RangeControl,{label:(0,C.__)("Samples","kubio"),value:_,min:1,max:4,initialPosition:1,withInputField:!0,onChange:v,className:"kubio-ai-range-with-help",help:(0,C.sprintf)(/* translators: %s is replaced with the number of credits */ /* translators: %s is replaced with the number of credits */(0,C.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),x*_)}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Size","kubio"),inlineLabel:!1,value:u,options:dk,onChange:e=>{d(e),y(e)},size:"__unstable-large"}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Image type","kubio"),inlineLabel:!1,value:g,options:S,onChange:e=>{var o;f(e),m(""),t(null!==(o=w[e])&&void 0!==o&&o)},size:"__unstable-large"}),!1!==e&&(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Image style","kubio"),inlineLabel:!1,value:h,options:e,onChange:m,size:"__unstable-large",disabled:!1===e}),(0,j.jsx)(lk,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:I,isBusy:i,disabled:i||0===o.length,variant:"primary",label:(0,C.__)("Generate image","kubio"),loadingMessage:(0,C.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,C.__)("All generated images will be saved in the Media Library.","kubio")})]})},hk=(0,Fe.isFreeVersion)()?Fe.proBadgeClasses.proItem:"",mk=(0,Fe.isFreeVersion)()?`${Fe.proBadgeClasses.proItem}-wrapper`:"",gk=()=>(0,Fe.isFreeVersion)()?(0,j.jsx)("span",{className:Fe.proBadgeClasses.badgeClass,children:(0,C.__)("PRO","kubio")}):null,fk=()=>{const{editorTab:e,setEditorTab:t,backToSection:o}=ek();return(0,j.jsxs)("div",{className:"kubio-ai-image-editor-menu",children:[(0,j.jsx)(k.Button,{onClick:()=>{t(tk.imageSearch.slug),o(ok.imageSearch)},className:e===tk.imageSearch.slug?"kubio-ai-button-tab":"",children:(0,C.__)("Search","kubio")}),(0,j.jsxs)(k.Button,{onClick:()=>{t(tk.imageGenerate.slug),o(ok.generate)},className:e===tk.imageGenerate.slug?"kubio-ai-button-tab":"",children:[(0,C.__)("Generate","kubio"),(0,j.jsx)(gk,{})]})]})},bk=()=>(0,j.jsxs)("div",{className:"kubio-ai-image-results-empty",children:[(0,j.jsx)(k.Icon,{icon:Ge.GenerateImageIcon}),(0,j.jsx)("p",{children:(0,C.__)("Your results will appear here.","kubio")})]}),_k=({grid:e=4,placeholderImage:t=!1})=>(0,j.jsx)("div",{className:Z()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${e}`),children:t&&(0,j.jsx)("img",{src:t,alt:"",className:"kubio-ai-placeholder-image"})}),vk=({urlArgs:e})=>{const t=(0,c.useCallback)((t=>{t.preventDefault(),(0,Fe.upgradeToPro)(e)}),[e]);return(0,j.jsxs)("div",{className:"kubio-ai-pro-popup-background ",children:[(0,j.jsxs)("div",{className:"kubio-ai-generated-images",children:[(0,j.jsx)(_k,{}),(0,j.jsx)(_k,{}),(0,j.jsx)(_k,{}),(0,j.jsx)(_k,{})]}),(0,j.jsxs)("div",{className:"kubio-ai-pro-popup",children:[(0,j.jsx)("div",{className:"kubio-ai-pro-content",children:(0,j.jsx)("h1",{children:(0,C.__)("Generate awesome images with Kubio AI","kubio")})}),(0,j.jsx)("img",{src:(0,I.staticAssetURL)("ai-assets/pro-img.png"),alt:"final-message"}),(0,j.jsxs)("div",{className:"kubio-ai-pro-content upgrade-to-pro__content",children:[(0,j.jsx)("p",{className:"kubio-ai-pro-content-lead",children:(0,C.__)("Hello there! 🌈 Did you know you can unlock a whole new world of creativity with Kubio PRO?","kubio")}),(0,j.jsxs)("ul",{className:"kubio-ai-pro-content-features",children:[(0,j.jsxs)("li",{children:[(0,j.jsx)(k.Icon,{icon:Yi,size:16}),(0,C.__)("Generate new images by just writing a few words.","kubio")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(k.Icon,{icon:Yi,size:16}),(0,C.__)("Create different kinds of images like paintings, 3D models, photographic, etc.","kubio")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(k.Icon,{icon:Yi,size:16}),(0,C.__)("Easily adjust images using the generative fill feature.","kubio")]})]}),(0,j.jsx)(k.Button,{className:"btn-upgrade",onClick:t,children:(0,Fe.getStringValueWithId)("pro.upgrade.label")})]})]})]})},yk=512,kk=async e=>{const t=new Image;return t.src=e,await t.decode(),t},xk=e=>64*Math.ceil(e/64),Sk=(e,t,o)=>{let n=0,i=0;return xk(e)<=xk(t)?(i=512,n=xk(i*o)):(n=yk,i=xk(n*o)),[n,i]},wk=(e,t,o)=>{const n=Sk(e,t,o);if(n[0]<yk){const e=yk-n[0];n[0]=yk,n[1]=xk(yk+e)}return n},Ck=({totalImages:e})=>{const{numberOfImages:t,imageSize:o}=ek(),n=[],i=((e,t,o=0)=>{const n=document.createElement("canvas");n.width=e,n.height=t;const i=n.getContext("2d");i.fillStyle="rgba(244, 244, 247, "+o+")",i.fillRect(0,0,e,t);const r=new window.Image(e,t);return r.src=n.toDataURL(),r.src})(o[0],o[1],1);for(let o=0;o<t;o++)n.push((0,j.jsx)(_k,{grid:e,placeholderImage:i},o));return(0,j.jsx)(j.Fragment,{children:n})},Ik=({generatedImages:e,isGenerating:t,totalImages:o})=>(0,j.jsxs)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${o}`,children:[e.length>0&&(0,j.jsx)(sk,{generatedImages:e,totalImages:o}),t&&(0,j.jsx)(Ck,{totalImages:o})]}),jk=({generatedImages:e,isGenerating:t,totalImages:o})=>(0,j.jsxs)(j.Fragment,{children:[(e.length>0||!0===t)&&(0,j.jsx)(Ik,{generatedImages:e,isGenerating:t,totalImages:o}),0===e.length&&!1===t&&(0,j.jsx)(bk,{})]}),Tk={source:"ai-image-generator",content:"ai-image-generator"},Pk=()=>{const{generatedImages:e,isGenerating:t,numberOfImages:o}=ek(),n=t?o+e.length:e.length;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(ik,{classNames:`${mk}`,children:[(0,j.jsx)(fk,{}),(0,j.jsx)(pk,{})]}),(0,j.jsx)(rk,{classes:e.length>0||t?"":"kubio-ai-image-results-empty-wrapper",children:(0,Fe.isFreeVersion)()?(0,j.jsx)(vk,{urlArgs:Tk}):(0,j.jsx)(jk,{generatedImages:e,isGenerating:t,totalImages:n})})]})},Ek=()=>{const{onSelectImageAction:e,currentSelectedImage:t}=ek();return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"kubio-ai-image-editor-img-holder",children:(0,j.jsxs)("div",{className:"kubio-ai-image-editor-si-wrapper",children:[(0,j.jsx)("span",{children:(0,j.jsx)("img",{src:t.filename,alt:""})}),(0,j.jsx)("div",{className:"kubio-ai-image-editor-action-overlay",children:(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(t.filename)},children:(0,C.__)("Use this image","kubio")})})]})})})},Rk=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})}),Ak=()=>{const{backToSection:e}=ek();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{e(ok.generate)},icon:Rk,children:(0,C.__)("Generate an image","kubio")}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action kubio-ai-button-edit-action-first",onClick:()=>{e(ok.generativeFill)},icon:(0,j.jsx)(k.Dashicon,{icon:"admin-appearance"}),children:(0,j.jsxs)("div",{className:"kubio-ai-button-edit-action-content",children:[(0,j.jsx)("h3",{children:(0,C.__)("Generative Fill","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")})]})}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action",onClick:()=>{e(ok.variations)},icon:(0,j.jsx)(k.Dashicon,{icon:"format-gallery"}),children:(0,j.jsxs)("div",{className:"kubio-ai-button-edit-action-content",children:[(0,j.jsx)("h3",{children:(0,C.__)("Variations","kubio")}),(0,j.jsx)("p",{children:(0,C.__)("Describe the changes you would like to make for the current image.","kubio")})]})})]})},Ok=()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ik,{children:(0,j.jsx)(Ak,{})}),(0,j.jsx)(rk,{children:(0,j.jsx)(Ek,{})})]}),Nk=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"})}),Dk=()=>{const{onSelectImageAction:e,backToSection:t,currentSelectedImage:o,prevImageAction:n,nextImageAction:i}=ek();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"kubio-ai-image-editor-action-top-bar",children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{t(ok.generate)},icon:Rk,children:(0,C.__)("Back","kubio")}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(o.filename)},children:(0,C.__)("Use this image","kubio")})]}),(0,j.jsxs)("div",{className:"kubio-ai-image-editor-img-holder",children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-prev",onClick:()=>{n(o.filename)},icon:Rk,children:(0,C.__)("prev","kubio")}),(0,j.jsx)("img",{src:o.filename,alt:""}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-next",onClick:()=>{i(o.filename)},icon:Nk,children:(0,C.__)("next","kubio")})]})]})},Mk=()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ik,{children:(0,j.jsx)(pk,{})}),(0,j.jsx)(rk,{children:(0,j.jsx)(Dk,{})})]}),Bk=({sectionTitle:e=(0,C.__)("Variations","kubio")})=>{const[t,o]=(0,c.useState)(!1),{imagePrompt:n,setImagePrompt:i,isGenerating:r,setIsGenerating:a,initialImage:s,aspectRatio:l,imageStyle:u,setImageStyle:d,imageSize:h,setImageSize:m,numberOfImages:g,setNumberOfImages:f,addImageVariations:_,currentSelectedImage:v,backToSection:y,imageType:x,setImageType:S,aiCreditsPerImageCost:w}=ek();(0,c.useEffect)((()=>{(async()=>{if(s){const e=await kk(s);m(((e,t,o)=>{switch(o){case"auto":return((e,t)=>[xk(e),xk(t)])(e,t);case"4/3":return Sk(e,t,4/3);case"3/4":return wk(e,t,3/4);case"3/2":return Sk(e,t,1.5);case"16/9":return Sk(e,t,16/9);case"9/16":return wk(e,t,9/16);default:return[yk,yk]}})(e.naturalWidth,e.naturalHeight,l))}})()}),[s,l,m]);const I=(0,c.useMemo)((()=>(0,p.map)(ck(),((e,t)=>({label:e,value:t})))),[]),T=(0,c.useMemo)((()=>{const e=uk(),t={},o={value:"",label:(0,C.__)("None","kubio")};return Object.keys(e).forEach((n=>{t[n]=(0,p.map)(e[n],((e,t)=>({label:e,value:t}))),t[n].unshift(o)})),t}),[]);(0,c.useEffect)((()=>{var e;o(null!==(e=T[x])&&void 0!==e?e:"")}),[T,I,x]);const P=(0,c.useCallback)((async()=>{if(!r){a(!0);try{const e=await(0,b.aiImageVariations)({imagePrompt:n,currentSelectedImage:v.filename,imageSize:h,imageStyle:u,imageType:x,numberOfImages:g});e.length>0&&_(v.filename,e)}catch(e){console.log(e)}a(!1)}}),[r,a,n,v.filename,h,u,x,g,_]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{y(ok.edit)},icon:Rk,children:(0,C.__)("Back","kubio")}),(0,j.jsxs)("div",{className:"kubio-ai-sidebar-heading",children:[(0,j.jsx)("div",{className:"kubio-ai-icon-holder",children:(0,j.jsx)(k.Dashicon,{icon:"format-gallery"})}),(0,j.jsxs)("div",{className:"kubio-ai-text-holder",children:[(0,j.jsx)("h3",{children:e}),(0,j.jsx)("p",{className:"kubio-ai-heading-info",children:(0,C.__)("Describe the changes you would like to make for the current image.","kubio")})]})]}),(0,j.jsx)(k.TextareaControl,{onChange:i,value:n,label:(0,C.__)("Description of changes","kubio"),useDebounce:!1}),(0,j.jsx)(k.RangeControl,{label:(0,C.__)("Samples","kubio"),value:g,min:1,max:4,initialPosition:1,withInputField:!0,onChange:f,className:"kubio-ai-range-with-help",help:(0,C.sprintf)(/* translators: %s is replaced with the number of credits */ /* translators: %s is replaced with the number of credits */(0,C.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),w*g)}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Image type","kubio"),inlineLabel:!1,value:x,options:I,onChange:e=>{var t;S(e),d(""),o(null!==(t=T[e])&&void 0!==t&&t)},size:"__unstable-large"}),!1!==t&&(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Image style","kubio"),inlineLabel:!1,value:u,options:t,onChange:d,size:"__unstable-large",disabled:!1===t}),(0,j.jsx)(lk,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:P,isBusy:r,disabled:r,variant:"primary",label:(0,C.__)("Create variations","kubio"),loadingMessage:(0,C.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,C.__)("All generated images will be saved in the Media Library.","kubio")})]})},Lk=({grid:e=1})=>{const{currentSelectedImage:t}=ek();return(0,j.jsx)("div",{className:Z()("kubio-ai-image-generator-single-image","kubio-ai-original",`kubio-ai-single-image-grid-${e}`),"data-label":(0,C.__)("Original","kubio"),children:(0,j.jsx)("img",{src:t.filename,alt:""})})},zk=()=>{const{getImageVariations:e}=ek(),t=e();return(0,j.jsxs)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${t.length+1}`,children:[(0,j.jsx)(Lk,{grid:t.length+1}),t.length>0&&t.map(((e,o)=>(0,j.jsx)(ak,{image:e,grid:t.length+1},o)))]})},Fk=()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ik,{children:(0,j.jsx)(Bk,{})}),(0,j.jsx)(rk,{children:(0,j.jsx)(zk,{})})]});function Gk(e,t,o,n,i,r,a){try{var s=e[r](a),l=s.value}catch(e){return void o(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function Hk(){return Hk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},Hk.apply(this,arguments)}var Uk={exports:{}};!function(e){var t=function(e){var t,o=Object.prototype,n=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,o){return e[t]=o}}function c(e,t,o,n){var i=t&&t.prototype instanceof f?t:f,r=Object.create(i.prototype),a=new T(n||[]);return r._invoke=function(e,t,o){var n=d;return function(i,r){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw r;return E()}for(o.method=i,o.arg=r;;){var a=o.delegate;if(a){var s=C(a,o);if(s){if(s===g)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===d)throw n=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=h;var l=u(e,t,o);if("normal"===l.type){if(n=o.done?m:p,l.arg===g)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=m,o.method="throw",o.arg=l.arg)}}}(e,o,a),r}function u(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function f(){}function b(){}function _(){}var v={};l(v,r,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(P([])));k&&k!==o&&n.call(k,r)&&(v=k);var x=_.prototype=f.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(i,r,a,s){var l=u(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,n){function r(){return new t((function(t,i){o(e,n,t,i)}))}return i=i?i.then(r,r):r()}}function C(e,o){var n=e.iterator[o.method];if(n===t){if(o.delegate=null,"throw"===o.method){if(e.iterator.return&&(o.method="return",o.arg=t,C(e,o),"throw"===o.method))return g;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(n,e.iterator,o.arg);if("throw"===i.type)return o.method="throw",o.arg=i.arg,o.delegate=null,g;var r=i.arg;return r?r.done?(o[e.resultName]=r.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,g):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e){var o=e[r];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function o(){for(;++i<e.length;)if(n.call(e,i))return o.value=e[i],o.done=!1,o;return o.value=t,o.done=!0,o};return a.next=a}}return{next:E}}function E(){return{value:t,done:!0}}return b.prototype=_,l(x,"constructor",_),l(_,"constructor",b),b.displayName=l(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},S(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,o,n,i,r){void 0===r&&(r=Promise);var a=new w(c(t,o,n,i),r);return e.isGeneratorFunction(o)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,s,"Generator"),l(x,r,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var o in e)t.push(o);return t.reverse(),function o(){for(;t.length;){var n=t.pop();if(n in e)return o.value=n,o.done=!1,o}return o.done=!0,o}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var o=this;function i(n,i){return s.type="throw",s.arg=e,o.next=n,i&&(o.method="next",o.arg=t),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),j(o),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var i=n.arg;j(o)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,o,n){return this.delegate={iterator:P(e),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Uk);var Wk=Uk.exports,Vk=function(e){var t=e.paths,o=e.id,n=e.strokeWidth,i=e.strokeColor,r=e.command,a=void 0===r?$k:r;if(1===t.length){var s=t[0],l=s.x,c=s.y,u=n/2;return X.createElement("circle",{key:o,id:o,cx:l,cy:c,r:u,stroke:i,fill:i})}var d=t.reduce((function(e,t,o,n){return 0===o?"M "+t.x+","+t.y:e+" "+a(t,o,n)}),"");return X.createElement("path",{key:o,id:o,d,fill:"none",strokeLinecap:"round",stroke:i,strokeWidth:n})},Kk=function(e){var t,o,n,i,r=e.current,a=e.next,s=e.previous,l=e.reverse,c=(t=s||r,n=(o=a||r).x-t.x,i=o.y-t.y,{length:Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),angle:Math.atan2(i,n)}),u=c.angle+(l?Math.PI:0),d=.2*c.length;return[r.x+Math.cos(u)*d,r.y+Math.sin(u)*d]},$k=function(e,t,o){var n=null,i=null;switch(t){case 0:var r=Kk({current:e});n=r[0],i=r[1];break;case 1:var a=Kk({current:o[t-1],next:e});n=a[0],i=a[1];break;default:var s=Kk({current:o[t-1],previous:o[t-2],next:e});n=s[0],i=s[1]}var l=Kk({current:e,previous:o[t-1],next:o[t+1],reverse:!0});return"C "+n+","+i+" "+l[0]+","+l[1]+" "+e.x+", "+e.y},qk=function(e){var t=e.id,o=e.paths;return X.createElement(X.Fragment,null,o.map((function(e,o){return X.createElement(Vk,{key:t+"__"+o,paths:e.paths,id:t+"__"+o,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,command:$k})})))},Yk=function(e){return new Promise((function(t,o){var n=new Image;n.addEventListener("load",(function(){n.width>0&&t(n),o("Image not found")})),n.addEventListener("error",(function(e){return o(e)})),n.src=e,n.setAttribute("crossorigin","anonymous")}))};function Zk(e){var t,o=null==(t=e.firstChild)?void 0:t.cloneNode(!0),n=e.offsetWidth,i=e.offsetHeight;return o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("width",n.toString()),o.setAttribute("height",i.toString()),{svgCanvas:o,width:n,height:i}}var Xk=X.forwardRef((function(e,t){var o=e.paths,n=e.isDrawing,i=e.onPointerDown,r=e.onPointerMove,a=e.onPointerUp,s=e.id,l=void 0===s?"react-sketch-canvas":s,c=e.width,u=void 0===c?"100%":c,d=e.height,p=void 0===d?"100%":d,h=e.className,m=void 0===h?"react-sketch-canvas":h,g=e.canvasColor,f=void 0===g?"red":g,b=e.backgroundImage,_=void 0===b?"":b,v=e.exportWithBackgroundImage,y=void 0!==v&&v,k=e.preserveBackgroundImageAspectRatio,x=void 0===k?"none":k,S=e.allowOnlyPointerType,w=void 0===S?"all":S,C=e.style,I=void 0===C?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:C,j=e.svgStyle,T=void 0===j?{}:j,P=X.useRef(null),E=function(e){var t,o,n,i=null==(t=P.current)?void 0:t.getBoundingClientRect(),r=null!=(o=window.scrollX)?o:0,a=null!=(n=window.scrollY)?n:0;return i?{x:e.pageX-i.left-r,y:e.pageY-i.top-a}:{x:0,y:0}},R=function(e){"mouse"===e.pointerType&&0!==e.button||"all"!==w&&e.pointerType!==w||a()};X.useImperativeHandle(t,(function(){return{exportImage:function(e){return new Promise(function(){var t,o=(t=Wk.mark((function t(o,n){var i,r,a,s,l,c,u,d;return Wk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=P.current){t.next=4;break}throw Error("Canvas not rendered yet");case 4:return r=Zk(i),a=r.svgCanvas,s=r.width,l=r.height,c="data:image/svg+xml;base64,"+btoa(a.outerHTML),t.next=8,Yk(c);case 8:if(t.t0=t.sent,u=[t.t0],!y){t.next=21;break}return t.prev=11,t.next=14,Yk(_);case 14:d=t.sent,u.push(d),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(u).then((function(t){var n=document.createElement("canvas");n.setAttribute("width",s.toString()),n.setAttribute("height",l.toString());var i=n.getContext("2d");if(!i)throw Error("Canvas not rendered yet");t.reverse().forEach((function(e){i.drawImage(e,0,0)})),o(n.toDataURL("image/"+e))})).catch((function(e){throw e})),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(0),n(t.t2);case 27:case"end":return t.stop()}}),t,null,[[0,24],[11,18]])})),function(){var e=this,o=arguments;return new Promise((function(n,i){var r=t.apply(e,o);function a(e){Gk(r,n,i,a,s,"next",e)}function s(e){Gk(r,n,i,a,s,"throw",e)}a(void 0)}))});return function(_x,e){return o.apply(this,arguments)}}())},exportSvg:function(){return new Promise((function(e,t){try{var o,n=null!=(o=P.current)?o:null;if(null!==n){var i,r,a=Zk(n).svgCanvas;if(y)return void e(a.outerHTML);null==(i=a.querySelector("#"+l+"__background"))||i.remove(),null==(r=a.querySelector("#"+l+"__canvas-background"))||r.setAttribute("fill",f),e(a.outerHTML)}t(new Error("Canvas not loaded"))}catch(e){t(e)}}))}}})),X.useEffect((function(){return document.addEventListener("pointerup",R),function(){document.removeEventListener("pointerup",R)}}),[R]);var A=o.filter((function(e){return!e.drawMode})),O=0,N=o.reduce((function(e,t){return t.drawMode?(void 0===e[O]&&(e[O]=[]),e[O].push(t),e):(O+=1,e)}),[[]]);return X.createElement("div",{role:"presentation",ref:P,className:m,style:Hk({touchAction:"none",width:u,height:p},I),"touch-action":"none",onPointerDown:function(e){if(!("all"!==w&&e.pointerType!==w||"mouse"===e.pointerType&&0!==e.button)){var t=E(e);i(t)}},onPointerMove:function(e){if(n&&("all"===w||e.pointerType===w)){var t=E(e);r(t)}},onPointerUp:R},X.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:Hk({width:"100%",height:"100%"},T),id:l},X.createElement("g",{id:l+"__eraser-stroke-group",display:"none"},X.createElement("rect",{id:l+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),A.map((function(e,t){return X.createElement(Vk,{key:l+"__eraser-"+t,id:l+"__eraser-"+t,paths:e.paths,strokeColor:"#000000",strokeWidth:e.strokeWidth})}))),X.createElement("defs",null,_&&X.createElement("pattern",{id:l+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},X.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:_,preserveAspectRatio:x})),A.map((function(e,t){return X.createElement("mask",{id:l+"__eraser-mask-"+t,key:l+"__eraser-mask-"+t,maskUnits:"userSpaceOnUse"},X.createElement("use",{href:"#"+l+"__mask-background"}),Array.from({length:A.length-t},(function(e,o){return o+t})).map((function(e){return X.createElement("use",{key:e.toString(),href:"#"+l+"__eraser-"+e.toString()})})))}))),X.createElement("g",{id:l+"__canvas-background-group"},X.createElement("rect",{id:l+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:_?"url(#"+l+"__background)":f})),N.map((function(e,t){return X.createElement("g",{id:l+"__stroke-group-"+t,key:l+"__stroke-group-"+t,mask:"url(#"+l+"__eraser-mask-"+t+")"},X.createElement(qk,{id:l,paths:e}))}))))})),Qk=X.forwardRef((function(e,t){var o=e.id,n=void 0===o?"react-sketch-canvas":o,i=e.width,r=void 0===i?"100%":i,a=e.height,s=void 0===a?"100%":a,l=e.className,c=void 0===l?"":l,u=e.canvasColor,d=void 0===u?"white":u,p=e.strokeColor,h=void 0===p?"red":p,m=e.backgroundImage,g=void 0===m?"":m,f=e.exportWithBackgroundImage,b=void 0!==f&&f,_=e.preserveBackgroundImageAspectRatio,v=void 0===_?"none":_,y=e.strokeWidth,k=void 0===y?4:y,x=e.eraserWidth,S=void 0===x?8:x,w=e.allowOnlyPointerType,C=void 0===w?"all":w,I=e.style,j=void 0===I?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:I,T=e.svgStyle,P=void 0===T?{}:T,E=e.onChange,R=void 0===E?function(e){}:E,A=e.onStroke,O=void 0===A?function(e,t){}:A,N=e.withTimestamp,D=void 0!==N&&N,M=X.createRef(),B=X.useState(!0),L=B[0],z=B[1],F=X.useState(!1),G=F[0],H=F[1],U=X.useState([]),W=U[0],V=U[1],K=X.useState([]),$=K[0],q=K[1],Y=X.useState([]),Z=Y[0],Q=Y[1],J=X.useCallback((function(){var e,t,o=null!=(e=null==(t=Z.slice(-1))?void 0:t[0])?e:null;null!==o?O(o,!o.drawMode):console.warn("No stroke found!")}),[G]);return X.useEffect((function(){J()}),[G]),X.useEffect((function(){R(Z)}),[Z]),X.useImperativeHandle(t,(function(){return{eraseMode:function(e){z(!e)},clearCanvas:function(){V([].concat(Z)),Q([])},undo:function(){if(0!==W.length)return Q([].concat(W)),void V([]);q((function(e){return[].concat(e,Z.slice(-1))})),Q((function(e){return e.slice(0,-1)}))},redo:function(){0!==$.length&&(Q((function(e){return[].concat(e,$.slice(-1))})),q((function(e){return e.slice(0,-1)})))},exportImage:function(e){var t,o=null==(t=M.current)?void 0:t.exportImage;if(o)return o(e);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise((function(e,t){var o,n=null==(o=M.current)?void 0:o.exportSvg;n?n().then((function(t){e(t)})).catch((function(e){t(e)})):t(Error("Export function called before canvas loaded"))}))},exportPaths:function(){return new Promise((function(e,t){try{e(Z)}catch(e){t(e)}}))},loadPaths:function(e){Q((function(t){return[].concat(t,e)}))},getSketchingTime:function(){return new Promise((function(e,t){D||t(new Error("Set 'withTimestamp' prop to get sketching time"));try{e(Z.reduce((function(e,t){var o,n,i=null!=(o=t.startTimestamp)?o:0;return e+((null!=(n=t.endTimestamp)?n:0)-i)}),0))}catch(e){t(e)}}))},resetCanvas:function(){V([]),q([]),Q([])}}})),X.createElement(Xk,{ref:M,id:n,width:r,height:s,className:c,canvasColor:d,backgroundImage:g,exportWithBackgroundImage:b,preserveBackgroundImageAspectRatio:v,allowOnlyPointerType:C,style:j,svgStyle:P,paths:Z,isDrawing:G,onPointerDown:function(e){H(!0),q([]);var t={drawMode:L,strokeColor:L?h:"#000000",strokeWidth:L?k:S,paths:[e]};D&&(t=Hk({},t,{startTimestamp:Date.now(),endTimestamp:0})),Q((function(e){return[].concat(e,[t])}))},onPointerMove:function(e){if(G){var t=Z.slice(-1)[0],o=Hk({},t,{paths:[].concat(t.paths,[e])});Q((function(e){return[].concat(e.slice(0,-1),[o])}))}},onPointerUp:function(){var e,t;if(G&&(H(!1),D)){var o=null!=(e=null==(t=Z.slice(-1))?void 0:t[0])?e:null;if(null!==o){var n=Hk({},o,{endTimestamp:Date.now()});Q((function(e){return[].concat(e.slice(0,-1),[n])}))}}}})}));const Jk=(0,c.createContext)({}),ex=()=>(0,c.useContext)(Jk),tx={canRedo:!1,canUndo:!1,cursor:0,queue:[],images:[]},ox={REDO:"redo",UNDO:"undo",INSERT:"insert"},nx=(e,t)=>{let o=0;const n=e.images.length-1,i=(e,t=!1)=>({canUndo:e>0,canRedo:!1===t&&e<n});switch(t.type){case ox.UNDO:return o=e.cursor>0?e.cursor-1:0,t.setCurrentSelectedImage(e.images[o]),{...e,...i(o),cursor:o};case ox.REDO:return o=e.cursor<n?e.cursor+1:n,t.setCurrentSelectedImage(e.images[o]),{...e,...i(o),cursor:o};case ox.INSERT:const r=e.images,a=r.length>1&&e.cursor>0?r.slice(0,e.cursor):r;return a.push(t.image),o=a.length-1,t.setCurrentSelectedImage(t.image),{...e,images:a,...i(o,a.length),cursor:o}}return e},ix=[{key:20,name:"20",className:"kubio-ai-stroke-option kubio-ai-stroke-20"},{key:30,name:"30",className:"kubio-ai-stroke-option kubio-ai-stroke-30"},{key:40,name:"40",className:"kubio-ai-stroke-option kubio-ai-stroke-40"},{key:50,name:"50",className:"kubio-ai-stroke-option kubio-ai-stroke-50"}],rx=()=>{const{undoImageAction:e,redoImageAction:t,setStrokeSize:o,strokeSize:n,paintActions:i,resetCanvasAction:r,imageActions:a}=ex(),{onSelectImageAction:s,currentSelectedImage:l}=ek();return(0,j.jsx)("div",{className:"kubio-image-editor-mask-editor-toolbar",children:(0,j.jsxs)("div",{className:"kubio-image-editor-toolbar-buttons",children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:e,icon:Ef,disabled:!a.canUndo,showTooltip:!0,title:(0,C.__)("Undo","kubio"),iconSize:24}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:t,icon:jf,disabled:!a.canRedo,showTooltip:!0,title:(0,C.__)("Redo","kubio"),iconSize:24}),(0,j.jsx)("div",{className:"kubio-ai-h-divider"}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-revert",onClick:r,icon:Ge.EraserIcon,disabled:!i.isDirty,showTooltip:!0,title:(0,C.__)("Clear drawing","kubio"),iconSize:16}),(0,j.jsx)(k.CustomSelectControl,{__nextUnconstrainedWidth:!0,hideLabelFromVision:!0,label:"Stroke Size",options:ix,onChange:({selectedItem:e})=>{o(e.key)},value:ix.find((e=>e.key===n))}),(0,j.jsx)("div",{className:"kubio-ai-h-divider"}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{s(l.filename)},children:(0,C.__)("Use this image","kubio")})]})})},ax=(e={})=>{const{radius:t=30}=e,o=btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="${t}" height="${t}">\n        <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z" fill-opacity="0.7" />\n    </svg>`),n=Math.floor(t/2)+1;return{cursor:`url("data:image/svg+xml;base64,${o}") ${n} ${n}, auto`,borderRadius:"100%"}},sx=()=>{const{currentSelectedImage:e}=ek(),{setImageSize:t,imageSize:o,strokeSize:n,canvasRef:i,onStrokeAction:r}=ex(),[a,s]=(0,c.useState)(ax({radius:n})),[l,u]=(0,c.useState)([o[0],Math.min(512,o[1])]);(0,c.useEffect)((()=>{(async()=>{if(e){const o=await kk(e.filename);t([o.naturalWidth,o.naturalHeight])}})()}),[e.filename]),(0,c.useEffect)((()=>{const e=Math.min(550,o[1]),t=Math.round(o[0]*(e/o[1]));u([t,e])}),[o]),(0,c.useEffect)((()=>{s(ax({radius:n}))}),[n]);const d=(0,c.useRef)();return(0,c.useEffect)((()=>{if(!d.current)return;const e=new window.MutationObserver((function(){const e=d.current.querySelector("#react-sketch-canvas__stroke-group-0");null==e||e.removeAttribute("mask")}));return e.observe(d.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}}),[d.current]),(0,j.jsx)("div",{className:"kubio-ai-image-generative-editor",ref:d,children:o[0]>0&&l[0]>0&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Qk,{ref:i,width:l[0],height:l[1],strokeWidth:n,className:"kubio-ai-generative-editor",strokeColor:"black",backgroundImage:e.filename,canvasColor:"white",exportWithBackgroundImage:!1,style:a,onStroke:r}),(0,j.jsx)(rx,{})]})})},lx=()=>(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(sx,{})}),cx=()=>{const[e,t]=(0,c.useState)(""),o=(0,c.useRef)(!1),{backToSection:n,isGenerating:i,setIsGenerating:r,currentSelectedImage:a,addImageVersion:s,setCurrentSelectedImage:l}=ek(),{exportSketchImage:u,resetCanvasAction:d,addGeneratedImageToQueue:p}=ex();(0,c.useEffect)((()=>{p(a)}),[]);const h=(0,c.useCallback)((async()=>{if(!i){r(!0);try{const t=await(0,b.aiImageMask)({imagePrompt:e,currentSelectedImage:a.filename,maskImage:await u()});if(""!==t){const e=s(t[0]);!1===o.current&&(o.current=e.currentImage),p(e.newImage),d()}}catch(e){console.log(e)}r(!1)}}),[i,r,e,a,u,s,d,p]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{!1!==o.current&&l(o.current),n("EDIT")},icon:Rk,children:(0,C.__)("Back","kubio")}),(0,j.jsxs)("div",{className:"kubio-ai-sidebar-heading",children:[(0,j.jsx)("div",{className:"kubio-ai-icon-holder",children:(0,j.jsx)(k.Dashicon,{icon:"admin-appearance"})}),(0,j.jsxs)("div",{className:"kubio-ai-text-holder",children:[(0,j.jsx)("h3",{children:(0,C.__)("Generative Fill","kubio")}),(0,j.jsx)("p",{className:"kubio-ai-heading-info",children:(0,C.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")})]})]}),(0,j.jsx)(k.TextareaControl,{onChange:t,value:e,label:(0,C.__)("Description of changes","kubio"),useDebounce:!1}),(0,j.jsx)(lk,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:h,isBusy:i,disabled:i,variant:"primary",label:(0,C.__)("Generate fill","kubio"),loadingMessage:(0,C.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,C.__)("All generated images will be saved in the Media Library.","kubio")})]})},ux=()=>{const e=(()=>{const{setCurrentSelectedImage:e}=ek(),t={undo:!1,redo:!1,isDirty:!1,images:[]},o=(0,c.useRef)(!1),[n,i]=(0,c.useState)(30),[r,a]=(0,c.useState)([0,0]),[s,l]=(0,c.useState)(!1),[u,d]=(0,c.useState)(tx),[p,h]=(0,c.useState)(!1),[m,g]=(0,c.useState)(t),[f,b]=(0,c.useReducer)(nx,tx),_=()=>{g({undo:u.cursor>-1,redo:u.cursor<u.queue.length-1,isDirty:!0})},v=e=>{const t=u;t.cursor=t.cursor+e,d((()=>t)),_()},y=()=>{d(tx),g(t)};return{canvasRef:o,resetCanvasAction:()=>{y(),o.current.resetCanvas()},redoAction:()=>{v(1),o.current.redo()},undoAction:()=>{v(-1),o.current.undo()},strokeSize:n,setStrokeSize:i,exportSketchImage:async()=>{const e=await o.current.exportImage("png"),t=document.createElement("canvas");t.width=r[0],t.height=r[1];const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="white",n.fillRect(0,0,t.width,t.height);const i=new window.Image;return i.src=e,await i.decode(),n.drawImage(i,0,0,r[0],r[1]),t.toDataURL()},imageSize:r,setImageSize:a,onStrokeAction:()=>{if(!1===p)return void h(!0);const e=u;let t=e.queue;e.cursor=e.cursor>=-1?e.cursor+1:-1,e.cursor>-1&&(t=e.queue.slice(0,e.cursor)),t.push(1),e.queue=t,d(e),_(),h(!1)},paintActions:m,newImageGenerated:s,setNewImageGenerated:l,resetPaintQueue:y,clearCanvasAction:()=>{v(-1),o.current.clearCanvas()},undoImageAction:()=>{b({type:ox.UNDO,setCurrentSelectedImage:e})},redoImageAction:()=>{b({type:ox.REDO,setCurrentSelectedImage:e})},imageActions:f,addGeneratedImageToQueue:t=>{b({type:ox.INSERT,setCurrentSelectedImage:e,image:t})},imageActionsDispatch:b,IMAGE_ACTIONS:ox}})();return(0,j.jsxs)(Jk.Provider,{value:e,children:[(0,j.jsx)(ik,{children:(0,j.jsx)(cx,{})}),(0,j.jsx)(rk,{children:(0,j.jsx)(lx,{})})]})},dx=(0,c.createContext)({}),px=()=>(0,c.useContext)(dx),hx={imagePrompt:"",imageSize:"medium",imageOrientation:"original",aiPrompt:"",initialSearch:!1},mx=()=>(0,j.jsxs)("div",{className:"kubio-ai-image-results-empty",children:[(0,j.jsx)(k.Icon,{icon:Ge.SearchImageIcon}),(0,j.jsx)("p",{children:(0,C.__)("Your search results will appear here.","kubio")})]}),gx=({image:e,saveImage:t,canSave:o})=>{const{isGenerating:n}=ek();return(0,j.jsxs)("div",{className:"kubio-ai-image-generator-single-image",children:[(0,j.jsx)("img",{src:e["src.medium"],alt:""}),(0,j.jsxs)("div",{className:"kubio-ai-image-overlay",children:[(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",isBusy:n,disabled:n,onClick:()=>{t(e.url,!0)},children:(0,C.__)("Use this image","kubio")}),(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{t(e.url)},disabled:!o,isBusy:n,children:o?(0,C.__)("Save for later","kubio"):(0,C.__)("Saved","kubio")})]})]})},fx=()=>{const e=(0,c.useRef)(),{foundImages:t,foundImagePages:o,galleryPage:n,searchForImages:i,isSearching:r,savedImages:a,saveImage:s,imageSearchOptions:l}=px(),{isGenerating:u,setIsGenerating:d,onSelectImageAction:p}=ek(),[h,m]=(0,c.useState)(!1);(0,c.useEffect)((()=>{m(n<o)}),[o,n]);const g=(0,c.useCallback)((async(e,t=!1)=>{if(u||a.has(e)){const o=a.get(e);t&&p(o.url,l.aiPrompt,o.id)}d(!0);try{const o=await(0,b.aiSearchedImageSave)({selectedImage:e});""!==o&&(s(e,o.url,o.id),t&&p(o.url,l.aiPrompt,o.id))}catch(e){console.log(e)}d(!1)}),[l.aiPrompt,u,p,s,a,d]);return(0,j.jsxs)("div",{className:"kubio-ai-generated-images--infinite-list",ref:e,children:[(0,j.jsx)("div",{className:"kubio-ai-search-images ",children:t.map(((e,t)=>(0,j.jsx)(gx,{image:e,saveImage:g,canSave:!a.has(e.url)},t)))}),h&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"kubio-ai-more",children:(0,j.jsx)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-load-more-button",variant:"primary",onClick:i,isBusy:r,disabled:r,children:(0,C.__)("Get more images","kubio")})}),(0,j.jsx)("p",{className:"kubio-by-pexels",dangerouslySetInnerHTML:{__html:(0,C.sprintf)(// translators: %s is the url to pexels
// translators: %s is the url to pexels
(0,C.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}})]})]})},bx=[{value:"large",label:(0,C.__)("Large","kubio")},{value:"medium",label:(0,C.__)("Medium","kubio")},{value:"small",label:(0,C.__)("Small","kubio")},{value:"tiny",label:(0,C.__)("Tiny","kubio")}],vx=[{value:"landscape",label:(0,C.__)("Landscape","kubio")},{value:"portrait",label:(0,C.__)("Portrait","kubio")},{value:"square",label:(0,C.__)("Square","kubio")},{value:"original",label:(0,C.__)("Same as current image","kubio")}],yx=()=>{const{imageSearchOptions:e,setSearchOption:t,isSearching:o,setIsSearching:n,searchForImages:i}=px(),{isInitialSearch:r,setIsInitialSearch:a,initialPromptText:s,initialImage:l}=ek();return(0,c.useEffect)((()=>{(async()=>{const o=await(async e=>{if(!e)return"landscape";const t=await kk(e),o=t.width/t.height;switch(!0){case 1===o:return"square";case o>1:return"landscape";case o<1:return"portrait"}return"original"})(l);t("imageOrientation",o),!1===r&&""!==e.aiPrompt&&(n(!0),i(!1),a(!0),s.current="")})()}),[l]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"kubio-ai-info",children:(0,C.__)("Easily search for free images from Pexels. Just type an image description and Kubio AI will extract search terms to find relevant images.","kubio")}),(0,j.jsx)(k.TextareaControl,{onChange:e=>{t("imagePrompt",e)},value:e.imagePrompt,label:(0,C.__)("Image Description","kubio"),useDebounce:!1}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Image Orientation","kubio"),inlineLabel:!1,value:e.imageOrientation,options:vx,onChange:e=>{t("imageOrientation",e)},size:"__unstable-large"}),(0,j.jsx)(ct.GutentagSelectControl,{label:(0,C.__)("Saved image size","kubio"),inlineLabel:!1,value:e.imageSize,options:bx,onChange:e=>{t("imageSize",e)},size:"__unstable-large"}),(0,j.jsx)(lk,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:()=>{n(!0),i(!0)},isBusy:o,disabled:o||0===e.imagePrompt.length,variant:"primary",label:(0,C.__)("Search image","kubio"),loadingMessage:(0,C.__)("Please wait, this may take a few minutes.","kubio")})]})},kx=()=>{const{foundImagePages:e}=px();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(ik,{children:[(0,j.jsx)(fk,{}),(0,j.jsx)(yx,{})]}),(0,j.jsx)(rk,{classes:"kubio-ai-image-editor-content-search",children:e>0?(0,j.jsx)(fx,{}):(0,j.jsx)(mx,{})})]})},xx=()=>{const e=ek(),{editorSection:t,editorTab:o,closeModal:n}=e,i=(()=>{const{initialImage:e,initialPromptText:t}=ek(),[o,n]=(0,c.useState)(!1),[i,r]=(0,c.useState)([]),[a,s]=(0,c.useState)(1),[l,u]=(0,c.useState)(0),[d,p]=(0,c.useState)(new Map),[h,m]=(0,c.useState)({...hx,imagePrompt:t.current,aiPrompt:t.current}),g=(e,t)=>{m((o=>(o[e]=t,{...o})))},f=(e,t=!1)=>{s(e.page+1),u(e.total_pages),r(!0===t?null==e?void 0:e.items:t=>t.concat(null==e?void 0:e.items))},_=(0,c.useCallback)((async(t=!1)=>{if(!o){n(!0);try{const o=await(0,b.aiSearchImages)({initialImage:e,page:a,search:h.imagePrompt,imageSize:h.imageSize,imageOrientation:h.imageOrientation,aiPrompt:t?"":h.aiPrompt});o&&(f(o,t),o.ai_query&&g("aiPrompt",o.ai_query))}catch(e){console.log(e)}n(!1)}}),[o,e,a,h.imagePrompt,h.imageSize,h.imageOrientation,h.aiPrompt]);return{imageSearchOptions:h,setSearchOption:g,isSearching:o,setIsSearching:n,setImageGallery:f,foundImages:i,galleryPage:a,foundImagePages:l,searchForImages:_,savedImages:d,setSavedImages:p,saveImage:(e,t,o=0)=>{p(d.set(e,{url:t,id:o}))}}})();return(0,j.jsx)(dx.Provider,{value:i,children:(0,j.jsx)(k.Modal,{className:"kubio-ai-image-editor kubio-ai-wizard-modal",overlayClassName:"kubio-ai-close-modal",title:(0,j.jsxs)(k.Flex,{children:[(0,j.jsxs)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title",children:[(0,j.jsx)(k.Icon,{icon:Ge.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),nk(o)]}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Button,{onClick:n,icon:We,label:(0,C.__)("Close","kubio")})})]}),isDismissible:!1,children:(0,j.jsxs)("div",{className:Z()("kubio-ai-image-editor-wrapper",hk),children:[o===tk.imageGenerate.slug&&(0,j.jsxs)(j.Fragment,{children:[t===ok.generate&&(0,j.jsx)(Pk,{}),t===ok.edit&&(0,j.jsx)(Ok,{}),t===ok.view&&(0,j.jsx)(Mk,{}),t===ok.generativeFill&&(0,j.jsx)(ux,{}),t===ok.variations&&(0,j.jsx)(Fk,{})]}),o===tk.imageSearch.slug&&(0,j.jsx)(j.Fragment,{children:t===ok.imageSearch&&(0,j.jsx)(kx,{})})]})})})},Sx=({onClose:e,onSelectImage:t,initialImage:o,initialPrompt:n})=>{const i=((e="",t="",o,n)=>{const[i,r]=(0,c.useState)(ok.imageSearch),[a,s]=(0,c.useState)(tk.imageSearch.slug),[l,u]=(0,c.useState)(""),[d,p]=(0,c.useState)(!1),[h,m]=(0,c.useState)(e),[g,f]=(0,c.useState)(),[_,v]=(0,c.useState)([]),[y,k]=(0,c.useState)(1),[x,S]=(0,c.useState)("1024x1024"),[w,C]=(0,c.useState)(""),[I,j]=(0,c.useState)("photographic"),[T,P]=(0,c.useState)([1024,1024]),E=(0,c.useRef)(t),[R,A]=(0,c.useState)(!1),O=n,[N]=(0,b.useAIServiceInfo)(),{aiImageCost:D=150}=N,M=(e,t="filename")=>_.findIndex((o=>o[t]===e)),B=(e,t={isVariation:!1,isVersion:!1})=>({filename:e,...t});return{editorSection:i,setEditorSection:r,imagePrompt:l,setImagePrompt:u,isGenerating:d,setIsGenerating:p,initialImage:h,setInitialImage:m,generatedImages:_,setGeneratedImages:v,onSelectImageAction:(e,t="",i=0)=>{o(e,t,i),n()},editImageAction:e=>{f(e),r(ok.edit)},viewImageAction:e=>{f(e),r(ok.view)},currentSelectedImage:g,setCurrentSelectedImage:f,backToSection:e=>{r(e)},prevImageAction:e=>{const t=M(e);-1!==t&&f(0===t?_[_.length-1]:_[t-1])},nextImageAction:e=>{const t=M(e);-1!==t&&(t===_.length-1?f(_[0]):f(_[t+1]))},aspectRatio:x,setAspectRatio:S,imageStyle:w,setImageStyle:C,imageSize:T,setImageSize:P,numberOfImages:y,setNumberOfImages:k,replaceWithEditedImage:e=>{const t=M(g.filename);if(t>-1){const o=_[t];o.filename=e,f(o),v((e=>(e[t]=o,[...e])))}},saveGeneratedImages:e=>{const t=_;e.forEach((e=>{t.push(B(e))})),v(t)},addImageVariations:(e,t)=>{const o=_;return t.forEach((t=>{o.push(B(t,{isVariation:e}))})),o},getImageVariations:()=>_.filter((e=>e.isVariation===g.filename)),saveNewImage:e=>{const t=B(e);return v((e=>[...e,t])),t},imageType:I,setImageType:j,editorTab:a,setEditorTab:s,setImageSizeFromOptions:e=>{const t=e.split("x");P([t[0],t[1]])},addImageVersion:e=>{const t=_,o=B(e,{isVersion:g.filename});t.push(o);const n={newImage:o,currentImage:g};return v(t),f(o),n},getPreviousImageVersion:()=>{const e=_.find((e=>e.filename===g.filename));if(e){const t=_.find((t=>t.filename===e.isVersion));t&&f(t)}},closeModal:O,initialPromptText:E,isInitialSearch:R,setIsInitialSearch:A,aiCreditsPerImageCost:D}})(o,n,t,e),{getAIInfo:r=p.noop}=(0,w.select)(m.STORE_KEY)||{},{remainingCredits:a=0}=r()||{},s=a>0;return s||(0,u.doAction)("kubio.ai.zero_credits"),(0,j.jsx)(Jy.Provider,{value:i,children:s&&(0,j.jsx)(xx,{})})},wx=({initialImage:e,onChange:t,isSmallButton:o=!1,initialPrompt:n})=>{const i=(0,c.useRef)(),[r,a]=(0,c.useState)(""),[s,l]=Do(),u=(0,c.useCallback)((()=>{l((()=>{a((e=>!e))}))}),[l]);return(0,j.jsxs)(j.Fragment,{children:[s,(0,j.jsx)(Fe.ProItem,{isProItem:I.AI_IN_PRO,tag:k.Button,ref:i,isSmall:o,className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button",onClick:u,icon:Ge.KubioAI,urlArgs:{source:"AI",content:"ai-image"}}),r&&(0,j.jsx)(Sx,{className:"kubio-options-popover",anchor:i.current,onClose:()=>a(!1),onSelectImage:t,initialImage:e,initialPrompt:n})]})},{MULTIPLE_IMAGES:Cx,IMAGE:Ix}=(0,Ue.getNamesOfBlocks)(),jx=[Cx,Ix],Tx=({value:e,onChange:t,onlyImages:o=!0,onClose:n})=>{const i=(0,c.useRef)(),[r,a]=(0,c.useState)(!1),[l,u]=Do(),{dataHelper:d}=(0,s.useKubioBlockContext)(),p=d.options.clientId,h=(0,c.useCallback)((()=>{u((()=>{a((e=>!e))}))}),[u]),{insertBlock:g}=(0,w.useDispatch)("core/block-editor"),f=(0,c.useCallback)(((o,i,r=0)=>{const a={url:o,id:r,caption:i,alt:""};if(e)return n(),void t(a);const s=d.withChildren(),l=s[s.length-1],c=(0,st.createBlock)(l.block.name);c.attributes={url:o,id:r,caption:i},g(c,s.length,p,!0),b()}),[e,d,g,p,n,t]),b=()=>{a((e=>!e))},_=(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[]);if(!o)return(0,j.jsx)(j.Fragment,{});const v=e?(0,C.__)("Replace with AI","kubio"):(0,C.__)("Add with AI","kubio");return(0,j.jsxs)(j.Fragment,{children:[l,_&&(0,j.jsx)(Fe.ProItem,{isProItem:I.AI_IN_PRO,tag:k.MenuItem,ref:i,onClick:h,icon:Ge.KubioAI,urlArgs:{source:"AI",content:"ai-image"},children:v}),r&&(0,j.jsx)(Sx,{className:"kubio-options-popover",anchor:i.current,onClose:b,onSelectImage:f,initialImage:e})]})},Px=(0,x.createHigherOrderComponent)((e=>t=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Tx,{...t}),(0,j.jsx)(e,{...t})]})),"withImageToolbar");(0,u.addFilter)("kubio.blockEditor.mediaReplaceFlow.afterUploadComponent","kubio.control.ImageToolbar",Px,4);const Ex=({value:e,BlockEdit:t,...o})=>{const[n,i]=Do(),r=(0,c.useRef)(),a=(0,c.useRef)(""),[l,u]=(0,c.useState)(!1),{dataHelper:d}=(0,s.useKubioBlockContext)(),h=d.getContextProp("activeImageId"),m=d.withChildren(),g=(0,p.get)(d,["localData","kubioAI","imageTerms"])||"",f=(0,c.useCallback)((()=>{i((()=>{u((e=>!e))}))}),[i]);return(0,c.useEffect)((()=>{d.blockName===Ix&&(a.current=d.getAttribute("url"))}),[d]),(0,j.jsxs)(j.Fragment,{children:[n,(0,j.jsx)(y.BlockControls,{children:(0,j.jsx)(k.ToolbarGroup,{className:"kubio-toolbar-text-ai",children:(0,j.jsx)(Fe.ProItem,{isProItem:I.AI_IN_PRO,tag:k.ToolbarButton,name:"kubio-ai",icon:Ge.KubioAI,title:(0,C.__)("Kubio AI","kubio"),className:"kubio-toolbar-text-ai",onClick:f})})}),l&&(0,j.jsx)(Sx,{className:"kubio-options-popover",anchor:r.current,onClose:()=>u(!1),onSelectImage:async e=>{if(d.blockName===Ix)return d.setAttribute("url",e),void d.setAttribute("id",0);const t=m.find((e=>e.clientId===h)),o=await(async e=>{const t=await kk(e);return t.width/t.height})(e);t&&(t.setAttribute("url",e),t.setAttribute("id",0),t.setAttribute("aspectRatio",o))},initialImage:a.current,initialPrompt:g}),(0,j.jsx)(t,{...o})]})},Rx=(0,x.createHigherOrderComponent)((e=>t=>{const{name:o}=t;return(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[])&&jx.includes(o)?(0,j.jsx)(Ex,{BlockEdit:e,...t}):(0,j.jsx)(e,{...t})}),"withKubioAIToolbarControls");(0,u.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",Rx,4);const Ax=(0,x.createHigherOrderComponent)((e=>t=>{const{dataHelper:o}=(0,s.useKubioBlockContext)();if(!o)return(0,j.jsx)(e,{...t});const n=(0,p.get)(o,["localData","kubioAI","imageTerms"])||"",[i,r]=m_(o.clientId),a=(0,c.useCallback)((({url:e,type:t,onChange:a})=>"image"!==t?(0,j.jsx)(j.Fragment,{}):(0,j.jsx)(wx,{isGenerating:i,setIsGenerating:r,initialImage:e,onChange:(e,t="")=>{a({url:e,id:"",caption:t}),(0,p.set)(o,["localData","kubioAI","imageTerms"],t)},initialPrompt:n})),[i,r,n,o]),l=(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[]),u=t.hideAIImageButton||!1;return(0,j.jsx)(e,{...t,secondaryButton:l&&!u?a:void 0})}),"withAIImageControls");(0,u.addFilter)("kubio.control.media-picker","kubio/control/ai-media-picker",Ax,4);const{HERO:Ox,HEADER:Nx,NAVIGATION:Dx}=(0,Ue.getNamesOfBlocks)(),Mx=(0,x.createHigherOrderComponent)((e=>t=>{var o,n,i,r,a;const{replaceDesignFromGallery:s}=x_(),[l,d,h]=Do(),[g,f]=(0,c.useState)(!1),b=(0,c.useRef)(null),_=(0,c.useCallback)((()=>{b.current={type:"surprise"},f(!0)}),[]),v=(0,c.useCallback)((()=>{b.current={type:"regenerate"},f(!0)}),[b]),y=(0,c.useCallback)((()=>{s(((e,t)=>{b.current={type:"hand-pick",pattern:e,insert:t},f(!0)}))}),[s,b]),x=(0,c.useMemo)((()=>[{label:(0,C.__)("Surprise me","kubio"),description:(0,C.__)("Kubio AI chooses a section and writes the content for you.","kubio"),icon:Ge.KubioAI,onClick:_},{label:(0,C.__)("Hand pick a design","kubio"),description:(0,C.__)("You choose a section, Kubio AI writes your content.","kubio"),icon:Ge.PredesignedLayoutsIcon,onClick:y},{label:(0,C.__)("Regenerate content","kubio"),description:(0,C.__)("Kubio AI will keep the same design but regenerate the text and images.","kubio"),icon:Ge.RegenerateContentIcon,onClick:v}]),[_,y,v]),S=null==t||null===(o=t.dataHelper)||void 0===o?void 0:o.blockName,T=null==t||null===(n=t.dataHelper)||void 0===n?void 0:n.clientId,{isUnlocked:P,templatePartWithSidebar:E}=Bx({clientId:T});let R=!1;const A=null==t||null===(i=t.dataHelper)||void 0===i||null===(r=i.getAttribute)||void 0===r?void 0:r.call(i,"kubioAI.meta.summary","");"regenerate"===(null===(a=b.current)||void 0===a?void 0:a.type)?R=!0:[Ox,Nx,Dx].includes(S)||(R=!A);const O=(0,c.useCallback)((({buttonBaseClass:e})=>{if(!(0,u.applyFilters)("kubio.section-ai-options.showRegenerateButton",!0,S))return(0,j.jsx)(j.Fragment,{});const t=!h||!P||I.AI_IN_PRO||E,o=(0,j.jsx)(Fe.ProItem,{isProItem:I.AI_IN_PRO,urlArgs:{source:"AI",content:"regenerate-design"},tag:k.Button,className:`${e} kubio-ai-design-section-button kubio-ai-button`,icon:Ge.KubioAI,label:(0,C.__)("Regenerate design","kubio"),onClick:P?d:p.noop,children:(0,C.__)("Regenerate","kubio")});return(0,j.jsxs)(j.Fragment,{children:[t&&o,!t&&(0,j.jsx)(qy,{menuItems:x,toggleButton:o,className:"kubio-dropdown-with-hover__section-options--ai"})]})}),[S,h,P,E,d,x]),N=(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[]);return(0,j.jsxs)(j.Fragment,{children:[l,g&&(0,j.jsx)(Zy,{setVisible:f,sectionRef:b,onChangeSection:()=>{f(!1),y()},askForSummary:R}),(0,j.jsx)(e,{...t,beforeSettingsButton:N?O:void 0})]})}),"withSectionHoverControls"),Bx=({clientId:e})=>{const{templatePartArea:t,templatePartWithSidebar:o}=(0,w.useSelect)((t=>{const{getBlockRootClientId:o,getBlock:n}=t("core/block-editor"),i=n(o(e)),r=n(e),a=(0,I.findBlockByName)(r,"core/post-content"),s=(0,I.findBlockByName)(r,"kubio/sidebar"),l=void 0!==a&&void 0!==s;return{templatePartArea:h().get({"kubio/header":"header","kubio/footer":"footer","kubio/sidebar":"sidebar"},null==i?void 0:i.name,!1),templatePartWithSidebar:l}}),[]);let{isUnlocked:n}=(0,s.useTemplatePartLock)(t);return t||(n=!0),{isUnlocked:n,templatePartWithSidebar:o}};(0,u.addFilter)("kubio.components.section-hover-options","kubio/control/section-hover-controls",Mx,4);const Lx=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M5 11.25h14v1.5H5z"})}),zx=(0,j.jsx)(Q.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)(Q.Path,{d:"M7 16.5h10V15H7v1.5zm0-9V9h10V7.5H7z"})}),Fx=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M6.13 5.5l1.926 1.927A4.975 4.975 0 007.025 10H5v1.5h2V13H5v1.5h2.1a5.002 5.002 0 009.8 0H19V13h-2v-1.5h2V10h-2.025a4.979 4.979 0 00-1.167-2.74l1.76-1.76-1.061-1.06-1.834 1.834A4.977 4.977 0 0012 5.5c-1.062 0-2.046.33-2.855.895L7.19 4.44 6.13 5.5zm2.37 5v3a3.5 3.5 0 107 0v-3a3.5 3.5 0 10-7 0z",fillRule:"evenodd",clipRule:"evenodd"})}),Gx=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})}),Hx=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,j.jsx)(Q.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})}),{HEADING:Ux}=(0,Ue.getNamesOfBlocks)(),Wx=({title:e,subtitle:t,icon:o})=>(0,j.jsxs)(k.Flex,{className:"text-ai-custom-label",direction:"column",gap:1.5,expanded:!0,children:[(0,j.jsxs)(k.Flex,{justify:"flex-start",children:[(0,j.jsx)(He,{icon:o,className:"text-ai-custom-label__icon"}),(0,j.jsx)("span",{className:"text-ai-custom-label__title",children:e})]}),(0,j.jsx)("span",{className:"text-ai-custom-label__subtitle",children:t})]}),Vx=({dataHelper:e,onClose:t,anchor:o,isGenerating:n,setIsGenerating:i})=>{const[r,a]=(0,c.useState)(""),[{pageTitle:s,siteContext:l,pageContext:u}]=(0,b.useAIData)(),d=(0,c.useCallback)((async()=>{i(!0),t();try{const t=await(0,b.prompt)({pageTitle:s,siteContext:l,pageContext:u,prompt:r,originalContent:e.getAttribute("content",""),short:e.block.name===Ux});e.setAttribute("content",t)}catch(e){}i(!1)}),[e,r,t,u,s,i,l]);return(0,j.jsx)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:t,offset:15,children:(0,j.jsxs)(k.Flex,{direction:"column",align:"end",gap:3.75,children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)(ct.TextareaControl,{className:"kubio-ai-block-prompt-textarea",value:r,onChange:a,label:(0,j.jsx)(Wx,{icon:Ge.TextAiRegenerate,title:(0,C.__)("Regenerate","kubio"),subtitle:(0,C.__)("Write a new prompt and let the AI generate the content for you","kubio")}),cols:60,rows:4})}),(0,j.jsx)(k.FlexItem,{children:(0,j.jsx)(k.Button,{className:"kubio-ai-button",onClick:d,isBusy:n,children:(0,C.__)("Regenerate","kubio")})})]})})},Kx=({dataHelper:e,onClose:t,anchor:o,isGenerating:n,setIsGenerating:i})=>{const[r,a]=(0,c.useState)("natural"),[{pageTitle:s,siteContext:l,pageContext:u}]=(0,b.useAIData)(),d=(0,c.useMemo)((()=>(0,p.map)((0,b.getContentLanguageStyles)(),(({label:e,description:t},o)=>({label:e,description:t,value:o})))),[]),h=(0,c.useCallback)((async()=>{i(!0),t();try{const t=await(0,b.changeTextPrompt)({pageTitle:s,siteContext:l,pageContext:u,promptData:r,text:e.getAttribute("content",""),type:"tone"});e.setAttribute("content",t)}catch(e){}i(!1)}),[e,r,t,u,s,i,l]);return(0,j.jsx)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:t,offset:15,children:(0,j.jsxs)(k.Flex,{direction:"column",gap:3.75,children:[(0,j.jsx)(k.FlexBlock,{children:(0,j.jsx)(ct.GutentagSelectControl,{label:(0,j.jsx)(Wx,{icon:Hx,title:(0,C.__)("Change tone","kubio"),subtitle:(0,C.__)("Select the tone you want to rewrite this text.","kubio")}),inlineLabel:!1,options:d,value:r,onChange:a,itemRenderer:e=>(0,j.jsxs)("div",{className:"kubio-ai-language-style-select-item",children:[(0,j.jsx)("span",{children:e.label}),(0,j.jsx)("span",{children:e.description})]})})}),(0,j.jsx)(k.Button,{className:"kubio-ai-button",onClick:h,isBusy:n,children:(0,C.__)("Rewrite","kubio")})]})})},$x=["en_US","es_ES","de_DE","fr_FR","en_GB","ja_JP"],qx=({dataHelper:e,onClose:t,anchor:o,isGenerating:n,setIsGenerating:i})=>{const[r,a]=(0,c.useState)("en_US"),[{pageTitle:s,siteContext:l,pageContext:u}]=(0,b.useAIData)(),d=(0,c.useMemo)((()=>{const e=(0,p.map)((0,b.getContentLanguages)(),((e,t)=>({label:e,value:t})));return[{items:e.filter((e=>$x.includes(e.value))).sort(((e,t)=>$x.indexOf(e.value)-$x.indexOf(t.value)))},{items:e.filter((e=>!$x.includes(e.value)))}]}),[]),h=(0,c.useCallback)((async()=>{i(!0),t();try{const t=await(0,b.changeTextPrompt)({pageTitle:s,siteContext:l,pageContext:u,promptData:r,text:e.getAttribute("content",""),type:"translate"});e.setAttribute("content",t)}catch(e){}i(!1)}),[e,r,t,u,s,i,l]);return(0,j.jsx)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:t,offset:15,children:(0,j.jsxs)(k.Flex,{direction:"column",gap:3.75,children:[(0,j.jsx)(k.FlexBlock,{expanded:!0,children:(0,j.jsx)(ct.GutentagSelectControl,{label:(0,j.jsx)(Wx,{icon:Gx,title:(0,C.__)("Translate","kubio"),subtitle:(0,C.__)("In which language would you like to translate this text?","kubio")}),value:r,onChange:a,inlineLabel:!1,options:d})}),(0,j.jsx)(k.Button,{className:"kubio-ai-button",onClick:h,isBusy:n,children:(0,C.__)("Translate","kubio")})]})})},{HEADING:Yx,TEXT:Zx}=(0,Ue.getNamesOfBlocks)(),Xx=[Yx,Zx],Qx=[{icon:Lx,title:(0,C.__)("Make shorter","kubio"),action:"shorten"},{icon:zx,title:(0,C.__)("Make longer","kubio"),action:"lengthen"},{icon:Fx,title:(0,C.__)("Fix spelling & grammar","kubio"),action:"fix"},{icon:Ge.TextAiRegenerate,title:(0,C.__)("Regenerate","kubio"),action:"prompt"},{icon:Gx,title:(0,C.__)("Translate","kubio"),action:"translate"},{icon:Hx,title:(0,C.__)("Change tone","kubio"),action:"change-tone"}],Jx=({BlockEdit:e,...t})=>{const{dataHelper:o}=(0,s.useKubioBlockContext)(),{name:n,clientId:i,isSelected:r}=t,[a,l]=m_(i),[{pageContext:u,siteContext:d,pageTitle:p}]=(0,b.useAIData)(),h=(0,c.useRef)(),m=n===Zx?"p":`h${o.getProp("level",2)}`,[g,f]=(0,c.useState)(!1),[_,v]=(0,c.useState)(!1),[x,S]=(0,c.useState)(!1),[w,T,P]=Do(),E=(0,c.useCallback)((async e=>{const{action:t}=e;if(!a){switch(l(!0),t){case"shorten":case"lengthen":case"fix":try{const e=await(0,b.processContent)({pageContext:u,siteContext:d,pageTitle:p,content:o.getAttribute("content",""),action:t,extras:{tag:m}});o.setAttribute("content",e)}catch(e){Vo.Log.error(`process-text: ${t}`,e)}break;case"prompt":f(!0);break;case"translate":v(!0);break;case"change-tone":S(!0)}l(!1)}}),[o,a,u,p,l,d,m]),R=(0,c.useRef)(),[A,O]=(0,Fe.useProModal)();return(0,j.jsxs)(j.Fragment,{children:[w,(0,j.jsxs)(y.BlockControls,{group:"block",children:[P&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.ToolbarDropdownMenu,{ref:h,icon:Ge.KubioAI,className:"kubio-toolbar-text-ai",label:(0,C.__)("Kubio AI","kubio"),controls:Qx.map((e=>({...e,onClick:()=>E(e)}))),popoverProps:{className:Z()("kubio-toolbar-text-ai__popover",{"kubio-toolbar-text-ai__popover--hidden":I.AI_IN_PRO})},toggleProps:{ref:R,onClick:e=>{O(!0)}}}),I.AI_IN_PRO&&r&&(0,j.jsx)(A,{anchorRef:R.current,urlArgs:{source:"AI",content:"text-ai-toolbar"}})]}),!P&&(0,j.jsx)(Fe.ProItem,{isProItem:I.AI_IN_PRO,tag:k.ToolbarButton,ref:h,icon:Ge.KubioAI,className:"kubio-toolbar-text-ai kubio-ai-button",label:(0,C.__)("Kubio AI","kubio"),onClick:T})]}),g&&(0,j.jsx)(Vx,{anchor:h.current,onClose:()=>f(!1),dataHelper:o,isGenerating:a,setIsGenerating:l}),_&&(0,j.jsx)(qx,{anchor:h.current,onClose:()=>v(!1),dataHelper:o,isGenerating:a,setIsGenerating:l}),x&&(0,j.jsx)(Kx,{anchor:h.current,onClose:()=>S(!1),dataHelper:o,isGenerating:a,setIsGenerating:l}),(0,j.jsx)(e,{...t})]})},eS=(0,x.createHigherOrderComponent)((e=>t=>{const{name:o}=t;return(0,w.useSelect)((e=>e(m.STORE_KEY).isAICapabilityEnabled()),[])&&Xx.includes(o)?(0,j.jsx)(Jx,{BlockEdit:e,...t}):(0,j.jsx)(e,{...t})}),"withKubioAIToolbarControls");(0,u.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",eS,4),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/contact"!==e.name||(0,I.getCanInstallContactForm)()&&h().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e))),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/subscribe-form"!==e.name||(0,I.getCanInstallSubscribeForm)()&&h().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e)));const tS={facebook:"font-awesome/facebook-square",twitter:"font-awesome/square-x-twitter",youtube:"font-awesome/youtube-square",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest-square",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin-square"},oS={"font-awesome":[{type:"square",items:tS},{type:"noneSquare",items:{facebook:"font-awesome/facebook",twitter:"font-awesome/twitter-x",youtube:"font-awesome/youtube-play",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin"}}],ionicons:[{type:"filled",items:{facebook:"ionicons/social-facebook",twitter:"ionicons/social-twitter",youtube:"ionicons/social-youtube",instagram:"ionicons/social-instagram",pinterest:"ionicons/social-pinterest",whatsapp:"ionicons/social-whatsapp",linkedin:"ionicons/social-linkedin"}},{type:"outlined",items:{facebook:"ionicons/social-facebook-outline",twitter:"ionicons/social-twitter-outline",youtube:"ionicons/social-youtube-outline",instagram:"ionicons/social-instagram-outline",pinterest:"ionicons/social-pinterest-outline",whatsapp:"ionicons/social-whatsapp-outline",linkedin:"ionicons/social-linkedin-outline"}}],"icons8-line-awesome":[{type:"normal",items:{facebook:"icons8-line-awesome/facebook",twitter:"icons8-line-awesome/twitter",youtube:"icons8-line-awesome/youtube-play",instagram:"icons8-line-awesome/instagram",pinterest:"icons8-line-awesome/pinterest",whatsapp:"icons8-line-awesome/whatsapp",linkedin:"icons8-line-awesome/linkedin"}}],socicon:[{type:"normal",items:{facebook:"socicon/facebook",twitter:"socicon/twitter",youtube:"socicon/youtube",instagram:"socicon/instagram",pinterest:"socicon/pinterest",whatsapp:"socicon/whatsapp",linkedin:"socicon/linkedin"}}],"foundation-icons":[{type:"normal",items:{facebook:"foundation-icons/social-facebook",twitter:"foundation-icons/social-twitter",youtube:"foundation-icons/social-youtube",instagram:"foundation-icons/social-instagram",pinterest:"foundation-icons/social-pinterest",linkedin:"foundation-icons/social-linkedin"}}],"simple-line-icons":[{type:"normal",items:{facebook:"simple-line-icons/social-facebook",twitter:"simple-line-icons/social-twitter",youtube:"simple-line-icons/social-youtube"}}],typicons:[{type:"normal",items:{facebook:"typicons/social-facebook",twitter:"typicons/social-twitter",youtube:"typicons/social-youtube",instagram:"typicons/social-instagram",pinterest:"typicons/social-pinterest",linkedin:"typicons/social-linkedin"}}]},nS=(()=>{const e={};return h().each(oS,((t,o)=>{t.forEach((({items:t})=>{h().each(t,((o,n)=>{h().set(e,o,t)}))}))})),e})(),iS=tS,{SECTION:rS,SOCIAL_ICONS:aS}=(0,Ue.getNamesOfBlocks)(),sS=({block:e,siteContext:t})=>{const o=h().get(t,"contact.socials",[]),n=(0,p.filter)(o,(({url:e})=>!!e));if(!o||h().isEmpty(o)||!n.length)return e;const i="attributes.icon.name",r=o.filter((({url:e})=>e)),a=e.innerBlocks,s=a.filter((e=>{const t=h().get(e,i);return r.find((({type:e})=>t.includes(e)))})),l=[];let c=null;return r.forEach((({type:e,url:t})=>{const o=s.find((t=>h().get(t,i).includes(e)));o?(h().set(o,"attributes.link.value",t),c=h().get(o,"attributes.icon.name")):l.push({type:e,url:t})})),l.forEach((({type:e,url:t})=>{const o=a[a.length-1],n=h().cloneDeep((0,st.cloneBlock)(o));h().unset(n,"attributes.kubio.styleRef"),h().set(n,"attributes.link.value",t);const i=((e,t)=>{const o=h().get(nS,t),n=iS[e];return o?h().get(o,e,n):n})(e,c);h().set(n,"attributes.icon.name",i),s.push(n)})),e.innerBlocks=s,e};(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","social-icons",((e,t,o,n)=>{if(e.name!==aS)return e;const i=Array.isArray(n)?n[0]:n;if(i.name===rS){const t=["contact","footer-section","footer"],o=h().get(i,"attributes.kubioAI.meta.category");if(!t.includes(o))return e}return sS({block:e,siteContext:t})})),(0,u.addFilter)("kubio.navigation.topBarBlockBeforeInsert","social-icons",((e,t)=>e.name!==aS?e:sS({block:e,siteContext:t})));const{ICON_LIST:lS}=(0,Ue.getNamesOfBlocks)(),cS={phone:{desc:"phone",icons:["phone","call"]},email:{desc:"mail",icons:["mail","envelope"]},address:{desc:"address",icons:["map","pin","home","house"]}},uS=(e,t)=>e.innerBlocks.find((e=>{if(h().get(e,"attributes.kubioAI.desc","").toLowerCase().includes(cS[t].desc))return!0;const o=h().get(e,"attributes.icon","").toLowerCase();for(const e of cS[t].icons)if(o.includes(e))return!0;return!1})),dS=({block:e,siteContext:t})=>{const o=h().get(t,"contact"),n=h().get(o,"address","123, Main Street, City, Country");if(n){const t=uS(e,"address");t&&h().set(t,"attributes.text",n)}const i=h().get(o,"phone","+1 234 567 890");if(i){const t=uS(e,"phone");t&&h().set(t,"attributes.text",i)}const r=h().get(o,"email","email@example.com");if(r){const t=uS(e,"email");t&&h().set(t,"attributes.text",r)}return e};(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","iconsList",((e,t,o,n)=>e.name!==lS?e:dS({block:e,siteContext:t}))),(0,u.addFilter)("kubio.navigation.topBarBlockBeforeInsert","iconsList",((e,t)=>e.name!==lS?e:dS({block:e,siteContext:t}))),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","kubio-map",((e,t)=>{if("kubio/map"!==e.name)return e;const o=(0,p.get)(t,["contact","address"]);return o&&(0,p.set)(e,"attributes.address",o),(0,p.set)(e,"attributes.zoom.value",15),e})),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","logo",((e,t)=>{if("kubio/logo"!==e.name)return e;const o=(0,w.select)("core").getEditedEntityRecord("root","site");return((null==o?void 0:o.site_logo)||(null==o?void 0:o.sitelogo)||h().get(t,["website_logo","id"]))&&h().set(e,"attributes.kubio.props.layoutType","image"),e})),(0,u.addFilter)("kubio.ai-filters","kubio-ai-filters",(()=>({useHandleInsert:Xy,useIsAISetupComplete:Do,GenerateSectionModal:Zy})));const pS=window.wp.privateApis;let hS,mS;if((0,I.wpVersionCompare)("6.7",">="))try{const{lock:e,unlock:t}=(0,pS.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/edit-site");hS=e,mS=t}catch(e){console.error(e)}const gS=(0,j.jsx)(Q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,j.jsx)(Q.Path,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})}),fS=function({icon:e}){if(!(0,w.useSelect)((e=>e(m.STORE_KEY).isFeatureActive("fullscreenMode")),[]))return null;const t=e||gS;return(0,j.jsx)(k.Button,{className:"edit-site-fullscreen-mode-close",icon:t,iconSize:36,href:"index.php",label:(0,C.__)("Back","kubio")})};let bS,_S;try{const{registerCoreBlockBindingsSources:e,bootstrapBlockBindingsSourcesFromServer:t}=(null==mS?void 0:mS($.privateApis))||{};bS=e,_S=t}catch(e){console.error(e)}const vS=(0,I.wpVersionCompare)("6.7",">=");function yS(e,t){(0,s.registerTemplateStore)(),t.__experimentalFetchLinkSuggestions=s.fetchLinkSuggestions,t.__experimentalSpotlightEntityBlocks=["core/template-part"];const o=new URLSearchParams(window.location.search);t.isGutentagDebug=!!o.get("kubio-debug");const n=t.state;var i,r;delete t.state,n.settings=t,null===l.registerCoreBlocks||void 0===l.registerCoreBlocks||(0,l.registerCoreBlocks)(),vS&&(null===(i=_S)||void 0===i||i(null==t?void 0:t.blockBindingsSources),null===(r=bS)||void 0===r||r()),(0,a.initFirebaseData)(),(0,p.isFunction)(l.__experimentalRegisterExperimentalCoreBlocks)&&(0,l.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:!0});const d=sv;t.wpVersion&&document.body.classList.add("kubio-wp-"+t.wpVersion.replace(".","-")),$y(n),(0,s.reactRender)((0,j.jsx)(c.StrictMode,{children:(0,j.jsx)(d,{initialSettings:n.settings})}),document.getElementById(e)),window.kubioToggleDebug=e=>{wp.data.dispatch("kubio/edit-site").toggleGutentagDebug(e)},top.kubioStartTime=performance.now(),(0,u.addAction)("kubio.editor.page-changed","kubio/editor/page-changed/restart-performance-timer",(()=>{top.kubioStartTime=performance.now()}))}})(),(window.kubio=window.kubio||{}).editor=n})();
